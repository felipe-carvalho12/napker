{"version":3,"sources":["context/app/invites-received-number/InvitesReceivedContext.js","context/app/unvisualized-comments-number/UnvisualizedCommentsContext.js","context/app/unvisualized-likes-number/UnvisualizedLikesContext.js","context/app/unread-messages-number/UnreadMessagesContext.js","context/app/AppContext.js","config/settings.js","config/utils.js","components/fixed/Sidebar.js","components/fixed/Header.js","components/ProfileListItem.js","components/likesmodal.js","pages/home/components/posts_/components/PostForm.js","components/PostListItem.js","pages/home/components/posts_/Posts.js","pages/home/components/profiles/components/ProfilesSearchInput.js","pages/home/components/profiles/Profiles.js","pages/home/components/news/News.js","components/fixed/bottom-menu/components/PostIcon.js","components/fixed/bottom-menu/BottomMenu.js","pages/home/components/HomePageMenu.js","pages/home/Home.js","pages/notifications/components/InviteNotification.js","pages/notifications/components/LikeProfileNotification.js","pages/notifications/components/CommentProfileNotification.js","pages/notifications/components/NewLabel.js","pages/notifications/Notifications.js","components/fixed/header.js","pages/messages_/components/ModalContactSearch.js","pages/messages_/Websocket.js","pages/messages_/components/chat_/components/SendMessageForm.js","pages/messages_/components/chat_/components/MessageListItem.js","pages/messages_/components/chat_/Chat.js","pages/messages_/components/ContactListItem.js","pages/messages_/components/ContactFilterInput.js","pages/messages_/Messages.js","pages/profile/components/EditProfileModal.js","components/LikesModal.js","pages/profile/components/Posts.js","pages/profile/components/interests/Interests.js","pages/profile/components/ProfileData.js","pages/profile/MyProfile.js","pages/settings_/components/SettingsMenu.js","pages/settings_/components/BlockedProfiles.js","pages/settings_/components/security_/SecurityMenu.js","pages/settings_/components/Faq.js","pages/settings_/components/security_/components/ChangePassword.js","pages/settings_/components/security_/components/DeleteAccount.js","pages/settings_/components/Feedback.js","pages/settings_/Settings.js","pages/profile/Profile.js","pages/profile/pages/Friends.js","pages/profile/components/interests/pages/InterestProfiles.js","pages/profile/pages/edit_interests/components/PublicInterests.js","pages/profile/pages/edit_interests/components/PrivateInterests.js","pages/profile/pages/edit_interests/EditInterests.js","components/CommentModal.js","pages/home/components/posts_/pages/post_/components/CommentListItem.js","components/fixed/bottom-menu/components/CommentIcon.js","pages/home/components/posts_/pages/post_/Post.js","pages/PostFormPage.js","App.js","index.js"],"names":["InvitesReceivedContext","createContext","InvitesReceivedProvider","props","useState","invitesReceivedNumber","setInvitesReceived","Provider","value","children","UnvisualizedCommentsContext","UnvisualizedCommentsProvider","unvisualizedCommentsNumber","setUnvisulaizedComments","UnvisualizedLikesContext","UnvisualizedLikesProvider","unvisualizedLikesNumber","setUnvisulaizedLikes","UnreadMessagesContext","UnreadMessagesProvider","unreadMessagesNumber","setUnreadMessagesNumber","AppContextProvider","SERVER_URL","csrftoken","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","getCookie","handleLogout","window","confirm","location","replace","openCloseEmojiList","closing","el","querySelector","style","display","classList","remove","add","getActivePageOnLoad","querySelectorAll","forEach","currentUrl","href","includes","switchPage","e","isHome","target","Sidebar","useContext","notificationsNumber","useEffect","className","to","textDecoration","onClick","src","id","Header","backArrow","class","history","back","page","ProfileListItem","profile","myProfile","slug","color","key","photo","marginRight","textAlign","first_name","last_name","user","username","bio","LikesModal","setMyProfile","fetch","then","response","json","data","Modal","show","isOpen","onHide","hideModal","size","closeButton","Title","Body","height","overflow","overflowY","likes","map","like","borderTop","borderLeft","borderRight","PostForm","postContent","setPostContent","postFormImagePreview","setPostFormImagePreview","action","method","encType","type","placeholder","maxLength","autoFocus","onChange","disabled","margin","htmlFor","accept","reader","FileReader","onload","readyState","result","readAsDataURL","files","onEmojiClick","event","emojiObject","emoji","PostListItem","post","likeUnlikePost","stopPropagation","likeBtn","contains","dataset","postid","console","log","renderParent","author","created","reverse","join","content","image","postId","animationPlayState","addEventListener","fetchPosts","headers","deletePost","comments","data-postid","openLikesModal","Posts","scrollCount","setState","posts","state","likesModal","onscroll","innerHeight","scrollY","body","offsetHeight","this","React","Component","ProfilesSearchInput","setFilteredProfiles","search","setSearch","searchType","setSearchType","openCloseSearchTypeSelector","width","fontSize","Profiles","profiles","setProfiles","filteredProfiles","setScrollCount","handleRelationshipUpdate","preventDefault","pk","btn","innerHTML","JSON","stringify","cancelFriendRequest","data-pk","News","news","setNews","article","BottomMenu","HomePageMenu","setPage","feedPageTitle","profilesPageTitle","explorePageTitle","newsPageTitle","borderRadius","Home","pages","title","elements","toLowerCase","PostIcon","InviteListItem","invite","replyRequest","sender","data-senderid","data-reply","LikeProfileNotification","CommentProfileNotification","comment","NewLabel","Notifications","notificationsFetchInterval","invites","setInvites","unvisualizedPostLikes","setUnvisualizedPostLikes","visualizedPostLikes","setVisualizedPostLikes","unvisualizedComments","setUnvisualizedComments","visualizedComments","setVisualizedComments","fetchNotifications","setInterval","clearInterval","updateNotificationsNumber","requestBody","senderid","reply","getElementById","ModalContactSearch","modalProfiles","setParentState","addingNewChat","padding","query","WebSocketService","callbacks","socketRef","instance","chatUrl","path","WebSocket","onopen","socketNewMessage","command","onmessage","onerror","message","onclose","close","parsedData","parse","Object","keys","messages","chatId","sendMessage","from","messagesCallback","newMessageCallback","send","err","WebSocketInstance","getInstance","SendMessageForm","otherProfile","updateMessagesComponent","setMessage","onSubmit","messageObject","blocked_users","u","alert","newChatMessage","MessageListItem","currentUser","timestamp","ts","Date","day","getDate","month","getMonth","hour","getHours","minute","getMinutes","getFullYear","renderTimestamp","read","Chat","handleComponentChange","otherUsername","scrolledToBottom","scrollToBottom","readMessages","chat_id","chatLog","scrollTop","scrollHeight","initialiseChat","waitForSocketConnection","addCallbacks","getMessages","bind","addMessage","fetchMessages","connect","activeElement","focus","disconnect","newProps","updateUnreadMessagesNumber","undefined","callback","component","setTimeout","openModal","ContactListItem","unreadMessagesCounter","lastChatMessage","activeChats","activeChatsProfiles","whiteSpace","maxHeight","indexOf","setLastChatMessage","contact","marginLeft","slice","ContactFilterInput","setHasFilteredProfiles","fetchActiveChatProfiles","filter","p","renderedActiveChatsProfiles","setContactSearch","Messages","handleReceiveProps","match","params","participants","other_username","hasFilteredProfiles","chats","rerenderingInterval","bool","EditProfileModal","closeModal","profileImagePreview","setProfileImagePreview","editingBioContent","setEditingBioContent","marginBottom","email","defaultValue","birth_date","Footer","submit","setLikesModal","fetchProfile","marginTop","Interests","interests","public","interest","toUpperCase","ProfileData","friends","MyProfile","setProfile","isEditing","setIsEditing","currentPageIsPosts","setCurrentPageIsPosts","SettingsMenu","pageChange","BlockUser","blockedProfiles","setBlockedProfiles","SecurityMenu","background","Faq","ChangePassword","errorMessage","setErrorMessage","successMessage","setSuccessMessage","borderBottom","role","passwordEl","newPasswordEl","newPasswordcEl","password","newPassword","newPasswordc","new_password","new_passwordc","DeleteAccount","displayErrorMessage","setDisplayErrorMessage","Feedback","setName","selectedRating","selectFace","img","Settings","visualViewport","Profile","sendFriendRequest","removeFromFriends","acceptFriendRequest","blockUnblockUser","alertMessage","openCloseExtraOptions","relationshipButtonLabel","label","relationship","onmouseenter","onmouseout","Friends","setFriends","useParams","friend","InterestProfiles","PublicInterests","addTags","tag","parentElement","removeChild","tags","sort","tagContainer","prepend","div","createElement","span","closeIcon","setAttribute","appendChild","interestsInput","createTag","setInterests","input","push","tagLabel","getAttribute","index","PrivateInterests","EditInterests","publicInterests","setPublicInterests","privateInterests","setPrivateInterests","public_interests","private_interests","documentElement","CommentModal","commentContent","setCommentContent","CommentListItem","fetchPost","setPostLikesModal","likeUnlikeComment","commentid","commentId","deleteComment","data-commentid","Post","setPost","commentModalIsOpen","setCommentModalIsOpen","postLikesModal","commentLikesModal","setCommentLikesModal","CommentIcon","handlePostContentChange","handlePostImageChange","handleCloseImage","App","render","exact","ProfileFriends","PostFormPage","ReactDOM"],"mappings":"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","file":"static/js/main.f482b2cf.chunk.js","sourcesContent":["import React, { createContext, useState } from 'react'\r\n\r\nexport const InvitesReceivedContext = createContext()\r\n\r\nexport const InvitesReceivedProvider = props => {\r\n    const [invitesReceivedNumber, setInvitesReceived] = useState(0)\r\n\r\n    return (\r\n        <InvitesReceivedContext.Provider value={[invitesReceivedNumber, setInvitesReceived]}>\r\n            {props.children}\r\n        </InvitesReceivedContext.Provider>\r\n    )\r\n}","import React, { createContext, useState } from 'react'\r\n\r\nexport const UnvisualizedCommentsContext = createContext()\r\n\r\nexport const UnvisualizedCommentsProvider = props => {\r\n    const [unvisualizedCommentsNumber, setUnvisulaizedComments] = useState(0)\r\n\r\n    return (\r\n        <UnvisualizedCommentsContext.Provider value={[unvisualizedCommentsNumber, setUnvisulaizedComments]}>\r\n            {props.children}\r\n        </UnvisualizedCommentsContext.Provider>\r\n    )\r\n}","import React, { createContext, useState } from 'react'\r\n\r\nexport const UnvisualizedLikesContext = createContext()\r\n\r\nexport const UnvisualizedLikesProvider = props => {\r\n    const [unvisualizedLikesNumber, setUnvisulaizedLikes] = useState(0)\r\n\r\n    return (\r\n        <UnvisualizedLikesContext.Provider value={[unvisualizedLikesNumber, setUnvisulaizedLikes]}>\r\n            {props.children}\r\n        </UnvisualizedLikesContext.Provider>\r\n    )\r\n}","import React, { createContext, useState } from 'react'\r\n\r\nexport const UnreadMessagesContext = createContext()\r\n\r\nexport const UnreadMessagesProvider = props => {\r\n    const [unreadMessagesNumber, setUnreadMessagesNumber] = useState(0)\r\n    \r\n    return (\r\n        <UnreadMessagesContext.Provider value={[unreadMessagesNumber, setUnreadMessagesNumber]}>\r\n            {props.children}\r\n        </UnreadMessagesContext.Provider>\r\n    )\r\n}","import React from 'react'\r\n\r\nimport { InvitesReceivedContext, InvitesReceivedProvider } from './invites-received-number/InvitesReceivedContext'\r\nimport { UnvisualizedCommentsContext, UnvisualizedCommentsProvider } from './unvisualized-comments-number/UnvisualizedCommentsContext'\r\nimport { UnvisualizedLikesContext, UnvisualizedLikesProvider } from './unvisualized-likes-number/UnvisualizedLikesContext'\r\nimport { UnreadMessagesContext, UnreadMessagesProvider } from './unread-messages-number/UnreadMessagesContext'\r\nexport { InvitesReceivedContext, UnvisualizedCommentsContext, UnvisualizedLikesContext, UnreadMessagesContext }\r\n\r\nexport default function AppContextProvider(props) {\r\n    return (\r\n        <InvitesReceivedProvider>\r\n            <UnvisualizedCommentsProvider>\r\n                <UnvisualizedLikesProvider>\r\n                    <UnreadMessagesProvider>\r\n                        {props.children}\r\n                    </UnreadMessagesProvider>\r\n                </UnvisualizedLikesProvider>\r\n            </UnvisualizedCommentsProvider>\r\n        </InvitesReceivedProvider>\r\n    )\r\n}","//const SERVER_URL = 'https://napker.herokuapp.com'\r\n//const SOCKET_URL = 'wss://napker.herokuapp.com'\r\nconst SERVER_URL = 'http://127.0.0.1:8000'\r\nconst SOCKET_URL = 'ws://127.0.0.1:8000'\r\n\r\nconst LOGO_URL = '/static/media/napker.png'\r\n\r\nexport { SERVER_URL, SOCKET_URL, LOGO_URL }\r\n","import { SERVER_URL } from './settings'\r\n\r\nexport const csrftoken = getCookie('csrftoken')\r\n\r\nfunction getCookie(name) {\r\n  let cookieValue = null;\r\n  if (document.cookie && document.cookie !== '') {\r\n    const cookies = document.cookie.split(';');\r\n    for (let i = 0; i < cookies.length; i++) {\r\n      const cookie = cookies[i].trim();\r\n      // Does this cookie string begin with the name we want?\r\n      if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  return cookieValue;\r\n}\r\n\r\nexport const handleLogout = () => {\r\n  const bool = window.confirm('Sair do Napker?\\nVocê poderá entrar novamente quando quiser.')\r\n  if (bool) {\r\n    window.location.replace(`${SERVER_URL}/logout`)\r\n  }\r\n}\r\n\r\nexport const openCloseEmojiList = (closing = false) => {\r\n  const el = document.querySelector('#emoji-list-container')\r\n  const style = el.style\r\n  if (closing) {\r\n    style.display = 'none'\r\n    document.querySelector('#emoji-button').classList.remove('emoji-button-active')\r\n  } else {\r\n    if (!style.display || style.display === 'none') {\r\n      style.display = 'initial'\r\n      document.querySelector('#emoji-button').classList.add('emoji-button-active')\r\n    } else {\r\n      style.display = 'none'\r\n      document.querySelector('#emoji-button').classList.remove('emoji-button-active')\r\n    }\r\n  }\r\n}\r\n\r\n// NAV AND BOTTOM MENU\r\n\r\nexport const getActivePageOnLoad = () => {\r\n  document.querySelectorAll('.nav-menu-item-active').forEach(el => {\r\n    el.classList.remove('nav-menu-item-active')\r\n  })\r\n  const currentUrl = window.location.href.split('/')\r\n  if (currentUrl.includes('home')) {\r\n    document.querySelector('#home-menu') && document.querySelector('#home-menu').classList.add('nav-menu-item-active')\r\n    document.querySelector('#bottom-home-menu') && document.querySelector('#bottom-home-menu').classList.add('nav-menu-item-active')\r\n  }\r\n  else if (currentUrl.includes('notifica%C3%A7%C3%B5es')) {\r\n    document.querySelector('#notifications-menu') && document.querySelector('#notifications-menu').classList.add('nav-menu-item-active')\r\n    document.querySelector('#bottom-notifications-menu') && document.querySelector('#bottom-notifications-menu').classList.add('nav-menu-item-active')\r\n  }\r\n  else if (currentUrl.includes('mensagens')) {\r\n    document.querySelector('#messages-menu') && document.querySelector('#messages-menu').classList.add('nav-menu-item-active')\r\n    document.querySelector('#bottom-messages-menu') && document.querySelector('#bottom-messages-menu').classList.add('nav-menu-item-active')\r\n  }\r\n  else if (currentUrl.includes('perfil')) {\r\n    document.querySelector('#profile-menu') && document.querySelector('#profile-menu').classList.add('nav-menu-item-active')\r\n    document.querySelector('#bottom-profile-menu') && document.querySelector('#bottom-profile-menu').classList.add('nav-menu-item-active')\r\n  }\r\n  else if (currentUrl.includes('configura%C3%A7%C3%B5es')) {\r\n    document.querySelector('#settings-menu') && document.querySelector('#settings-menu').classList.add('nav-menu-item-active')\r\n    document.querySelector('#bottom-settings-menu') && document.querySelector('#bottom-settings-menu').classList.add('nav-menu-item-active')\r\n  }\r\n}\r\n\r\nexport const switchPage = (e, isHome = false) => {\r\n  if (!isHome) {\r\n    document.querySelectorAll('.nav-menu-item-active').forEach(el => {\r\n      el.classList.remove('nav-menu-item-active')\r\n    })\r\n    e.target.classList.add('nav-menu-item-active')\r\n  } else {\r\n    document.querySelectorAll('.nav-menu-item-active').forEach(el => {\r\n      el.classList.remove('nav-menu-item-active')\r\n    })\r\n    document.querySelector('#home-menu').classList.add('nav-menu-item-active')\r\n  }\r\n}\r\n","import React, { useEffect, useContext } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { SERVER_URL, LOGO_URL } from '../../config/settings'\r\nimport { getActivePageOnLoad, switchPage } from '../../config/utils'\r\nimport {\r\n    InvitesReceivedContext, UnvisualizedCommentsContext,\r\n    UnvisualizedLikesContext, UnreadMessagesContext\r\n} from '../../context/app/AppContext'\r\n\r\nexport default function Sidebar() {\r\n    const [invitesReceivedNumber, setInvitesReceived] = useContext(InvitesReceivedContext)\r\n    const [unvisualizedCommentsNumber, setUnvisulaizedComments] = useContext(UnvisualizedCommentsContext)\r\n    const [unvisualizedLikesNumber, setUnvisulaizedLikes] = useContext(UnvisualizedLikesContext)\r\n\r\n    const [unreadMessagesNumber, setUnreadMessagesNumber] = useContext(UnreadMessagesContext)\r\n\r\n    let notificationsNumber = invitesReceivedNumber + unvisualizedLikesNumber + unvisualizedCommentsNumber\r\n\r\n    useEffect(() => {\r\n        getActivePageOnLoad()\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"sidebar\">\r\n            <div className=\"logo-container\">\r\n                <Link to=\"/home\" style={{ textDecoration: 'none' }} onClick={e => switchPage(e, true)}>\r\n                    <img src={`${SERVER_URL}${LOGO_URL}`} />\r\n                </Link>\r\n            </div>\r\n            <ul>\r\n                <Link to=\"/home\" style={{ textDecoration: 'none' }}>\r\n                    <li className=\"sidebar-menu-item\" id=\"home-menu\" onClick={switchPage}>\r\n                        <i className=\"fas fa-home sidebar-menu-icon\" />\r\n                        Home\r\n                    </li>\r\n                </Link>\r\n                <Link to=\"/notificações\" style={{ textDecoration: 'none' }}>\r\n                    <li className=\"sidebar-menu-item\" id=\"notifications-menu\" onClick={switchPage}>\r\n                        <i className=\"fas fa-bell sidebar-menu-icon\" />\r\n                        Notificações\r\n                        {!notificationsNumber ? '' :\r\n                            <div className=\"notification-text-container\">\r\n                                <div className=\"notification-text\">\r\n                                    {notificationsNumber}\r\n                                </div>\r\n                            </div>\r\n                        }\r\n                    </li>\r\n                </Link>\r\n                <Link to=\"/mensagens\" style={{ textDecoration: 'none' }}>\r\n                    <li className=\"sidebar-menu-item\" id=\"messages-menu\" onClick={switchPage}>\r\n                        <i className=\"fas fa-envelope sidebar-menu-icon\" />\r\n                        Mensagens\r\n                        {!unreadMessagesNumber ? '' :\r\n                            <div className=\"notification-text-container\">\r\n                                <div className=\"notification-text\">\r\n                                    {unreadMessagesNumber}\r\n                                </div>\r\n                            </div>\r\n                        }\r\n                    </li>\r\n                </Link>\r\n                <Link to=\"/perfil\" style={{ textDecoration: 'none' }}>\r\n                    <li className=\"sidebar-menu-item\" id=\"profile-menu\" onClick={switchPage}>\r\n                        <i className=\"fas fa-user sidebar-menu-icon\" />\r\n                        Perfil\r\n                    </li>\r\n                </Link>\r\n                <Link to=\"/configurações\" style={{ textDecoration: 'none' }}>\r\n                    <li className=\"sidebar-menu-item\" id=\"settings-menu\" onClick={switchPage}>\r\n                        <i className=\"fas fa-cog sidebar-menu-icon\" />\r\n                        Configurações\r\n                    </li>\r\n                </Link>\r\n            </ul>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\n\r\nexport default function Header(props) {\r\n    return (\r\n        <div className=\"header fixed-top\">\r\n            {!props.backArrow ? '' :\r\n                <i class=\"fas fa-arrow-left left-arrow-icon\" onClick={() => window.history.back()} />\r\n            }\r\n            <strong>{props.page}</strong>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../config/settings'\r\n\r\nexport default function ProfileListItem(props) {\r\n    const profile = props.profile\r\n    const myProfile = props.myProfile\r\n\r\n    return (\r\n        <Link to={profile.id === myProfile.id ?\r\n            '/perfil' : `/user/${profile.slug}`}\r\n            style={{ color: '#000', textDecoration: 'none' }}\r\n        >\r\n            <li\r\n                className=\"list-group-item profile-row filtered-profile profile-profile-list-item\"\r\n                key={profile.id}\r\n                style={props.style}\r\n                onClick={props.onClick}\r\n            >\r\n                <div className=\"d-flex\">\r\n                    <div className=\"profile-img-container\">\r\n                        <img src={`${SERVER_URL}${profile.photo}`}\r\n                            className=\"profile-img-med\"\r\n                            style={{ marginRight: '10px' }}\r\n                        />\r\n                    </div>\r\n                    <div className=\"d-flex flex-column w-100\">\r\n                        <div className=\"profile-row-top\">\r\n                            <div className=\"main-profile-data\">\r\n                                <strong style={{ textAlign: 'start' }}>\r\n                                    {profile.first_name} {profile.last_name}\r\n                                </strong>\r\n                                <p className=\"text-secondary\">@{profile.user.username}</p>\r\n                            </div>\r\n                            {props.children}\r\n                        </div>\r\n                        <div className=\"profile-row-bottom\">\r\n                            {profile.bio}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n        </Link>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\nimport Modal from 'react-bootstrap/Modal'\r\n\r\nimport { SERVER_URL } from '../config/settings'\r\nimport ProfileListItem from '../components/ProfileListItem'\r\n\r\nexport default function LikesModal(props) {\r\n    const [myProfile, setMyProfile] = useState(null)\r\n    useEffect(() => {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => setMyProfile(data))\r\n    }, [])\r\n\r\n    return (\r\n        <Modal show={props.isOpen}\r\n            onHide={props.hideModal}\r\n            size=\"lg\">\r\n            <Modal.Header closeButton>\r\n                <Modal.Title><strong>Curtidas</strong></Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <div className=\"list-group\" style={{ height: '400px', overflow: 'hidden', overflowY: 'scroll' }}>\r\n                    {props.likes &&\r\n                        props.likes.map(like => like.profile).map(profile => {\r\n                            return (\r\n                                <ProfileListItem\r\n                                    profile={profile}\r\n                                    myProfile={myProfile}\r\n                                    style={{ borderTop: 'none', borderLeft: 'none', borderRight: 'none' }}\r\n                                    onClick={props.hideModal}\r\n                                />\r\n                            )\r\n                        })}\r\n                </div>\r\n            </Modal.Body>\r\n        </Modal>\r\n    )\r\n}","import React, { useState } from 'react'\r\nimport Picker from 'emoji-picker-react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../../../../../config/settings'\r\nimport { csrftoken, openCloseEmojiList } from '../../../../../config/utils'\r\n\r\nexport default function PostForm(props) {\r\n    const myProfile = props.myProfile\r\n\r\n    const [postContent, setPostContent] = useState('')\r\n    const [postFormImagePreview, setPostFormImagePreview] = useState(null)\r\n\r\n    const handlePostContentChange = e => {\r\n        setPostContent(e.target.value)\r\n        const el = document.querySelector('#post-form-submit-btn')\r\n        el.disabled = e.target.value.trim() === '' && !postFormImagePreview\r\n    }\r\n\r\n    const handlePostImageChange = e => {\r\n        const reader = new FileReader()\r\n        reader.onload = () => {\r\n            if (reader.readyState === 2) {\r\n                setPostFormImagePreview(reader.result)\r\n                document.querySelector('#post-img-container').style.display = 'initial'\r\n                document.querySelector('#post-form-submit-btn').disabled = false\r\n            }\r\n        }\r\n        try {\r\n            reader.readAsDataURL(e.target.files[0])\r\n        } catch {\r\n\r\n        }\r\n    }\r\n\r\n    const handleCloseImage = () => {\r\n        document.querySelector('#post-img-container').style.display = 'none'\r\n        document.querySelector('#post-image').value = ''\r\n        if (postContent.trim() === '') document.querySelector('#post-form-submit-btn').disabled = true\r\n        setPostFormImagePreview(null)\r\n    }\r\n\r\n    const onEmojiSelect = (event, emojiObject) => {\r\n        setPostContent(postContent + emojiObject.emoji)\r\n        document.querySelector('#post-form-submit-btn').disabled = false\r\n    }\r\n\r\n    return (\r\n        <form\r\n            action={`${SERVER_URL}/post-api/create-post`}\r\n            method=\"POST\"\r\n            className=\"create-post-form\"\r\n            encType=\"multipart/form-data\"\r\n        >\r\n            <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrftoken} />\r\n            <div className=\"d-flex\">\r\n                <Link to=\"/perfil\">\r\n                    <img\r\n                        src={`${SERVER_URL}${myProfile.photo}`}\r\n                        className=\"profile-img-med\"\r\n                    />\r\n                </Link>\r\n                <textarea\r\n                    className=\"post-content-textarea\"\r\n                    name=\"post-content\"\r\n                    value={postContent}\r\n                    placeholder=\"No que você está pensando?\"\r\n                    maxLength={300}\r\n                    autoFocus\r\n                    onChange={handlePostContentChange}\r\n                />\r\n            </div>\r\n            <div className=\"w-100 d-flex justify-content-center\">\r\n                <div\r\n                    className=\"post-img-container\"\r\n                    id=\"post-img-container\">\r\n                    <div\r\n                        className=\"post-img-options\"\r\n                    >\r\n                        <i\r\n                            className=\"far fa-times-circle\"\r\n                            onClick={handleCloseImage}\r\n                        />\r\n                    </div>\r\n                    <img\r\n                        src={postFormImagePreview}\r\n                        className=\"post-img post-form-img-preview\"\r\n                        id=\"post-form-img-preview\"\r\n                    />\r\n                </div>\r\n            </div>\r\n            <hr />\r\n            <div className=\"d-flex justify-content-between\" style={{ margin: '0px 70px 0 70px' }}>\r\n                <div className=\"post-extra-options\">\r\n                    <label htmlFor=\"post-image\" class=\"far fa-image\" />\r\n                    <input\r\n                        type=\"file\"\r\n                        accept=\"image/png, image/jpg, image/jpeg\"\r\n                        name=\"post-image\"\r\n                        id=\"post-image\"\r\n                        style={{ display: 'none' }}\r\n                        onChange={handlePostImageChange}\r\n                    />\r\n                    <label\r\n                        className=\"far fa-smile\"\r\n                        id=\"emoji-button\"\r\n                        onClick={() => openCloseEmojiList(false)}\r\n                    />\r\n                    <div className=\"emoji-list-container\" id=\"emoji-list-container\">\r\n                        <Picker onEmojiClick={onEmojiSelect} />\r\n                    </div>\r\n                </div>\r\n                <button\r\n                    type=\"submit\"\r\n                    className=\"btn btn-primary\"\r\n                    id=\"post-form-submit-btn\"\r\n                    style={{ height: '40px' }}\r\n                    disabled\r\n                >\r\n                    Postar\r\n                </button>\r\n            </div>\r\n        </form>\r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../config/settings'\r\nimport { csrftoken } from '../config/utils'\r\n\r\nexport default function PostListItem(props) {\r\n    const post = props.post\r\n    const myProfile = props.myProfile\r\n\r\n    const deletePost = (e, postId) => {\r\n        e.stopPropagation()\r\n        const el = document.querySelector(`#profile-post-${postId}`)\r\n        if (window.confirm('Tem certeza que deseja apagar o post?\\nEssa ação é irreversível.')) {\r\n            el.style.animationPlayState = 'running'\r\n            el.addEventListener('animationend', () => {\r\n                this.fetchPosts()\r\n            })\r\n            fetch(`${SERVER_URL}/post-api/delete-post/${postId}`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-type': 'application/json',\r\n                    'X-CSRFToken': csrftoken,\r\n                }\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                })\r\n        }\r\n    }\r\n\r\n    const likeUnlikePost = e => {\r\n        e.stopPropagation()\r\n        const likeBtn = e.target\r\n        if (likeBtn.classList.contains('fas')) {\r\n            likeBtn.classList.remove('fas') //border heart\r\n            likeBtn.classList.add('far')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/unlike-post/${likeBtn.dataset.postid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    props.renderParent()\r\n                })\r\n        } else {\r\n            likeBtn.classList.remove('far') //border heart\r\n            likeBtn.classList.add('fas')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/like-post/${likeBtn.dataset.postid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    props.renderParent()\r\n                })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <li\r\n            className=\"post-container post-list-item\"\r\n            id={`profile-post-${post.id}`}\r\n            key={post.id}\r\n            onClick={() => window.location.href = `/post/${post.id}`}\r\n        >\r\n            <div className=\"d-flex justify-content-between\">\r\n                <div className=\"post-row\">\r\n                    <div className=\"post-col\">\r\n                        <Link\r\n                            to={post.author.id === myProfile.id ?\r\n                                '/perfil' : `/user/${post.author.slug}`}\r\n                            onClick={e => e.stopPropagation()}\r\n                        >\r\n                            <img src={`${SERVER_URL}${post.author.photo}`}\r\n                                className=\"profile-img-med\"\r\n                            />\r\n                        </Link>\r\n                    </div>\r\n                    <div className=\"post-col\">\r\n                        <Link\r\n                            to={post.author.id === myProfile.id ?\r\n                                '/perfil' : `/user/${post.author.slug}`}\r\n                            style={{ color: '#000' }}\r\n                            onClick={e => e.stopPropagation()}\r\n                        >\r\n                            <div className=\"post-author-data-wrapper\">\r\n                                <strong style={{ marginRight: '5px' }}>\r\n                                    {post.author.first_name} {post.author.last_name}\r\n                                </strong>\r\n                                <p className=\"text-secondary d-inline-block\">\r\n                                    @{post.author.user.username} • {post.created.split('-').reverse().join('/')}\r\n                                </p>\r\n                            </div>\r\n                        </Link>\r\n                        <div style={{ textAlign: 'start' }}>\r\n                            {post.content}\r\n                        </div>\r\n                        {post.image &&\r\n                            <img src={`${SERVER_URL}${post.image}`} className=\"post-img\" />\r\n                        }\r\n                    </div>\r\n                </div>\r\n                {post.author.id === myProfile.id &&\r\n                    <i\r\n                        className=\"far fa-trash-alt trash-icon text-secondary\"\r\n                        style={{ margin: '20px 20px 0 0' }}\r\n                        onClick={e => deletePost(e, post.id)}\r\n                    />\r\n                }\r\n            </div>\r\n            <div className=\"post-actions\">\r\n                <p className=\"text-secondary\">\r\n                    <Link\r\n                        to={`/post/${post.id}/comentar`}\r\n                        className=\"text-secondary\"\r\n                        onClick={e => e.stopPropagation()}\r\n                    >\r\n                        <i\r\n                            class=\"far fa-comment\"\r\n                        />{post.comments.length}\r\n                    </Link>\r\n                    {post.likes.map(like => like.profile.id).includes(myProfile.id) ?\r\n                        <i class=\"fas fa-heart\"\r\n                            data-postid={post.id}\r\n                            onClick={likeUnlikePost}\r\n                        />\r\n                        :\r\n                        <i class=\"far fa-heart\"\r\n                            data-postid={post.id}\r\n                            onClick={likeUnlikePost}\r\n                        />\r\n                    }\r\n                    <p className=\"post-likes-number\"\r\n                        onClick={e => {\r\n                            e.stopPropagation()\r\n                            props.openLikesModal(post.likes)\r\n                        }\r\n                        }\r\n                    >\r\n                        {post.likes.length}\r\n                    </p>\r\n                </p>\r\n            </div>\r\n        </li>\r\n    )\r\n}","import React from 'react'\r\n\r\nimport { SERVER_URL } from '../../../../config/settings'\r\nimport LikesModal from '../../../../components/likesmodal'\r\nimport PostForm from './components/PostForm'\r\nimport PostListItem from '../../../../components/PostListItem'\r\n\r\nexport default class Posts extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            myProfile: null,\r\n            posts: null,\r\n            likesModal: {\r\n                isOpen: false,\r\n                likes: null\r\n            },\r\n            postContent: '',\r\n            postFormImagePreview: null\r\n        }\r\n        this.scrollCount = 1\r\n\r\n        window.onscroll = () => {\r\n            if (window.innerHeight + window.scrollY >= document.body.offsetHeight) {\r\n                this.scrollCount++\r\n                this.fetchPosts()\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillMount() {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => this.setState({ myProfile: data }))\r\n        this.fetchPosts()\r\n    }\r\n\r\n    fetchPosts = () => {\r\n        fetch(`${SERVER_URL}/post-api/post-list/${this.scrollCount}`)\r\n            .then(response => response.json())\r\n            .then(data => this.setState({ posts: data }))\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <LikesModal\r\n                    isOpen={this.state.likesModal.isOpen}\r\n                    likes={this.state.likesModal.likes}\r\n                    hideModal={() => this.setState({ likesModal: { isOpen: false, likes: null } })}\r\n                />\r\n                {this.state.myProfile &&\r\n                    <PostForm myProfile={this.state.myProfile} />\r\n                }\r\n                <div className=\"post-list\">\r\n                    {this.state.posts && this.state.myProfile &&\r\n                        this.state.posts.map(post => {\r\n                            return (\r\n                                <PostListItem\r\n                                    post={post}\r\n                                    myProfile={this.state.myProfile}\r\n                                    renderParent={this.fetchPosts}\r\n                                    openLikesModal={likes => this.setState({ likesModal: { isOpen: true, likes: likes } })}\r\n                                />\r\n                            )\r\n                        })\r\n                    }\r\n                    <div className=\"posts-loader-container\" >\r\n                        <div className=\"loader\" />\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { SERVER_URL } from '../../../../../config/settings'\r\n\r\n\r\nexport default function ProfilesSearchInput(props) {\r\n    const setFilteredProfiles = props.setFilteredProfiles\r\n    const [search, setSearch] = useState('')\r\n    const [searchType, setSearchType] = useState('byName')\r\n\r\n    useEffect(() => {\r\n        if (search === '') {\r\n            setFilteredProfiles(null)\r\n            return\r\n        }\r\n        if (searchType === 'byName') {\r\n            fetch(`${SERVER_URL}/profile-api/users/${search}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    setFilteredProfiles(data)\r\n                })\r\n        } else if (searchType === 'byInterest') {\r\n            fetch(`${SERVER_URL}/profile-api/users-by-interest/${search}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    setFilteredProfiles(data)\r\n                })\r\n        }\r\n    }, [search])\r\n\r\n    const openCloseSearchTypeSelector = () => {\r\n        const el = document.querySelector('#search-type-selector')\r\n        const style = el.style\r\n        if (!style.display) style.display = 'none'\r\n        if (style.display === 'none') {\r\n            document.querySelector('#profiles-search-extra-options-icon').classList.add('profiles-search-extra-options-icon-active')\r\n            style.display = 'flex'\r\n        } else {\r\n            document.querySelector('#profiles-search-extra-options-icon').classList.remove('profiles-search-extra-options-icon-active')\r\n            style.display = 'none'\r\n        }\r\n    }\r\n\r\n    const handleSearchTypeSelection = () => {\r\n        setSearchType(searchType === 'byName' ? 'byInterest' : 'byName')\r\n        openCloseSearchTypeSelector()\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"profiles-filter-container\">\r\n                <div style={{ width: '89%' }}>\r\n                    <input\r\n                        type=\"text\"\r\n                        className=\"profiles-filter-input\"\r\n                        placeholder={searchType === 'byName' ? 'Pesquisar perfil' : 'Digite um ou mais interesses'}\r\n                        value={search}\r\n                        onChange={e => setSearch(e.target.value)}\r\n                    />\r\n                </div>\r\n                <i\r\n                    className=\"fas fa-ellipsis-h btn profiles-search-extra-options-icon\"\r\n                    id=\"profiles-search-extra-options-icon\"\r\n                    onClick={openCloseSearchTypeSelector}\r\n                />\r\n            </div>\r\n            <div className=\"profiles-search-type-selector\" id=\"search-type-selector\" onClick={handleSearchTypeSelection}>\r\n                {searchType === 'byName' ?\r\n                    <li className=\"d-flex align-items-center\">\r\n                        <i class=\"fas fa-grin-hearts text-secondary\" style={{ fontSize: 'large', marginRight: '5px' }} />\r\n                        Pesquisar por interesse\r\n                    </li>\r\n                    :\r\n                    <li className=\"d-flex align-items-center\">\r\n                        <i class=\"fas fa-user text-secondary\" style={{ fontSize: 'large', marginRight: '5px' }} />\r\n                        Pesquisar por nome\r\n                    </li>\r\n                }\r\n            </div>\r\n        </>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\n\r\nimport { SERVER_URL } from '../../../../config/settings'\r\nimport { csrftoken } from '../../../../config/utils'\r\nimport ProfileListItem from '../../../../components/ProfileListItem'\r\nimport ProfilesSearchInput from './components/ProfilesSearchInput'\r\n\r\nexport default function Profiles() {\r\n    const [myProfile, setMyProfile] = useState(null)\r\n    const [profiles, setProfiles] = useState(null)\r\n    const [filteredProfiles, setFilteredProfiles] = useState(null)\r\n    const [scrollCount, setScrollCount] = useState(1)\r\n\r\n    window.onscroll = () => {\r\n        if (window.innerHeight + window.scrollY >= document.body.offsetHeight) {\r\n            setScrollCount(scrollCount + 1)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => setMyProfile(data))\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        fetch(`${SERVER_URL}/profile-api/profile-list/${scrollCount}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                setFilteredProfiles(null)\r\n                setProfiles(data)\r\n            })\r\n    }, [scrollCount])\r\n\r\n    const sendFriendRequest = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/send-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(pk)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n    }\r\n\r\n    const cancelFriendRequest = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/cancel-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(pk)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n    }\r\n\r\n    const handleRelationshipUpdate = e => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        const btn = e.target\r\n        if (btn.innerHTML === 'Solicitar') {\r\n            sendFriendRequest(btn.dataset.pk)\r\n            btn.innerHTML = 'Solicitado'\r\n            btn.className = 'btn btn-primary'\r\n        } else {\r\n            cancelFriendRequest(btn.dataset.pk)\r\n            btn.innerHTML = 'Solicitar'\r\n            btn.className = 'btn btn-secondary'\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <ProfilesSearchInput setFilteredProfiles={setFilteredProfiles} />\r\n            <div className=\"list-group\">\r\n                {myProfile && (profiles || filteredProfiles) &&\r\n                    <div className=\"profile-list-container\">\r\n                        {filteredProfiles ? filteredProfiles.map(profile => {\r\n                            return (\r\n                                <ProfileListItem profile={profile} myProfile={myProfile} />\r\n                            )\r\n                        }\r\n                        ) : profiles && profiles.map(profile => {\r\n                            return (\r\n                                <ProfileListItem profile={profile} myProfile={myProfile}>\r\n                                    <button className=\"btn btn-secondary\" data-pk={profile.id} onClick={handleRelationshipUpdate}>\r\n                                        Solicitar\r\n                                    </button>\r\n                                </ProfileListItem>\r\n                            )\r\n                        })\r\n                        }\r\n                    </div>\r\n                }\r\n                <div className=\"profiles-loader-container\">\r\n                    <div className=\"loader\" />\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\n\r\nimport { SERVER_URL } from '../../../../config/settings'\r\n\r\nexport default function News() {\r\n    const [news, setNews] = useState(null)\r\n\r\n    useEffect(() => {\r\n        fetch(`https://newsapi.org/v2/everything?q=ethereum&language=pt&apiKey=ff76727063ed40308672d1f49127bd43`)\r\n            .then(response => response.json())\r\n            .then(data => setNews(data.article))\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            {news !== null &&\r\n                <>\r\n                {news.map(article => {\r\n                    return (\r\n                        <div>\r\n                            {article}\r\n                        </div>\r\n                    )\r\n                })}\r\n                </>\r\n            }\r\n        </>\r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default () => (\r\n    <Link to=\"/postar\">\r\n        <i className=\"fas fa-pencil-alt bottom-menu-action-icon\" />\r\n    </Link>\r\n)","import React, { useEffect, useContext } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { getActivePageOnLoad, switchPage } from '../../../config/utils'\r\nimport {\r\n    InvitesReceivedContext, UnvisualizedCommentsContext,\r\n    UnvisualizedLikesContext, UnreadMessagesContext\r\n} from '../../../context/app/AppContext'\r\n\r\nexport default function BottomMenu(props) {\r\n    const [invitesReceivedNumber, setInvitesReceived] = useContext(InvitesReceivedContext)\r\n    const [unvisualizedCommentsNumber, setUnvisulaizedComments] = useContext(UnvisualizedCommentsContext)\r\n    const [unvisualizedLikesNumber, setUnvisulaizedLikes] = useContext(UnvisualizedLikesContext)\r\n\r\n    const [unreadMessagesNumber, setUnreadMessagesNumber] = useContext(UnreadMessagesContext)\r\n\r\n    let notificationsNumber = invitesReceivedNumber + unvisualizedLikesNumber + unvisualizedCommentsNumber\r\n\r\n    useEffect(() => {\r\n        getActivePageOnLoad()\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            <div className=\"bottom-menu-action-icon-container fixed-bottom\">\r\n                {props.children}\r\n            </div>\r\n            <div className=\"bottom-menu fixed-bottom\">\r\n                <ul>\r\n                    <Link to=\"/home\" style={{ textDecoration: 'none' }}>\r\n                        <li className=\"sidebar-menu-item\" id=\"bottom-home-menu\" onClick={switchPage}>\r\n                            <i className=\"fas fa-home sidebar-menu-icon\" />\r\n                        </li>\r\n                    </Link>\r\n                    <Link to=\"/notificações\" style={{ textDecoration: 'none' }}>\r\n                        <li className=\"sidebar-menu-item\" id=\"bottom-notifications-menu\" onClick={switchPage}>\r\n                            <i className=\"fas fa-bell sidebar-menu-icon\" />\r\n                            {!notificationsNumber ? '' :\r\n                                <div className=\"notification-text-container\">\r\n                                    <div className=\"notification-text\">\r\n                                        {notificationsNumber}\r\n                                    </div>\r\n                                </div>\r\n                            }\r\n                        </li>\r\n                    </Link>\r\n                    <Link to=\"/mensagens\" style={{ textDecoration: 'none' }}>\r\n                        <li className=\"sidebar-menu-item\" id=\"bottom-messages-menu\" onClick={switchPage}>\r\n                            <i className=\"fas fa-envelope sidebar-menu-icon\" />\r\n                            {!unreadMessagesNumber ? '' :\r\n                                <div className=\"notification-text-container\">\r\n                                    <div className=\"notification-text\">\r\n                                        {unreadMessagesNumber}\r\n                                    </div>\r\n                                </div>\r\n                            }\r\n                        </li>\r\n                    </Link>\r\n                    <Link to=\"/perfil\" style={{ textDecoration: 'none' }}>\r\n                        <li className=\"sidebar-menu-item\" id=\"bottom-profile-menu\" onClick={switchPage}>\r\n                            <i className=\"fas fa-user sidebar-menu-icon\" />\r\n                        </li>\r\n                    </Link>\r\n                    <Link to=\"/configurações\" style={{ textDecoration: 'none' }}>\r\n                        <li className=\"sidebar-menu-item\" id=\"bottom-settings-menu\" onClick={switchPage}>\r\n                            <i className=\"fas fa-cog sidebar-menu-icon\" />\r\n                        </li>\r\n                    </Link>\r\n                </ul>\r\n            </div>\r\n        </>\r\n    )\r\n}","import React from 'react'\r\n\r\n\r\nexport default function HomePageMenu(props) {\r\n    const setPage = props.setPage\r\n\r\n    const feedPageTitle = props.feedPageTitle\r\n    const profilesPageTitle = props.profilesPageTitle\r\n    const explorePageTitle = props.explorePageTitle\r\n    const newsPageTitle = props.newsPageTitle\r\n\r\n    return (\r\n        <div className=\"home-page-menu\">\r\n            <div className=\"home-menu-btn-container home-menu-btn-container-active feed\">\r\n                <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-primary\"\r\n                    style={{ margin: '10px', borderRadius: '20px' }}\r\n                    onClick={() => setPage('Feed')}\r\n                >\r\n                    <i class=\"fas fa-home mr-1\" />\r\n                        {feedPageTitle}\r\n                    </button>\r\n            </div>\r\n            <div className=\"home-menu-btn-container profiles\">\r\n                <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-primary\"\r\n                    style={{ margin: '10px', borderRadius: '20px' }}\r\n                    onClick={() => setPage('Profiles')}\r\n                >\r\n                    <i class=\"fas fa-user-friends mr-1\" />\r\n                        {profilesPageTitle}\r\n                    </button>\r\n            </div>\r\n            <div className=\"home-menu-btn-container explore\">\r\n                <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-primary\"\r\n                    style={{ margin: '10px', borderRadius: '20px' }}\r\n                    onClick={() => setPage('Explore')}\r\n                >\r\n                    <i class=\"fas fa-search mr-1\" />\r\n                        {explorePageTitle}\r\n                    </button>\r\n            </div>\r\n            <div className=\"home-menu-btn-container news\">\r\n                <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-primary\"\r\n                    style={{ margin: '10px', borderRadius: '20px' }}\r\n                    onClick={() => setPage('News')}\r\n                >\r\n                    <i class=\"fas fa-newspaper mr-1\" />\r\n                        {newsPageTitle}\r\n                    </button>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\n\r\nimport Header from '../../components/fixed/Header'\r\nimport Posts from './components/posts_/Posts'\r\nimport Profiles from './components/profiles/Profiles'\r\nimport News from './components/news/News'\r\nimport PostIcon from '../../components/fixed/bottom-menu/components/PostIcon'\r\nimport BottomMenu from '../../components/fixed/bottom-menu/BottomMenu'\r\nimport HomePageMenu from './components/HomePageMenu'\r\n\r\nexport default function Home(props) {\r\n    const [page, setPage] = useState('Feed')\r\n    const pages = {\r\n        'Feed': <Posts />,\r\n        'Profiles': <Profiles />,\r\n        'Explore': '',\r\n        'News': <News />,\r\n    }\r\n\r\n    document.title = 'Home / Napker'\r\n\r\n    useEffect(() => {\r\n        const elements = document.querySelectorAll('.' + page.toLowerCase())\r\n        document.querySelectorAll('.home-menu-btn-container-active').forEach(el => el.classList.remove('home-menu-btn-container-active'))\r\n        elements.forEach(el => el.classList.add('home-menu-btn-container-active'))\r\n    }, [page])\r\n\r\n    return (\r\n        <>\r\n            <Header page=\"Home\" />\r\n            <div className=\"content\">\r\n                <div className=\"desktop-home-menu\">\r\n                    <HomePageMenu\r\n                        setPage={setPage}\r\n                        feedPageTitle='Feed'\r\n                        profilesPageTitle='Encontrar perfis'\r\n                        explorePageTitle='Descobrir'\r\n                        newsPageTitle='Notícias'\r\n                    />\r\n                </div>\r\n                <div className=\"mobile-home-menu\">\r\n                    <HomePageMenu setPage={setPage} />\r\n                </div>\r\n                {pages[page]}\r\n            </div>\r\n            <BottomMenu>\r\n                <PostIcon />\r\n            </BottomMenu>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\nimport { SERVER_URL } from '../../../config/settings'\r\n\r\nexport default function InviteListItem(props) {\r\n    const invite = props.invite\r\n    const replyRequest = props.replyRequest\r\n    \r\n    return (\r\n        <li\r\n            className=\"friend-request-row profile-row\"\r\n            id={`fr-${invite.sender.id}`}\r\n            key={invite.sender.id}\r\n            onClick={() => window.location.href = `/user/${invite.sender.slug}`}\r\n        >\r\n            <div className=\"d-flex\">\r\n                <div className=\"profile-img-container\">\r\n                    <img src={`${SERVER_URL}${invite.sender.photo}`}\r\n                        className=\"profile-img-med\"\r\n                        style={{ marginRight: '10px' }}\r\n                    />\r\n                </div>\r\n                <div className=\"d-flex flex-column w-100\">\r\n                    <div className=\"profile-row-top\">\r\n                        <div className=\"main-profile-data\">\r\n                            <strong style={{ textAlign: 'start' }}>\r\n                                {invite.sender.first_name} {invite.sender.last_name}\r\n                            </strong>\r\n                            <p className=\"text-secondary\">@{invite.sender.user.username}</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"profile-row-bottom\">\r\n                        {invite.sender.bio}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"friend-request-col\">\r\n                <button className=\"btn btn-primary btn-reply-fr mr-1\" data-senderid={invite.sender.id} data-reply='accept' onClick={replyRequest}>\r\n                    Aceitar\r\n                </button>\r\n                <button className=\"btn btn-grey btn-reply-fr\" data-senderid={invite.sender.id} data-reply='decline' onClick={replyRequest}>\r\n                    Excluir\r\n                </button>\r\n            </div>\r\n        </li>\r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../../../config/settings'\r\n\r\nexport default function LikeProfileNotification(props) {\r\n    const like = props.like\r\n    \r\n    return (\r\n        <li className=\"notification-row\" key={like.profile.id}>\r\n            <div className=\"d-flex align-items-center\">\r\n                <i class=\"fas fa-heart notification-like\" />\r\n                <Link to={`/user/${like.profile.slug}`}>\r\n                    <img src={`${SERVER_URL}${like.profile.photo}`}\r\n                        className=\"profile-img-sm\"\r\n                        style={{ marginRight: '10px' }}\r\n                    />\r\n                </Link>\r\n                <p className=\"text-secondary d-inline-block\">\r\n                    {like.created.split('-').reverse().join('/')}\r\n                </p>\r\n                {props.children}\r\n            </div>\r\n            <div className=\"notification-message\">\r\n                <p>\r\n                    <Link to={`/user/${like.profile.slug}`} style={{ color: \"#000\" }}>\r\n                        @{like.profile.user.username}\r\n                    </Link> curtiu seu post.\r\n                </p>\r\n            </div>\r\n            <div className=\"notification-post-content\">\r\n                {like.post.content}\r\n            </div>\r\n        </li>\r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../../../config/settings'\r\n\r\nexport default function CommentProfileNotification(props) {\r\n    const comment = props.comment\r\n    return (\r\n        <li className=\"notification-row\" key={comment.author.id}>\r\n            <div className=\"d-flex align-items-center\">\r\n                <i class=\"fas fa-comment notification-comment\" />\r\n                <Link to={`/user/${comment.author.slug}`}>\r\n                    <img src={`${SERVER_URL}${comment.author.photo}`}\r\n                        className=\"profile-img-sm\"\r\n                        style={{ marginRight: '10px' }}\r\n                    />\r\n                </Link>\r\n                <p className=\"text-secondary d-inline-block\">\r\n                    {comment.created.split('-').reverse().join('/')}\r\n                </p>\r\n                {props.children}\r\n            </div>\r\n            <div className=\"notification-message\">\r\n                <p>\r\n                    <Link to={`/user/${comment.author.slug}`} style={{ color: \"#000\" }}>\r\n                        @{comment.author.user.username}\r\n                    </Link> comentou seu post.\r\n                </p>\r\n            </div>\r\n            <div className=\"notification-comment-container\">\r\n                <div className=\"notification-comment-content\">\r\n                    {comment.content}\r\n                </div>\r\n                <Link to={`/post/${comment.post.id}`}>\r\n                    <button className=\"btn btn-primary\">\r\n                        Ver Post\r\n                    </button>\r\n                </Link>\r\n            </div>\r\n        </li>\r\n    )\r\n}","import React from 'react'\r\n\r\nexport default function NewLabel() {\r\n    return (\r\n        <div className=\"notification-text-container\">\r\n            <div className=\"notification-text\">\r\n                novo\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\n\r\nimport { SERVER_URL } from '../../config/settings'\r\nimport { csrftoken } from '../../config/utils'\r\nimport Header from '../../components/fixed/Header'\r\nimport InviteNotification from './components/InviteNotification'\r\nimport LikeProfileNotification from './components/LikeProfileNotification'\r\nimport CommentProfileNotification from './components/CommentProfileNotification'\r\nimport NewLabel from './components/NewLabel'\r\nimport BottomMenu from '../../components/fixed/bottom-menu/BottomMenu'\r\n\r\nexport default function Notifications(props) {\r\n    const [invites, setInvites] = useState(null)\r\n    const [unvisualizedPostLikes, setUnvisualizedPostLikes] = useState(null)\r\n    const [visualizedPostLikes, setVisualizedPostLikes] = useState(null)\r\n    const [unvisualizedComments, setUnvisualizedComments] = useState(null)\r\n    const [visualizedComments, setVisualizedComments] = useState(null)\r\n\r\n    let notificationsFetchInterval\r\n\r\n    document.title = 'Notificações / Napker'\r\n\r\n    const fetchNotifications = () => {\r\n        fetch(`${SERVER_URL}/profile-api/myinvites`)\r\n            .then(response => response.json())\r\n            .then(data => setInvites(data))\r\n        fetch(`${SERVER_URL}/post-api/unvisualized-post-likes`)\r\n            .then(response => response.json())\r\n            .then(data => setUnvisualizedPostLikes(data))\r\n        fetch(`${SERVER_URL}/post-api/unvisualized-post-comments`)\r\n            .then(response => response.json())\r\n            .then(data => setUnvisualizedComments(data))\r\n        fetch(`${SERVER_URL}/post-api/post-likes-visualized-last-2-days`)\r\n            .then(response => response.json())\r\n            .then(data => setVisualizedPostLikes(data))\r\n        fetch(`${SERVER_URL}/post-api/post-comments-visualized-last-2-days`)\r\n            .then(response => response.json())\r\n            .then(data => setVisualizedComments(data))\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchNotifications()\r\n        notificationsFetchInterval = window.setInterval(fetchNotifications, 3000)\r\n        return () => window.clearInterval(notificationsFetchInterval)\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (unvisualizedPostLikes && unvisualizedPostLikes.length) {\r\n            fetch(`${SERVER_URL}/post-api/visualize-likes`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    props.updateNotificationsNumber()\r\n                })\r\n        }\r\n    }, [unvisualizedPostLikes])\r\n\r\n    useEffect(() => {\r\n        if (unvisualizedComments && unvisualizedComments.length) {\r\n            fetch(`${SERVER_URL}/post-api/visualize-comments`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    props.updateNotificationsNumber()\r\n                })\r\n        }\r\n    }, [unvisualizedComments])\r\n\r\n    const replyRequest = e => {\r\n        e.stopPropagation()\r\n        const btn = e.target\r\n        const requestBody = {\r\n            'senderid': btn.dataset.senderid,\r\n            'reply': btn.dataset.reply\r\n        }\r\n        fetch(`${SERVER_URL}/profile-api/reply-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(requestBody)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(data)\r\n                props.updateNotificationsNumber()\r\n            })\r\n        document.getElementById(`fr-${btn.dataset.senderid}`).remove()\r\n        fetchNotifications()\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header page=\"Notificações\" />\r\n            <div className=\"content\">\r\n                <div>\r\n                    {invites !== null && unvisualizedPostLikes && visualizedPostLikes !== null && unvisualizedComments !== null && visualizedComments !== null ?\r\n                        <div>\r\n                            {invites.length || unvisualizedPostLikes.length || visualizedPostLikes.length || unvisualizedComments.length || !!visualizedComments.length ?\r\n                                <div className=\"notifications-container\">\r\n                                    {!!invites.length &&\r\n                                        <div>\r\n                                            {invites.map(invite => {\r\n                                                return (\r\n                                                    <InviteNotification\r\n                                                        invite={invite}\r\n                                                        replyRequest={replyRequest}\r\n                                                    />\r\n                                                )\r\n                                            })}\r\n                                        </div>\r\n                                    }\r\n\r\n                                    {(!!unvisualizedPostLikes.length || !!unvisualizedComments.length) &&\r\n                                        <>\r\n                                            {!!unvisualizedPostLikes.length &&\r\n                                                <>\r\n                                                    {unvisualizedPostLikes.map(like => {\r\n                                                        return (\r\n                                                            <LikeProfileNotification like={like}>\r\n                                                                <NewLabel />\r\n                                                            </LikeProfileNotification>\r\n                                                        )\r\n                                                    })}\r\n                                                </>\r\n                                            }\r\n\r\n                                            {!!unvisualizedComments.length &&\r\n                                                <>\r\n                                                    {unvisualizedComments.map(comment => {\r\n                                                        return (\r\n                                                            <CommentProfileNotification comment={comment}>\r\n                                                                <NewLabel />\r\n                                                            </CommentProfileNotification>\r\n                                                        )\r\n                                                    })}\r\n                                                </>\r\n                                            }\r\n                                        </>\r\n                                    }\r\n\r\n                                    {(!!visualizedPostLikes.length || !!visualizedComments.length) &&\r\n                                        <>\r\n                                            {!!visualizedPostLikes.length &&\r\n                                                <>\r\n                                                    {visualizedPostLikes.map(like => {\r\n                                                        return (\r\n                                                            <LikeProfileNotification like={like} />\r\n                                                        )\r\n                                                    })}\r\n                                                </>\r\n                                            }\r\n\r\n                                            {!!visualizedComments.length &&\r\n                                                <>\r\n                                                    {visualizedComments.map(comment => {\r\n                                                        return (\r\n                                                            <CommentProfileNotification comment={comment} />\r\n                                                        )\r\n                                                    })}\r\n                                                </>\r\n                                            }\r\n                                        </>\r\n                                    }\r\n\r\n                                </div> :\r\n                                <div className=\"no-notifications-container\">\r\n                                    <h3>Você não tem nenhuma notificação</h3>\r\n                                </div>\r\n                            }\r\n\r\n                        </div> :\r\n                        <div className=\"notifications-loader-container\">\r\n                            <div className=\"loader\" />\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n            <BottomMenu />\r\n        </>\r\n    )\r\n}","import React from 'react'\r\n\r\nexport default function Header(props) {\r\n    return (\r\n        <div className=\"header fixed-top\">\r\n            {!props.backArrow ? '' :\r\n                <i class=\"fas fa-arrow-left left-arrow-icon\" onClick={() => window.history.back()} />\r\n            }\r\n            <strong>{props.page}</strong>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../../../config/settings'\r\n\r\nexport default function ModalContactSearch(props) {\r\n    const modalProfiles = props.modalProfiles\r\n    const setParentState = props.setParentState\r\n    const addingNewChat = props.addingNewChat\r\n\r\n    const setModalSearch = query => {\r\n        if (query === '') {\r\n            setParentState({\r\n                modalProfiles: []\r\n            })\r\n            return\r\n        }\r\n        fetch(`${SERVER_URL}/profile-api/users/${query}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                setParentState({\r\n                    modalProfiles: data\r\n                })\r\n            })\r\n    }\r\n\r\n    return (\r\n        <Modal show={addingNewChat}\r\n            onHide={() => setParentState({ addingNewChat: false })}\r\n            size=\"lg\">\r\n            <Modal.Header closeButton>\r\n                <Modal.Title><strong>Nova conversa</strong></Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body style={{ padding: '0' }}>\r\n                <input className=\"modal-search-input\"\r\n                    placeholder=\"Pesquisar pessoas\"\r\n                    onChange={e => setModalSearch(e.target.value)}\r\n                />\r\n                <div className=\"list-group\" style={{ height: '400px', overflow: 'hidden', overflowY: 'scroll' }}>\r\n                    {modalProfiles && modalProfiles.map(profile => {\r\n                        return (\r\n                            <Link to={`/mensagens/${profile.slug}`}\r\n                                style={{ color: '#000', textDecoration: 'none' }}\r\n                                onClick={() => setParentState({ addingNewChat: false })}\r\n                            >\r\n                                <li className=\"list-group-item profile-row modal-profile-li\" key={profile.id}>\r\n                                    <div className=\"d-flex justify-content-between\">\r\n                                        <div className=\"profile-col\">\r\n                                            <img src={`${SERVER_URL}${profile.photo}`}\r\n                                                className=\"profile-img-med\"\r\n                                                style={{ marginRight: '10px' }}\r\n                                            />\r\n                                            <div className=\"main-profile-data\">\r\n                                                <strong>{profile.first_name} {profile.last_name}</strong>\r\n                                                <p className=\"text-secondary\">@{profile.user.username}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </li>\r\n                            </Link>\r\n                        )\r\n                    })}\r\n                </div>\r\n            </Modal.Body>\r\n        </Modal>\r\n    )\r\n}","import { SOCKET_URL } from '../../config/settings'\r\n\r\nclass WebSocketService {\r\n  static instance = null;\r\n  callbacks = {};\r\n\r\n  static getInstance() {\r\n    if (!WebSocketService.instance) {\r\n      WebSocketService.instance = new WebSocketService();\r\n    }\r\n    return WebSocketService.instance;\r\n  }\r\n\r\n  constructor() {\r\n    this.socketRef = null;\r\n  }\r\n\r\n  connect(chatUrl) {\r\n    const path = `${SOCKET_URL}/ws/chat/${chatUrl}/`;\r\n    this.socketRef = new WebSocket(path);\r\n    this.socketRef.onopen = () => {\r\n      console.log(\"WebSocket open\");\r\n    };\r\n    this.socketNewMessage(JSON.stringify({\r\n      command: 'fetch-messages'\r\n    }))\r\n    this.socketRef.onmessage = e => {\r\n      this.socketNewMessage(e.data);\r\n    };\r\n    this.socketRef.onerror = e => {\r\n      console.log(e.message);\r\n    };\r\n    this.socketRef.onclose = () => {\r\n      console.log(\"WebSocket closed\");\r\n    };\r\n  }\r\n\r\n  disconnect() {\r\n    if (this.socketRef) this.socketRef.close();\r\n  }\r\n\r\n  socketNewMessage(data) {\r\n    const parsedData = JSON.parse(data);\r\n    const command = parsedData.command;\r\n    if (Object.keys(this.callbacks).length === 0) {\r\n      return;\r\n    }\r\n    if (command === \"messages\") {\r\n      this.callbacks[command](parsedData.messages);\r\n    }\r\n    if (command === \"new_message\") {\r\n      this.callbacks[command](parsedData.message);\r\n    }\r\n  }\r\n\r\n  fetchMessages(username, chatId) {\r\n    this.sendMessage({\r\n      command: \"fetch_messages\",\r\n      username: username,\r\n      chatId: chatId\r\n    });\r\n  }\r\n\r\n  newChatMessage(message) {\r\n    this.sendMessage({\r\n      command: \"new_message\",\r\n      from: message.from,\r\n      content: message.content,\r\n      chatId: message.chatId\r\n    });\r\n  }\r\n\r\n  readMessages(chatId) {\r\n    this.sendMessage({\r\n      command: \"read_messages\",\r\n      chatId: chatId\r\n    });\r\n  }\r\n\r\n  addCallbacks(messagesCallback, newMessageCallback) {\r\n    this.callbacks[\"messages\"] = messagesCallback\r\n    this.callbacks[\"new_message\"] = newMessageCallback\r\n  }\r\n\r\n  sendMessage(data) {\r\n    try {\r\n      if (this.state() === 1) {\r\n        this.socketRef.send(JSON.stringify({ ...data }))\r\n      }\r\n    } catch (err) {\r\n      console.log(err.message)\r\n    }\r\n  }\r\n\r\n  state() {\r\n    return this.socketRef ? this.socketRef.readyState : 0\r\n  }\r\n}\r\n\r\nconst WebSocketInstance = WebSocketService.getInstance();\r\n\r\nexport default WebSocketInstance;","import React, { useState } from 'react'\r\nimport Picker from 'emoji-picker-react'\r\n\r\nimport { openCloseEmojiList } from '../../../../../config/utils'\r\n\r\nexport default function SendMessageForm(props) {\r\n    const WebSocketInstance = props.WebSocketInstance\r\n    const chatId = props.chatId\r\n    const username = props.username\r\n    const otherProfile = props.otherProfile\r\n    const myProfile = props.myProfile\r\n    const updateMessagesComponent = props.updateMessagesComponent\r\n\r\n    const [message, setMessage] = useState('')\r\n\r\n    const messageChangeHandler = e => {\r\n        setMessage(e.target.value)\r\n        const el = document.querySelector('#chat-message-submit')\r\n        el.disabled = e.target.value.trim() === ''\r\n    }\r\n\r\n    const onEmojiSelect = (event, emojiObject) => {\r\n        setMessage(message + emojiObject.emoji)\r\n        document.querySelector('#chat-message-submit').disabled = false\r\n    }\r\n\r\n    const sendMessageHandler = e => {\r\n        e.preventDefault()\r\n        const messageObject = {\r\n            from: username,\r\n            content: message,\r\n            chatId: chatId\r\n        };\r\n        setMessage('')\r\n        if (otherProfile.blocked_users.map(u => u.id).includes(myProfile.user.id)) {\r\n            window.alert(`Você não pode enviar mensagens para ${otherProfile.first_name}.\r\n            ${otherProfile.first_name} te bloqueou.`)\r\n            return\r\n        }\r\n        if (myProfile.blocked_users.map(u => u.id).includes(otherProfile.user.id)) {\r\n            window.alert(`Você não pode enviar mensagens para ${otherProfile.first_name}.\r\n            Você bloqueou ${otherProfile.first_name}.`)\r\n            return\r\n        }\r\n        WebSocketInstance.newChatMessage(messageObject)\r\n        document.querySelector('#chat-message-submit').disabled = true\r\n        openCloseEmojiList(true)\r\n        updateMessagesComponent()\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"emoji-list-container chat-emoji-list\" id=\"emoji-list-container\">\r\n                <Picker onEmojiClick={onEmojiSelect} />\r\n            </div>\r\n            <form className=\"send-message-container\" onSubmit={sendMessageHandler}>\r\n                <label\r\n                    className=\"far fa-smile\"\r\n                    id=\"emoji-button\"\r\n                    onClick={() => openCloseEmojiList(false)}\r\n                />\r\n                <input\r\n                    placeholder=\"Mensagem\"\r\n                    className=\"message-input\"\r\n                    id=\"chat-message-input\"\r\n                    value={message}\r\n                    autoFocus={document.querySelector('#contact-filter-input').value === ''}\r\n                    onChange={messageChangeHandler}\r\n                />\r\n                <button\r\n                    className=\"btn btn-primary chat-message-submit\"\r\n                    id=\"chat-message-submit\"\r\n                    disabled\r\n                >\r\n                    <i class=\"fas fa-chevron-right\" />\r\n                </button>\r\n            </form>\r\n        </>\r\n    )\r\n}","import React from 'react'\r\n\r\nexport default function MessageListItem(props) {\r\n    const message = props.message\r\n    const currentUser = props.currentUser\r\n\r\n    const renderTimestamp = timestamp => {\r\n        const ts = new Date(timestamp)\r\n        const day = ts.getDate() >= 10 ? ts.getDate() : `0${ts.getDate()}`\r\n        const month = ts.getMonth() >= 10 ? ts.getMonth() : `0${ts.getMonth()}`\r\n        const hour = ts.getHours() >= 10 ? ts.getHours() : `0${ts.getHours()}`\r\n        const minute = ts.getMinutes() >= 10 ? ts.getMinutes() : `0${ts.getMinutes()}`\r\n        return `${day}/${month}/${ts.getFullYear()} - ${hour}:${minute}`\r\n    }\r\n\r\n    return (\r\n        <li\r\n            key={message.id}\r\n            className={message.author === currentUser ? \"sent\" : \"received\"}\r\n        >\r\n            <p>\r\n                {message.content}\r\n                <br />\r\n                <small>\r\n                    {renderTimestamp(message.timestamp)} {message.author === currentUser ?\r\n                        message.read ?\r\n                            <i class=\"fas fa-check-double\" />\r\n                            :\r\n                            <i class=\"fas fa-check\" />\r\n                        :\r\n                        ''\r\n                    }\r\n                </small>\r\n            </p>\r\n        </li>\r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { csrftoken } from '../../../../config/utils'\r\nimport { SERVER_URL } from '../../../../config/settings'\r\nimport WebSocketInstance from '../../Websocket'\r\nimport SendMessageForm from './components/SendMessageForm'\r\nimport MessageListItem from './components/MessageListItem'\r\n\r\nclass Chat extends React.Component {\r\n    initialiseChat() {\r\n        console.log('initializing chat...')\r\n        this.waitForSocketConnection(() => {\r\n            WebSocketInstance.addCallbacks(\r\n                this.getMessages.bind(this),\r\n                this.addMessage.bind(this),\r\n            )\r\n            WebSocketInstance.fetchMessages(\r\n                this.props.username,\r\n                this.props.chatId\r\n            );\r\n        });\r\n        if (this.props.chatId) WebSocketInstance.connect(this.props.chatId)\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            messages: [],\r\n            scrolledToBottom: false,\r\n            myProfile: null,\r\n            otherUsername: this.props.otherUsername,\r\n            otherProfile: null\r\n        }\r\n        this.initialiseChat();\r\n    }\r\n\r\n    handleComponentChange = () => {\r\n        if (this.state.otherUsername && (!this.state.otherProfile || this.state.otherProfile.user.username !== this.state.otherUsername)) {\r\n            fetch(`${SERVER_URL}/profile-api/user/${this.state.otherUsername}`)\r\n                .then(response => response.json())\r\n                .then(data => this.setState({\r\n                    otherProfile: data\r\n                }))\r\n        }\r\n        if (!this.state.myProfile) {\r\n            fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n                .then(response => response.json())\r\n                .then(data => this.setState({ myProfile: data }))\r\n        }\r\n        if (this.state.messages.length && !this.state.scrolledToBottom && document.querySelectorAll('.sent, .received').length) {\r\n            this.scrollToBottom()\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.handleComponentChange()\r\n    }\r\n\r\n\r\n    componentDidUpdate() {\r\n        this.handleComponentChange()\r\n        document.querySelector('#contact-filter-input') &&\r\n        document.activeElement !== document.querySelector('#contact-filter-input') &&\r\n        document.querySelector('#chat-message-input') &&\r\n        document.querySelector('#chat-message-input').focus()\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        WebSocketInstance.disconnect()\r\n    }\r\n\r\n    componentWillReceiveProps(newProps) {\r\n        if (newProps.chatId && newProps.chatId !== this.props.chatId && newProps.otherUsername && WebSocketInstance.state() !== 1) {\r\n            this.waitForSocketConnection(() => {\r\n                WebSocketInstance.fetchMessages(\r\n                    newProps.username,\r\n                    newProps.chatId\r\n                );\r\n            });\r\n            WebSocketInstance.connect(newProps.chatId)\r\n            this.readMessages(newProps)\r\n\r\n            this.props.updateMessagesComponent()\r\n            this.setState({\r\n                messages: [],\r\n                scrolledToBottom: false,\r\n            })\r\n        }\r\n        if (this.state.otherUsername !== newProps.otherUsername) {\r\n            this.setState({\r\n                otherUsername: newProps.otherUsername\r\n            })\r\n        }\r\n        if (this.props.updateUnreadMessagesNumber) {\r\n            this.props.updateUnreadMessagesNumber()\r\n        }\r\n        if (this.state.otherUsername && !newProps.otherUsername) {\r\n            WebSocketInstance.disconnect()\r\n            this.setState({\r\n                otherUsername: undefined,\r\n                otherProfile: undefined\r\n            })\r\n        }\r\n    }\r\n\r\n    readMessages = props => {\r\n        fetch(`${SERVER_URL}/chat-api/read-messages`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify({ chat_id: props.chatId })\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(data)\r\n                WebSocketInstance.readMessages(this.props.chatId)\r\n            })\r\n    }\r\n\r\n    waitForSocketConnection(callback) {\r\n        const component = this;\r\n        setTimeout(function () {\r\n            if (WebSocketInstance.state() === 1) {\r\n                console.log(\"Connection is made\");\r\n                callback();\r\n                return;\r\n            } else {\r\n                console.log(\"wait for connection...\");\r\n                component.waitForSocketConnection(callback);\r\n            }\r\n        }, 100);\r\n    }\r\n\r\n    getMessages(messages) {\r\n        this.setState({ messages: messages.reverse() })\r\n    }\r\n\r\n    addMessage(message) {\r\n        this.setState({\r\n            messages: [...this.state.messages, message],\r\n            scrolledToBottom: false\r\n        })\r\n        this.readMessages(this.props)\r\n    }\r\n\r\n    scrollToBottom = () => {\r\n        if (document.querySelector('#chat-log')) {\r\n            const chatLog = document.querySelector('#chat-log')\r\n            chatLog.scrollTop = chatLog.scrollHeight\r\n            this.setState({\r\n                scrolledToBottom: true\r\n            })\r\n        }\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                {this.state.otherProfile !== null || !this.props.otherUsername ?\r\n                    <>\r\n                        {this.state.otherProfile ?\r\n                            <div className=\"current-chat\">\r\n                                <div className=\"current-chat-header\">\r\n                                    <i class=\"fas fa-arrow-left left-arrow-icon\" onClick={() => window.history.back()} />\r\n                                    <Link to={`/user/${this.state.otherProfile.slug}`}>\r\n                                        <img src={`${SERVER_URL}${this.state.otherProfile.photo}`}\r\n                                            className=\"profile-img-sm\"\r\n                                            style={{ marginRight: '5px' }}\r\n                                        />\r\n                                    </Link>\r\n                                    <div className=\"d-flex flex-column align-items-start\" style={{ height: '52px' }}>\r\n                                        <strong>{this.state.otherProfile.first_name} {this.state.otherProfile.last_name}</strong>\r\n                                        <p className=\"text-secondary\">@{this.state.otherProfile.user.username}</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div id=\"chat-log\">\r\n                                    {this.state.messages.map(message => {\r\n                                        return (\r\n                                            <MessageListItem message={message} currentUser={this.props.username} />\r\n                                        )\r\n                                    })\r\n                                    }\r\n                                </div>\r\n                                <SendMessageForm\r\n                                    WebSocketInstance={WebSocketInstance}\r\n                                    chatId={this.props.chatId}\r\n                                    username={this.props.username}\r\n                                    otherProfile={this.state.otherProfile}\r\n                                    myProfile={this.state.myProfile}\r\n                                    updateMessagesComponent={this.props.updateMessagesComponent}\r\n                                />\r\n                            </div>\r\n                            :\r\n                            <div className=\"current-chat no-chat-selected\">\r\n                                <div>\r\n                                    <strong style={{ fontSize: 'larger' }}>Você não tem uma conversa selecionada</strong>\r\n                                    <p className=\"text-secondary\">Selecione uma existente ou comece uma nova</p>\r\n                                    <button className=\"btn btn-primary\" onClick={() => this.props.openModal()}>Nova conversa</button>\r\n                                </div>\r\n                            </div>\r\n                        }\r\n                    </>\r\n                    :\r\n                    <div className=\"chat-loader-container\">\r\n                        <div className=\"loader\" />\r\n                    </div>\r\n                }\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Chat\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../../../config/settings'\r\n\r\nexport default function ContactListItem(props) {\r\n    const profile = props.profile\r\n    const activeChats = props.activeChats\r\n    const activeChatsProfiles = props.activeChatsProfiles\r\n    let unreadMessagesCounter\r\n    let lastChatMessage\r\n\r\n    const resetUnreadMessagesCounter = () => {\r\n        unreadMessagesCounter = 0\r\n    }\r\n\r\n    const incrementUnreadMessagesCounter = () => {\r\n        unreadMessagesCounter++\r\n    }\r\n\r\n    const setLastChatMessage = message => {\r\n        lastChatMessage = message\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {profile !== undefined &&\r\n                <Link to={`/mensagens/${profile.slug}`} style={{ color: '#000', textDecoration: 'none' }}>\r\n                    {resetUnreadMessagesCounter()}\r\n                    <li className=\"list-item profile-chat-item\" style={{ whiteSpace: 'nowrap' }}>\r\n                        <img src={`${SERVER_URL}${profile.photo}`}\r\n                            className=\"profile-img-med\"\r\n                            style={{ marginRight: '10px' }}\r\n                        />\r\n                        <div className=\"d-flex flex-column align-items-start\">\r\n                            <div className=\"d-flex\" style={{ maxHeight: '30px' }}>\r\n                                <strong style={{ height: 'fit-content' }}>{profile.first_name} {profile.last_name}</strong>\r\n                                {activeChats[activeChatsProfiles.indexOf(profile)].messages.map((message, i, messages) => {\r\n                                    if (messages[messages.length - 1] === message) setLastChatMessage(message.content)\r\n                                    if (message.read || message.contact.user.username !== profile.user.username) return\r\n                                    incrementUnreadMessagesCounter()\r\n                                })}\r\n                                {unreadMessagesCounter > 0 &&\r\n                                    <div className=\"notification-text-container\">\r\n                                        <div className=\"notification-text\">\r\n                                            {unreadMessagesCounter}\r\n                                        </div>\r\n                                    </div>\r\n                                }\r\n                                <p className=\"text-secondary\" style={{ marginLeft: '5px' }}>@{profile.user.username}</p>\r\n                            </div>\r\n                            <p className=\"text-secondary\">{lastChatMessage.slice(0, 40)}</p>\r\n                        </div>\r\n                    </li>\r\n                </Link>\r\n            }\r\n        </>\r\n    )\r\n}","import React from 'react'\r\n\r\nexport default function ContactFilterInput(props) {\r\n    const activeChatsProfiles = props.activeChatsProfiles\r\n    const setHasFilteredProfiles = props.setHasFilteredProfiles\r\n    const fetchActiveChatProfiles = props.fetchActiveChatProfiles\r\n    const setParentState = props.setParentState\r\n    const openModal = props.openModal\r\n\r\n    const setContactSearch = query => {\r\n        if (query === '') {\r\n            setHasFilteredProfiles(false)\r\n            fetchActiveChatProfiles()\r\n            return\r\n        }\r\n        if (activeChatsProfiles) {\r\n            console.log(activeChatsProfiles)\r\n            const filteredProfiles = activeChatsProfiles.filter(p => p.user.username.includes(query))\r\n            setHasFilteredProfiles(true)\r\n            setParentState({\r\n                renderedActiveChatsProfiles: filteredProfiles\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"search-input-container\">\r\n            <input\r\n                className=\"search-input contact-filter-input\"\r\n                id=\"contact-filter-input\"\r\n                placeholder=\"Pesquisar pessoas\"\r\n                onChange={e => setContactSearch(e.target.value)}\r\n            />\r\n            <i className=\"fas fa-plus add-icon\" onClick={openModal}></i>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\n\r\nimport { SERVER_URL } from '../../config/settings'\r\nimport Header from '../../components/fixed/header'\r\nimport ModalContactSearch from './components/ModalContactSearch'\r\nimport Chat from './components/chat_/Chat'\r\nimport ContactListItem from './components/ContactListItem'\r\nimport ContactFilterInput from './components/ContactFilterInput'\r\nimport BottomMenu from '../../components/fixed/bottom-menu/BottomMenu'\r\nimport WebSocketInstance from './Websocket'\r\n\r\nexport default class Messages extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            myProfile: null,\r\n            username: null,\r\n            chatId: null,\r\n            activeChats: null,\r\n            activeChatsProfiles: null,\r\n            renderedActiveChatsProfiles: null,\r\n            addingNewChat: false,\r\n            modalProfiles: [],\r\n        }\r\n        this.rerenderingInterval = null\r\n        this.hasFilteredProfiles = false\r\n    }\r\n\r\n    handleReceiveProps = props => {\r\n        if (props.match.params.slug) {\r\n            if (props.match.params.slug !== this.props.match.params.slug && WebSocketInstance.state() === 1) {\r\n                WebSocketInstance.disconnect()\r\n            }\r\n            const participants = { username: this.state.username, other_username: props.match.params.slug }\r\n            fetch(`${SERVER_URL}/chat-api/chat-id/${JSON.stringify(participants)}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    this.setState({ chatId: data['chat_id'] })\r\n                })\r\n        } else if (this.state.chatId) {\r\n            this.setState({\r\n                chatId: null\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps(newProps) {\r\n        if (newProps === this.props) return\r\n        this.handleReceiveProps(newProps)\r\n    }\r\n\r\n    handleComponentChange() {\r\n        if (!this.state.username) {\r\n            fetch(`${SERVER_URL}/profile-api/logged-user`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    this.setState({\r\n                        username: data.username\r\n                    })\r\n                    if (this.props.match.params.slug) {\r\n                        this.handleReceiveProps(this.props)\r\n                    }\r\n                })\r\n        }\r\n        if (!this.state.activeChatsProfiles && this.state.activeChatsProfiles !== []) {\r\n            this.fetchActiveChatProfiles()\r\n        }\r\n    }\r\n\r\n    componentWillMount() {\r\n        document.title = 'Mensagens / Napker'\r\n        this.handleComponentChange()\r\n        this.rerenderingInterval = window.setInterval(this.fetchActiveChatProfiles, 4000)\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.clearInterval(this.rerenderingInterval)\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.handleComponentChange()\r\n    }\r\n\r\n    fetchActiveChatProfiles = () => {\r\n        fetch(`${SERVER_URL}/chat-api/active-chats-profiles`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if (!this.state.username) return\r\n                if (!this.hasFilteredProfiles) {\r\n                    this.setState({\r\n                        activeChats: data.chats,\r\n                        activeChatsProfiles: data.profiles,\r\n                        renderedActiveChatsProfiles: data.profiles\r\n                    })\r\n                }\r\n            })\r\n    }\r\n\r\n    openModal = () => {\r\n        this.setState({\r\n            addingNewChat: true\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <Header page=\"Mensagens\" />\r\n                <div className=\"content d-flex messages-wrapper\">\r\n                    <ModalContactSearch\r\n                        addingNewChat={this.state.addingNewChat}\r\n                        setParentState={this.setState.bind(this)}\r\n                        modalProfiles={this.state.modalProfiles}\r\n                    />\r\n                    <div className=\"chats-list\">\r\n                        <ContactFilterInput\r\n                            activeChatsProfiles={this.state.activeChatsProfiles}\r\n                            setHasFilteredProfiles={bool => this.hasFilteredProfiles = bool}\r\n                            fetchActiveChatProfiles={this.fetchActiveChatProfiles}\r\n                            setParentState={this.setState.bind(this)}\r\n                            openModal={this.openModal}\r\n                        />\r\n                        <div className=\"list-group chats-container\">\r\n                            {this.state.renderedActiveChatsProfiles !== null ?\r\n                                this.state.renderedActiveChatsProfiles.map(profile => {\r\n                                    return (\r\n                                        <ContactListItem\r\n                                            profile={profile}\r\n                                            activeChats={this.state.activeChats}\r\n                                            activeChatsProfiles={this.state.activeChatsProfiles}\r\n                                        />\r\n                                    )\r\n                                })\r\n                                :\r\n                                <div className=\"messages-loader-container\">\r\n                                    <div className=\"loader\" />\r\n                                </div>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                    <Chat\r\n                        username={this.state.username}\r\n                        otherUsername={this.props.match.params.slug}\r\n                        chatId={this.state.chatId}\r\n                        openModal={this.openModal}\r\n                        updateUnreadMessagesNumber={this.props.updateUnreadMessagesNumber}\r\n                        updateMessagesComponent={this.fetchActiveChatProfiles}\r\n                    />\r\n                </div>\r\n                {!this.props.match.params.slug &&\r\n                    <BottomMenu />\r\n                }\r\n            </>\r\n        )\r\n    }\r\n}","import React, { useState } from 'react'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport Picker from 'emoji-picker-react'\r\n\r\nimport { SERVER_URL } from '../../../config/settings'\r\nimport { csrftoken, openCloseEmojiList } from '../../../config/utils'\r\n\r\nexport default function EditProfileModal(props) {\r\n    const profile = props.profile\r\n    const isOpen = props.isOpen\r\n    const closeModal = props.closeModal\r\n\r\n    const [profileImagePreview, setProfileImagePreview] = useState(`${SERVER_URL}${profile.photo}`)\r\n    const [editingBioContent, setEditingBioContent] = useState('')\r\n\r\n    const handleProfileImageChange = e => {\r\n        const reader = new FileReader()\r\n        reader.onload = () => {\r\n            if (reader.readyState === 2) {\r\n                setProfileImagePreview(reader.result)\r\n            }\r\n        }\r\n        try {\r\n            reader.readAsDataURL(e.target.files[0])\r\n        } catch {\r\n\r\n        }\r\n    }\r\n\r\n    const handleUsernameChange = e => {\r\n        if (e.target.value.trim() !== '') {\r\n            fetch(`${SERVER_URL}/profile-api/user/${e.target.value}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    if (data.bool !== 'false' && data.id !== profile.id) {\r\n                        document.querySelector('#username-taken').style.display = 'initial'\r\n                    } else {\r\n                        document.querySelector('#username-taken').style.display = 'none'\r\n                    }\r\n                })\r\n        }\r\n    }\r\n\r\n    const onEmojiSelect = (event, emojiObject) => {\r\n        setEditingBioContent(editingBioContent + emojiObject.emoji)\r\n    }\r\n\r\n    return (\r\n        <Modal show={isOpen}\r\n            onHide={closeModal}\r\n            size=\"lg\">\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>Editar perfil</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <form\r\n                    action={`${SERVER_URL}/update-profile`}\r\n                    className=\"d-flex flex-column justify-content-center\"\r\n                    id=\"update-profile-form\"\r\n                    method=\"POST\"\r\n                    encType=\"multipart/form-data\"\r\n                >\r\n                    <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrftoken} />\r\n                    <div className=\"d-flex flex-column justify-content-center align-items-center mb-2\">\r\n                        <img src={profileImagePreview}\r\n                            className=\"profile-img-big\"\r\n                            style={{ marginBottom: '25px' }}\r\n                        />\r\n                        <input\r\n                            type=\"file\"\r\n                            accept=\"image/png, image/jpg, image/jpeg\"\r\n                            className=\"profile-photo-input\"\r\n                            name=\"profile-photo\"\r\n                            onChange={handleProfileImageChange}\r\n                        />\r\n                    </div>\r\n                    <div className=\"d-flex justify-content-center\">\r\n                        Email: {profile.email}\r\n                    </div>\r\n                    <hr />\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"first-name\" className=\"profile-field-label\">Nome:</label>\r\n                        <input className=\"profile-field-input\" type=\"text\" name=\"first-name\" id=\"first-name\" placeholder={profile.first_name} />\r\n                    </div>\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"last-name\" className=\"profile-field-label\">Sobrenome:</label>\r\n                        <input className=\"profile-field-input\" type=\"text\" name=\"last-name\" id=\"last-name\" placeholder={profile.last_name} />\r\n                    </div>\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"username\" className=\"profile-field-label\">Nome de usuário:</label>\r\n                        <input\r\n                            className=\"profile-field-input\"\r\n                            type=\"text\"\r\n                            name=\"username\"\r\n                            id=\"username\"\r\n                            placeholder={`@${profile.user.username}`}\r\n                            onChange={handleUsernameChange}\r\n                        />\r\n                    </div>\r\n                    <div\r\n                        id=\"username-taken\"\r\n                        style={{ display: 'none', width: '100%', textAlign: 'center', padding: '3px' }}\r\n                    >\r\n                        <span>Nome de usuário já existe</span>\r\n                    </div>\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"birth-date\" className=\"profile-field-label\">Data de nascimento:</label>\r\n                        <input className=\"profile-field-input\" type=\"date\" name=\"birth-date\" id=\"birth-date\" defaultValue={profile.birth_date} />\r\n                    </div>\r\n                    <div className=\"emoji-list-container bio-emoji-list\" id=\"emoji-list-container\">\r\n                        <Picker onEmojiClick={onEmojiSelect} />\r\n                    </div>\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"bio\" className=\"profile-field-label\">Bio:</label>\r\n                        <div className=\"email-input-container\">\r\n                            <input\r\n                                className=\"profile-field-input-email\"\r\n                                type=\"email\"\r\n                                name=\"bio\"\r\n                                id=\"bio\"\r\n                                value={editingBioContent}\r\n                                placeholder={profile.bio}\r\n                                maxLength={100}\r\n                                onChange={e => setEditingBioContent(e.target.value)}\r\n                            />\r\n                            <label\r\n                                className=\"far fa-smile\"\r\n                                id=\"emoji-button\"\r\n                                onClick={() => openCloseEmojiList(false)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <button className=\"btn btn-grey\" onClick={closeModal}>Fechar</button>\r\n                <button className=\"btn btn-primary\" onClick={() => document.querySelector('form#update-profile-form').submit()}>Salvar</button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\nimport Modal from 'react-bootstrap/Modal'\r\n\r\nimport { SERVER_URL } from '../config/settings'\r\nimport ProfileListItem from '../components/ProfileListItem'\r\n\r\nexport default function LikesModal(props) {\r\n    const [myProfile, setMyProfile] = useState(null)\r\n    useEffect(() => {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => setMyProfile(data))\r\n    }, [])\r\n\r\n    return (\r\n        <Modal show={props.isOpen}\r\n            onHide={props.hideModal}\r\n            size=\"lg\">\r\n            <Modal.Header closeButton>\r\n                <Modal.Title><strong>Curtidas</strong></Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <div className=\"list-group\" style={{ height: '400px', overflow: 'hidden', overflowY: 'scroll' }}>\r\n                    {props.likes &&\r\n                        props.likes.map(like => like.profile).map(profile => {\r\n                            return (\r\n                                <ProfileListItem\r\n                                    profile={profile}\r\n                                    myProfile={myProfile}\r\n                                    style={{ borderTop: 'none', borderLeft: 'none', borderRight: 'none' }}\r\n                                    onClick={props.hideModal}\r\n                                />\r\n                            )\r\n                        })}\r\n                </div>\r\n            </Modal.Body>\r\n        </Modal>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\n\r\nimport { SERVER_URL } from '../../../config/settings'\r\nimport LikesModal from '../../../components/LikesModal'\r\nimport PostListItem from '../../../components/PostListItem'\r\n\r\nexport default function Posts(props) {\r\n    const [myProfile, setMyProfile] = useState(null)\r\n    const [likesModal, setLikesModal] = useState({ isOpen: false, likes: null })\r\n    const profile = props.profile\r\n\r\n    useEffect(() => {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => setMyProfile(data))\r\n    }, [])\r\n\r\n    const hideLikesModal = () => {\r\n        setLikesModal({\r\n            isOpen: false,\r\n            likes: null\r\n        })\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <LikesModal\r\n                isOpen={likesModal.isOpen}\r\n                likes={likesModal.likes}\r\n                hideModal={hideLikesModal}\r\n            />\r\n            <div className=\"post-list\">\r\n                {profile && myProfile ?\r\n                    <>\r\n                        {profile.posts.length ? profile.posts.map(post => {\r\n                            return (\r\n                                <PostListItem\r\n                                    post={post}\r\n                                    myProfile={myProfile}\r\n                                    renderParent={props.fetchProfile}\r\n                                    openLikesModal={likes => setLikesModal({ isOpen: true, likes: likes })}\r\n                                />\r\n                            )\r\n                        }) :\r\n                            <div className=\"no-posts-container\">\r\n                                {profile.id === myProfile.id ?\r\n                                    <h3 style={{ marginTop: '50px' }}>Você não tem posts</h3>\r\n                                    :\r\n                                    <h3 style={{ marginTop: '50px' }}>{profile.first_name} não tem posts</h3>\r\n                                }\r\n                            </div>\r\n                        }\r\n                    </>\r\n                    :\r\n                    <div className=\"posts-loader-container\" >\r\n                        <div className=\"loader\" />\r\n                    </div>\r\n                }\r\n            </div>\r\n        </>\r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function Interests(props) {\r\n    const profile = props.profile\r\n\r\n    return (\r\n        <div className=\"interests-page-container\">\r\n            <h3>Interesses públicos de {profile.first_name}</h3>\r\n            <div className=\"interest-list-container\">\r\n                {profile && profile.interests.filter(i => i.public).map(interest => {\r\n                    return (\r\n                        <>\r\n                            {interest.title &&\r\n                                <>\r\n                                    <hr />\r\n                                    <li className=\"interest-item\">\r\n                                        {interest.title[0].toUpperCase() + interest.title.slice(1)}\r\n                                        <Link to={`/interesses/${interest.title}`}>\r\n                                            <button className=\"btn btn-secondary\" style={{ padding: '5px' }}>Pesquisar usuários</button>\r\n                                        </Link>\r\n                                    </li>\r\n                                </>\r\n                            }\r\n                        </>\r\n                    )\r\n                })}\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../../../config/settings'\r\n\r\nexport default function ProfileData(props) {\r\n    const profile = props.profile\r\n\r\n    return (\r\n        <div className=\"profile-data-container\">\r\n            <div className=\"d-flex flex-column align-items-start\" style={{ textAlign: 'start' }}>\r\n                <p>\r\n                    <img src={`${SERVER_URL}${profile.photo}`}\r\n                        className=\"profile-img-big\"\r\n                        style={{ marginBottom: '25px' }}\r\n                    />\r\n                </p>\r\n                <p style={{ marginBottom: 0 }}><strong>{profile.first_name} {profile.last_name}</strong></p>\r\n                <p className=\"text-secondary\" style={{ marginTop: 0 }}>@{profile.user.username}</p>\r\n                <p>{profile.bio}</p>\r\n                <p className=\"text-secondary\">\r\n                    <i className=\"far fa-calendar-alt\"></i> Entrou em {profile.created.split('-').reverse().join('/')}\r\n                </p>\r\n                <p>\r\n                    <Link to={`/user/${profile.slug}/amigos`} style={{ color: '#000' }}>\r\n                        <strong>{profile.friends.length}</strong> {profile.friends.length === 1 ? 'amigo' : 'amigos'}\r\n                    </Link>\r\n                </p>\r\n            </div>\r\n            {props.children}\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../../config/settings'\r\nimport Header from '../../components/fixed/Header'\r\nimport EditProfileModal from './components/EditProfileModal'\r\nimport Posts from './components/Posts'\r\nimport Interests from './components/interests/Interests'\r\nimport ProfileData from './components/ProfileData'\r\nimport BottomMenu from '../../components/fixed/bottom-menu/BottomMenu'\r\n\r\nexport default function MyProfile() {\r\n    const [myProfile, setProfile] = useState(null)\r\n    const [isEditing, setIsEditing] = useState(false)\r\n    const [currentPageIsPosts, setCurrentPageIsPosts] = useState(true)\r\n\r\n    document.title = 'Perfil / Napker'\r\n\r\n    useEffect(() => {\r\n        fetchProfile()\r\n    }, [])\r\n\r\n    const fetchProfile = () => {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => setProfile(data))\r\n    }\r\n\r\n    const switchPage = e => {\r\n        document.querySelectorAll('.profile-page-menu-item-active').forEach(el => {\r\n            el.classList.remove('profile-page-menu-item-active')\r\n        })\r\n        e.target.classList.add('profile-page-menu-item-active')\r\n        if (e.target.id === 'profile-posts-page-menu-item') {\r\n            setCurrentPageIsPosts(true)\r\n        } else if (e.target.id === 'profile-interests-page-menu-item') {\r\n            setCurrentPageIsPosts(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header page=\"Perfil\" />\r\n            <div className=\"content\">\r\n                {myProfile ?\r\n                    <>\r\n                        <EditProfileModal\r\n                            profile={myProfile}\r\n                            isOpen={isEditing}\r\n                            closeModal={() => setIsEditing(false)}\r\n                        />\r\n\r\n                        <ProfileData profile={myProfile}>\r\n                            <div className=\"myprofile-btn-wrapper\">\r\n                                <button\r\n                                    className=\"btn btn-secondary\"\r\n                                    type=\"button\"\r\n                                    onClick={() => setIsEditing(true)}\r\n                                    style={{ marginBottom: '10px' }}\r\n                                >\r\n                                    Editar perfil\r\n                                </button>\r\n                                <Link to='/perfil/meus-interesses'>\r\n                                    <button className=\"btn btn-secondary\">Editar interesses</button>\r\n                                </Link>\r\n                            </div>\r\n                        </ProfileData>\r\n                        <div className=\"profile-page-menu\">\r\n                            <div\r\n                                className=\"profile-page-menu-item profile-page-menu-item-active\"\r\n                                id=\"profile-posts-page-menu-item\"\r\n                                onClick={switchPage}\r\n                            >\r\n                                Posts ({myProfile.posts.length})\r\n                            </div>\r\n                            <div\r\n                                className=\"profile-page-menu-item\"\r\n                                id=\"profile-interests-page-menu-item\"\r\n                                onClick={switchPage}\r\n                            >\r\n                                Interesses ({myProfile.interests.filter(i => i.public).length})\r\n                            </div>\r\n                        </div>\r\n                        {currentPageIsPosts ?\r\n                            <Posts profile={myProfile} fetchProfile={fetchProfile} />\r\n                            :\r\n                            <Interests profile={myProfile} />\r\n                        }\r\n                    </> :\r\n                    <div className=\"profile-page-loader-container\">\r\n                        <div className=\"loader\" />\r\n                    </div>\r\n                }\r\n            </div>\r\n            <BottomMenu />\r\n        </>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { handleLogout } from '../../../config/utils'\r\n\r\nexport default function SettingsMenu(props) {\r\n\r\n    return (\r\n        <div className=\"settings-page-menu\">\r\n            <div className=\"d-flex flex-column w-100\">\r\n                <Link to=\"/configurações/perfis-bloqueados\" style={{ textDecoration: 'none', width: '100%' }}>\r\n                    <li id=\"blocked-profiles\" onClick={() => props.pageChange('blocked-profiles')}>\r\n                        Perfis bloqueados\r\n                        <i className=\"fas fa-angle-right\" />\r\n                    </li>\r\n                </Link>\r\n                <Link to=\"/configurações/segurança\" style={{ textDecoration: 'none', width: '100%' }}>\r\n                    <li id=\"security\" onClick={() => props.pageChange('security')}>\r\n                        Segurança\r\n                        <i className=\"fas fa-angle-right\" />\r\n                    </li>\r\n                </Link>\r\n                <Link to=\"/configurações/faq\" style={{ textDecoration: 'none', width: '100%' }}>\r\n                    <li id=\"faq\" onClick={() => props.pageChange('faq')}>\r\n                        FAQ\r\n                        <i className=\"fas fa-angle-right\" />\r\n                    </li>\r\n                </Link>\r\n                <Link to=\"/configurações/fale-conosco\" style={{ textDecoration: 'none', width: '100%' }}>\r\n                    <li id=\"feedback\" onClick={() => props.pageChange('feedback')}>\r\n                        Fale conosco\r\n                        <i className=\"fas fa-angle-right\" />\r\n                    </li>\r\n                </Link>\r\n            </div>\r\n            <li className=\"logout-btn\" onClick={handleLogout}>\r\n                Sair da conta\r\n            </li>\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\n\r\nimport { SERVER_URL } from '../../../config/settings'\r\nimport ProfileListItem from '../../../components/ProfileListItem'\r\n\r\nexport default function BlockUser() {\r\n    const [blockedProfiles, setBlockedProfiles] = useState(null)\r\n    const [myProfile, setMyProfile] = useState(null)\r\n\r\n    useEffect(() => {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => setMyProfile(data))\r\n        fetch(`${SERVER_URL}/profile-api/get-blocked-profiles`)\r\n            .then(response => response.json())\r\n            .then(data => setBlockedProfiles(data))\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"settings-description-container\">\r\n            {blockedProfiles !== null && myProfile !== null ?\r\n                <>\r\n                    {!!blockedProfiles.length ?\r\n                        <div className=\"blocked-profiles-list\">\r\n                            <div className=\"blocked-profiles-title\">\r\n                                <h4>\r\n                                    Você possui {blockedProfiles.length} {blockedProfiles.length === 1 ? 'perfil bloqueado' : 'perfis bloqueados'}\r\n                                </h4>\r\n                            </div>\r\n                            {blockedProfiles.map(profile => {\r\n                                return (\r\n                                    <ProfileListItem\r\n                                        profile={profile}\r\n                                        myProfile={myProfile}\r\n                                        style={{ borderTop: 'none', borderLeft: 'none', borderRight: 'none' }}\r\n                                    />\r\n                                )\r\n                            })\r\n                            }\r\n                        </div>\r\n                        :\r\n                        <div className=\"no-blocked-profiles\">\r\n                            <h3>Você não possui perfis bloqueados</h3>\r\n                        </div>\r\n                    }\r\n                </>\r\n                :\r\n                <div className=\"settings-loader-container\">\r\n                    <div className=\"loader\" />\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\nexport default function SecurityMenu(props) {\r\n    return (\r\n        <div className=\"settings-description-container\" style={{ background: 'var(--body-background)' }}>\r\n            <div className=\"security-page-menu\">\r\n                <div className=\"d-flex flex-column w-100\">\r\n                    <li>\r\n                        <strong>Segurança</strong>\r\n                    </li>\r\n                    <Link to=\"/configurações/alterar-senha\" style={{ textDecoration: 'none', width: '100%' }}>\r\n                        <li id=\"change-password\" onClick={() => props.pageChange('change-password')}>\r\n                            Alterar senha\r\n                            <i className=\"fas fa-angle-right\" />\r\n                        </li>\r\n                    </Link>\r\n                    <Link to=\"/configurações/deletar-conta\" style={{ textDecoration: 'none', width: '100%' }}>\r\n                        <li id=\"delete-account\" onClick={() => props.pageChange('delete-account')}>\r\n                            Apagar conta\r\n                            <i className=\"fas fa-angle-right\" />\r\n                        </li>\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\n\r\n\r\nexport default function Faq() {\r\n\r\n    return (\r\n        <div className=\"settings-description-container\" style={{ background: 'var(--body-background)' }}>\r\n            \r\n        </div>\r\n    )\r\n}","import React, { useState } from 'react'\r\n\r\nimport { csrftoken } from '../../../../../config/utils'\r\nimport { SERVER_URL } from '../../../../../config/settings'\r\n\r\nexport default function ChangePassword() {\r\n    const [errorMessage, setErrorMessage] = useState(null)\r\n    const [successMessage, setSuccessMessage] = useState(null)\r\n\r\n    const handleFormSubmit = e => {\r\n        e.preventDefault()\r\n        let passwordEl = document.querySelector('#password')\r\n        let newPasswordEl = document.querySelector('#new_password')\r\n        let newPasswordcEl = document.querySelector('#new_passwordc')\r\n        let password = passwordEl.value\r\n        let newPassword = newPasswordEl.value\r\n        let newPasswordc = newPasswordcEl.value\r\n        for (let input of document.querySelectorAll('form > input')) {\r\n            if (!input.value) {\r\n                alert('Todos os campos devem ser preenchidos!')\r\n                return\r\n            }\r\n        }\r\n        if (newPassword !== newPasswordc) {\r\n            setErrorMessage('Os campos \"Nova senha\" e \"Confirmar nova senha\" devem ter o mesmo valor!')\r\n            setSuccessMessage(null)\r\n            return\r\n        }\r\n        fetch(`${SERVER_URL}/change-password`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify({\r\n                password: password,\r\n                new_password: newPassword,\r\n                new_passwordc: newPasswordc,\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if (data === 'success') {\r\n                    setSuccessMessage('Senha alterada com successo!')\r\n                    setErrorMessage(null)\r\n                    passwordEl.value = newPasswordEl.value = newPasswordcEl.value = ''\r\n                } else {\r\n                    setErrorMessage(data)\r\n                    setSuccessMessage(null)\r\n                }\r\n            })\r\n    }\r\n\r\n    return (\r\n        <div className=\"settings-description-container\">\r\n            <div\r\n                className=\"d-flex justify-content-start align-items-center\"\r\n                style={{ background: '#fff', padding: '15px', borderBottom: '1px solid var(--border-color)' }}>\r\n                <i\r\n                    class=\"fas fa-arrow-left left-arrow-icon mr-2\"\r\n                    onClick={() => window.history.back()}\r\n                />\r\n                <strong style={{ fontSize: '1.2rem' }}>Segurança</strong>\r\n            </div>\r\n            {errorMessage &&\r\n                <div class=\"alert alert-danger alert\" role=\"alert\">\r\n                    {errorMessage}\r\n                </div>\r\n            }\r\n            {successMessage &&\r\n                <div class=\"alert alert-success alert\" role=\"alert\">\r\n                    {successMessage}\r\n                </div>\r\n            }\r\n            <div className=\"settings-page-title-container\">\r\n                <h3>Alterar senha</h3>\r\n            </div>\r\n            <hr />\r\n            <form className=\"change-password-form\">\r\n                <input id=\"password\" type=\"password\" placeholder=\"Senha atual\" autoFocus />\r\n                <br />\r\n                <a href={`${SERVER_URL}/recuperar-senha`}>Esqueceu sua senha?</a>\r\n                <hr />\r\n                <br />\r\n                <input id=\"new_password\" type=\"password\" placeholder=\"Nova senha\" />\r\n                <br />\r\n                <input id=\"new_passwordc\" type=\"password\" placeholder=\"Confirmar nova senha\" />\r\n                <br />\r\n                <button\r\n                    className=\"btn btn-primary\"\r\n                    type=\"submit\"\r\n                    onClick={handleFormSubmit}\r\n                >Confirmar</button>\r\n            </form>\r\n        </div>\r\n    )\r\n}","import React, { useState } from 'react'\r\n\r\nimport { csrftoken } from '../../../../../config/utils'\r\nimport { SERVER_URL } from '../../../../../config/settings'\r\n\r\nexport default function DeleteAccount() {\r\n    const [displayErrorMessage, setDisplayErrorMessage] = useState(null)\r\n\r\n    const deleteAccount = () => {\r\n        if (window.confirm('Tem certeza que deseja deletar a sua conta ?\\nEsta ação é irreversível?')) {\r\n            const password = document.querySelector('#password').value\r\n            if (!password) {\r\n                window.alert('A senha não pode ficar em branco!')\r\n            } else {\r\n                fetch(`${SERVER_URL}/delete-account`, {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-type': 'application/json',\r\n                        'X-CSRFToken': csrftoken,\r\n                    },\r\n                    body: JSON.stringify({\r\n                        password: password\r\n                    })\r\n                })\r\n                    .then(response => response.json())\r\n                    .then(data => {\r\n                        if (data === 'Wrong password') {\r\n                            setDisplayErrorMessage(true)\r\n                        } else {\r\n                            window.alert('Conta deletada com sucesso.')\r\n                            window.location.href = SERVER_URL\r\n                        }\r\n                    })\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"settings-description-container\">\r\n            <div\r\n                className=\"d-flex justify-content-start align-items-center\"\r\n                style={{ background: '#fff', padding: '15px', borderBottom: '1px solid var(--border-color)' }}\r\n            >\r\n                <i\r\n                    class=\"fas fa-arrow-left left-arrow-icon mr-2\"\r\n                    onClick={() => window.history.back()}\r\n                />\r\n                <strong style={{ fontSize: '1.2rem' }}>Segurança</strong>\r\n            </div>\r\n            {displayErrorMessage &&\r\n                <div className=\"alert\">\r\n                    <div className=\"alert alert-danger\" role=\"alert\">Senha incorreta!</div>\r\n                </div>\r\n            }\r\n            <div className=\"settings-page-title-container\">\r\n                <h3>Deletar conta</h3>\r\n            </div>\r\n            <hr />\r\n            <div className=\"delete-account-confirmation\">\r\n                <input id=\"password\" type=\"password\" placeholder=\"Senha\" autoFocus />\r\n                <hr />\r\n                <br />\r\n                Tem certeza que deseja apagar a sua conta ?\r\n                <br />\r\n                Esta ação é irreversível\r\n                <br />\r\n                <button\r\n                    className=\"btn btn-danger\"\r\n                    onClick={deleteAccount}\r\n                >Deletar conta</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\n\r\nimport { SERVER_URL } from '../../../config/settings'\r\nimport { csrftoken } from '../../../config/utils'\r\n\r\n\r\nexport default function Feedback() {\r\n    const [name, setName] = useState(null)\r\n\r\n    let selectedRating = 0\r\n\r\n    useEffect(() => {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => setName(data.first_name))\r\n    }, [])\r\n\r\n    const selectFace = e => {\r\n        const img = e.target\r\n        document.querySelectorAll('.option-container > img').forEach(image => {\r\n            image.src = `/static/media/feedback-faces/${image.id}bw.png`\r\n        })\r\n        img.src = `/static/media/feedback-faces/${img.id}.png`\r\n        selectedRating = img.id\r\n    }\r\n\r\n    const thankYouPage = () => {\r\n        document.querySelector('.feedback-form > h3').innerHTML = `Muito obrigado${name !== null ? (`, ${name}`) : ''}!`\r\n        document.querySelector('.feedback-faces-container').innerHTML = 'A sua mensagem nos ajudará a tornar o Napker cada vez inclusivo e transparente.\\nCaso pense em mais alguma coisa, sinta-se à vontade para entrar em contato novamente.'\r\n        document.querySelector('.textarea-container').innerHTML = ''\r\n    }\r\n\r\n\r\n    const handleFormSubmit = e => {\r\n        const message = document.querySelector('.feedback-form > .textarea-container > textarea').value\r\n        e.preventDefault()\r\n        fetch(`${SERVER_URL} /settings-api/feedback`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify({\r\n                'rating': selectedRating,\r\n                'message': message\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n        thankYouPage()\r\n    }\r\n\r\n    return (\r\n        <div className=\"settings-description-container\">\r\n            <div className=\"feedback-form\">\r\n                <h3>Nos ajude a melhorar</h3>\r\n                <hr />\r\n                <div className=\"feedback-faces-container\">\r\n                    <h6>Como está sendo a sua experiência no Napker até agora?</h6>\r\n                    <div className=\"d-flex justify-content-center\">\r\n                        <div className=\"option-container\">\r\n                            <img\r\n                                src=\"/static/media/feedback-faces/5bw.png\"\r\n                                id=\"5\"\r\n                                onClick={selectFace}\r\n                            />\r\n                        </div>\r\n                        <div className=\"option-container\">\r\n                            <img\r\n                                src=\"/static/media/feedback-faces/4bw.png\"\r\n                                id=\"4\"\r\n                                onClick={selectFace}\r\n                            />\r\n                        </div>\r\n                        <div className=\"option-container\">\r\n                            <img\r\n                                src=\"/static/media/feedback-faces/3bw.png\"\r\n                                id=\"3\"\r\n                                onClick={selectFace}\r\n                            />\r\n                        </div>\r\n                        <div className=\"option-container\">\r\n                            <img\r\n                                src=\"/static/media/feedback-faces/2bw.png\"\r\n                                id=\"2\"\r\n                                onClick={selectFace}\r\n                            />\r\n                        </div>\r\n                        <div className=\"option-container\">\r\n                            <img\r\n                                src=\"/static/media/feedback-faces/1bw.png\"\r\n                                id=\"1\"\r\n                                onClick={selectFace}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <hr />\r\n                <div className=\"textarea-container\">\r\n                    <textarea placeholder=\"Digite a sua mensagem aqui...\" />\r\n                    <button className=\"btn btn-primary w-100\" onClick={handleFormSubmit}>Enviar</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useEffect } from 'react'\r\n\r\nimport Header from '../../components/fixed/Header'\r\nimport SettingsMenu from './components/SettingsMenu'\r\nimport BlockedProfiles from './components/BlockedProfiles'\r\nimport SecurityMenu from './components/security_/SecurityMenu'\r\nimport Faq from './components/Faq'\r\nimport ChangePassword from './components/security_/components/ChangePassword'\r\nimport DeleteAccount from './components/security_/components/DeleteAccount'\r\nimport BottomMenu from '../../components/fixed/bottom-menu/BottomMenu'\r\nimport Feedback from './components/Feedback'\r\n\r\n\r\nexport default function Settings(props) {\r\n    const defaultPage = 'blocked-profiles'\r\n    if (!props.page) props.page = 'default'\r\n\r\n    document.title = 'Configurações / Napker'\r\n\r\n    useEffect(() => {\r\n        document.getElementById(props.page !== 'default' ? props.page : defaultPage) &&\r\n            document.getElementById(props.page !== 'default' ? props.page : defaultPage).classList.add('active')\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (props.page !== 'default') {\r\n            document.querySelector('.settings-description-container') &&\r\n                document.querySelector('.settings-description-container').classList.remove('mobile-d-none')\r\n        } else {\r\n            document.querySelector('.settings-description-container') &&\r\n                document.querySelector('.settings-description-container').classList.add('mobile-d-none')\r\n        }\r\n    }, [props.page])\r\n\r\n    const pageChange = page => {\r\n        document.querySelectorAll('.active').forEach(el => {\r\n            el.classList.remove('active')\r\n        })\r\n        document.getElementById(page).classList.add('active')\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {visualViewport.width < 635 ?\r\n                <>\r\n                    {props.page === 'default' || props.page === 'blocked-profiles' || props.page === 'security' ?\r\n                        < Header page=\"Configurações\" backArrow={props.page !== 'default'} />\r\n                        :\r\n                        <>\r\n                        </>\r\n                    }\r\n                </>\r\n                :\r\n                < Header page=\"Configurações\" />\r\n            }\r\n            <div className=\"content\">\r\n                <div className=\"settings-page-container\">\r\n\r\n                    <SettingsMenu pageChange={pageChange} />\r\n                    {(props.page === 'blocked-profiles' || props.page === 'default') &&\r\n                        <BlockedProfiles />\r\n                    }\r\n\r\n                    {props.page === 'security' &&\r\n                        <SecurityMenu pageChange={pageChange} />\r\n                    }\r\n\r\n                    {props.page === 'change-password' &&\r\n                        <ChangePassword />\r\n                    }\r\n\r\n                    {props.page === 'delete-account' &&\r\n                        <DeleteAccount />\r\n                    }\r\n\r\n                    {props.page === 'faq' &&\r\n                        <Faq />\r\n                    }\r\n\r\n                    {props.page === 'feedback' &&\r\n                        <Feedback />\r\n                    }\r\n\r\n                </div>\r\n            </div>\r\n            <BottomMenu />\r\n        </>\r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../../config/settings'\r\nimport { csrftoken } from '../../config/utils'\r\nimport Header from '../../components/fixed/header'\r\nimport Posts from './components/Posts'\r\nimport Interests from './components/interests/Interests'\r\nimport ProfileData from './components/ProfileData'\r\nimport BottomMenu from '../../components/fixed/bottom-menu/BottomMenu'\r\n\r\nclass Profile extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            myProfile: null,\r\n            profile: null,\r\n            alertMessage: null,\r\n            relationshipButtonLabel: '',\r\n            currentPageIsPosts: true,\r\n        }\r\n        this.slug = this.props.match.params.slug\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.fetchProfile()\r\n    }\r\n\r\n    componentDidMount() {\r\n        fetch(`${SERVER_URL}/profile-api/relationship/${this.slug}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                let label\r\n                switch (data.relationship) {\r\n                    case 'friends':\r\n                        label = 'Amigos'\r\n                        break\r\n                    case 'invite-sent':\r\n                        label = 'Solicitado'\r\n                        break\r\n                    case 'invite-received':\r\n                        label = 'Aceitar'\r\n                        break\r\n                    case 'none':\r\n                        label = 'Solicitar'\r\n                }\r\n                this.setState({\r\n                    relationshipButtonLabel: label\r\n                })\r\n            })\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        let btn = document.querySelector('#profile-page-relationship-btn')\r\n        if (btn) {\r\n            switch (btn.innerHTML) {\r\n                case 'Amigos':\r\n                    btn.classList.add('btn-primary')\r\n                    btn.onmouseenter = () => {\r\n                        if (btn.innerHTML === 'Amigos') btn.innerHTML = 'Remover'\r\n                    }\r\n                    btn.onmouseout = () => {\r\n                        if (btn.innerHTML === 'Remover') btn.innerHTML = 'Amigos'\r\n                    }\r\n                    btn.classList.add('friend-btn')\r\n                    btn.classList.remove('d-none')\r\n                    break\r\n                case 'Solicitado':\r\n                    btn.classList.add('btn-primary')\r\n                    btn.classList.remove('d-none')\r\n                    break\r\n                case 'Aceitar':\r\n                    btn.classList.add('btn-primary')\r\n                    btn.classList.remove('d-none')\r\n                    break\r\n                case 'Solicitar':\r\n                    btn.classList.add('btn-secondary')\r\n                    btn.classList.remove('d-none')\r\n            }\r\n        }\r\n    }\r\n\r\n    fetchProfile = () => {\r\n        fetch(`${SERVER_URL}/profile-api/user/${this.slug}`)\r\n            .then(response => response.json())\r\n            .then(data => this.setState({\r\n                profile: data\r\n            }))\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => this.setState({ myProfile: data }))\r\n    }\r\n\r\n    sendFriendRequest = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/send-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(pk)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n    }\r\n\r\n    cancelFriendRequest = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/cancel-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(pk)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n    }\r\n\r\n    removeFromFriends = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/remove-from-friends`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(pk)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n    }\r\n\r\n    acceptFriendRequest = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/reply-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify({\r\n                'senderid': pk,\r\n                'reply': 'accept'\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(data)\r\n                this.props.updateNotificationsNumber()\r\n            })\r\n    }\r\n\r\n    handleRelationshipUpdate = e => {\r\n        const btn = e.target\r\n        if (btn.innerHTML === 'Solicitar') {\r\n            this.sendFriendRequest(btn.dataset.pk)\r\n            btn.innerHTML = 'Solicitado'\r\n            btn.className = 'btn btn-primary'\r\n        } else if (btn.innerHTML === 'Solicitado') {\r\n            this.cancelFriendRequest(btn.dataset.pk)\r\n            btn.innerHTML = 'Solicitar'\r\n            btn.className = 'btn btn-secondary'\r\n        } else if (btn.innerHTML === 'Amigos' || btn.innerHTML === 'Remover') {\r\n            if (window.confirm(`Remover @${this.state.profile.user.username} dos amigos?`)) {\r\n                this.removeFromFriends(btn.dataset.pk)\r\n                btn.innerHTML = 'Solicitar'\r\n                btn.className = 'btn btn-secondary'\r\n            }\r\n        } else if (btn.innerHTML === 'Aceitar') {\r\n            this.acceptFriendRequest(btn.dataset.pk)\r\n            btn.innerHTML = 'Amigos'\r\n            btn.className = 'btn btn-primary'\r\n        }\r\n    }\r\n\r\n    blockUnblockUser = () => {\r\n        if (this.state.myProfile.blocked_users.map(u => u.id).includes(this.state.profile.user.id)) {\r\n            if (window.confirm(`Tem certeza que deseja desbloquear ${this.state.profile.first_name} ?`)) {\r\n                fetch(`${SERVER_URL}/profile-api/unblock-user`, {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-type': 'application/json',\r\n                        'X-CSRFToken': csrftoken,\r\n                    },\r\n                    body: JSON.stringify(this.state.profile)\r\n                })\r\n                    .then(response => response.json())\r\n                    .then(data => {\r\n                        console.log(data)\r\n                        this.setState({ alertMessage: `Você desbloqueou @${this.state.profile.user.username}.` })\r\n                        this.fetchProfile()\r\n                    })\r\n            }\r\n        } else {\r\n            if (window.confirm(`Tem certeza que deseja bloquear ${this.state.profile.first_name} ?`)) {\r\n                fetch(`${SERVER_URL}/profile-api/block-user`, {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-type': 'application/json',\r\n                        'X-CSRFToken': csrftoken,\r\n                    },\r\n                    body: JSON.stringify(this.state.profile)\r\n                })\r\n                    .then(response => response.json())\r\n                    .then(data => {\r\n                        console.log(data)\r\n                        this.setState({\r\n                            alertMessage: `Você bloqueou @${this.state.profile.user.username}.\r\n                         ${this.state.profile.first_name} não conseguirá mais ver o seu perfil ou te enviar mensagens.`\r\n                        })\r\n                        this.fetchProfile()\r\n                    })\r\n            }\r\n        }\r\n        this.fetchProfile()\r\n        document.querySelector('#view-more-select').style.display = 'none'\r\n    }\r\n\r\n    openCloseExtraOptions = () => {\r\n        const el = document.querySelector('#view-more-select')\r\n        const style = el.style\r\n        if (!style.display) style.display = 'none'\r\n        if (style.display === 'none') {\r\n            document.querySelector('#view-more-icon').classList.add('view-more-icon-active')\r\n            style.display = 'flex'\r\n        } else {\r\n            document.querySelector('#view-more-icon').classList.remove('view-more-icon-active')\r\n            style.display = 'none'\r\n        }\r\n    }\r\n\r\n    switchPage = e => {\r\n        document.querySelectorAll('.profile-page-menu-item-active').forEach(el => {\r\n            el.classList.remove('profile-page-menu-item-active')\r\n        })\r\n        e.target.classList.add('profile-page-menu-item-active')\r\n        if (e.target.id === 'profile-posts-page-menu-item') {\r\n            this.setState({ currentPageIsPosts: true })\r\n        } else if (e.target.id === 'profile-interests-page-menu-item') {\r\n            this.setState({ currentPageIsPosts: false })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <Header page={this.state.profile ? `${this.state.profile.first_name} ${this.state.profile.last_name}` : 'Perfil'}\r\n                    backArrow={true}\r\n                />\r\n                {this.state.myProfile !== null && this.state.profile !== null ?\r\n                    <div className=\"content\">\r\n                        {this.state.profile.blocked_users.map(u => u.id).includes(this.state.myProfile.user.id) ?\r\n                            <div className=\"user-blocked-me-container\">\r\n                                <h3>O usuário te bloqueou</h3>\r\n                            </div>\r\n                            :\r\n                            <>\r\n                                {this.state.alertMessage &&\r\n                                    <div class=\"alert alert-success profile-page-alert-success\" role=\"alert\">\r\n                                        {this.state.alertMessage}\r\n                                    </div>\r\n                                }\r\n                                <ProfileData profile={this.state.profile}>\r\n                                    <div className=\"profile-btn-wrapper\">\r\n                                        <i\r\n                                            className=\"fas fa-ellipsis-h btn btn-secondary mr-2\"\r\n                                            id=\"view-more-icon\"\r\n                                            onClick={this.openCloseExtraOptions}\r\n                                        />\r\n                                        <div className=\"view-more-select profile-view-more-select\" id=\"view-more-select\">\r\n                                            <Link to={`/mensagens/${this.state.profile.slug}`} style={{ color: '#000', textDecoration: 'none', borderBottom: '1px solid rgba(0,0,0,.1)' }}>\r\n                                                {!this.state.myProfile.blocked_users.map(u => u.id).includes(this.state.profile.user.id) &&\r\n                                                    <li>\r\n                                                        <i class=\"fas fa-envelope text-secondary\" />\r\n                                                        Enviar mensagem\r\n                                                    </li>\r\n                                                }\r\n                                            </Link>\r\n                                            <li onClick={this.blockUnblockUser}>\r\n                                                <i class=\"fas fa-user-lock text-secondary\" />\r\n                                                {this.state.myProfile.blocked_users.map(u => u.id).includes(this.state.profile.user.id) ?\r\n                                                    'Desbloquear'\r\n                                                    :\r\n                                                    'Bloquear'\r\n                                                }\r\n                                            </li>\r\n                                        </div>\r\n                                        {!this.state.myProfile.blocked_users.map(u => u.id).includes(this.state.profile.user.id) &&\r\n                                            <button className=\"btn d-none\"\r\n                                                id=\"profile-page-relationship-btn\"\r\n                                                data-pk={this.state.profile.id}\r\n                                                onClick={this.handleRelationshipUpdate}\r\n                                            >{this.state.relationshipButtonLabel}</button>\r\n                                        }\r\n                                    </div>\r\n                                </ProfileData>\r\n                                <div className=\"profile-page-menu\">\r\n                                    <div\r\n                                        className=\"profile-page-menu-item profile-page-menu-item-active\"\r\n                                        id=\"profile-posts-page-menu-item\"\r\n                                        onClick={this.switchPage}\r\n                                    >\r\n                                        Posts ({this.state.profile.posts.length})\r\n                                    </div>\r\n                                    <div\r\n                                        className=\"profile-page-menu-item\"\r\n                                        id=\"profile-interests-page-menu-item\"\r\n                                        onClick={this.switchPage}\r\n                                    >\r\n                                        Interesses ({this.state.profile.interests.filter(i => i.public).length})\r\n                                    </div>\r\n                                </div>\r\n                                {this.state.currentPageIsPosts ?\r\n                                    <Posts profile={this.state.profile} fetchProfile={this.fetchProfile} /> :\r\n                                    <Interests profile={this.state.profile} />\r\n                                }\r\n                            </>\r\n                        }\r\n                    </div>\r\n                    :\r\n                    <div className=\"profile-page-loader-container\">\r\n                        <div className=\"loader\" />\r\n                    </div>\r\n                }\r\n                <BottomMenu />\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Profile","import React, { useEffect, useState } from 'react'\r\nimport { useParams } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../../../config/settings'\r\nimport Header from '../../../components/fixed/header'\r\nimport ProfileListItem from '../../../components/ProfileListItem'\r\nimport BottomMenu from '../../../components/fixed/bottom-menu/BottomMenu'\r\n\r\nexport default function Friends() {\r\n    const [friends, setFriends] = useState(null)\r\n    const [profile, setProfile] = useState(null)\r\n    const [myProfile, setMyProfile] = useState(null)\r\n    const { slug } = useParams()\r\n\r\n    useEffect(() => {\r\n        fetch(`${SERVER_URL}/profile-api/user/${slug}`)\r\n            .then(response => response.json())\r\n            .then(data => setProfile(data))\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => setMyProfile(data))\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (profile) {\r\n            fetch(`${SERVER_URL}/profile-api/get-friends-profiles/${profile.slug}`)\r\n                .then(response => response.json())\r\n                .then(data => setFriends(data))\r\n        }\r\n    }, [profile])\r\n\r\n    return (\r\n        <>\r\n            <Header page={profile !== null ? `${profile.first_name} ${profile.last_name} / Amigos` : 'Perfil / Amigos'}\r\n                backArrow={true}\r\n            />\r\n            <div className=\"content\">\r\n                <div className=\"list-group profile-friends-container\">\r\n                    {friends !== null && myProfile !== null ?\r\n                        <>\r\n                            {friends.length ? friends.map(friend => {\r\n                                return (\r\n                                    <ProfileListItem\r\n                                        profile={friend}\r\n                                        myProfile={myProfile}\r\n                                        style={{ borderTop: 'none', borderLeft: 'none', borderRight: 'none' }}\r\n                                    />\r\n                                )\r\n                            }) :\r\n                                <h3 style={{ marginTop: '30px' }}>\r\n                                    {profile ? `${profile.first_name} ainda não possui amigos` : 'Você ainda não possui amigos'}\r\n                                </h3>\r\n                            }\r\n                        </>\r\n                        :\r\n                        <div className=\"profiles-loader-container\">\r\n                            <div className=\"loader\" />\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n            <BottomMenu />\r\n        </>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { useParams } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../../../../../config/settings'\r\nimport Header from '../../../../../components/fixed/header'\r\nimport ProfileListItem from '../../../../../components/ProfileListItem'\r\n\r\nexport default function InterestProfiles() {\r\n    const [myProfile, setMyProfile] = useState(null)\r\n    const [profiles, setProfiles] = useState(null)\r\n\r\n    const { interest } = useParams()\r\n\r\n    document.title = `${interest[0].toUpperCase() + interest.slice(1)} / Napker`\r\n\r\n    useEffect(() => {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => setMyProfile(data))\r\n        fetch(`${SERVER_URL}/profile-api/interest-profile-list/${interest}`)\r\n            .then(response => response.json())\r\n            .then(data => setProfiles(data))\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            <Header\r\n                page={`Interesse / ${interest[0].toUpperCase() + interest.slice(1)}`}\r\n                backArrow={true}\r\n            />\r\n            <div className=\"content\">\r\n                <div className=\"interests-title-container\">\r\n                    <h3>Perfis interessados em \"{interest}\"</h3>\r\n                </div>\r\n                <div className=\"list-group interest-profile-list\">\r\n                    {myProfile !== null && profiles !== null ?\r\n                        profiles.map(profile => {\r\n                            return (\r\n                                <ProfileListItem\r\n                                    profile={profile}\r\n                                    myProfile={myProfile}\r\n                                    style={{ borderLeft: 'none', borderTop: 'none', borderRight: 'none' }}\r\n                                />\r\n                            )\r\n                        }) :\r\n                        <div className=\"profiles-loader-container\">\r\n                            <div className=\"loader\" />\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\n\r\nimport { SERVER_URL } from '../../../../../config/settings'\r\n\r\nexport default function PublicInterests(props) {\r\n\r\n    useEffect(() => {\r\n        if (document.querySelector('.public-interests-container')) {\r\n            const tagContainer = document.querySelector('.public-tag-container');\r\n            const input = document.querySelector('.public-tag-container input');\r\n\r\n            let tags = props.myProfile.interests.filter(i => i.public).map(i => i.title);\r\n            const interestsInput = document.querySelector('#public-interests')\r\n            addTags()\r\n\r\n            function createTag(label) {\r\n                const div = document.createElement('div');\r\n                div.classList.add('tag');\r\n                div.classList.add('public-tag');\r\n                const span = document.createElement('span');\r\n                span.innerHTML = label;\r\n                const closeIcon = document.createElement('i');\r\n                closeIcon.classList.add('public-close-icon')\r\n                closeIcon.innerHTML = '×';\r\n                closeIcon.classList.add('material-icons')\r\n                closeIcon.setAttribute('data-item', label);\r\n                div.appendChild(span);\r\n                div.appendChild(closeIcon);\r\n                if (!interestsInput.value.includes(label)) interestsInput.value += ` ${label}`;\r\n                return div;\r\n            }\r\n\r\n            function clearTags() {\r\n                document.querySelectorAll('.public-tag').forEach(tag => {\r\n                    tag.parentElement.removeChild(tag);\r\n                });\r\n            }\r\n\r\n            function addTags() {\r\n                clearTags();\r\n                tags.sort()\r\n                tags.slice().reverse().forEach(tag => {\r\n                    tagContainer.prepend(createTag(tag));\r\n                });\r\n                props.setInterests(tags)\r\n            }\r\n\r\n            input.addEventListener('keydown', (e) => {\r\n                if (e.key === 'Enter') {\r\n                    e.target.value.split(',').forEach(tag => {\r\n                        if (tag.length < 3) {\r\n                            window.alert('Os interesses devem ter no mínimo 3 caracteres!')\r\n                        } else {\r\n                            tags.push(tag)\r\n                        }\r\n                    });\r\n\r\n                    e.preventDefault()\r\n\r\n                    addTags();\r\n                    input.value = '';\r\n                    return false; //prevent the form to submit\r\n                }\r\n            });\r\n            document.addEventListener('click', (e) => {\r\n                if (e.target.classList.contains('public-close-icon')) {\r\n                    const tagLabel = e.target.getAttribute('data-item');\r\n                    const index = tags.indexOf(tagLabel);\r\n                    tags = [...tags.slice(0, index), ...tags.slice(index + 1)];\r\n                    addTags();\r\n                }\r\n            })\r\n\r\n            input.focus();\r\n        }\r\n    })\r\n\r\n    return (\r\n        <div className=\"public-interests-container\">\r\n            <h3>Interesses públicos</h3>\r\n            <p>\r\n                Os interesses públicos são visíveis para os outros usuários.\r\n                Coloque aqui interesses que sem eles seu perfil ficaria incompleto.\r\n            </p>\r\n            <div class=\"tag-container public-tag-container\">\r\n                <input placeholder=\"Digite e pressione 'Enter'\" maxLength=\"50\" />\r\n                <input type=\"hidden\" name=\"public-interests\" id=\"public-interests\" />\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\n\r\nimport { SERVER_URL } from '../../../../../config/settings'\r\n\r\nexport default function PrivateInterests(props) {\r\n\r\n    useEffect(() => {\r\n        if (document.querySelector('.private-interests-container')) {\r\n            const tagContainer = document.querySelector('.private-tag-container');\r\n            const input = document.querySelector('.private-tag-container input');\r\n\r\n            let tags = props.myProfile.interests.filter(i => !i.public).map(i => i.title);\r\n            const interestsInput = document.querySelector('#private-interests')\r\n            addTags()\r\n\r\n            function createTag(label) {\r\n                const div = document.createElement('div');\r\n                div.classList.add('tag');\r\n                div.classList.add('private-tag');\r\n                const span = document.createElement('span');\r\n                span.innerHTML = label;\r\n                const closeIcon = document.createElement('i');\r\n                closeIcon.classList.add('private-close-icon')\r\n                closeIcon.classList.add('material-icons')\r\n                closeIcon.innerHTML = '×';\r\n                closeIcon.setAttribute('data-item', label);\r\n                div.appendChild(span);\r\n                div.appendChild(closeIcon);\r\n                if (!interestsInput.value.includes(label)) interestsInput.value += ` ${label}`;\r\n                return div;\r\n            }\r\n\r\n            function clearTags() {\r\n                document.querySelectorAll('.private-tag').forEach(tag => {\r\n                    tag.parentElement.removeChild(tag);\r\n                });\r\n            }\r\n\r\n            function addTags() {\r\n                clearTags();\r\n                tags.sort()\r\n                tags.slice().reverse().forEach(tag => {\r\n                    tagContainer.prepend(createTag(tag));\r\n                });\r\n                props.setInterests(tags)\r\n            }\r\n\r\n            input.addEventListener('keydown', (e) => {\r\n                if (e.key === 'Enter') {\r\n                    e.target.value.split(',').forEach(tag => {\r\n                        if (tag.length < 3) {\r\n                            window.alert('Os interesses devem ter no mínimo 3 caracteres!')\r\n                        } else {\r\n                            tags.push(tag)\r\n                        }\r\n                    });\r\n\r\n                    e.preventDefault()\r\n\r\n                    addTags();\r\n                    input.value = '';\r\n                    return false; //prevent the form to submit\r\n                }\r\n            });\r\n            document.addEventListener('click', (e) => {\r\n                if (e.target.classList.contains('private-close-icon')) {\r\n                    const tagLabel = e.target.getAttribute('data-item');\r\n                    const index = tags.indexOf(tagLabel);\r\n                    tags = [...tags.slice(0, index), ...tags.slice(index + 1)];\r\n                    addTags();\r\n                }\r\n            })\r\n        }\r\n    })\r\n\r\n    return (\r\n        <div className=\"private-interests-container\">\r\n            <h3>Interesses privados</h3>\r\n            <p>\r\n                Os interesses privados não são visíveis para os outros usuários.\r\n                Eles servem para aumentar a precisão das recomendações de perfis que\r\n                possuem o máximo de afinidade possível com você.\r\n            </p>\r\n            <div class=\"tag-container private-tag-container\">\r\n                <input placeholder=\"Digite e pressione 'Enter'\" maxLength=\"50\" />\r\n                <input type=\"hidden\" name=\"private-interests\" id=\"private-interests\" />\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\n\r\nimport { SERVER_URL } from '../../../../config/settings'\r\nimport { csrftoken } from '../../../../config/utils'\r\nimport Header from '../../../../components/fixed/header'\r\nimport PublicInterests from './components/PublicInterests'\r\nimport PrivateInterests from './components/PrivateInterests'\r\nimport BottomMenu from '../../../../components/fixed/bottom-menu/BottomMenu'\r\n\r\nexport default function EditInterests() {\r\n    const [myProfile, setMyProfile] = useState(null)\r\n    let [publicInterests, setPublicInterests] = [null, value => publicInterests = value]\r\n    let [privateInterests, setPrivateInterests] = [null, value => privateInterests = value]\r\n\r\n    useEffect(() => {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => setMyProfile(data))\r\n    }, [])\r\n\r\n    const submitInterests = () => {\r\n        fetch(`${SERVER_URL}/profile-api/set-myinterests`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify({\r\n                public_interests: publicInterests.sort(),\r\n                private_interests: privateInterests.sort()\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(data)\r\n                document.querySelector('#interests-updated-message').style.display = 'block'\r\n                document.documentElement.scrollTop = 0\r\n            })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header page=\"Meus interesses\" backArrow={true} />\r\n            <div className=\"content\">\r\n                <p\r\n                    className=\"edit-interests-success-message\"\r\n                    id=\"interests-updated-message\"\r\n                >\r\n                    Interesses atualizados com sucesso\r\n                </p>\r\n                {myProfile ?\r\n                    <div className=\"interests-page-container\">\r\n                        <button\r\n                            className=\"btn btn-primary\"\r\n                            onClick={submitInterests}\r\n                        >\r\n                            Salvar\r\n                        </button>\r\n                        <hr />\r\n                        <PublicInterests\r\n                            myProfile={myProfile}\r\n                            setInterests={setPublicInterests}\r\n                        />\r\n\r\n                        <br />\r\n                        <hr />\r\n                        <br />\r\n\r\n                        <PrivateInterests\r\n                            myProfile={myProfile}\r\n                            setInterests={setPrivateInterests}\r\n                        />\r\n                    </div> :\r\n                    <div className=\"edit-interests-loader-container\">\r\n                        <div className=\"loader\" />\r\n                    </div>\r\n                }\r\n            </div>\r\n            <BottomMenu />\r\n        </>\r\n    )\r\n}","import React, { useState } from 'react'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport Picker from 'emoji-picker-react'\r\n\r\nimport { csrftoken, openCloseEmojiList } from '../config/utils'\r\nimport { SERVER_URL } from '../config/settings'\r\n\r\nexport default function CommentModal(props) {\r\n    const [commentContent, setCommentContent] = useState('')\r\n\r\n    const post = props.post\r\n\r\n    const handleCommentChange = e => {\r\n        setCommentContent(e.target.value)\r\n        const el = document.querySelector('#comment-form-submit')\r\n        el.disabled = e.target.value === ''\r\n    }\r\n\r\n    const onEmojiSelect = (event, emojiObject) => {\r\n        setCommentContent(commentContent + emojiObject.emoji)\r\n        document.querySelector('#comment-form-submit').disabled = false\r\n    }\r\n\r\n    return (\r\n        <Modal show={props.isOpen}\r\n            onHide={props.hideModal}\r\n            size=\"lg\">\r\n            <Modal.Header closeButton>\r\n                <Modal.Title><strong>Comentar</strong></Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <div className=\"post-container\">\r\n                    <div className=\"d-flex justify-content-between\">\r\n                        <div className=\"post-row\">\r\n                            <div className=\"post-col\">\r\n                                <img src={`${SERVER_URL}${post.author.photo}`}\r\n                                    className=\"profile-img-med\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"post-col\">\r\n                                <div>\r\n                                    <strong>{post.author.first_name} {post.author.last_name} </strong>\r\n                                    <p className=\"text-secondary d-inline-block\">\r\n                                        @{post.author.user.username} • {post.created.split('-').reverse().join('/')}\r\n                                    </p>\r\n                                </div>\r\n                                <div style={{ textAlign: 'start' }}>\r\n                                    {post.content}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <hr />\r\n                <form action={`${SERVER_URL}/post-api/comment-post/${post.id}`} method=\"POST\" className=\"comment-form\">\r\n                    <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrftoken} />\r\n                    <label\r\n                        className=\"far fa-smile\"\r\n                        id=\"emoji-button\"\r\n                        onClick={() => openCloseEmojiList(false)}\r\n                    />\r\n                    <textarea\r\n                        type=\"text\"\r\n                        className=\"form-control\"\r\n                        name=\"comment-content\"\r\n                        value={commentContent}\r\n                        placeholder=\"Comente alguma coisa\"\r\n                        style={{ marginRight: '5px', height: '40px' }}\r\n                        onChange={handleCommentChange}\r\n                    />\r\n                    <div className=\"emoji-list-container chat-emoji-list\" id=\"emoji-list-container\">\r\n                        <Picker onEmojiClick={onEmojiSelect} />\r\n                    </div>\r\n                    <button\r\n                        className=\"btn btn-primary\"\r\n                        id=\"comment-form-submit\"\r\n                        type=\"submit\"\r\n                        disabled\r\n                    >\r\n                        Enviar\r\n                    </button>\r\n                </form>\r\n            </Modal.Body>\r\n        </Modal>\r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../../../../../../../config/settings'\r\nimport { csrftoken } from '../../../../../../../config/utils'\r\n\r\nexport default function CommentListItem(props) {\r\n    const comment = props.comment\r\n    const myProfile = props.myProfile\r\n    const fetchPost = props.fetchPost\r\n    const setPostLikesModal = props.setPostLikesModal\r\n\r\n    const likeUnlikeComment = e => {\r\n        const likeBtn = e.target\r\n        if (likeBtn.classList.contains('fas')) {\r\n            likeBtn.classList.remove('fas') //border heart\r\n            likeBtn.classList.add('far')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/unlike-comment/${likeBtn.dataset.commentid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    fetchPost()\r\n                })\r\n        } else {\r\n            likeBtn.classList.remove('far') //border heart\r\n            likeBtn.classList.add('fas')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/like-comment/${likeBtn.dataset.commentid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    fetchPost()\r\n                })\r\n        }\r\n    }\r\n\r\n    const deleteComment = (e, commentId) => {\r\n        e.stopPropagation()\r\n        const el = document.querySelector(`#post-comment-${commentId}`)\r\n        if (window.confirm('Tem certeza que deseja apagar o comentário?\\nEssa ação é irreversível.')) {\r\n            el.style.animationPlayState = 'running'\r\n            console.log(el, el.style.animationPlayState)\r\n            el.addEventListener('animationend', () => {\r\n                fetchPost()\r\n            })\r\n            fetch(`${SERVER_URL}/post-api/delete-comment/${commentId}`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-type': 'application/json',\r\n                    'X-CSRFToken': csrftoken,\r\n                }\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <li\r\n            className=\"post-container\"\r\n            id={`post-comment-${comment.id}`}\r\n            key={comment.id}\r\n        >\r\n            <div className=\"d-flex justify-content-between\">\r\n                <div className=\"post-row\">\r\n                    <div className=\"post-col\">\r\n                        <Link to={comment.author.id === myProfile.id ?\r\n                            '/perfil' : `/user/${comment.author.slug}`}\r\n                        >\r\n                            <img src={`${SERVER_URL}${comment.author.photo}`}\r\n                                className=\"profile-img-sm\"\r\n                            />\r\n                        </Link>\r\n                    </div>\r\n                    <div className=\"post-col\">\r\n                        <Link to={comment.author.id === myProfile.id ?\r\n                            '/perfil' : `/user/${comment.author.slug}`}\r\n                            style={{ color: '#000' }}\r\n                        >\r\n                            <div style={{ textAlign: 'start' }}>\r\n                                <strong style={{ marginRight: '5px' }}>\r\n                                    {comment.author.first_name} {comment.author.last_name}\r\n                                </strong>\r\n                                <p className=\"text-secondary d-inline-block\">\r\n                                    @{comment.author.user.username} • {comment.created.split('-').reverse().join('/')}\r\n                                </p>\r\n                            </div>\r\n                        </Link>\r\n                        <div style={{ textAlign: 'start' }}>\r\n                            {comment.content}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {comment.author.id == myProfile.id &&\r\n                    <i\r\n                        className=\"far fa-trash-alt trash-icon text-secondary\"\r\n                        style={{ margin: '20px 20px 0 0' }}\r\n                        onClick={e => deleteComment(e, comment.id)}\r\n                    />\r\n                }\r\n            </div>\r\n            <div className=\"post-actions\" style={{ padding: '0 0 2px 63px' }}>\r\n                <p className=\"text-secondary\">\r\n                    {comment.likes.map(like => like.profile.id).includes(myProfile.id) ?\r\n                        <i class=\"fas fa-heart\"\r\n                            data-commentid={comment.id}\r\n                            onClick={likeUnlikeComment}\r\n                        />\r\n                        :\r\n                        <i class=\"far fa-heart\"\r\n                            data-commentid={comment.id}\r\n                            onClick={likeUnlikeComment}\r\n                        />\r\n                    }\r\n                    <p\r\n                        className=\"post-likes-number\"\r\n                        onClick={() => setPostLikesModal({ isOpen: true, likes: comment.likes })}\r\n                    >\r\n                        {comment.likes.length}\r\n                    </p>\r\n                </p>\r\n            </div>\r\n        </li>\r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default props => (\r\n    <Link to={`/post/${props.postId}/comentar`}>\r\n        <i className=\"far fa-comment bottom-menu-action-icon\" />\r\n    </Link>\r\n)","import React, { useEffect, useState } from 'react'\r\nimport { Link, useParams } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../../../../../../config/settings'\r\nimport { csrftoken } from '../../../../../../config/utils'\r\nimport CommentModal from '../../../../../../components/CommentModal'\r\nimport LikesModal from '../../../../../../components/LikesModal'\r\nimport Header from '../../../../../../components/fixed/Header'\r\nimport CommentListItem from './components/CommentListItem'\r\nimport BottomMenu from '../../../../../../components/fixed/bottom-menu/BottomMenu'\r\nimport CommentIcon from '../../../../../../components/fixed/bottom-menu/components/CommentIcon'\r\n\r\nexport default function Post(props) {\r\n    const [post, setPost] = useState(null)\r\n    const [myProfile, setMyProfile] = useState(null)\r\n    const [commentModalIsOpen, setCommentModalIsOpen] = useState(props.commentModalIsOpen)\r\n    const [postLikesModal, setPostLikesModal] = useState({ isOpen: false, likes: null })\r\n    const [commentLikesModal, setCommentLikesModal] = useState({ isOpen: false, likes: null })\r\n\r\n    const { id } = useParams()\r\n\r\n    useEffect(() => {\r\n        fetchPost()\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => setMyProfile(data))\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        console.log('got here')\r\n        setCommentModalIsOpen(!!props.commentModalIsOpen)\r\n    }, [props.commentModalIsOpen])\r\n\r\n    const fetchPost = () => {\r\n        fetch(`${SERVER_URL}/post-api/post/${id}`)\r\n            .then(response => response.json())\r\n            .then(data => setPost(data))\r\n    }\r\n\r\n    const likeUnlikePost = e => {\r\n        const likeBtn = e.target\r\n        if (likeBtn.classList.contains('fas')) {\r\n            likeBtn.classList.remove('fas') //border heart\r\n            likeBtn.classList.add('far')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/unlike-post/${likeBtn.dataset.postid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    fetchPost()\r\n                })\r\n        } else {\r\n            likeBtn.classList.remove('far') //border heart\r\n            likeBtn.classList.add('fas')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/like-post/${likeBtn.dataset.postid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    fetchPost()\r\n                })\r\n        }\r\n    }\r\n\r\n    const deletePost = (e, postId) => {\r\n        e.stopPropagation()\r\n        const el = document.querySelector(`#profile-post-${postId}`)\r\n        if (window.confirm('Tem certeza que deseja apagar o post?\\nEssa ação é irreversível.')) {\r\n            fetch(`${SERVER_URL}/post-api/delete-post/${postId}`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-type': 'application/json',\r\n                    'X-CSRFToken': csrftoken,\r\n                }\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    window.location.href = '/'\r\n                })\r\n        }\r\n    }\r\n\r\n    const hideCommentModal = () => {\r\n        setCommentModalIsOpen(false)\r\n        window.history.back()\r\n    }\r\n\r\n    const hidePostLikesModal = () => {\r\n        setPostLikesModal({\r\n            isOpen: false,\r\n            likes: null\r\n        })\r\n    }\r\n\r\n    const hideCommentLikesModal = () => {\r\n        setCommentLikesModal({\r\n            isOpen: false,\r\n            likes: null\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"post-page-container\">\r\n            {post &&\r\n                <CommentModal\r\n                    isOpen={commentModalIsOpen}\r\n                    hideModal={hideCommentModal}\r\n                    post={post}\r\n                />\r\n            }\r\n            <LikesModal\r\n                isOpen={postLikesModal.isOpen}\r\n                likes={postLikesModal.likes}\r\n                hideModal={hidePostLikesModal}\r\n            />\r\n            <LikesModal\r\n                isOpen={commentLikesModal.isOpen}\r\n                likes={commentLikesModal.likes}\r\n                hideModal={hideCommentLikesModal}\r\n            />\r\n            <Header page=\"Post\" backArrow={true} />\r\n            <div className=\"content\">\r\n                {post && myProfile ?\r\n                    <>\r\n                        <div className=\"post-container\">\r\n                            <div className=\"d-flex justify-content-between\">\r\n                                <div className=\"post-row\">\r\n                                    <div className=\"post-col\">\r\n                                        <Link to={post.author.id === myProfile.id ?\r\n                                            '/perfil' : `/user/${post.author.slug}`}\r\n                                        >\r\n                                            <img src={`${SERVER_URL}${post.author.photo}`}\r\n                                                className=\"profile-img-med\"\r\n                                            />\r\n                                        </Link>\r\n                                    </div>\r\n                                    <div className=\"post-col\">\r\n                                        <Link to={post.author.id === myProfile.id ?\r\n                                            '/perfil' : `/user/${post.author.slug}`}\r\n                                            style={{ color: '#000' }}\r\n                                        >\r\n                                            <div style={{ textAlign: 'start' }}>\r\n                                                <strong>{post.author.first_name} {post.author.last_name} </strong>\r\n                                                <p className=\"text-secondary d-inline-block\">\r\n                                                    @{post.author.user.username} • {post.created.split('-').reverse().join('/')}\r\n                                                </p>\r\n                                            </div>\r\n                                        </Link>\r\n                                        <div style={{ textAlign: 'start', fontSize: 'larger' }}>\r\n                                            {post.content}\r\n                                        </div>\r\n                                        {post.image &&\r\n                                            <img src={`${SERVER_URL}${post.image}`} className=\"post-img\" />\r\n                                        }\r\n                                    </div>\r\n                                </div>\r\n                                {myProfile.id == post.author.id &&\r\n                                    <i\r\n                                        className=\"far fa-trash-alt trash-icon text-secondary\"\r\n                                        style={{ margin: '20px 20px 0 0' }}\r\n                                        onClick={e => deletePost(e, post.id)}\r\n                                    />\r\n                                }\r\n                            </div>\r\n                            <div className=\"post-actions\">\r\n                                <p className=\"text-secondary\" style={{ fontSize: 'large' }}>\r\n                                    <Link to={`/post/${id}/comentar`} className=\"text-secondary\">\r\n                                        <i\r\n                                            class=\"far fa-comment\"\r\n                                        />\r\n                                    </Link>{post.comments.length}\r\n                                    {post.likes.map(like => like.profile.id).includes(myProfile.id) ?\r\n                                        <i class=\"fas fa-heart\"\r\n                                            data-postid={post.id}\r\n                                            onClick={likeUnlikePost}\r\n                                        />\r\n                                        :\r\n                                        <i class=\"far fa-heart\"\r\n                                            data-postid={post.id}\r\n                                            onClick={likeUnlikePost}\r\n                                        />\r\n                                    }\r\n                                    <p className=\"post-likes-number\"\r\n                                        onClick={() => setPostLikesModal({ isOpen: true, likes: post.likes })}\r\n                                    >\r\n                                        {post.likes.length}\r\n                                    </p>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"comment-list\">\r\n                            {post.comments.map(comment => {\r\n                                return (\r\n                                    <CommentListItem\r\n                                        comment={comment}\r\n                                        myProfile={myProfile}\r\n                                        fetchPost={fetchPost}\r\n                                        setPostLikesModal={setPostLikesModal}\r\n                                    />\r\n                                )\r\n                            })\r\n                            }\r\n                        </div>\r\n                    </> :\r\n                    <div className=\"posts-loader-container\" >\r\n                        <div className=\"loader\" />\r\n                    </div>\r\n                }\r\n            </div>\r\n            <BottomMenu>\r\n                <CommentIcon postId={id} />\r\n            </BottomMenu>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport Header from '../components/fixed/header'\r\nimport { SERVER_URL } from '../config/settings'\r\nimport { csrftoken } from '../config/utils'\r\n\r\nexport default class Posts extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            profile: null,\r\n            postContent: '',\r\n            postFormImagePreview: null\r\n        }\r\n    }\r\n\r\n    componentWillMount() {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => this.setState({ profile: data }))\r\n    }\r\n\r\n\r\n    handlePostContentChange = e => {\r\n        this.setState({ postContent: e.target.value })\r\n        const el = document.querySelector('#post-form-submit-btn')\r\n        el.disabled = e.target.value.trim() === '' && !this.state.postFormImagePreview\r\n    }\r\n\r\n    handlePostImageChange = e => {\r\n        const reader = new FileReader()\r\n        reader.onload = () => {\r\n            if (reader.readyState === 2) {\r\n                this.setState({ postFormImagePreview: reader.result })\r\n                document.querySelector('#post-img-container').style.display = 'initial'\r\n                document.querySelector('#post-form-submit-btn').disabled = false\r\n            }\r\n        }\r\n        try {\r\n            reader.readAsDataURL(e.target.files[0])\r\n        } catch {\r\n\r\n        }\r\n    }\r\n\r\n    handleCloseImage = () => {\r\n        document.querySelector('#post-img-container').style.display = 'none'\r\n        document.querySelector('#post-image').value = ''\r\n        if (this.state.postContent.trim() === '') document.querySelector('#post-form-submit-btn').disabled = true\r\n        this.setState({ postFormImagePreview: null })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"content\">\r\n                <Header page=\"Novo post\" backArrow={true} />\r\n                <div className=\"post-form-page-container\">\r\n                    {this.state.profile ?\r\n                        <form\r\n                            action={`${SERVER_URL}/post-api/create-post`}\r\n                            method=\"POST\"\r\n                            className=\"create-post-form-mobile\"\r\n                            encType=\"multipart/form-data\"\r\n                        >\r\n                            <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrftoken} />\r\n                            <div className=\"d-flex\">\r\n                                <Link to=\"/perfil\">\r\n                                    <img\r\n                                        src={`${SERVER_URL}${this.state.profile.photo}`}\r\n                                        className=\"profile-img-med\"\r\n                                    />\r\n                                </Link>\r\n                                <textarea\r\n                                    className=\"post-content-textarea\"\r\n                                    name=\"post-content\"\r\n                                    value={this.state.postContent}\r\n                                    placeholder=\"No que você está pensando?\"\r\n                                    maxLength={300}\r\n                                    autoFocus\r\n                                    onChange={this.handlePostContentChange}\r\n                                />\r\n                            </div>\r\n                            <div className=\"w-100 d-flex justify-content-center\">\r\n                                <div\r\n                                    className=\"post-img-container\"\r\n                                    id=\"post-img-container\">\r\n                                    <div\r\n                                        className=\"post-img-options\"\r\n                                    >\r\n                                        <i\r\n                                            className=\"far fa-times-circle\"\r\n                                            onClick={this.handleCloseImage}\r\n                                        />\r\n                                    </div>\r\n                                    <img\r\n                                        src={this.state.postFormImagePreview}\r\n                                        className=\"post-img post-form-img-preview\"\r\n                                        id=\"post-form-img-preview\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <hr />\r\n                            <div className=\"d-flex justify-content-between\" style={{ margin: '0px 70px 0 70px' }}>\r\n                                <div className=\"post-extra-options\">\r\n                                    <label htmlFor=\"post-image\" class=\"far fa-image\" />\r\n                                    <input\r\n                                        type=\"file\"\r\n                                        accept=\"image/png, image/jpg, image/jpeg\"\r\n                                        name=\"post-image\"\r\n                                        id=\"post-image\"\r\n                                        style={{ display: 'none' }}\r\n                                        onChange={this.handlePostImageChange}\r\n                                    />\r\n                                </div>\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"btn btn-primary\"\r\n                                    id=\"post-form-submit-btn\"\r\n                                    style={{ height: '40px' }}\r\n                                    disabled\r\n                                >\r\n                                    Postar\r\n                            </button>\r\n                            </div>\r\n                        </form>\r\n                        :\r\n                        <div className=\"posts-loader-container\" >\r\n                            <div className=\"loader\" />\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { useContext, useEffect, useState } from 'react'\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from './config/settings'\r\nimport {\r\n    InvitesReceivedContext, UnvisualizedCommentsContext,\r\n    UnvisualizedLikesContext, UnreadMessagesContext\r\n} from './context/app/AppContext'\r\n\r\nimport Sidebar from './components/fixed/Sidebar'\r\nimport Home from './pages/home/Home'\r\nimport Notifications from './pages/notifications/Notifications'\r\nimport Messages from './pages/messages_/Messages'\r\nimport MyProfile from './pages/profile/MyProfile'\r\nimport Settings from './pages/settings_/Settings'\r\nimport Profile from './pages/profile/Profile'\r\nimport ProfileFriends from './pages/profile/pages/Friends'\r\nimport InterestProfiles from './pages/profile/components/interests/pages/InterestProfiles'\r\nimport EditInterests from './pages/profile/pages/edit_interests/EditInterests'\r\nimport Post from './pages/home/components/posts_/pages/post_/Post'\r\n\r\nimport PostFormPage from './pages/PostFormPage'\r\n\r\nexport default function App() {\r\n    const [invitesReceivedNumber, setInvitesReceived] = useContext(InvitesReceivedContext)\r\n    const [unvisualizedCommentsNumber, setUnvisulaizedComments] = useContext(UnvisualizedCommentsContext)\r\n    const [unvisualizedLikesNumber, setUnvisulaizedLikes] = useContext(UnvisualizedLikesContext)\r\n\r\n    const [unreadMessagesNumber, setUnreadMessagesNumber] = useContext(UnreadMessagesContext)\r\n\r\n    let notificationsNumber = invitesReceivedNumber + unvisualizedLikesNumber + unvisualizedCommentsNumber\r\n\r\n    useEffect(() => {\r\n        updateNotificationsNumber()\r\n        updateUnreadMessagesNumber()\r\n        window.setInterval(() => {\r\n            updateNotificationsNumber()\r\n            updateUnreadMessagesNumber()\r\n        }, 6000)\r\n    }, [])\r\n\r\n    const updateNotificationsNumber = () => {\r\n        fetch(`${SERVER_URL}/profile-api/myinvites`)\r\n            .then(response => response.json())\r\n            .then(data => setInvitesReceived(data.length))\r\n        fetch(`${SERVER_URL}/post-api/unvisualized-post-likes`)\r\n            .then(response => response.json())\r\n            .then(data => setUnvisulaizedLikes(data.length))\r\n        fetch(`${SERVER_URL}/post-api/unvisualized-post-comments`)\r\n            .then(response => response.json())\r\n            .then(data => setUnvisulaizedComments(data.length))\r\n    }\r\n\r\n    const updateUnreadMessagesNumber = () => {\r\n        fetch(`${SERVER_URL}/chat-api/all-unread-messages-number`)\r\n            .then(response => response.json())\r\n            .then(data => setUnreadMessagesNumber(data['unread_messages_number']))\r\n    }\r\n\r\n    return (\r\n        <Router>\r\n            <Sidebar />\r\n            <div className=\"main-content\">\r\n                <Switch>\r\n                    <Route path=\"/home\" component={Home} />\r\n                    <Route path=\"/notificações\" render={props => (\r\n                        <Notifications {...props} updateNotificationsNumber={updateNotificationsNumber} />\r\n                    )} />\r\n                    <Route path=\"/mensagens\" exact component={Messages} />\r\n                    <Route path=\"/mensagens/:slug\" render={props => (\r\n                        <Messages {...props} updateUnreadMessagesNumber={updateUnreadMessagesNumber} />\r\n                    )} />\r\n                    <Route path=\"/perfil\" exact component={MyProfile} />\r\n                    <Route path=\"/perfil/meus-interesses\" component={EditInterests} />\r\n                    <Route path=\"/configurações\" exact component={Settings} />\r\n                    <Route path=\"/configurações/perfis-bloqueados\" exact render={props => (\r\n                        <Settings {...props} page={'blocked-profiles'} />\r\n                    )} />\r\n                    <Route path=\"/configurações/segurança\" exact render={props => (\r\n                        <Settings {...props} page={'security'} />\r\n                    )} />\r\n                    <Route path=\"/configurações/alterar-senha\" exact render={props => (\r\n                        <Settings {...props} page={'change-password'} />\r\n                    )} />\r\n                    <Route path=\"/configurações/deletar-conta\" exact render={props => (\r\n                        <Settings {...props} page={'delete-account'} />\r\n                    )} />\r\n                    <Route path=\"/configurações/faq\" exact render={props => (\r\n                        <Settings {...props} page={'faq'} />\r\n                    )} />\r\n                    <Route path=\"/configurações/fale-conosco\" exact render={props => (\r\n                        <Settings {...props} page={'feedback'} />\r\n                    )} />\r\n                    <Route path=\"/user/:slug\" exact render={props => (\r\n                        <Profile {...props} updateNotificationsNumber={updateNotificationsNumber} />\r\n                    )} />\r\n                    <Route path=\"/user/:slug/amigos\" component={ProfileFriends} />\r\n                    <Route path=\"/post/:id\" exact component={Post} />\r\n                    <Route path=\"/post/:id/comentar\" render={props => (\r\n                        <Post {...props} commentModalIsOpen={true} />\r\n                    )} />\r\n                    <Route path=\"/interesses/:interest\" component={InterestProfiles} />\r\n\r\n                    <Route path=\"/postar\" component={PostFormPage} />\r\n                </Switch>\r\n            </div>\r\n        </Router>\r\n    )\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport './assets/bottomMenu.css'\r\nimport './assets/chat.css'\r\nimport './assets/commentModal.css'\r\nimport './assets/home.css'\r\nimport './assets/notifications.css'\r\nimport './assets/posts.css'\r\nimport './assets/profile.css'\r\nimport './assets/profiles.css'\r\nimport './assets/settings.css'\r\nimport './assets/sidebar.css'\r\nimport './assets/style.css'\r\nimport './assets/responsivity.css'\r\n\r\nimport AppContextProvider from './context/app/AppContext'\r\nimport App from './App'\r\n\r\nReactDOM.render((<AppContextProvider><App /></AppContextProvider>), document.querySelector('#root'))\r\n"],"sourceRoot":""}