(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{30:function(e,t,a){e.exports=a(52)},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),s=(a(35),a(36),a(37),a(38),a(39),a(40),a(41),a(42),a(43),a(44),a(45),a(46),a(1)),i=Object(n.createContext)(),l=function(e){var t=Object(n.useState)(0),a=Object(s.a)(t,2),c=a[0],o=a[1];return r.a.createElement(i.Provider,{value:[c,o]},e.children)},m=Object(n.createContext)(),u=function(e){var t=Object(n.useState)(0),a=Object(s.a)(t,2),c=a[0],o=a[1];return r.a.createElement(m.Provider,{value:[c,o]},e.children)},d=Object(n.createContext)(),f=function(e){var t=Object(n.useState)(0),a=Object(s.a)(t,2),c=a[0],o=a[1];return r.a.createElement(d.Provider,{value:[c,o]},e.children)},p=Object(n.createContext)(),h=function(e){var t=Object(n.useState)(0),a=Object(s.a)(t,2),c=a[0],o=a[1];return r.a.createElement(p.Provider,{value:[c,o]},e.children)};function g(e){return r.a.createElement(l,null,r.a.createElement(u,null,r.a.createElement(f,null,r.a.createElement(h,null,e.children))))}var E=a(2),v=a(7),b="http://127.0.0.1:8000",y=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}("csrftoken");var N=function(){window.confirm("Sair do Napker?\nVoc\xea poder\xe1 entrar novamente quando quiser.")&&window.location.replace("".concat(b,"/logout"))},k=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=document.querySelector("#emoji-list-container"),a=t.style;e||a.display&&"none"!==a.display?(a.display="none",document.querySelector("#emoji-button").classList.remove("emoji-button-active")):(a.display="initial",document.querySelector("#emoji-button").classList.add("emoji-button-active"))},j=function(){document.querySelectorAll(".nav-menu-item-active").forEach((function(e){e.classList.remove("nav-menu-item-active")}));var e=window.location.href.split("/");e.includes("home")?(document.querySelector("#home-menu")&&document.querySelector("#home-menu").classList.add("nav-menu-item-active"),document.querySelector("#bottom-home-menu")&&document.querySelector("#bottom-home-menu").classList.add("nav-menu-item-active")):e.includes("notifica%C3%A7%C3%B5es")?(document.querySelector("#notifications-menu")&&document.querySelector("#notifications-menu").classList.add("nav-menu-item-active"),document.querySelector("#bottom-notifications-menu")&&document.querySelector("#bottom-notifications-menu").classList.add("nav-menu-item-active")):e.includes("mensagens")?(document.querySelector("#messages-menu")&&document.querySelector("#messages-menu").classList.add("nav-menu-item-active"),document.querySelector("#bottom-messages-menu")&&document.querySelector("#bottom-messages-menu").classList.add("nav-menu-item-active")):e.includes("perfil")?(document.querySelector("#profile-menu")&&document.querySelector("#profile-menu").classList.add("nav-menu-item-active"),document.querySelector("#bottom-profile-menu")&&document.querySelector("#bottom-profile-menu").classList.add("nav-menu-item-active")):e.includes("configura%C3%A7%C3%B5es")&&(document.querySelector("#settings-menu")&&document.querySelector("#settings-menu").classList.add("nav-menu-item-active"),document.querySelector("#bottom-settings-menu")&&document.querySelector("#bottom-settings-menu").classList.add("nav-menu-item-active"))},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(document.querySelectorAll(".nav-menu-item-active").forEach((function(e){e.classList.remove("nav-menu-item-active")})),document.querySelector("#home-menu").classList.add("nav-menu-item-active")):(document.querySelectorAll(".nav-menu-item-active").forEach((function(e){e.classList.remove("nav-menu-item-active")})),e.target.classList.add("nav-menu-item-active"))};function O(){var e=Object(n.useContext)(i),t=Object(s.a)(e,2),a=t[0],c=(t[1],Object(n.useContext)(m)),o=Object(s.a)(c,2),l=o[0],u=(o[1],Object(n.useContext)(d)),f=Object(s.a)(u,2),h=f[0],g=(f[1],Object(n.useContext)(p)),v=Object(s.a)(g,2),y=v[0],N=(v[1],a+h+l);return Object(n.useEffect)((function(){j()}),[]),r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"logo-container"},r.a.createElement(E.b,{to:"/home",style:{textDecoration:"none"},onClick:function(e){return S(e,!0)}},r.a.createElement("img",{src:"".concat(b).concat("/static/media/napker.png")}))),r.a.createElement("ul",null,r.a.createElement(E.b,{to:"/home",style:{textDecoration:"none"}},r.a.createElement("li",{className:"sidebar-menu-item",id:"home-menu",onClick:S},r.a.createElement("i",{className:"fas fa-home sidebar-menu-icon"}),"Home")),r.a.createElement(E.b,{to:"/notifica\xe7\xf5es",style:{textDecoration:"none"}},r.a.createElement("li",{className:"sidebar-menu-item",id:"notifications-menu",onClick:S},r.a.createElement("i",{className:"fas fa-bell sidebar-menu-icon"}),"Notifica\xe7\xf5es",N?r.a.createElement("div",{className:"notification-text-container"},r.a.createElement("div",{className:"notification-text"},N)):"")),r.a.createElement(E.b,{to:"/mensagens",style:{textDecoration:"none"}},r.a.createElement("li",{className:"sidebar-menu-item",id:"messages-menu",onClick:S},r.a.createElement("i",{className:"fas fa-envelope sidebar-menu-icon"}),"Mensagens",y?r.a.createElement("div",{className:"notification-text-container"},r.a.createElement("div",{className:"notification-text"},y)):"")),r.a.createElement(E.b,{to:"/perfil",style:{textDecoration:"none"}},r.a.createElement("li",{className:"sidebar-menu-item",id:"profile-menu",onClick:S},r.a.createElement("i",{className:"fas fa-user sidebar-menu-icon"}),"Perfil")),r.a.createElement(E.b,{to:"/configura\xe7\xf5es",style:{textDecoration:"none"}},r.a.createElement("li",{className:"sidebar-menu-item",id:"settings-menu",onClick:S},r.a.createElement("i",{className:"fas fa-cog sidebar-menu-icon"}),"Configura\xe7\xf5es"))))}function C(e){return r.a.createElement("div",{className:"header fixed-top"},e.backArrow?r.a.createElement("i",{class:"fas fa-arrow-left left-arrow-icon",onClick:function(){return window.history.back()}}):"",r.a.createElement("strong",null,e.page))}var w=a(12),x=a(10),P=a(15),q=a(14),L=a(5);function M(e){var t=e.profile,a=e.myProfile;return r.a.createElement(E.b,{to:t.id===a.id?"/perfil":"/user/".concat(t.slug),style:{color:"#000",textDecoration:"none"}},r.a.createElement("li",{className:"list-group-item profile-row filtered-profile profile-profile-list-item",key:t.id,style:e.style,onClick:e.onClick},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"profile-img-container"},r.a.createElement("img",{src:"".concat(b).concat(t.photo),className:"profile-img-med",style:{marginRight:"10px"}})),r.a.createElement("div",{className:"d-flex flex-column w-100"},r.a.createElement("div",{className:"profile-row-top"},r.a.createElement("div",{className:"main-profile-data"},r.a.createElement("strong",{style:{textAlign:"start"}},t.first_name," ",t.last_name),r.a.createElement("p",{className:"text-secondary"},"@",t.user.username)),e.children),r.a.createElement("div",{className:"profile-row-bottom"},t.bio)))))}function T(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){fetch("".concat(b,"/profile-api/myprofile")).then((function(e){return e.json()})).then((function(e){return o(e)}))}),[]),r.a.createElement(L.a,{show:e.isOpen,onHide:e.hideModal,size:"lg"},r.a.createElement(L.a.Header,{closeButton:!0},r.a.createElement(L.a.Title,null,r.a.createElement("strong",null,"Curtidas"))),r.a.createElement(L.a.Body,null,r.a.createElement("div",{className:"list-group",style:{height:"400px",overflow:"hidden",overflowY:"scroll"}},e.likes&&e.likes.map((function(e){return e.profile})).map((function(t){return r.a.createElement(M,{profile:t,myProfile:c,style:{borderTop:"none",borderLeft:"none",borderRight:"none"},onClick:e.hideModal})})))))}var F=a(16),R=a.n(F);function I(e){var t=e.myProfile,a=Object(n.useState)(""),c=Object(s.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(null),m=Object(s.a)(l,2),u=m[0],d=m[1];return r.a.createElement("form",{action:"".concat(b,"/post-api/create-post"),method:"POST",className:"create-post-form",encType:"multipart/form-data"},r.a.createElement("input",{type:"hidden",name:"csrfmiddlewaretoken",value:y}),r.a.createElement("div",{className:"d-flex"},r.a.createElement(E.b,{to:"/perfil"},r.a.createElement("img",{src:"".concat(b).concat(t.photo),className:"profile-img-med"})),r.a.createElement("textarea",{className:"post-content-textarea",name:"post-content",value:o,placeholder:"No que voc\xea est\xe1 pensando?",maxLength:300,autoFocus:!0,onChange:function(e){i(e.target.value),document.querySelector("#post-form-submit-btn").disabled=""===e.target.value.trim()&&!u}})),r.a.createElement("div",{className:"w-100 d-flex justify-content-center"},r.a.createElement("div",{className:"post-img-container",id:"post-img-container"},r.a.createElement("div",{className:"post-img-options"},r.a.createElement("i",{className:"far fa-times-circle",onClick:function(){document.querySelector("#post-img-container").style.display="none",document.querySelector("#post-image").value="",""===o.trim()&&(document.querySelector("#post-form-submit-btn").disabled=!0),d(null)}})),r.a.createElement("img",{src:u,className:"post-img post-form-img-preview",id:"post-form-img-preview"}))),r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex justify-content-between",style:{margin:"0px 70px 0 70px"}},r.a.createElement("div",{className:"post-extra-options"},r.a.createElement("label",{htmlFor:"post-image",class:"far fa-image"}),r.a.createElement("input",{type:"file",accept:"image/png, image/jpg, image/jpeg",name:"post-image",id:"post-image",style:{display:"none"},onChange:function(e){var t=new FileReader;t.onload=function(){2===t.readyState&&(d(t.result),document.querySelector("#post-img-container").style.display="initial",document.querySelector("#post-form-submit-btn").disabled=!1)};try{t.readAsDataURL(e.target.files[0])}catch(a){}}}),r.a.createElement("label",{className:"far fa-smile",id:"emoji-button",onClick:function(){return k(!1)}}),r.a.createElement("div",{className:"emoji-list-container",id:"emoji-list-container"},r.a.createElement(R.a,{onEmojiClick:function(e,t){i(o+t.emoji),document.querySelector("#post-form-submit-btn").disabled=!1}}))),r.a.createElement("button",{type:"submit",className:"btn btn-primary",id:"post-form-submit-btn",style:{height:"40px"},disabled:!0},"Postar")))}function A(e){var t=this,a=e.post,n=e.myProfile,c=function(t){t.stopPropagation();var a=t.target;a.classList.contains("fas")?(a.classList.remove("fas"),a.classList.add("far"),fetch("".concat(b,"/post-api/unlike-post/").concat(a.dataset.postid)).then((function(e){return e.json()})).then((function(t){console.log(t),e.renderParent()}))):(a.classList.remove("far"),a.classList.add("fas"),fetch("".concat(b,"/post-api/like-post/").concat(a.dataset.postid)).then((function(e){return e.json()})).then((function(t){console.log(t),e.renderParent()})))};return r.a.createElement("li",{className:"post-container post-list-item",id:"profile-post-".concat(a.id),key:a.id,onClick:function(){return window.location.href="/post/".concat(a.id)}},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"post-row"},r.a.createElement("div",{className:"post-col"},r.a.createElement(E.b,{to:a.author.id===n.id?"/perfil":"/user/".concat(a.author.slug),onClick:function(e){return e.stopPropagation()}},r.a.createElement("img",{src:"".concat(b).concat(a.author.photo),className:"profile-img-med"}))),r.a.createElement("div",{className:"post-col"},r.a.createElement(E.b,{to:a.author.id===n.id?"/perfil":"/user/".concat(a.author.slug),style:{color:"#000"},onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"post-author-data-wrapper"},r.a.createElement("strong",{style:{marginRight:"5px"}},a.author.first_name," ",a.author.last_name),r.a.createElement("p",{className:"text-secondary d-inline-block"},"@",a.author.user.username," \u2022 ",a.created.split("-").reverse().join("/")))),r.a.createElement("div",{style:{textAlign:"start"}},a.content),a.image&&r.a.createElement("img",{src:"".concat(b).concat(a.image),className:"post-img"}))),a.author.id===n.id&&r.a.createElement("i",{className:"far fa-trash-alt trash-icon text-secondary",style:{margin:"20px 20px 0 0"},onClick:function(e){return function(e,a){e.stopPropagation();var n=document.querySelector("#profile-post-".concat(a));window.confirm("Tem certeza que deseja apagar o post?\nEssa a\xe7\xe3o \xe9 irrevers\xedvel.")&&(n.style.animationPlayState="running",n.addEventListener("animationend",(function(){t.fetchPosts()})),fetch("".concat(b,"/post-api/delete-post/").concat(a),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":y}}).then((function(e){return e.json()})).then((function(e){console.log(e)})))}(e,a.id)}})),r.a.createElement("div",{className:"post-actions"},r.a.createElement("p",{className:"text-secondary"},r.a.createElement(E.b,{to:"/post/".concat(a.id,"/comentar"),className:"text-secondary",onClick:function(e){return e.stopPropagation()}},r.a.createElement("i",{class:"far fa-comment"}),a.comments.length),a.likes.map((function(e){return e.profile.id})).includes(n.id)?r.a.createElement("i",{class:"fas fa-heart","data-postid":a.id,onClick:c}):r.a.createElement("i",{class:"far fa-heart","data-postid":a.id,onClick:c}),r.a.createElement("p",{className:"post-likes-number",onClick:function(t){t.stopPropagation(),e.openLikesModal(a.likes)}},a.likes.length))))}var _=function(e){Object(P.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(w.a)(this,a),(n=t.call(this,e)).fetchPosts=function(){fetch("".concat(b,"/post-api/post-list/").concat(n.scrollCount)).then((function(e){return e.json()})).then((function(e){return n.setState({posts:e})}))},n.state={myProfile:null,posts:null,likesModal:{isOpen:!1,likes:null},postContent:"",postFormImagePreview:null},n.scrollCount=1,window.onscroll=function(){window.innerHeight+window.scrollY>=document.body.offsetHeight&&(n.scrollCount++,n.fetchPosts())},n}return Object(x.a)(a,[{key:"componentWillMount",value:function(){var e=this;fetch("".concat(b,"/profile-api/myprofile")).then((function(e){return e.json()})).then((function(t){return e.setState({myProfile:t})})),this.fetchPosts()}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(T,{isOpen:this.state.likesModal.isOpen,likes:this.state.likesModal.likes,hideModal:function(){return e.setState({likesModal:{isOpen:!1,likes:null}})}}),this.state.myProfile&&r.a.createElement(I,{myProfile:this.state.myProfile}),r.a.createElement("div",{className:"post-list"},this.state.posts&&this.state.myProfile&&this.state.posts.map((function(t){return r.a.createElement(A,{post:t,myProfile:e.state.myProfile,renderParent:e.fetchPosts,openLikesModal:function(t){return e.setState({likesModal:{isOpen:!0,likes:t}})}})})),r.a.createElement("div",{className:"posts-loader-container"},r.a.createElement("div",{className:"loader"}))))}}]),a}(r.a.Component);function D(e){var t=e.setFilteredProfiles,a=Object(n.useState)(""),c=Object(s.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)("byName"),m=Object(s.a)(l,2),u=m[0],d=m[1];Object(n.useEffect)((function(){""!==o?"byName"===u?fetch("".concat(b,"/profile-api/users/").concat(o)).then((function(e){return e.json()})).then((function(e){t(e)})):"byInterest"===u&&fetch("".concat(b,"/profile-api/users-by-interest/").concat(o)).then((function(e){return e.json()})).then((function(e){t(e)})):t(null)}),[o]);var f=function(){var e=document.querySelector("#search-type-selector").style;e.display||(e.display="none"),"none"===e.display?(document.querySelector("#profiles-search-extra-options-icon").classList.add("profiles-search-extra-options-icon-active"),e.display="flex"):(document.querySelector("#profiles-search-extra-options-icon").classList.remove("profiles-search-extra-options-icon-active"),e.display="none")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"profiles-filter-container"},r.a.createElement("div",{style:{width:"89%"}},r.a.createElement("input",{type:"text",className:"profiles-filter-input",placeholder:"byName"===u?"Pesquisar perfil":"Digite um ou mais interesses",value:o,onChange:function(e){return i(e.target.value)}})),r.a.createElement("i",{className:"fas fa-ellipsis-h btn profiles-search-extra-options-icon",id:"profiles-search-extra-options-icon",onClick:f})),r.a.createElement("div",{className:"profiles-search-type-selector",id:"search-type-selector",onClick:function(){d("byName"===u?"byInterest":"byName"),f()}},"byName"===u?r.a.createElement("li",{className:"d-flex align-items-center"},r.a.createElement("i",{class:"fas fa-grin-hearts text-secondary",style:{fontSize:"large",marginRight:"5px"}}),"Pesquisar por interesse"):r.a.createElement("li",{className:"d-flex align-items-center"},r.a.createElement("i",{class:"fas fa-user text-secondary",style:{fontSize:"large",marginRight:"5px"}}),"Pesquisar por nome")))}function H(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),i=Object(s.a)(o,2),l=i[0],m=i[1],u=Object(n.useState)(null),d=Object(s.a)(u,2),f=d[0],p=d[1],h=Object(n.useState)(1),g=Object(s.a)(h,2),E=g[0],v=g[1];window.onscroll=function(){window.innerHeight+window.scrollY>=document.body.offsetHeight&&v(E+1)},Object(n.useEffect)((function(){fetch("".concat(b,"/profile-api/myprofile")).then((function(e){return e.json()})).then((function(e){return c(e)}))}),[]),Object(n.useEffect)((function(){fetch("".concat(b,"/profile-api/profile-list/").concat(E)).then((function(e){return e.json()})).then((function(e){p(null),m(e)}))}),[E]);var N=function(e){e.preventDefault(),e.stopPropagation();var t,a=e.target;"Solicitar"===a.innerHTML?(t=a.dataset.pk,fetch("".concat(b,"/profile-api/send-friend-request"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":y},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return console.log(e)})),a.innerHTML="Solicitado",a.className="btn btn-primary"):(!function(e){fetch("".concat(b,"/profile-api/cancel-friend-request"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":y},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))}(a.dataset.pk),a.innerHTML="Solicitar",a.className="btn btn-secondary")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,{setFilteredProfiles:p}),r.a.createElement("div",{className:"list-group"},a&&(l||f)&&r.a.createElement("div",{className:"profile-list-container"},f?f.map((function(e){return r.a.createElement(M,{profile:e,myProfile:a})})):l&&l.map((function(e){return r.a.createElement(M,{profile:e,myProfile:a},r.a.createElement("button",{className:"btn btn-secondary","data-pk":e.id,onClick:N},"Solicitar"))}))),r.a.createElement("div",{className:"profiles-loader-container"},r.a.createElement("div",{className:"loader"}))))}function U(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){fetch("https://newsapi.org/v2/everything?q=ethereum&language=pt&apiKey=ff76727063ed40308672d1f49127bd43").then((function(e){return e.json()})).then((function(e){return c(e.article)}))}),[]),r.a.createElement(r.a.Fragment,null,null!==a&&r.a.createElement(r.a.Fragment,null,a.map((function(e){return r.a.createElement("div",null,e)}))))}var B=function(){return r.a.createElement(E.b,{to:"/postar"},r.a.createElement("i",{className:"fas fa-pencil-alt bottom-menu-action-icon"}))};function z(e){var t=Object(n.useContext)(i),a=Object(s.a)(t,2),c=a[0],o=(a[1],Object(n.useContext)(m)),l=Object(s.a)(o,2),u=l[0],f=(l[1],Object(n.useContext)(d)),h=Object(s.a)(f,2),g=h[0],v=(h[1],Object(n.useContext)(p)),b=Object(s.a)(v,2),y=b[0],N=(b[1],c+g+u);return Object(n.useEffect)((function(){j()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"bottom-menu-action-icon-container fixed-bottom"},e.children),r.a.createElement("div",{className:"bottom-menu fixed-bottom"},r.a.createElement("ul",null,r.a.createElement(E.b,{to:"/home",style:{textDecoration:"none"}},r.a.createElement("li",{className:"sidebar-menu-item",id:"bottom-home-menu",onClick:S},r.a.createElement("i",{className:"fas fa-home sidebar-menu-icon"}))),r.a.createElement(E.b,{to:"/notifica\xe7\xf5es",style:{textDecoration:"none"}},r.a.createElement("li",{className:"sidebar-menu-item",id:"bottom-notifications-menu",onClick:S},r.a.createElement("i",{className:"fas fa-bell sidebar-menu-icon"}),N?r.a.createElement("div",{className:"notification-text-container"},r.a.createElement("div",{className:"notification-text"},N)):"")),r.a.createElement(E.b,{to:"/mensagens",style:{textDecoration:"none"}},r.a.createElement("li",{className:"sidebar-menu-item",id:"bottom-messages-menu",onClick:S},r.a.createElement("i",{className:"fas fa-envelope sidebar-menu-icon"}),y?r.a.createElement("div",{className:"notification-text-container"},r.a.createElement("div",{className:"notification-text"},y)):"")),r.a.createElement(E.b,{to:"/perfil",style:{textDecoration:"none"}},r.a.createElement("li",{className:"sidebar-menu-item",id:"bottom-profile-menu",onClick:S},r.a.createElement("i",{className:"fas fa-user sidebar-menu-icon"}))),r.a.createElement(E.b,{to:"/configura\xe7\xf5es",style:{textDecoration:"none"}},r.a.createElement("li",{className:"sidebar-menu-item",id:"bottom-settings-menu",onClick:S},r.a.createElement("i",{className:"fas fa-cog sidebar-menu-icon"}))))))}function J(e){var t=e.setPage,a=e.feedPageTitle,n=e.profilesPageTitle,c=e.explorePageTitle,o=e.newsPageTitle;return r.a.createElement("div",{className:"home-page-menu"},r.a.createElement("div",{className:"home-menu-btn-container home-menu-btn-container-active feed"},r.a.createElement("button",{type:"button",className:"btn btn-primary",style:{margin:"10px",borderRadius:"20px"},onClick:function(){return t("Feed")}},r.a.createElement("i",{class:"fas fa-home mr-1"}),a)),r.a.createElement("div",{className:"home-menu-btn-container profiles"},r.a.createElement("button",{type:"button",className:"btn btn-primary",style:{margin:"10px",borderRadius:"20px"},onClick:function(){return t("Profiles")}},r.a.createElement("i",{class:"fas fa-user-friends mr-1"}),n)),r.a.createElement("div",{className:"home-menu-btn-container explore"},r.a.createElement("button",{type:"button",className:"btn btn-primary",style:{margin:"10px",borderRadius:"20px"},onClick:function(){return t("Explore")}},r.a.createElement("i",{class:"fas fa-search mr-1"}),c)),r.a.createElement("div",{className:"home-menu-btn-container news"},r.a.createElement("button",{type:"button",className:"btn btn-primary",style:{margin:"10px",borderRadius:"20px"},onClick:function(){return t("News")}},r.a.createElement("i",{class:"fas fa-newspaper mr-1"}),o)))}function X(e){var t=Object(n.useState)("Feed"),a=Object(s.a)(t,2),c=a[0],o=a[1],i={Feed:r.a.createElement(_,null),Profiles:r.a.createElement(H,null),Explore:"",News:r.a.createElement(U,null)};return document.title="Home / Napker",Object(n.useEffect)((function(){var e=document.querySelectorAll("."+c.toLowerCase());document.querySelectorAll(".home-menu-btn-container-active").forEach((function(e){return e.classList.remove("home-menu-btn-container-active")})),e.forEach((function(e){return e.classList.add("home-menu-btn-container-active")}))}),[c]),r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{page:"Home"}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"desktop-home-menu"},r.a.createElement(J,{setPage:o,feedPageTitle:"Feed",profilesPageTitle:"Encontrar perfis",explorePageTitle:"Descobrir",newsPageTitle:"Not\xedcias"})),r.a.createElement("div",{className:"mobile-home-menu"},r.a.createElement(J,{setPage:o})),i[c]),r.a.createElement(z,null,r.a.createElement(B,null)))}function V(e){var t=e.invite,a=e.replyRequest;return r.a.createElement("li",{className:"friend-request-row profile-row",id:"fr-".concat(t.sender.id),key:t.sender.id,onClick:function(){return window.location.href="/user/".concat(t.sender.slug)}},r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"profile-img-container"},r.a.createElement("img",{src:"".concat(b).concat(t.sender.photo),className:"profile-img-med",style:{marginRight:"10px"}})),r.a.createElement("div",{className:"d-flex flex-column w-100"},r.a.createElement("div",{className:"profile-row-top"},r.a.createElement("div",{className:"main-profile-data"},r.a.createElement("strong",{style:{textAlign:"start"}},t.sender.first_name," ",t.sender.last_name),r.a.createElement("p",{className:"text-secondary"},"@",t.sender.user.username))),r.a.createElement("div",{className:"profile-row-bottom"},t.sender.bio))),r.a.createElement("div",{className:"friend-request-col"},r.a.createElement("button",{className:"btn btn-primary btn-reply-fr mr-1","data-senderid":t.sender.id,"data-reply":"accept",onClick:a},"Aceitar"),r.a.createElement("button",{className:"btn btn-grey btn-reply-fr","data-senderid":t.sender.id,"data-reply":"decline",onClick:a},"Excluir")))}function W(e){var t=e.like;return r.a.createElement("li",{className:"notification-row",key:t.profile.id},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("i",{class:"fas fa-heart notification-like"}),r.a.createElement(E.b,{to:"/user/".concat(t.profile.slug)},r.a.createElement("img",{src:"".concat(b).concat(t.profile.photo),className:"profile-img-sm",style:{marginRight:"10px"}})),r.a.createElement("p",{className:"text-secondary d-inline-block"},t.created.split("-").reverse().join("/")),e.children),r.a.createElement("div",{className:"notification-message"},r.a.createElement("p",null,r.a.createElement(E.b,{to:"/user/".concat(t.profile.slug),style:{color:"#000"}},"@",t.profile.user.username)," curtiu seu post.")),r.a.createElement("div",{className:"notification-post-content"},t.post.content))}function Y(e){var t=e.comment;return r.a.createElement("li",{className:"notification-row",key:t.author.id},r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("i",{class:"fas fa-comment notification-comment"}),r.a.createElement(E.b,{to:"/user/".concat(t.author.slug)},r.a.createElement("img",{src:"".concat(b).concat(t.author.photo),className:"profile-img-sm",style:{marginRight:"10px"}})),r.a.createElement("p",{className:"text-secondary d-inline-block"},t.created.split("-").reverse().join("/")),e.children),r.a.createElement("div",{className:"notification-message"},r.a.createElement("p",null,r.a.createElement(E.b,{to:"/user/".concat(t.author.slug),style:{color:"#000"}},"@",t.author.user.username)," comentou seu post.")),r.a.createElement("div",{className:"notification-comment-container"},r.a.createElement("div",{className:"notification-comment-content"},t.content),r.a.createElement(E.b,{to:"/post/".concat(t.post.id)},r.a.createElement("button",{className:"btn btn-primary"},"Ver Post"))))}function K(){return r.a.createElement("div",{className:"notification-text-container"},r.a.createElement("div",{className:"notification-text"},"novo"))}function Q(e){var t,a=Object(n.useState)(null),c=Object(s.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(null),m=Object(s.a)(l,2),u=m[0],d=m[1],f=Object(n.useState)(null),p=Object(s.a)(f,2),h=p[0],g=p[1],E=Object(n.useState)(null),v=Object(s.a)(E,2),N=v[0],k=v[1],j=Object(n.useState)(null),S=Object(s.a)(j,2),O=S[0],w=S[1];document.title="Notifica\xe7\xf5es / Napker";var x=function(){fetch("".concat(b,"/profile-api/myinvites")).then((function(e){return e.json()})).then((function(e){return i(e)})),fetch("".concat(b,"/post-api/unvisualized-post-likes")).then((function(e){return e.json()})).then((function(e){return d(e)})),fetch("".concat(b,"/post-api/unvisualized-post-comments")).then((function(e){return e.json()})).then((function(e){return k(e)})),fetch("".concat(b,"/post-api/post-likes-visualized-last-2-days")).then((function(e){return e.json()})).then((function(e){return g(e)})),fetch("".concat(b,"/post-api/post-comments-visualized-last-2-days")).then((function(e){return e.json()})).then((function(e){return w(e)}))};Object(n.useEffect)((function(){return x(),t=window.setInterval(x,3e3),function(){return window.clearInterval(t)}}),[]),Object(n.useEffect)((function(){u&&u.length&&fetch("".concat(b,"/post-api/visualize-likes")).then((function(e){return e.json()})).then((function(t){console.log(t),e.updateNotificationsNumber()}))}),[u]),Object(n.useEffect)((function(){N&&N.length&&fetch("".concat(b,"/post-api/visualize-comments")).then((function(e){return e.json()})).then((function(t){console.log(t),e.updateNotificationsNumber()}))}),[N]);var P=function(t){t.stopPropagation();var a=t.target,n={senderid:a.dataset.senderid,reply:a.dataset.reply};fetch("".concat(b,"/profile-api/reply-friend-request"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":y},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(t){console.log(t),e.updateNotificationsNumber()})),document.getElementById("fr-".concat(a.dataset.senderid)).remove(),x()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{page:"Notifica\xe7\xf5es"}),r.a.createElement("div",{className:"content"},r.a.createElement("div",null,null!==o&&u&&null!==h&&null!==N&&null!==O?r.a.createElement("div",null,o.length||u.length||h.length||N.length||O.length?r.a.createElement("div",{className:"notifications-container"},!!o.length&&r.a.createElement("div",null,o.map((function(e){return r.a.createElement(V,{invite:e,replyRequest:P})}))),(!!u.length||!!N.length)&&r.a.createElement(r.a.Fragment,null,!!u.length&&r.a.createElement(r.a.Fragment,null,u.map((function(e){return r.a.createElement(W,{like:e},r.a.createElement(K,null))}))),!!N.length&&r.a.createElement(r.a.Fragment,null,N.map((function(e){return r.a.createElement(Y,{comment:e},r.a.createElement(K,null))})))),(!!h.length||!!O.length)&&r.a.createElement(r.a.Fragment,null,!!h.length&&r.a.createElement(r.a.Fragment,null,h.map((function(e){return r.a.createElement(W,{like:e})}))),!!O.length&&r.a.createElement(r.a.Fragment,null,O.map((function(e){return r.a.createElement(Y,{comment:e})}))))):r.a.createElement("div",{className:"no-notifications-container"},r.a.createElement("h3",null,"Voc\xea n\xe3o tem nenhuma notifica\xe7\xe3o"))):r.a.createElement("div",{className:"notifications-loader-container"},r.a.createElement("div",{className:"loader"})))),r.a.createElement(z,null))}function G(e){return r.a.createElement("div",{className:"header fixed-top"},e.backArrow?r.a.createElement("i",{class:"fas fa-arrow-left left-arrow-icon",onClick:function(){return window.history.back()}}):"",r.a.createElement("strong",null,e.page))}function Z(e){var t=e.modalProfiles,a=e.setParentState,n=e.addingNewChat;return r.a.createElement(L.a,{show:n,onHide:function(){return a({addingNewChat:!1})},size:"lg"},r.a.createElement(L.a.Header,{closeButton:!0},r.a.createElement(L.a.Title,null,r.a.createElement("strong",null,"Nova conversa"))),r.a.createElement(L.a.Body,{style:{padding:"0"}},r.a.createElement("input",{className:"modal-search-input",placeholder:"Pesquisar pessoas",onChange:function(e){var t;""!==(t=e.target.value)?fetch("".concat(b,"/profile-api/users/").concat(t)).then((function(e){return e.json()})).then((function(e){a({modalProfiles:e})})):a({modalProfiles:[]})}}),r.a.createElement("div",{className:"list-group",style:{height:"400px",overflow:"hidden",overflowY:"scroll"}},t&&t.map((function(e){return r.a.createElement(E.b,{to:"/mensagens/".concat(e.slug),style:{color:"#000",textDecoration:"none"},onClick:function(){return a({addingNewChat:!1})}},r.a.createElement("li",{className:"list-group-item profile-row modal-profile-li",key:e.id},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"profile-col"},r.a.createElement("img",{src:"".concat(b).concat(e.photo),className:"profile-img-med",style:{marginRight:"10px"}}),r.a.createElement("div",{className:"main-profile-data"},r.a.createElement("strong",null,e.first_name," ",e.last_name),r.a.createElement("p",{className:"text-secondary"},"@",e.user.username))))))})))))}var $=a(18),ee=a(29),te=function(){function e(){Object(w.a)(this,e),this.callbacks={},this.socketRef=null}return Object(x.a)(e,null,[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),Object(x.a)(e,[{key:"connect",value:function(e){var t=this,a="".concat("ws://127.0.0.1:8000","/ws/chat/").concat(e,"/");this.socketRef=new WebSocket(a),this.socketRef.onopen=function(){console.log("WebSocket open")},this.socketNewMessage(JSON.stringify({command:"fetch-messages"})),this.socketRef.onmessage=function(e){t.socketNewMessage(e.data)},this.socketRef.onerror=function(e){console.log(e.message)},this.socketRef.onclose=function(){console.log("WebSocket closed")}}},{key:"disconnect",value:function(){this.socketRef&&this.socketRef.close()}},{key:"socketNewMessage",value:function(e){var t=JSON.parse(e),a=t.command;0!==Object.keys(this.callbacks).length&&("messages"===a&&this.callbacks[a](t.messages),"new_message"===a&&this.callbacks[a](t.message))}},{key:"fetchMessages",value:function(e,t){this.sendMessage({command:"fetch_messages",username:e,chatId:t})}},{key:"newChatMessage",value:function(e){this.sendMessage({command:"new_message",from:e.from,content:e.content,chatId:e.chatId})}},{key:"readMessages",value:function(e){this.sendMessage({command:"read_messages",chatId:e})}},{key:"addCallbacks",value:function(e,t){this.callbacks.messages=e,this.callbacks.new_message=t}},{key:"sendMessage",value:function(e){try{1===this.state()&&this.socketRef.send(JSON.stringify(Object(ee.a)({},e)))}catch(t){console.log(t.message)}}},{key:"state",value:function(){return this.socketRef?this.socketRef.readyState:0}}]),e}();te.instance=null;var ae=te.getInstance();function ne(e){var t=e.WebSocketInstance,a=e.chatId,c=e.username,o=e.otherProfile,i=e.myProfile,l=e.updateMessagesComponent,m=Object(n.useState)(""),u=Object(s.a)(m,2),d=u[0],f=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"emoji-list-container chat-emoji-list",id:"emoji-list-container"},r.a.createElement(R.a,{onEmojiClick:function(e,t){f(d+t.emoji),document.querySelector("#chat-message-submit").disabled=!1}})),r.a.createElement("form",{className:"send-message-container",onSubmit:function(e){e.preventDefault();var n={from:c,content:d,chatId:a};f(""),o.blocked_users.map((function(e){return e.id})).includes(i.user.id)?window.alert("Voc\xea n\xe3o pode enviar mensagens para ".concat(o.first_name,".\n            ").concat(o.first_name," te bloqueou.")):i.blocked_users.map((function(e){return e.id})).includes(o.user.id)?window.alert("Voc\xea n\xe3o pode enviar mensagens para ".concat(o.first_name,".\n            Voc\xea bloqueou ").concat(o.first_name,".")):(t.newChatMessage(n),document.querySelector("#chat-message-submit").disabled=!0,k(!0),l())}},r.a.createElement("label",{className:"far fa-smile",id:"emoji-button",onClick:function(){return k(!1)}}),r.a.createElement("input",{placeholder:"Mensagem",className:"message-input",id:"chat-message-input",value:d,autoFocus:""===document.querySelector("#contact-filter-input").value,onChange:function(e){f(e.target.value),document.querySelector("#chat-message-submit").disabled=""===e.target.value.trim()}}),r.a.createElement("button",{className:"btn btn-primary chat-message-submit",id:"chat-message-submit",disabled:!0},r.a.createElement("i",{class:"fas fa-chevron-right"}))))}function re(e){var t=e.message,a=e.currentUser;return r.a.createElement("li",{key:t.id,className:t.author===a?"sent":"received"},r.a.createElement("p",null,t.content,r.a.createElement("br",null),r.a.createElement("small",null,function(e){var t=new Date(e),a=t.getDate()>=10?t.getDate():"0".concat(t.getDate()),n=t.getMonth()>=10?t.getMonth():"0".concat(t.getMonth()),r=t.getHours()>=10?t.getHours():"0".concat(t.getHours()),c=t.getMinutes()>=10?t.getMinutes():"0".concat(t.getMinutes());return"".concat(a,"/").concat(n,"/").concat(t.getFullYear()," - ").concat(r,":").concat(c)}(t.timestamp)," ",t.author===a?t.read?r.a.createElement("i",{class:"fas fa-check-double"}):r.a.createElement("i",{class:"fas fa-check"}):"")))}var ce=function(e){Object(P.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(w.a)(this,a),(n=t.call(this,e)).handleComponentChange=function(){!n.state.otherUsername||n.state.otherProfile&&n.state.otherProfile.user.username===n.state.otherUsername||fetch("".concat(b,"/profile-api/user/").concat(n.state.otherUsername)).then((function(e){return e.json()})).then((function(e){return n.setState({otherProfile:e})})),n.state.myProfile||fetch("".concat(b,"/profile-api/myprofile")).then((function(e){return e.json()})).then((function(e){return n.setState({myProfile:e})})),n.state.messages.length&&!n.state.scrolledToBottom&&document.querySelectorAll(".sent, .received").length&&n.scrollToBottom()},n.readMessages=function(e){fetch("".concat(b,"/chat-api/read-messages"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":y},body:JSON.stringify({chat_id:e.chatId})}).then((function(e){return e.json()})).then((function(e){console.log(e),ae.readMessages(n.props.chatId)}))},n.scrollToBottom=function(){if(document.querySelector("#chat-log")){var e=document.querySelector("#chat-log");e.scrollTop=e.scrollHeight,n.setState({scrolledToBottom:!0})}},n.state={messages:[],scrolledToBottom:!1,myProfile:null,otherUsername:n.props.otherUsername,otherProfile:null},n.initialiseChat(),n}return Object(x.a)(a,[{key:"initialiseChat",value:function(){var e=this;console.log("initializing chat..."),this.waitForSocketConnection((function(){ae.addCallbacks(e.getMessages.bind(e),e.addMessage.bind(e)),ae.fetchMessages(e.props.username,e.props.chatId)})),this.props.chatId&&ae.connect(this.props.chatId)}}]),Object(x.a)(a,[{key:"componentDidMount",value:function(){this.handleComponentChange()}},{key:"componentDidUpdate",value:function(){this.handleComponentChange(),document.querySelector("#contact-filter-input")&&document.activeElement!==document.querySelector("#contact-filter-input")&&document.querySelector("#chat-message-input")&&document.querySelector("#chat-message-input").focus()}},{key:"componentWillUnmount",value:function(){ae.disconnect()}},{key:"componentWillReceiveProps",value:function(e){e.chatId&&e.chatId!==this.props.chatId&&e.otherUsername&&1!==ae.state()&&(this.waitForSocketConnection((function(){ae.fetchMessages(e.username,e.chatId)})),ae.connect(e.chatId),this.readMessages(e),this.props.updateMessagesComponent(),this.setState({messages:[],scrolledToBottom:!1})),this.state.otherUsername!==e.otherUsername&&this.setState({otherUsername:e.otherUsername}),this.props.updateUnreadMessagesNumber&&this.props.updateUnreadMessagesNumber(),this.state.otherUsername&&!e.otherUsername&&(ae.disconnect(),this.setState({otherUsername:void 0,otherProfile:void 0}))}},{key:"waitForSocketConnection",value:function(e){var t=this;setTimeout((function(){if(1===ae.state())return console.log("Connection is made"),void e();console.log("wait for connection..."),t.waitForSocketConnection(e)}),100)}},{key:"getMessages",value:function(e){this.setState({messages:e.reverse()})}},{key:"addMessage",value:function(e){this.setState({messages:[].concat(Object($.a)(this.state.messages),[e]),scrolledToBottom:!1}),this.readMessages(this.props)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,null===this.state.otherProfile&&this.props.otherUsername?r.a.createElement("div",{className:"chat-loader-container"},r.a.createElement("div",{className:"loader"})):r.a.createElement(r.a.Fragment,null,this.state.otherProfile?r.a.createElement("div",{className:"current-chat"},r.a.createElement("div",{className:"current-chat-header"},r.a.createElement("i",{class:"fas fa-arrow-left left-arrow-icon",onClick:function(){return window.history.back()}}),r.a.createElement(E.b,{to:"/user/".concat(this.state.otherProfile.slug)},r.a.createElement("img",{src:"".concat(b).concat(this.state.otherProfile.photo),className:"profile-img-sm",style:{marginRight:"5px"}})),r.a.createElement("div",{className:"d-flex flex-column align-items-start",style:{height:"52px"}},r.a.createElement("strong",null,this.state.otherProfile.first_name," ",this.state.otherProfile.last_name),r.a.createElement("p",{className:"text-secondary"},"@",this.state.otherProfile.user.username))),r.a.createElement("div",{id:"chat-log"},this.state.messages.map((function(t){return r.a.createElement(re,{message:t,currentUser:e.props.username})}))),r.a.createElement(ne,{WebSocketInstance:ae,chatId:this.props.chatId,username:this.props.username,otherProfile:this.state.otherProfile,myProfile:this.state.myProfile,updateMessagesComponent:this.props.updateMessagesComponent})):r.a.createElement("div",{className:"current-chat no-chat-selected"},r.a.createElement("div",null,r.a.createElement("strong",{style:{fontSize:"larger"}},"Voc\xea n\xe3o tem uma conversa selecionada"),r.a.createElement("p",{className:"text-secondary"},"Selecione uma existente ou comece uma nova"),r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return e.props.openModal()}},"Nova conversa")))))}}]),a}(r.a.Component);function oe(e){var t,a,n=e.profile,c=e.activeChats,o=e.activeChatsProfiles;return r.a.createElement(r.a.Fragment,null,void 0!==n&&r.a.createElement(E.b,{to:"/mensagens/".concat(n.slug),style:{color:"#000",textDecoration:"none"}},void(t=0),r.a.createElement("li",{className:"list-item profile-chat-item",style:{whiteSpace:"nowrap"}},r.a.createElement("img",{src:"".concat(b).concat(n.photo),className:"profile-img-med",style:{marginRight:"10px"}}),r.a.createElement("div",{className:"d-flex flex-column align-items-start"},r.a.createElement("div",{className:"d-flex",style:{maxHeight:"30px"}},r.a.createElement("strong",{style:{height:"fit-content"}},n.first_name," ",n.last_name),c[o.indexOf(n)].messages.map((function(e,r,c){c[c.length-1]===e&&function(e){a=e}(e.content),e.read||e.contact.user.username!==n.user.username||t++})),t>0&&r.a.createElement("div",{className:"notification-text-container"},r.a.createElement("div",{className:"notification-text"},t)),r.a.createElement("p",{className:"text-secondary",style:{marginLeft:"5px"}},"@",n.user.username)),r.a.createElement("p",{className:"text-secondary"},a.slice(0,40))))))}function se(e){var t=e.activeChatsProfiles,a=e.setHasFilteredProfiles,n=e.fetchActiveChatProfiles,c=e.setParentState,o=e.openModal;return r.a.createElement("div",{className:"search-input-container"},r.a.createElement("input",{className:"search-input contact-filter-input",id:"contact-filter-input",placeholder:"Pesquisar pessoas",onChange:function(e){return function(e){if(""===e)return a(!1),void n();if(t){console.log(t);var r=t.filter((function(t){return t.user.username.includes(e)}));a(!0),c({renderedActiveChatsProfiles:r})}}(e.target.value)}}),r.a.createElement("i",{className:"fas fa-plus add-icon",onClick:o}))}var ie=function(e){Object(P.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(w.a)(this,a),(n=t.call(this,e)).handleReceiveProps=function(e){if(e.match.params.slug){e.match.params.slug!==n.props.match.params.slug&&1===ae.state()&&ae.disconnect();var t={username:n.state.username,other_username:e.match.params.slug};fetch("".concat(b,"/chat-api/chat-id/").concat(JSON.stringify(t))).then((function(e){return e.json()})).then((function(e){n.setState({chatId:e.chat_id})}))}else n.state.chatId&&n.setState({chatId:null})},n.fetchActiveChatProfiles=function(){fetch("".concat(b,"/chat-api/active-chats-profiles")).then((function(e){return e.json()})).then((function(e){n.state.username&&(n.hasFilteredProfiles||n.setState({activeChats:e.chats,activeChatsProfiles:e.profiles,renderedActiveChatsProfiles:e.profiles}))}))},n.openModal=function(){n.setState({addingNewChat:!0})},n.state={myProfile:null,username:null,chatId:null,activeChats:null,activeChatsProfiles:null,renderedActiveChatsProfiles:null,addingNewChat:!1,modalProfiles:[]},n.rerenderingInterval=null,n.hasFilteredProfiles=!1,n}return Object(x.a)(a,[{key:"componentWillReceiveProps",value:function(e){e!==this.props&&this.handleReceiveProps(e)}},{key:"handleComponentChange",value:function(){var e=this;this.state.username||fetch("".concat(b,"/profile-api/logged-user")).then((function(e){return e.json()})).then((function(t){e.setState({username:t.username}),e.props.match.params.slug&&e.handleReceiveProps(e.props)})),this.state.activeChatsProfiles||this.state.activeChatsProfiles===[]||this.fetchActiveChatProfiles()}},{key:"componentWillMount",value:function(){document.title="Mensagens / Napker",this.handleComponentChange(),this.rerenderingInterval=window.setInterval(this.fetchActiveChatProfiles,4e3)}},{key:"componentWillUnmount",value:function(){window.clearInterval(this.rerenderingInterval)}},{key:"componentDidUpdate",value:function(){this.handleComponentChange()}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{page:"Mensagens"}),r.a.createElement("div",{className:"content d-flex messages-wrapper"},r.a.createElement(Z,{addingNewChat:this.state.addingNewChat,setParentState:this.setState.bind(this),modalProfiles:this.state.modalProfiles}),r.a.createElement("div",{className:"chats-list"},r.a.createElement(se,{activeChatsProfiles:this.state.activeChatsProfiles,setHasFilteredProfiles:function(t){return e.hasFilteredProfiles=t},fetchActiveChatProfiles:this.fetchActiveChatProfiles,setParentState:this.setState.bind(this),openModal:this.openModal}),r.a.createElement("div",{className:"list-group chats-container"},null!==this.state.renderedActiveChatsProfiles?this.state.renderedActiveChatsProfiles.map((function(t){return r.a.createElement(oe,{profile:t,activeChats:e.state.activeChats,activeChatsProfiles:e.state.activeChatsProfiles})})):r.a.createElement("div",{className:"messages-loader-container"},r.a.createElement("div",{className:"loader"})))),r.a.createElement(ce,{username:this.state.username,otherUsername:this.props.match.params.slug,chatId:this.state.chatId,openModal:this.openModal,updateUnreadMessagesNumber:this.props.updateUnreadMessagesNumber,updateMessagesComponent:this.fetchActiveChatProfiles})),!this.props.match.params.slug&&r.a.createElement(z,null))}}]),a}(r.a.Component);function le(e){var t=e.profile,a=e.isOpen,c=e.closeModal,o=Object(n.useState)("".concat(b).concat(t.photo)),i=Object(s.a)(o,2),l=i[0],m=i[1],u=Object(n.useState)(""),d=Object(s.a)(u,2),f=d[0],p=d[1];return r.a.createElement(L.a,{show:a,onHide:c,size:"lg"},r.a.createElement(L.a.Header,{closeButton:!0},r.a.createElement(L.a.Title,null,"Editar perfil")),r.a.createElement(L.a.Body,null,r.a.createElement("form",{action:"".concat(b,"/update-profile"),className:"d-flex flex-column justify-content-center",id:"update-profile-form",method:"POST",encType:"multipart/form-data"},r.a.createElement("input",{type:"hidden",name:"csrfmiddlewaretoken",value:y}),r.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center mb-2"},r.a.createElement("img",{src:l,className:"profile-img-big",style:{marginBottom:"25px"}}),r.a.createElement("input",{type:"file",accept:"image/png, image/jpg, image/jpeg",className:"profile-photo-input",name:"profile-photo",onChange:function(e){var t=new FileReader;t.onload=function(){2===t.readyState&&m(t.result)};try{t.readAsDataURL(e.target.files[0])}catch(a){}}})),r.a.createElement("div",{className:"d-flex justify-content-center"},"Email: ",t.email),r.a.createElement("hr",null),r.a.createElement("div",{className:"edit-profile-input"},r.a.createElement("label",{htmlFor:"first-name",className:"profile-field-label"},"Nome:"),r.a.createElement("input",{className:"profile-field-input",type:"text",name:"first-name",id:"first-name",placeholder:t.first_name})),r.a.createElement("div",{className:"edit-profile-input"},r.a.createElement("label",{htmlFor:"last-name",className:"profile-field-label"},"Sobrenome:"),r.a.createElement("input",{className:"profile-field-input",type:"text",name:"last-name",id:"last-name",placeholder:t.last_name})),r.a.createElement("div",{className:"edit-profile-input"},r.a.createElement("label",{htmlFor:"username",className:"profile-field-label"},"Nome de usu\xe1rio:"),r.a.createElement("input",{className:"profile-field-input",type:"text",name:"username",id:"username",placeholder:"@".concat(t.user.username),onChange:function(e){""!==e.target.value.trim()&&fetch("".concat(b,"/profile-api/user/").concat(e.target.value)).then((function(e){return e.json()})).then((function(e){"false"!==e.bool&&e.id!==t.id?document.querySelector("#username-taken").style.display="initial":document.querySelector("#username-taken").style.display="none"}))}})),r.a.createElement("div",{id:"username-taken",style:{display:"none",width:"100%",textAlign:"center",padding:"3px"}},r.a.createElement("span",null,"Nome de usu\xe1rio j\xe1 existe")),r.a.createElement("div",{className:"edit-profile-input"},r.a.createElement("label",{htmlFor:"birth-date",className:"profile-field-label"},"Data de nascimento:"),r.a.createElement("input",{className:"profile-field-input",type:"date",name:"birth-date",id:"birth-date",defaultValue:t.birth_date})),r.a.createElement("div",{className:"emoji-list-container bio-emoji-list",id:"emoji-list-container"},r.a.createElement(R.a,{onEmojiClick:function(e,t){p(f+t.emoji)}})),r.a.createElement("div",{className:"edit-profile-input"},r.a.createElement("label",{htmlFor:"bio",className:"profile-field-label"},"Bio:"),r.a.createElement("div",{className:"email-input-container"},r.a.createElement("input",{className:"profile-field-input-email",type:"email",name:"bio",id:"bio",value:f,placeholder:t.bio,maxLength:100,onChange:function(e){return p(e.target.value)}}),r.a.createElement("label",{className:"far fa-smile",id:"emoji-button",onClick:function(){return k(!1)}}))))),r.a.createElement(L.a.Footer,null,r.a.createElement("button",{className:"btn btn-grey",onClick:c},"Fechar"),r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return document.querySelector("form#update-profile-form").submit()}},"Salvar")))}function me(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){fetch("".concat(b,"/profile-api/myprofile")).then((function(e){return e.json()})).then((function(e){return o(e)}))}),[]),r.a.createElement(L.a,{show:e.isOpen,onHide:e.hideModal,size:"lg"},r.a.createElement(L.a.Header,{closeButton:!0},r.a.createElement(L.a.Title,null,r.a.createElement("strong",null,"Curtidas"))),r.a.createElement(L.a.Body,null,r.a.createElement("div",{className:"list-group",style:{height:"400px",overflow:"hidden",overflowY:"scroll"}},e.likes&&e.likes.map((function(e){return e.profile})).map((function(t){return r.a.createElement(M,{profile:t,myProfile:c,style:{borderTop:"none",borderLeft:"none",borderRight:"none"},onClick:e.hideModal})})))))}function ue(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)({isOpen:!1,likes:null}),l=Object(s.a)(i,2),m=l[0],u=l[1],d=e.profile;Object(n.useEffect)((function(){fetch("".concat(b,"/profile-api/myprofile")).then((function(e){return e.json()})).then((function(e){return o(e)}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(me,{isOpen:m.isOpen,likes:m.likes,hideModal:function(){u({isOpen:!1,likes:null})}}),r.a.createElement("div",{className:"post-list"},d&&c?r.a.createElement(r.a.Fragment,null,d.posts.length?d.posts.map((function(t){return r.a.createElement(A,{post:t,myProfile:c,renderParent:e.fetchProfile,openLikesModal:function(e){return u({isOpen:!0,likes:e})}})})):r.a.createElement("div",{className:"no-posts-container"},d.id===c.id?r.a.createElement("h3",{style:{marginTop:"50px"}},"Voc\xea n\xe3o tem posts"):r.a.createElement("h3",{style:{marginTop:"50px"}},d.first_name," n\xe3o tem posts"))):r.a.createElement("div",{className:"posts-loader-container"},r.a.createElement("div",{className:"loader"}))))}function de(e){var t=e.profile;return r.a.createElement("div",{className:"interests-page-container"},r.a.createElement("h3",null,"Interesses p\xfablicos de ",t.first_name),r.a.createElement("div",{className:"interest-list-container"},t&&t.interests.filter((function(e){return e.public})).map((function(e){return r.a.createElement(r.a.Fragment,null,e.title&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement("li",{className:"interest-item"},e.title[0].toUpperCase()+e.title.slice(1),r.a.createElement(E.b,{to:"/interesses/".concat(e.title)},r.a.createElement("button",{className:"btn btn-secondary",style:{padding:"5px"}},"Pesquisar usu\xe1rios")))))}))))}function fe(e){var t=e.profile;return r.a.createElement("div",{className:"profile-data-container"},r.a.createElement("div",{className:"d-flex flex-column align-items-start",style:{textAlign:"start"}},r.a.createElement("p",null,r.a.createElement("img",{src:"".concat(b).concat(t.photo),className:"profile-img-big",style:{marginBottom:"25px"}})),r.a.createElement("p",{style:{marginBottom:0}},r.a.createElement("strong",null,t.first_name," ",t.last_name)),r.a.createElement("p",{className:"text-secondary",style:{marginTop:0}},"@",t.user.username),r.a.createElement("p",null,t.bio),r.a.createElement("p",{className:"text-secondary"},r.a.createElement("i",{className:"far fa-calendar-alt"})," Entrou em ",t.created.split("-").reverse().join("/")),r.a.createElement("p",null,r.a.createElement(E.b,{to:"/user/".concat(t.slug,"/amigos"),style:{color:"#000"}},r.a.createElement("strong",null,t.friends.length)," ",1===t.friends.length?"amigo":"amigos"))),e.children)}function pe(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),i=Object(s.a)(o,2),l=i[0],m=i[1],u=Object(n.useState)(!0),d=Object(s.a)(u,2),f=d[0],p=d[1];document.title="Perfil / Napker",Object(n.useEffect)((function(){h()}),[]);var h=function(){fetch("".concat(b,"/profile-api/myprofile")).then((function(e){return e.json()})).then((function(e){return c(e)}))},g=function(e){document.querySelectorAll(".profile-page-menu-item-active").forEach((function(e){e.classList.remove("profile-page-menu-item-active")})),e.target.classList.add("profile-page-menu-item-active"),"profile-posts-page-menu-item"===e.target.id?p(!0):"profile-interests-page-menu-item"===e.target.id&&p(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{page:"Perfil"}),r.a.createElement("div",{className:"content"},a?r.a.createElement(r.a.Fragment,null,r.a.createElement(le,{profile:a,isOpen:l,closeModal:function(){return m(!1)}}),r.a.createElement(fe,{profile:a},r.a.createElement("div",{className:"myprofile-btn-wrapper"},r.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return m(!0)},style:{marginBottom:"10px"}},"Editar perfil"),r.a.createElement(E.b,{to:"/perfil/meus-interesses"},r.a.createElement("button",{className:"btn btn-secondary"},"Editar interesses")))),r.a.createElement("div",{className:"profile-page-menu"},r.a.createElement("div",{className:"profile-page-menu-item profile-page-menu-item-active",id:"profile-posts-page-menu-item",onClick:g},"Posts (",a.posts.length,")"),r.a.createElement("div",{className:"profile-page-menu-item",id:"profile-interests-page-menu-item",onClick:g},"Interesses (",a.interests.filter((function(e){return e.public})).length,")")),f?r.a.createElement(ue,{profile:a,fetchProfile:h}):r.a.createElement(de,{profile:a})):r.a.createElement("div",{className:"profile-page-loader-container"},r.a.createElement("div",{className:"loader"}))),r.a.createElement(z,null))}function he(e){return r.a.createElement("div",{className:"settings-page-menu"},r.a.createElement("div",{className:"d-flex flex-column w-100"},r.a.createElement(E.b,{to:"/configura\xe7\xf5es/perfis-bloqueados",style:{textDecoration:"none",width:"100%"}},r.a.createElement("li",{id:"blocked-profiles",onClick:function(){return e.pageChange("blocked-profiles")}},"Perfis bloqueados",r.a.createElement("i",{className:"fas fa-angle-right"}))),r.a.createElement(E.b,{to:"/configura\xe7\xf5es/seguran\xe7a",style:{textDecoration:"none",width:"100%"}},r.a.createElement("li",{id:"security",onClick:function(){return e.pageChange("security")}},"Seguran\xe7a",r.a.createElement("i",{className:"fas fa-angle-right"}))),r.a.createElement(E.b,{to:"/configura\xe7\xf5es/faq",style:{textDecoration:"none",width:"100%"}},r.a.createElement("li",{id:"faq",onClick:function(){return e.pageChange("faq")}},"FAQ",r.a.createElement("i",{className:"fas fa-angle-right"}))),r.a.createElement(E.b,{to:"/configura\xe7\xf5es/fale-conosco",style:{textDecoration:"none",width:"100%"}},r.a.createElement("li",{id:"feedback",onClick:function(){return e.pageChange("feedback")}},"Fale conosco",r.a.createElement("i",{className:"fas fa-angle-right"})))),r.a.createElement("li",{className:"logout-btn",onClick:N},"Sair da conta"))}function ge(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),i=Object(s.a)(o,2),l=i[0],m=i[1];return Object(n.useEffect)((function(){fetch("".concat(b,"/profile-api/myprofile")).then((function(e){return e.json()})).then((function(e){return m(e)})),fetch("".concat(b,"/profile-api/get-blocked-profiles")).then((function(e){return e.json()})).then((function(e){return c(e)}))}),[]),r.a.createElement("div",{className:"settings-description-container"},null!==a&&null!==l?r.a.createElement(r.a.Fragment,null,a.length?r.a.createElement("div",{className:"blocked-profiles-list"},r.a.createElement("div",{className:"blocked-profiles-title"},r.a.createElement("h4",null,"Voc\xea possui ",a.length," ",1===a.length?"perfil bloqueado":"perfis bloqueados")),a.map((function(e){return r.a.createElement(M,{profile:e,myProfile:l,style:{borderTop:"none",borderLeft:"none",borderRight:"none"}})}))):r.a.createElement("div",{className:"no-blocked-profiles"},r.a.createElement("h3",null,"Voc\xea n\xe3o possui perfis bloqueados"))):r.a.createElement("div",{className:"settings-loader-container"},r.a.createElement("div",{className:"loader"})))}function Ee(e){return r.a.createElement("div",{className:"settings-description-container",style:{background:"var(--body-background)"}},r.a.createElement("div",{className:"security-page-menu"},r.a.createElement("div",{className:"d-flex flex-column w-100"},r.a.createElement("li",null,r.a.createElement("strong",null,"Seguran\xe7a")),r.a.createElement(E.b,{to:"/configura\xe7\xf5es/alterar-senha",style:{textDecoration:"none",width:"100%"}},r.a.createElement("li",{id:"change-password",onClick:function(){return e.pageChange("change-password")}},"Alterar senha",r.a.createElement("i",{className:"fas fa-angle-right"}))),r.a.createElement(E.b,{to:"/configura\xe7\xf5es/deletar-conta",style:{textDecoration:"none",width:"100%"}},r.a.createElement("li",{id:"delete-account",onClick:function(){return e.pageChange("delete-account")}},"Apagar conta",r.a.createElement("i",{className:"fas fa-angle-right"}))))))}function ve(){return r.a.createElement("div",{className:"settings-description-container",style:{background:"var(--body-background)"}})}var be=a(28);function ye(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),i=Object(s.a)(o,2),l=i[0],m=i[1];return r.a.createElement("div",{className:"settings-description-container"},r.a.createElement("div",{className:"d-flex justify-content-start align-items-center",style:{background:"#fff",padding:"15px",borderBottom:"1px solid var(--border-color)"}},r.a.createElement("i",{class:"fas fa-arrow-left left-arrow-icon mr-2",onClick:function(){return window.history.back()}}),r.a.createElement("strong",{style:{fontSize:"1.2rem"}},"Seguran\xe7a")),a&&r.a.createElement("div",{class:"alert alert-danger alert",role:"alert"},a),l&&r.a.createElement("div",{class:"alert alert-success alert",role:"alert"},l),r.a.createElement("div",{className:"settings-page-title-container"},r.a.createElement("h3",null,"Alterar senha")),r.a.createElement("hr",null),r.a.createElement("form",{className:"change-password-form"},r.a.createElement("input",{id:"password",type:"password",placeholder:"Senha atual",autoFocus:!0}),r.a.createElement("br",null),r.a.createElement("a",{href:"".concat(b,"/recuperar-senha")},"Esqueceu sua senha?"),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("input",{id:"new_password",type:"password",placeholder:"Nova senha"}),r.a.createElement("br",null),r.a.createElement("input",{id:"new_passwordc",type:"password",placeholder:"Confirmar nova senha"}),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-primary",type:"submit",onClick:function(e){e.preventDefault();var t,a=document.querySelector("#password"),n=document.querySelector("#new_password"),r=document.querySelector("#new_passwordc"),o=a.value,s=n.value,i=r.value,l=Object(be.a)(document.querySelectorAll("form > input"));try{for(l.s();!(t=l.n()).done;){if(!t.value.value)return void alert("Todos os campos devem ser preenchidos!")}}catch(u){l.e(u)}finally{l.f()}if(s!==i)return c('Os campos "Nova senha" e "Confirmar nova senha" devem ter o mesmo valor!'),void m(null);fetch("".concat(b,"/change-password"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":y},body:JSON.stringify({password:o,new_password:s,new_passwordc:i})}).then((function(e){return e.json()})).then((function(e){"success"===e?(m("Senha alterada com successo!"),c(null),a.value=n.value=r.value=""):(c(e),m(null))}))}},"Confirmar")))}function Ne(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",{className:"settings-description-container"},r.a.createElement("div",{className:"d-flex justify-content-start align-items-center",style:{background:"#fff",padding:"15px",borderBottom:"1px solid var(--border-color)"}},r.a.createElement("i",{class:"fas fa-arrow-left left-arrow-icon mr-2",onClick:function(){return window.history.back()}}),r.a.createElement("strong",{style:{fontSize:"1.2rem"}},"Seguran\xe7a")),a&&r.a.createElement("div",{className:"alert"},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Senha incorreta!")),r.a.createElement("div",{className:"settings-page-title-container"},r.a.createElement("h3",null,"Deletar conta")),r.a.createElement("hr",null),r.a.createElement("div",{className:"delete-account-confirmation"},r.a.createElement("input",{id:"password",type:"password",placeholder:"Senha",autoFocus:!0}),r.a.createElement("hr",null),r.a.createElement("br",null),"Tem certeza que deseja apagar a sua conta ?",r.a.createElement("br",null),"Esta a\xe7\xe3o \xe9 irrevers\xedvel",r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){if(window.confirm("Tem certeza que deseja deletar a sua conta ?\nEsta a\xe7\xe3o \xe9 irrevers\xedvel?")){var e=document.querySelector("#password").value;e?fetch("".concat(b,"/delete-account"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":y},body:JSON.stringify({password:e})}).then((function(e){return e.json()})).then((function(e){"Wrong password"===e?c(!0):(window.alert("Conta deletada com sucesso."),window.location.href=b)})):window.alert("A senha n\xe3o pode ficar em branco!")}}},"Deletar conta")))}function ke(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1],o=0;Object(n.useEffect)((function(){fetch("".concat(b,"/profile-api/myprofile")).then((function(e){return e.json()})).then((function(e){return c(e.first_name)}))}),[]);var i=function(e){var t=e.target;document.querySelectorAll(".option-container > img").forEach((function(e){e.src="/static/media/feedback-faces/".concat(e.id,"bw.png")})),t.src="/static/media/feedback-faces/".concat(t.id,".png"),o=t.id};return r.a.createElement("div",{className:"settings-description-container"},r.a.createElement("div",{className:"feedback-form"},r.a.createElement("h3",null,"Nos ajude a melhorar"),r.a.createElement("hr",null),r.a.createElement("div",{className:"feedback-faces-container"},r.a.createElement("h6",null,"Como est\xe1 sendo a sua experi\xeancia no Napker at\xe9 agora?"),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"option-container"},r.a.createElement("img",{src:"/static/media/feedback-faces/5bw.png",id:"5",onClick:i})),r.a.createElement("div",{className:"option-container"},r.a.createElement("img",{src:"/static/media/feedback-faces/4bw.png",id:"4",onClick:i})),r.a.createElement("div",{className:"option-container"},r.a.createElement("img",{src:"/static/media/feedback-faces/3bw.png",id:"3",onClick:i})),r.a.createElement("div",{className:"option-container"},r.a.createElement("img",{src:"/static/media/feedback-faces/2bw.png",id:"2",onClick:i})),r.a.createElement("div",{className:"option-container"},r.a.createElement("img",{src:"/static/media/feedback-faces/1bw.png",id:"1",onClick:i})))),r.a.createElement("hr",null),r.a.createElement("div",{className:"textarea-container"},r.a.createElement("textarea",{placeholder:"Digite a sua mensagem aqui..."}),r.a.createElement("button",{className:"btn btn-primary w-100",onClick:function(e){var t=document.querySelector(".feedback-form > .textarea-container > textarea").value;e.preventDefault(),fetch("".concat(b," /settings-api/feedback"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":y},body:JSON.stringify({rating:o,message:t})}).then((function(e){return e.json()})).then((function(e){return console.log(e)})),document.querySelector(".feedback-form > h3").innerHTML="Muito obrigado".concat(null!==a?", ".concat(a):"","!"),document.querySelector(".feedback-faces-container").innerHTML="A sua mensagem nos ajudar\xe1 a tornar o Napker cada vez inclusivo e transparente.\nCaso pense em mais alguma coisa, sinta-se \xe0 vontade para entrar em contato novamente.",document.querySelector(".textarea-container").innerHTML=""}},"Enviar"))))}function je(e){e.page||(e.page="default"),document.title="Configura\xe7\xf5es / Napker",Object(n.useEffect)((function(){document.getElementById("default"!==e.page?e.page:"blocked-profiles")&&document.getElementById("default"!==e.page?e.page:"blocked-profiles").classList.add("active")}),[]),Object(n.useEffect)((function(){"default"!==e.page?document.querySelector(".settings-description-container")&&document.querySelector(".settings-description-container").classList.remove("mobile-d-none"):document.querySelector(".settings-description-container")&&document.querySelector(".settings-description-container").classList.add("mobile-d-none")}),[e.page]);var t=function(e){document.querySelectorAll(".active").forEach((function(e){e.classList.remove("active")})),document.getElementById(e).classList.add("active")};return r.a.createElement(r.a.Fragment,null,visualViewport.width<635?r.a.createElement(r.a.Fragment,null,"default"===e.page||"blocked-profiles"===e.page||"security"===e.page?r.a.createElement(C,{page:"Configura\xe7\xf5es",backArrow:"default"!==e.page}):r.a.createElement(r.a.Fragment,null)):r.a.createElement(C,{page:"Configura\xe7\xf5es"}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"settings-page-container"},r.a.createElement(he,{pageChange:t}),("blocked-profiles"===e.page||"default"===e.page)&&r.a.createElement(ge,null),"security"===e.page&&r.a.createElement(Ee,{pageChange:t}),"change-password"===e.page&&r.a.createElement(ye,null),"delete-account"===e.page&&r.a.createElement(Ne,null),"faq"===e.page&&r.a.createElement(ve,null),"feedback"===e.page&&r.a.createElement(ke,null))),r.a.createElement(z,null))}var Se=function(e){Object(P.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(w.a)(this,a),(n=t.call(this,e)).fetchProfile=function(){fetch("".concat(b,"/profile-api/user/").concat(n.slug)).then((function(e){return e.json()})).then((function(e){return n.setState({profile:e})})),fetch("".concat(b,"/profile-api/myprofile")).then((function(e){return e.json()})).then((function(e){return n.setState({myProfile:e})}))},n.sendFriendRequest=function(e){fetch("".concat(b,"/profile-api/send-friend-request"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":y},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))},n.cancelFriendRequest=function(e){fetch("".concat(b,"/profile-api/cancel-friend-request"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":y},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))},n.removeFromFriends=function(e){fetch("".concat(b,"/profile-api/remove-from-friends"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":y},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))},n.acceptFriendRequest=function(e){fetch("".concat(b,"/profile-api/reply-friend-request"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":y},body:JSON.stringify({senderid:e,reply:"accept"})}).then((function(e){return e.json()})).then((function(e){console.log(e),n.props.updateNotificationsNumber()}))},n.handleRelationshipUpdate=function(e){var t=e.target;"Solicitar"===t.innerHTML?(n.sendFriendRequest(t.dataset.pk),t.innerHTML="Solicitado",t.className="btn btn-primary"):"Solicitado"===t.innerHTML?(n.cancelFriendRequest(t.dataset.pk),t.innerHTML="Solicitar",t.className="btn btn-secondary"):"Amigos"===t.innerHTML||"Remover"===t.innerHTML?window.confirm("Remover @".concat(n.state.profile.user.username," dos amigos?"))&&(n.removeFromFriends(t.dataset.pk),t.innerHTML="Solicitar",t.className="btn btn-secondary"):"Aceitar"===t.innerHTML&&(n.acceptFriendRequest(t.dataset.pk),t.innerHTML="Amigos",t.className="btn btn-primary")},n.blockUnblockUser=function(){n.state.myProfile.blocked_users.map((function(e){return e.id})).includes(n.state.profile.user.id)?window.confirm("Tem certeza que deseja desbloquear ".concat(n.state.profile.first_name," ?"))&&fetch("".concat(b,"/profile-api/unblock-user"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":y},body:JSON.stringify(n.state.profile)}).then((function(e){return e.json()})).then((function(e){console.log(e),n.setState({alertMessage:"Voc\xea desbloqueou @".concat(n.state.profile.user.username,".")}),n.fetchProfile()})):window.confirm("Tem certeza que deseja bloquear ".concat(n.state.profile.first_name," ?"))&&fetch("".concat(b,"/profile-api/block-user"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":y},body:JSON.stringify(n.state.profile)}).then((function(e){return e.json()})).then((function(e){console.log(e),n.setState({alertMessage:"Voc\xea bloqueou @".concat(n.state.profile.user.username,".\n                         ").concat(n.state.profile.first_name," n\xe3o conseguir\xe1 mais ver o seu perfil ou te enviar mensagens.")}),n.fetchProfile()})),n.fetchProfile(),document.querySelector("#view-more-select").style.display="none"},n.openCloseExtraOptions=function(){var e=document.querySelector("#view-more-select").style;e.display||(e.display="none"),"none"===e.display?(document.querySelector("#view-more-icon").classList.add("view-more-icon-active"),e.display="flex"):(document.querySelector("#view-more-icon").classList.remove("view-more-icon-active"),e.display="none")},n.switchPage=function(e){document.querySelectorAll(".profile-page-menu-item-active").forEach((function(e){e.classList.remove("profile-page-menu-item-active")})),e.target.classList.add("profile-page-menu-item-active"),"profile-posts-page-menu-item"===e.target.id?n.setState({currentPageIsPosts:!0}):"profile-interests-page-menu-item"===e.target.id&&n.setState({currentPageIsPosts:!1})},n.state={myProfile:null,profile:null,alertMessage:null,relationshipButtonLabel:"",currentPageIsPosts:!0},n.slug=n.props.match.params.slug,n}return Object(x.a)(a,[{key:"componentWillMount",value:function(){this.fetchProfile()}},{key:"componentDidMount",value:function(){var e=this;fetch("".concat(b,"/profile-api/relationship/").concat(this.slug)).then((function(e){return e.json()})).then((function(t){var a;switch(t.relationship){case"friends":a="Amigos";break;case"invite-sent":a="Solicitado";break;case"invite-received":a="Aceitar";break;case"none":a="Solicitar"}e.setState({relationshipButtonLabel:a})}))}},{key:"componentDidUpdate",value:function(){var e=document.querySelector("#profile-page-relationship-btn");if(e)switch(e.innerHTML){case"Amigos":e.classList.add("btn-primary"),e.onmouseenter=function(){"Amigos"===e.innerHTML&&(e.innerHTML="Remover")},e.onmouseout=function(){"Remover"===e.innerHTML&&(e.innerHTML="Amigos")},e.classList.add("friend-btn"),e.classList.remove("d-none");break;case"Solicitado":case"Aceitar":e.classList.add("btn-primary"),e.classList.remove("d-none");break;case"Solicitar":e.classList.add("btn-secondary"),e.classList.remove("d-none")}}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{page:this.state.profile?"".concat(this.state.profile.first_name," ").concat(this.state.profile.last_name):"Perfil",backArrow:!0}),null!==this.state.myProfile&&null!==this.state.profile?r.a.createElement("div",{className:"content"},this.state.profile.blocked_users.map((function(e){return e.id})).includes(this.state.myProfile.user.id)?r.a.createElement("div",{className:"user-blocked-me-container"},r.a.createElement("h3",null,"O usu\xe1rio te bloqueou")):r.a.createElement(r.a.Fragment,null,this.state.alertMessage&&r.a.createElement("div",{class:"alert alert-success profile-page-alert-success",role:"alert"},this.state.alertMessage),r.a.createElement(fe,{profile:this.state.profile},r.a.createElement("div",{className:"profile-btn-wrapper"},r.a.createElement("i",{className:"fas fa-ellipsis-h btn btn-secondary mr-2",id:"view-more-icon",onClick:this.openCloseExtraOptions}),r.a.createElement("div",{className:"view-more-select profile-view-more-select",id:"view-more-select"},r.a.createElement(E.b,{to:"/mensagens/".concat(this.state.profile.slug),style:{color:"#000",textDecoration:"none",borderBottom:"1px solid rgba(0,0,0,.1)"}},!this.state.myProfile.blocked_users.map((function(e){return e.id})).includes(this.state.profile.user.id)&&r.a.createElement("li",null,r.a.createElement("i",{class:"fas fa-envelope text-secondary"}),"Enviar mensagem")),r.a.createElement("li",{onClick:this.blockUnblockUser},r.a.createElement("i",{class:"fas fa-user-lock text-secondary"}),this.state.myProfile.blocked_users.map((function(e){return e.id})).includes(this.state.profile.user.id)?"Desbloquear":"Bloquear")),!this.state.myProfile.blocked_users.map((function(e){return e.id})).includes(this.state.profile.user.id)&&r.a.createElement("button",{className:"btn d-none",id:"profile-page-relationship-btn","data-pk":this.state.profile.id,onClick:this.handleRelationshipUpdate},this.state.relationshipButtonLabel))),r.a.createElement("div",{className:"profile-page-menu"},r.a.createElement("div",{className:"profile-page-menu-item profile-page-menu-item-active",id:"profile-posts-page-menu-item",onClick:this.switchPage},"Posts (",this.state.profile.posts.length,")"),r.a.createElement("div",{className:"profile-page-menu-item",id:"profile-interests-page-menu-item",onClick:this.switchPage},"Interesses (",this.state.profile.interests.filter((function(e){return e.public})).length,")")),this.state.currentPageIsPosts?r.a.createElement(ue,{profile:this.state.profile,fetchProfile:this.fetchProfile}):r.a.createElement(de,{profile:this.state.profile}))):r.a.createElement("div",{className:"profile-page-loader-container"},r.a.createElement("div",{className:"loader"})),r.a.createElement(z,null))}}]),a}(r.a.Component);function Oe(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),i=Object(s.a)(o,2),l=i[0],m=i[1],u=Object(n.useState)(null),d=Object(s.a)(u,2),f=d[0],p=d[1],h=Object(v.f)().slug;return Object(n.useEffect)((function(){fetch("".concat(b,"/profile-api/user/").concat(h)).then((function(e){return e.json()})).then((function(e){return m(e)})),fetch("".concat(b,"/profile-api/myprofile")).then((function(e){return e.json()})).then((function(e){return p(e)}))}),[]),Object(n.useEffect)((function(){l&&fetch("".concat(b,"/profile-api/get-friends-profiles/").concat(l.slug)).then((function(e){return e.json()})).then((function(e){return c(e)}))}),[l]),r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{page:null!==l?"".concat(l.first_name," ").concat(l.last_name," / Amigos"):"Perfil / Amigos",backArrow:!0}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"list-group profile-friends-container"},null!==a&&null!==f?r.a.createElement(r.a.Fragment,null,a.length?a.map((function(e){return r.a.createElement(M,{profile:e,myProfile:f,style:{borderTop:"none",borderLeft:"none",borderRight:"none"}})})):r.a.createElement("h3",{style:{marginTop:"30px"}},l?"".concat(l.first_name," ainda n\xe3o possui amigos"):"Voc\xea ainda n\xe3o possui amigos")):r.a.createElement("div",{className:"profiles-loader-container"},r.a.createElement("div",{className:"loader"})))),r.a.createElement(z,null))}function Ce(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),i=Object(s.a)(o,2),l=i[0],m=i[1],u=Object(v.f)().interest;return document.title="".concat(u[0].toUpperCase()+u.slice(1)," / Napker"),Object(n.useEffect)((function(){fetch("".concat(b,"/profile-api/myprofile")).then((function(e){return e.json()})).then((function(e){return c(e)})),fetch("".concat(b,"/profile-api/interest-profile-list/").concat(u)).then((function(e){return e.json()})).then((function(e){return m(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{page:"Interesse / ".concat(u[0].toUpperCase()+u.slice(1)),backArrow:!0}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"interests-title-container"},r.a.createElement("h3",null,'Perfis interessados em "',u,'"')),r.a.createElement("div",{className:"list-group interest-profile-list"},null!==a&&null!==l?l.map((function(e){return r.a.createElement(M,{profile:e,myProfile:a,style:{borderLeft:"none",borderTop:"none",borderRight:"none"}})})):r.a.createElement("div",{className:"profiles-loader-container"},r.a.createElement("div",{className:"loader"})))))}function we(e){return Object(n.useEffect)((function(){if(document.querySelector(".public-interests-container")){var t=function(){document.querySelectorAll(".public-tag").forEach((function(e){e.parentElement.removeChild(e)})),r.sort(),r.slice().reverse().forEach((function(e){a.prepend(function(e){var t=document.createElement("div");t.classList.add("tag"),t.classList.add("public-tag");var a=document.createElement("span");a.innerHTML=e;var n=document.createElement("i");return n.classList.add("public-close-icon"),n.innerHTML="\xd7",n.classList.add("material-icons"),n.setAttribute("data-item",e),t.appendChild(a),t.appendChild(n),c.value.includes(e)||(c.value+=" ".concat(e)),t}(e))})),e.setInterests(r)},a=document.querySelector(".public-tag-container"),n=document.querySelector(".public-tag-container input"),r=e.myProfile.interests.filter((function(e){return e.public})).map((function(e){return e.title})),c=document.querySelector("#public-interests");t(),n.addEventListener("keydown",(function(e){if("Enter"===e.key)return e.target.value.split(",").forEach((function(e){e.length<3?window.alert("Os interesses devem ter no m\xednimo 3 caracteres!"):r.push(e)})),e.preventDefault(),t(),n.value="",!1})),document.addEventListener("click",(function(e){if(e.target.classList.contains("public-close-icon")){var a=e.target.getAttribute("data-item"),n=r.indexOf(a);r=[].concat(Object($.a)(r.slice(0,n)),Object($.a)(r.slice(n+1))),t()}})),n.focus()}})),r.a.createElement("div",{className:"public-interests-container"},r.a.createElement("h3",null,"Interesses p\xfablicos"),r.a.createElement("p",null,"Os interesses p\xfablicos s\xe3o vis\xedveis para os outros usu\xe1rios. Coloque aqui interesses que sem eles seu perfil ficaria incompleto."),r.a.createElement("div",{class:"tag-container public-tag-container"},r.a.createElement("input",{placeholder:"Digite e pressione 'Enter'",maxLength:"50"}),r.a.createElement("input",{type:"hidden",name:"public-interests",id:"public-interests"})))}function xe(e){return Object(n.useEffect)((function(){if(document.querySelector(".private-interests-container")){var t=function(){document.querySelectorAll(".private-tag").forEach((function(e){e.parentElement.removeChild(e)})),r.sort(),r.slice().reverse().forEach((function(e){a.prepend(function(e){var t=document.createElement("div");t.classList.add("tag"),t.classList.add("private-tag");var a=document.createElement("span");a.innerHTML=e;var n=document.createElement("i");return n.classList.add("private-close-icon"),n.classList.add("material-icons"),n.innerHTML="\xd7",n.setAttribute("data-item",e),t.appendChild(a),t.appendChild(n),c.value.includes(e)||(c.value+=" ".concat(e)),t}(e))})),e.setInterests(r)},a=document.querySelector(".private-tag-container"),n=document.querySelector(".private-tag-container input"),r=e.myProfile.interests.filter((function(e){return!e.public})).map((function(e){return e.title})),c=document.querySelector("#private-interests");t(),n.addEventListener("keydown",(function(e){if("Enter"===e.key)return e.target.value.split(",").forEach((function(e){e.length<3?window.alert("Os interesses devem ter no m\xednimo 3 caracteres!"):r.push(e)})),e.preventDefault(),t(),n.value="",!1})),document.addEventListener("click",(function(e){if(e.target.classList.contains("private-close-icon")){var a=e.target.getAttribute("data-item"),n=r.indexOf(a);r=[].concat(Object($.a)(r.slice(0,n)),Object($.a)(r.slice(n+1))),t()}}))}})),r.a.createElement("div",{className:"private-interests-container"},r.a.createElement("h3",null,"Interesses privados"),r.a.createElement("p",null,"Os interesses privados n\xe3o s\xe3o vis\xedveis para os outros usu\xe1rios. Eles servem para aumentar a precis\xe3o das recomenda\xe7\xf5es de perfis que possuem o m\xe1ximo de afinidade poss\xedvel com voc\xea."),r.a.createElement("div",{class:"tag-container private-tag-container"},r.a.createElement("input",{placeholder:"Digite e pressione 'Enter'",maxLength:"50"}),r.a.createElement("input",{type:"hidden",name:"private-interests",id:"private-interests"})))}function Pe(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1],o=[null,function(e){return i=e}],i=o[0],l=o[1],m=[null,function(e){return u=e}],u=m[0],d=m[1];Object(n.useEffect)((function(){fetch("".concat(b,"/profile-api/myprofile")).then((function(e){return e.json()})).then((function(e){return c(e)}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{page:"Meus interesses",backArrow:!0}),r.a.createElement("div",{className:"content"},r.a.createElement("p",{className:"edit-interests-success-message",id:"interests-updated-message"},"Interesses atualizados com sucesso"),a?r.a.createElement("div",{className:"interests-page-container"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){fetch("".concat(b,"/profile-api/set-myinterests"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":y},body:JSON.stringify({public_interests:i.sort(),private_interests:u.sort()})}).then((function(e){return e.json()})).then((function(e){console.log(e),document.querySelector("#interests-updated-message").style.display="block",document.documentElement.scrollTop=0}))}},"Salvar"),r.a.createElement("hr",null),r.a.createElement(we,{myProfile:a,setInterests:l}),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement(xe,{myProfile:a,setInterests:d})):r.a.createElement("div",{className:"edit-interests-loader-container"},r.a.createElement("div",{className:"loader"}))),r.a.createElement(z,null))}function qe(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],i=e.post;return r.a.createElement(L.a,{show:e.isOpen,onHide:e.hideModal,size:"lg"},r.a.createElement(L.a.Header,{closeButton:!0},r.a.createElement(L.a.Title,null,r.a.createElement("strong",null,"Comentar"))),r.a.createElement(L.a.Body,null,r.a.createElement("div",{className:"post-container"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"post-row"},r.a.createElement("div",{className:"post-col"},r.a.createElement("img",{src:"".concat(b).concat(i.author.photo),className:"profile-img-med"})),r.a.createElement("div",{className:"post-col"},r.a.createElement("div",null,r.a.createElement("strong",null,i.author.first_name," ",i.author.last_name," "),r.a.createElement("p",{className:"text-secondary d-inline-block"},"@",i.author.user.username," \u2022 ",i.created.split("-").reverse().join("/"))),r.a.createElement("div",{style:{textAlign:"start"}},i.content))))),r.a.createElement("hr",null),r.a.createElement("form",{action:"".concat(b,"/post-api/comment-post/").concat(i.id),method:"POST",className:"comment-form"},r.a.createElement("input",{type:"hidden",name:"csrfmiddlewaretoken",value:y}),r.a.createElement("label",{className:"far fa-smile",id:"emoji-button",onClick:function(){return k(!1)}}),r.a.createElement("textarea",{type:"text",className:"form-control",name:"comment-content",value:c,placeholder:"Comente alguma coisa",style:{marginRight:"5px",height:"40px"},onChange:function(e){o(e.target.value),document.querySelector("#comment-form-submit").disabled=""===e.target.value}}),r.a.createElement("div",{className:"emoji-list-container chat-emoji-list",id:"emoji-list-container"},r.a.createElement(R.a,{onEmojiClick:function(e,t){o(c+t.emoji),document.querySelector("#comment-form-submit").disabled=!1}})),r.a.createElement("button",{className:"btn btn-primary",id:"comment-form-submit",type:"submit",disabled:!0},"Enviar"))))}function Le(e){var t=e.comment,a=e.myProfile,n=e.fetchPost,c=e.setPostLikesModal,o=function(e){var t=e.target;t.classList.contains("fas")?(t.classList.remove("fas"),t.classList.add("far"),fetch("".concat(b,"/post-api/unlike-comment/").concat(t.dataset.commentid)).then((function(e){return e.json()})).then((function(e){console.log(e),n()}))):(t.classList.remove("far"),t.classList.add("fas"),fetch("".concat(b,"/post-api/like-comment/").concat(t.dataset.commentid)).then((function(e){return e.json()})).then((function(e){console.log(e),n()})))};return r.a.createElement("li",{className:"post-container",id:"post-comment-".concat(t.id),key:t.id},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"post-row"},r.a.createElement("div",{className:"post-col"},r.a.createElement(E.b,{to:t.author.id===a.id?"/perfil":"/user/".concat(t.author.slug)},r.a.createElement("img",{src:"".concat(b).concat(t.author.photo),className:"profile-img-sm"}))),r.a.createElement("div",{className:"post-col"},r.a.createElement(E.b,{to:t.author.id===a.id?"/perfil":"/user/".concat(t.author.slug),style:{color:"#000"}},r.a.createElement("div",{style:{textAlign:"start"}},r.a.createElement("strong",{style:{marginRight:"5px"}},t.author.first_name," ",t.author.last_name),r.a.createElement("p",{className:"text-secondary d-inline-block"},"@",t.author.user.username," \u2022 ",t.created.split("-").reverse().join("/")))),r.a.createElement("div",{style:{textAlign:"start"}},t.content))),t.author.id==a.id&&r.a.createElement("i",{className:"far fa-trash-alt trash-icon text-secondary",style:{margin:"20px 20px 0 0"},onClick:function(e){return function(e,t){e.stopPropagation();var a=document.querySelector("#post-comment-".concat(t));window.confirm("Tem certeza que deseja apagar o coment\xe1rio?\nEssa a\xe7\xe3o \xe9 irrevers\xedvel.")&&(a.style.animationPlayState="running",console.log(a,a.style.animationPlayState),a.addEventListener("animationend",(function(){n()})),fetch("".concat(b,"/post-api/delete-comment/").concat(t),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":y}}).then((function(e){return e.json()})).then((function(e){console.log(e)})))}(e,t.id)}})),r.a.createElement("div",{className:"post-actions",style:{padding:"0 0 2px 63px"}},r.a.createElement("p",{className:"text-secondary"},t.likes.map((function(e){return e.profile.id})).includes(a.id)?r.a.createElement("i",{class:"fas fa-heart","data-commentid":t.id,onClick:o}):r.a.createElement("i",{class:"far fa-heart","data-commentid":t.id,onClick:o}),r.a.createElement("p",{className:"post-likes-number",onClick:function(){return c({isOpen:!0,likes:t.likes})}},t.likes.length))))}var Me=function(e){return r.a.createElement(E.b,{to:"/post/".concat(e.postId,"/comentar")},r.a.createElement("i",{className:"far fa-comment bottom-menu-action-icon"}))};function Te(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(null),l=Object(s.a)(i,2),m=l[0],u=l[1],d=Object(n.useState)(e.commentModalIsOpen),f=Object(s.a)(d,2),p=f[0],h=f[1],g=Object(n.useState)({isOpen:!1,likes:null}),N=Object(s.a)(g,2),k=N[0],j=N[1],S=Object(n.useState)({isOpen:!1,likes:null}),O=Object(s.a)(S,2),w=O[0],x=O[1],P=Object(v.f)().id;Object(n.useEffect)((function(){q(),fetch("".concat(b,"/profile-api/myprofile")).then((function(e){return e.json()})).then((function(e){return u(e)}))}),[]),Object(n.useEffect)((function(){console.log("got here"),h(!!e.commentModalIsOpen)}),[e.commentModalIsOpen]);var q=function(){fetch("".concat(b,"/post-api/post/").concat(P)).then((function(e){return e.json()})).then((function(e){return o(e)}))},L=function(e){var t=e.target;t.classList.contains("fas")?(t.classList.remove("fas"),t.classList.add("far"),fetch("".concat(b,"/post-api/unlike-post/").concat(t.dataset.postid)).then((function(e){return e.json()})).then((function(e){console.log(e),q()}))):(t.classList.remove("far"),t.classList.add("fas"),fetch("".concat(b,"/post-api/like-post/").concat(t.dataset.postid)).then((function(e){return e.json()})).then((function(e){console.log(e),q()})))};return r.a.createElement("div",{className:"post-page-container"},c&&r.a.createElement(qe,{isOpen:p,hideModal:function(){h(!1),window.history.back()},post:c}),r.a.createElement(me,{isOpen:k.isOpen,likes:k.likes,hideModal:function(){j({isOpen:!1,likes:null})}}),r.a.createElement(me,{isOpen:w.isOpen,likes:w.likes,hideModal:function(){x({isOpen:!1,likes:null})}}),r.a.createElement(C,{page:"Post",backArrow:!0}),r.a.createElement("div",{className:"content"},c&&m?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"post-container"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"post-row"},r.a.createElement("div",{className:"post-col"},r.a.createElement(E.b,{to:c.author.id===m.id?"/perfil":"/user/".concat(c.author.slug)},r.a.createElement("img",{src:"".concat(b).concat(c.author.photo),className:"profile-img-med"}))),r.a.createElement("div",{className:"post-col"},r.a.createElement(E.b,{to:c.author.id===m.id?"/perfil":"/user/".concat(c.author.slug),style:{color:"#000"}},r.a.createElement("div",{style:{textAlign:"start"}},r.a.createElement("strong",null,c.author.first_name," ",c.author.last_name," "),r.a.createElement("p",{className:"text-secondary d-inline-block"},"@",c.author.user.username," \u2022 ",c.created.split("-").reverse().join("/")))),r.a.createElement("div",{style:{textAlign:"start",fontSize:"larger"}},c.content),c.image&&r.a.createElement("img",{src:"".concat(b).concat(c.image),className:"post-img"}))),m.id==c.author.id&&r.a.createElement("i",{className:"far fa-trash-alt trash-icon text-secondary",style:{margin:"20px 20px 0 0"},onClick:function(e){return function(e,t){e.stopPropagation();document.querySelector("#profile-post-".concat(t));window.confirm("Tem certeza que deseja apagar o post?\nEssa a\xe7\xe3o \xe9 irrevers\xedvel.")&&fetch("".concat(b,"/post-api/delete-post/").concat(t),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":y}}).then((function(e){return e.json()})).then((function(e){console.log(e),window.location.href="/"}))}(e,c.id)}})),r.a.createElement("div",{className:"post-actions"},r.a.createElement("p",{className:"text-secondary",style:{fontSize:"large"}},r.a.createElement(E.b,{to:"/post/".concat(P,"/comentar"),className:"text-secondary"},r.a.createElement("i",{class:"far fa-comment"})),c.comments.length,c.likes.map((function(e){return e.profile.id})).includes(m.id)?r.a.createElement("i",{class:"fas fa-heart","data-postid":c.id,onClick:L}):r.a.createElement("i",{class:"far fa-heart","data-postid":c.id,onClick:L}),r.a.createElement("p",{className:"post-likes-number",onClick:function(){return j({isOpen:!0,likes:c.likes})}},c.likes.length)))),r.a.createElement("div",{className:"comment-list"},c.comments.map((function(e){return r.a.createElement(Le,{comment:e,myProfile:m,fetchPost:q,setPostLikesModal:j})})))):r.a.createElement("div",{className:"posts-loader-container"},r.a.createElement("div",{className:"loader"}))),r.a.createElement(z,null,r.a.createElement(Me,{postId:P})))}var Fe=function(e){Object(P.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(w.a)(this,a),(n=t.call(this,e)).handlePostContentChange=function(e){n.setState({postContent:e.target.value}),document.querySelector("#post-form-submit-btn").disabled=""===e.target.value.trim()&&!n.state.postFormImagePreview},n.handlePostImageChange=function(e){var t=new FileReader;t.onload=function(){2===t.readyState&&(n.setState({postFormImagePreview:t.result}),document.querySelector("#post-img-container").style.display="initial",document.querySelector("#post-form-submit-btn").disabled=!1)};try{t.readAsDataURL(e.target.files[0])}catch(a){}},n.handleCloseImage=function(){document.querySelector("#post-img-container").style.display="none",document.querySelector("#post-image").value="",""===n.state.postContent.trim()&&(document.querySelector("#post-form-submit-btn").disabled=!0),n.setState({postFormImagePreview:null})},n.state={profile:null,postContent:"",postFormImagePreview:null},n}return Object(x.a)(a,[{key:"componentWillMount",value:function(){var e=this;fetch("".concat(b,"/profile-api/myprofile")).then((function(e){return e.json()})).then((function(t){return e.setState({profile:t})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"content"},r.a.createElement(G,{page:"Novo post",backArrow:!0}),r.a.createElement("div",{className:"post-form-page-container"},this.state.profile?r.a.createElement("form",{action:"".concat(b,"/post-api/create-post"),method:"POST",className:"create-post-form-mobile",encType:"multipart/form-data"},r.a.createElement("input",{type:"hidden",name:"csrfmiddlewaretoken",value:y}),r.a.createElement("div",{className:"d-flex"},r.a.createElement(E.b,{to:"/perfil"},r.a.createElement("img",{src:"".concat(b).concat(this.state.profile.photo),className:"profile-img-med"})),r.a.createElement("textarea",{className:"post-content-textarea",name:"post-content",value:this.state.postContent,placeholder:"No que voc\xea est\xe1 pensando?",maxLength:300,autoFocus:!0,onChange:this.handlePostContentChange})),r.a.createElement("div",{className:"w-100 d-flex justify-content-center"},r.a.createElement("div",{className:"post-img-container",id:"post-img-container"},r.a.createElement("div",{className:"post-img-options"},r.a.createElement("i",{className:"far fa-times-circle",onClick:this.handleCloseImage})),r.a.createElement("img",{src:this.state.postFormImagePreview,className:"post-img post-form-img-preview",id:"post-form-img-preview"}))),r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex justify-content-between",style:{margin:"0px 70px 0 70px"}},r.a.createElement("div",{className:"post-extra-options"},r.a.createElement("label",{htmlFor:"post-image",class:"far fa-image"}),r.a.createElement("input",{type:"file",accept:"image/png, image/jpg, image/jpeg",name:"post-image",id:"post-image",style:{display:"none"},onChange:this.handlePostImageChange})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",id:"post-form-submit-btn",style:{height:"40px"},disabled:!0},"Postar"))):r.a.createElement("div",{className:"posts-loader-container"},r.a.createElement("div",{className:"loader"}))))}}]),a}(r.a.Component);function Re(){var e=Object(n.useContext)(i),t=Object(s.a)(e,2),a=(t[0],t[1]),c=Object(n.useContext)(m),o=Object(s.a)(c,2),l=(o[0],o[1]),u=Object(n.useContext)(d),f=Object(s.a)(u,2),h=(f[0],f[1]),g=Object(n.useContext)(p),y=Object(s.a)(g,2),N=(y[0],y[1]);Object(n.useEffect)((function(){k(),j(),window.setInterval((function(){k(),j()}),6e3)}),[]);var k=function(){fetch("".concat(b,"/profile-api/myinvites")).then((function(e){return e.json()})).then((function(e){return a(e.length)})),fetch("".concat(b,"/post-api/unvisualized-post-likes")).then((function(e){return e.json()})).then((function(e){return h(e.length)})),fetch("".concat(b,"/post-api/unvisualized-post-comments")).then((function(e){return e.json()})).then((function(e){return l(e.length)}))},j=function(){fetch("".concat(b,"/chat-api/all-unread-messages-number")).then((function(e){return e.json()})).then((function(e){return N(e.unread_messages_number)}))};return r.a.createElement(E.a,null,r.a.createElement(O,null),r.a.createElement("div",{className:"main-content"},r.a.createElement(v.c,null,r.a.createElement(v.a,{path:"/home",component:X}),r.a.createElement(v.a,{path:"/notifica\xe7\xf5es",render:function(e){return r.a.createElement(Q,Object.assign({},e,{updateNotificationsNumber:k}))}}),r.a.createElement(v.a,{path:"/mensagens",exact:!0,component:ie}),r.a.createElement(v.a,{path:"/mensagens/:slug",render:function(e){return r.a.createElement(ie,Object.assign({},e,{updateUnreadMessagesNumber:j}))}}),r.a.createElement(v.a,{path:"/perfil",exact:!0,component:pe}),r.a.createElement(v.a,{path:"/perfil/meus-interesses",component:Pe}),r.a.createElement(v.a,{path:"/configura\xe7\xf5es",exact:!0,component:je}),r.a.createElement(v.a,{path:"/configura\xe7\xf5es/perfis-bloqueados",exact:!0,render:function(e){return r.a.createElement(je,Object.assign({},e,{page:"blocked-profiles"}))}}),r.a.createElement(v.a,{path:"/configura\xe7\xf5es/seguran\xe7a",exact:!0,render:function(e){return r.a.createElement(je,Object.assign({},e,{page:"security"}))}}),r.a.createElement(v.a,{path:"/configura\xe7\xf5es/alterar-senha",exact:!0,render:function(e){return r.a.createElement(je,Object.assign({},e,{page:"change-password"}))}}),r.a.createElement(v.a,{path:"/configura\xe7\xf5es/deletar-conta",exact:!0,render:function(e){return r.a.createElement(je,Object.assign({},e,{page:"delete-account"}))}}),r.a.createElement(v.a,{path:"/configura\xe7\xf5es/faq",exact:!0,render:function(e){return r.a.createElement(je,Object.assign({},e,{page:"faq"}))}}),r.a.createElement(v.a,{path:"/configura\xe7\xf5es/fale-conosco",exact:!0,render:function(e){return r.a.createElement(je,Object.assign({},e,{page:"feedback"}))}}),r.a.createElement(v.a,{path:"/user/:slug",exact:!0,render:function(e){return r.a.createElement(Se,Object.assign({},e,{updateNotificationsNumber:k}))}}),r.a.createElement(v.a,{path:"/user/:slug/amigos",component:Oe}),r.a.createElement(v.a,{path:"/post/:id",exact:!0,component:Te}),r.a.createElement(v.a,{path:"/post/:id/comentar",render:function(e){return r.a.createElement(Te,Object.assign({},e,{commentModalIsOpen:!0}))}}),r.a.createElement(v.a,{path:"/interesses/:interest",component:Ce}),r.a.createElement(v.a,{path:"/postar",component:Fe}))))}o.a.render(r.a.createElement(g,null,r.a.createElement(Re,null)),document.querySelector("#root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.96eb8123.chunk.js.map