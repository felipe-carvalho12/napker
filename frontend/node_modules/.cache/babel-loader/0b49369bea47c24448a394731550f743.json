{"ast":null,"code":"import _slicedToArray from\"C:\\\\CodeProjects\\\\Django\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{BrowserRouter as Router,Switch,Route}from'react-router-dom';import Sidebar from'./components/main/sidebar';import BottomMenu from'./components/main/bottomMenu';import Home from'./pages/home';import Notifications from'./pages/notifications';import Messages from'./pages/messages_page/messages';import MyProfile from'./pages/myprofile';import Settings from'./pages/settings_page/settingsMenu';import Profile from'./pages/home-components/profile';import ProfileFriends from'./pages/profile-components/friends';import InterestProfiles from'./pages/profile-components/interestprofiles';import EditInterests from'./pages/profile-components/edit-interests/editinterests';import Post from'./pages/home-components/post';import PostFormPage from'./components/postFormPage';import{SERVER_URL}from'./settings';export default function App(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),invitesReceivedNumber=_useState2[0],setInvitesReceived=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),unvisualizedLikesNumber=_useState4[0],setUnvisulaizedLikes=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),unvisualizedCommentsNumber=_useState6[0],setUnvisulaizedComments=_useState6[1];var notificationsNumber=invitesReceivedNumber+unvisualizedLikesNumber+unvisualizedCommentsNumber;var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),unreadMessagesNumber=_useState8[0],setUnreadMessagesNumber=_useState8[1];useEffect(function(){updateNotificationsNumber();updateUnreadMessagesNumber();window.setInterval(function(){updateNotificationsNumber();updateUnreadMessagesNumber();},6000);},[]);var updateNotificationsNumber=function updateNotificationsNumber(){fetch(\"\".concat(SERVER_URL,\"/profile-api/myinvites\")).then(function(response){return response.json();}).then(function(data){return setInvitesReceived(data.length);});fetch(\"\".concat(SERVER_URL,\"/post-api/unvisualized-post-likes\")).then(function(response){return response.json();}).then(function(data){return setUnvisulaizedLikes(data.length);});fetch(\"\".concat(SERVER_URL,\"/post-api/unvisualized-post-comments\")).then(function(response){return response.json();}).then(function(data){return setUnvisulaizedComments(data.length);});};var updateUnreadMessagesNumber=function updateUnreadMessagesNumber(){fetch(\"\".concat(SERVER_URL,\"/chat-api/all-unread-messages-number\")).then(function(response){return response.json();}).then(function(data){return setUnreadMessagesNumber(data['unread_messages_number']);});};return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(Sidebar,{notificationsNumber:notificationsNumber,unreadMessagesNumber:unreadMessagesNumber}),/*#__PURE__*/React.createElement(\"div\",{className:\"main-content\"},/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/home\",component:Home}),/*#__PURE__*/React.createElement(Route,{path:\"/notifica\\xE7\\xF5es\",render:function render(props){return/*#__PURE__*/React.createElement(Notifications,Object.assign({},props,{updateNotificationsNumber:updateNotificationsNumber}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/mensagens\",exact:true,component:Messages}),/*#__PURE__*/React.createElement(Route,{path:\"/mensagens/:slug\",render:function render(props){return/*#__PURE__*/React.createElement(Messages,Object.assign({},props,{updateUnreadMessagesNumber:updateUnreadMessagesNumber}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/perfil\",exact:true,component:MyProfile}),/*#__PURE__*/React.createElement(Route,{path:\"/perfil/meus-interesses\",component:EditInterests}),/*#__PURE__*/React.createElement(Route,{path:\"/configura\\xE7\\xF5es\",exact:true,component:Settings}),/*#__PURE__*/React.createElement(Route,{path:\"/configura\\xE7\\xF5es/perfis-bloqueados\",exact:true,render:function render(props){return/*#__PURE__*/React.createElement(Settings,Object.assign({},props,{page:'blocked-profiles'}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/configura\\xE7\\xF5es/alterar-senha\",exact:true,render:function render(props){return/*#__PURE__*/React.createElement(Settings,Object.assign({},props,{page:'change-password'}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/configura\\xE7\\xF5es/deletar-conta\",exact:true,render:function render(props){return/*#__PURE__*/React.createElement(Settings,Object.assign({},props,{page:'delete-account'}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/user/:slug\",exact:true,render:function render(props){return/*#__PURE__*/React.createElement(Profile,Object.assign({},props,{updateNotificationsNumber:updateNotificationsNumber}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/user/:slug/amigos\",component:ProfileFriends}),/*#__PURE__*/React.createElement(Route,{path:\"/post/:id\",exact:true,component:Post}),/*#__PURE__*/React.createElement(Route,{path:\"/post/:id/comment\",render:function render(props){return/*#__PURE__*/React.createElement(Post,Object.assign({},props,{commentModalIsOpen:true}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/interesses/:interest\",component:InterestProfiles}),/*#__PURE__*/React.createElement(Route,{path:\"/postar\",component:PostFormPage})),/*#__PURE__*/React.createElement(BottomMenu,{notificationsNumber:notificationsNumber,unreadMessagesNumber:unreadMessagesNumber})));}","map":{"version":3,"sources":["C:/CodeProjects/Django/Napker/frontend/src/App.js"],"names":["React","useEffect","useState","BrowserRouter","Router","Switch","Route","Sidebar","BottomMenu","Home","Notifications","Messages","MyProfile","Settings","Profile","ProfileFriends","InterestProfiles","EditInterests","Post","PostFormPage","SERVER_URL","App","invitesReceivedNumber","setInvitesReceived","unvisualizedLikesNumber","setUnvisulaizedLikes","unvisualizedCommentsNumber","setUnvisulaizedComments","notificationsNumber","unreadMessagesNumber","setUnreadMessagesNumber","updateNotificationsNumber","updateUnreadMessagesNumber","window","setInterval","fetch","then","response","json","data","length","props"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\r\n\r\nimport Sidebar from './components/main/sidebar'\r\nimport BottomMenu from './components/main/bottomMenu'\r\nimport Home from './pages/home'\r\nimport Notifications from './pages/notifications'\r\nimport Messages from './pages/messages_page/messages'\r\nimport MyProfile from './pages/myprofile'\r\nimport Settings from './pages/settings_page/settingsMenu'\r\nimport Profile from './pages/home-components/profile'\r\nimport ProfileFriends from './pages/profile-components/friends'\r\nimport InterestProfiles from './pages/profile-components/interestprofiles'\r\nimport EditInterests from './pages/profile-components/edit-interests/editinterests'\r\nimport Post from './pages/home-components/post'\r\n\r\nimport PostFormPage from './components/postFormPage'\r\n\r\nimport { SERVER_URL } from './settings'\r\n\r\nexport default function App() {\r\n    const [invitesReceivedNumber, setInvitesReceived] = useState(0)\r\n    const [unvisualizedLikesNumber, setUnvisulaizedLikes] = useState(0)\r\n    const [unvisualizedCommentsNumber, setUnvisulaizedComments] = useState(0)\r\n    let notificationsNumber = invitesReceivedNumber + unvisualizedLikesNumber + unvisualizedCommentsNumber\r\n    const [unreadMessagesNumber, setUnreadMessagesNumber] = useState(0)\r\n\r\n    useEffect(() => {\r\n        updateNotificationsNumber()\r\n        updateUnreadMessagesNumber()\r\n        window.setInterval(() => {\r\n            updateNotificationsNumber()\r\n            updateUnreadMessagesNumber()\r\n        }, 6000)\r\n    }, [])\r\n\r\n    const updateNotificationsNumber = () => {\r\n        fetch(`${SERVER_URL}/profile-api/myinvites`)\r\n            .then(response => response.json())\r\n            .then(data => setInvitesReceived(data.length))\r\n        fetch(`${SERVER_URL}/post-api/unvisualized-post-likes`)\r\n            .then(response => response.json())\r\n            .then(data => setUnvisulaizedLikes(data.length))\r\n        fetch(`${SERVER_URL}/post-api/unvisualized-post-comments`)\r\n            .then(response => response.json())\r\n            .then(data => setUnvisulaizedComments(data.length))\r\n    }\r\n\r\n    const updateUnreadMessagesNumber = () => {\r\n        fetch(`${SERVER_URL}/chat-api/all-unread-messages-number`)\r\n            .then(response => response.json())\r\n            .then(data => setUnreadMessagesNumber(data['unread_messages_number']))\r\n    }\r\n\r\n    return (\r\n        <Router>\r\n            <Sidebar notificationsNumber={notificationsNumber} unreadMessagesNumber={unreadMessagesNumber} />\r\n            <div className=\"main-content\">\r\n                <Switch>\r\n                    <Route path=\"/home\" component={Home} />\r\n                    <Route path=\"/notificações\" render={props => (\r\n                        <Notifications {...props} updateNotificationsNumber={updateNotificationsNumber} />\r\n                    )} />\r\n                    <Route path=\"/mensagens\" exact component={Messages} />\r\n                    <Route path=\"/mensagens/:slug\" render={props => (\r\n                        <Messages {...props} updateUnreadMessagesNumber={updateUnreadMessagesNumber} />\r\n                    )} />\r\n                    <Route path=\"/perfil\" exact component={MyProfile} />\r\n                    <Route path=\"/perfil/meus-interesses\" component={EditInterests} />\r\n                    <Route path=\"/configurações\" exact component={Settings} />\r\n                    <Route path=\"/configurações/perfis-bloqueados\" exact render={props => (\r\n                        <Settings {...props} page={'blocked-profiles'} />\r\n                    )} />\r\n                    <Route path=\"/configurações/alterar-senha\" exact render={props => (\r\n                        <Settings {...props} page={'change-password'} />\r\n                    )} />\r\n                    <Route path=\"/configurações/deletar-conta\" exact render={props => (\r\n                        <Settings {...props} page={'delete-account'} />\r\n                    )} />\r\n                    <Route path=\"/user/:slug\" exact render={props => (\r\n                        <Profile {...props} updateNotificationsNumber={updateNotificationsNumber} />\r\n                    )} />\r\n                    <Route path=\"/user/:slug/amigos\" component={ProfileFriends} />\r\n                    <Route path=\"/post/:id\" exact component={Post} />\r\n                    <Route path=\"/post/:id/comment\" render={props => (\r\n                        <Post {...props} commentModalIsOpen={true} />\r\n                    )} />\r\n                    <Route path=\"/interesses/:interest\" component={InterestProfiles} />\r\n\r\n                    <Route path=\"/postar\" component={PostFormPage} />\r\n                </Switch>\r\n                <BottomMenu notificationsNumber={notificationsNumber} unreadMessagesNumber={unreadMessagesNumber} />\r\n            </div>\r\n        </Router>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}