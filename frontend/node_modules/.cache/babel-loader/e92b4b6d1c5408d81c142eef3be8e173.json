{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{SERVER_URL}from'../../config/settings';import Header from'../../components/fixed/Header';import EditProfileModal from'./components/EditProfileModal';import Posts from'./components/Posts';import Interests from'./components/interests/Interests';import ProfileData from'./components/ProfileData';import BottomMenu from'../../components/fixed/bottom-menu/BottomMenu';export default function MyProfile(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),myProfile=_useState2[0],setProfile=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isEditing=_useState4[0],setIsEditing=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),currentPageIsPosts=_useState6[0],setCurrentPageIsPosts=_useState6[1];document.title='Perfil / Napker';useEffect(function(){fetchProfile();},[]);var fetchProfile=function fetchProfile(){fetch(\"\".concat(SERVER_URL,\"/profile-api/myprofile\")).then(function(response){return response.json();}).then(function(data){return setProfile(data);});};var switchPage=function switchPage(e){document.querySelectorAll('.profile-page-menu-item-active').forEach(function(el){el.classList.remove('profile-page-menu-item-active');});e.target.classList.add('profile-page-menu-item-active');if(e.target.id==='profile-posts-page-menu-item'){setCurrentPageIsPosts(true);}else if(e.target.id==='profile-interests-page-menu-item'){setCurrentPageIsPosts(false);}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Header,{page:\"Perfil\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},myProfile?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(EditProfileModal,{profile:myProfile,isOpen:isEditing,closeModal:function closeModal(){return setIsEditing(false);}}),/*#__PURE__*/React.createElement(ProfileData,{profile:myProfile},/*#__PURE__*/React.createElement(\"div\",{className:\"myprofile-btn-wrapper\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-secondary\",type:\"button\",onClick:function onClick(){return setIsEditing(true);},style:{marginBottom:'10px'}},\"Editar perfil\"),/*#__PURE__*/React.createElement(Link,{to:\"/perfil/meus-interesses\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-secondary\"},\"Editar interesses\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-page-menu\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-page-menu-item profile-page-menu-item-active\",id:\"profile-posts-page-menu-item\",onClick:switchPage},\"Posts (\",myProfile.posts.length,\")\"),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-page-menu-item\",id:\"profile-interests-page-menu-item\",onClick:switchPage},\"Interesses (\",myProfile.interests.filter(function(i){return i.public;}).length,\")\")),currentPageIsPosts?/*#__PURE__*/React.createElement(Posts,{profile:myProfile,fetchProfile:fetchProfile}):/*#__PURE__*/React.createElement(Interests,{profile:myProfile})):/*#__PURE__*/React.createElement(\"div\",{className:\"profile-page-loader-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"loader\"}))),/*#__PURE__*/React.createElement(BottomMenu,null));}","map":{"version":3,"sources":["C:/Users/felip/CodeProjects/Web/Napker/frontend/src/pages/profile/MyProfile.js"],"names":["React","useEffect","useState","Link","SERVER_URL","Header","EditProfileModal","Posts","Interests","ProfileData","BottomMenu","MyProfile","myProfile","setProfile","isEditing","setIsEditing","currentPageIsPosts","setCurrentPageIsPosts","document","title","fetchProfile","fetch","then","response","json","data","switchPage","e","querySelectorAll","forEach","el","classList","remove","target","add","id","marginBottom","posts","length","interests","filter","i","public"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../../config/settings'\r\nimport Header from '../../components/fixed/Header'\r\nimport EditProfileModal from './components/EditProfileModal'\r\nimport Posts from './components/Posts'\r\nimport Interests from './components/interests/Interests'\r\nimport ProfileData from './components/ProfileData'\r\nimport BottomMenu from '../../components/fixed/bottom-menu/BottomMenu'\r\n\r\nexport default function MyProfile() {\r\n    const [myProfile, setProfile] = useState(null)\r\n    const [isEditing, setIsEditing] = useState(false)\r\n    const [currentPageIsPosts, setCurrentPageIsPosts] = useState(true)\r\n\r\n    document.title = 'Perfil / Napker'\r\n\r\n    useEffect(() => {\r\n        fetchProfile()\r\n    }, [])\r\n\r\n    const fetchProfile = () => {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => setProfile(data))\r\n    }\r\n\r\n    const switchPage = e => {\r\n        document.querySelectorAll('.profile-page-menu-item-active').forEach(el => {\r\n            el.classList.remove('profile-page-menu-item-active')\r\n        })\r\n        e.target.classList.add('profile-page-menu-item-active')\r\n        if (e.target.id === 'profile-posts-page-menu-item') {\r\n            setCurrentPageIsPosts(true)\r\n        } else if (e.target.id === 'profile-interests-page-menu-item') {\r\n            setCurrentPageIsPosts(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header page=\"Perfil\" />\r\n            <div className=\"content\">\r\n                {myProfile ?\r\n                    <>\r\n                        <EditProfileModal\r\n                            profile={myProfile}\r\n                            isOpen={isEditing}\r\n                            closeModal={() => setIsEditing(false)}\r\n                        />\r\n\r\n                        <ProfileData profile={myProfile}>\r\n                            <div className=\"myprofile-btn-wrapper\">\r\n                                <button\r\n                                    className=\"btn btn-secondary\"\r\n                                    type=\"button\"\r\n                                    onClick={() => setIsEditing(true)}\r\n                                    style={{ marginBottom: '10px' }}\r\n                                >\r\n                                    Editar perfil\r\n                                </button>\r\n                                <Link to='/perfil/meus-interesses'>\r\n                                    <button className=\"btn btn-secondary\">Editar interesses</button>\r\n                                </Link>\r\n                            </div>\r\n                        </ProfileData>\r\n                        <div className=\"profile-page-menu\">\r\n                            <div\r\n                                className=\"profile-page-menu-item profile-page-menu-item-active\"\r\n                                id=\"profile-posts-page-menu-item\"\r\n                                onClick={switchPage}\r\n                            >\r\n                                Posts ({myProfile.posts.length})\r\n                            </div>\r\n                            <div\r\n                                className=\"profile-page-menu-item\"\r\n                                id=\"profile-interests-page-menu-item\"\r\n                                onClick={switchPage}\r\n                            >\r\n                                Interesses ({myProfile.interests.filter(i => i.public).length})\r\n                            </div>\r\n                        </div>\r\n                        {currentPageIsPosts ?\r\n                            <Posts profile={myProfile} fetchProfile={fetchProfile} />\r\n                            :\r\n                            <Interests profile={myProfile} />\r\n                        }\r\n                    </> :\r\n                    <div className=\"profile-page-loader-container\">\r\n                        <div className=\"loader\" />\r\n                    </div>\r\n                }\r\n            </div>\r\n            <BottomMenu />\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}