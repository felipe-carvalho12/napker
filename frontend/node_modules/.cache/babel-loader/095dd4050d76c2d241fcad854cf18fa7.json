{"ast":null,"code":"import _createForOfIteratorHelper from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{csrftoken}from'../../config/utils';import{SERVER_URL}from'../../config/settings';export default function ChangePassword(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),errorMessage=_useState2[0],setErrorMessage=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),successMessage=_useState4[0],setSuccessMessage=_useState4[1];var handleFormSubmit=function handleFormSubmit(e){e.preventDefault();var password=document.querySelector('#password').value;var newPassword=document.querySelector('#new_password').value;var newPasswordc=document.querySelector('#new_passwordc').value;var _iterator=_createForOfIteratorHelper(document.querySelectorAll('form > input')),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var input=_step.value;if(!input.value){alert('Todos os campos devem ser preenchidos!');return;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(newPassword!==newPasswordc){setErrorMessage('Os campos \"Nova senha\" e \"Confirmar nova senha\" devem ter o mesmo valor!');return;}fetch(\"\".concat(SERVER_URL,\"/change-password\"),{method:'POST',headers:{'Content-type':'application/json','X-CSRFToken':csrftoken},body:JSON.stringify({password:password,new_password:newPassword,new_passwordc:newPasswordc})}).then(function(response){return response.json();}).then(function(data){if(data==='success'){setSuccessMessage('Senha alterada com successo!');password=newPassword=newPasswordc='';}else{setErrorMessage(data);}});};return/*#__PURE__*/React.createElement(\"div\",{className:\"settings-description-container\"},errorMessage&&/*#__PURE__*/React.createElement(\"div\",{class:\"alert alert-danger alert\",role:\"alert\"},errorMessage),successMessage&&/*#__PURE__*/React.createElement(\"div\",{class:\"alert alert-success alert\",role:\"alert\"},successMessage),/*#__PURE__*/React.createElement(\"div\",{className:\"change-password-title-container\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Alterar senha\")),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"form\",{className:\"change-password-form\"},/*#__PURE__*/React.createElement(\"input\",{id:\"password\",type:\"password\",placeholder:\"Senha atual\",autoFocus:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"a\",{href:\"#\"},\"Esqueceu sua senha?\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{id:\"new_password\",type:\"password\",placeholder:\"Nova senha\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{id:\"new_passwordc\",type:\"password\",placeholder:\"Confirmar nova senha\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",type:\"submit\",onClick:handleFormSubmit},\"Confirmar\")));}","map":{"version":3,"sources":["C:/Users/felip/CodeProjects/Web/Napker/frontend/src/pages/settings_page/changePassword.js"],"names":["React","useState","csrftoken","SERVER_URL","ChangePassword","errorMessage","setErrorMessage","successMessage","setSuccessMessage","handleFormSubmit","e","preventDefault","password","document","querySelector","value","newPassword","newPasswordc","querySelectorAll","input","alert","fetch","method","headers","body","JSON","stringify","new_password","new_passwordc","then","response","json","data"],"mappings":"0XAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CAEA,OAASC,SAAT,KAA0B,oBAA1B,CACA,OAASC,UAAT,KAA2B,uBAA3B,CAEA,cAAe,SAASC,CAAAA,cAAT,EAA0B,eACGH,QAAQ,CAAC,IAAD,CADX,wCAC9BI,YAD8B,eAChBC,eADgB,8BAEOL,QAAQ,CAAC,IAAD,CAFf,yCAE9BM,cAF8B,eAEdC,iBAFc,eAIrC,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAAAC,CAAC,CAAI,CAC1BA,CAAC,CAACC,cAAF,GACA,GAAIC,CAAAA,QAAQ,CAAGC,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoCC,KAAnD,CACA,GAAIC,CAAAA,WAAW,CAAGH,QAAQ,CAACC,aAAT,CAAuB,eAAvB,EAAwCC,KAA1D,CACA,GAAIE,CAAAA,YAAY,CAAGJ,QAAQ,CAACC,aAAT,CAAuB,gBAAvB,EAAyCC,KAA5D,CAJ0B,yCAKRF,QAAQ,CAACK,gBAAT,CAA0B,cAA1B,CALQ,YAK1B,+CAA6D,IAApDC,CAAAA,KAAoD,aACzD,GAAI,CAACA,KAAK,CAACJ,KAAX,CAAkB,CACdK,KAAK,CAAC,wCAAD,CAAL,CACA,OACH,CACJ,CAVyB,qDAW1B,GAAIJ,WAAW,GAAKC,YAApB,CAAkC,CAC9BX,eAAe,CAAC,0EAAD,CAAf,CACA,OACH,CACDe,KAAK,WAAIlB,UAAJ,qBAAkC,CACnCmB,MAAM,CAAE,MAD2B,CAEnCC,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,cAAerB,SAFV,CAF0B,CAMnCsB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBd,QAAQ,CAAEA,QADO,CAEjBe,YAAY,CAAEX,WAFG,CAGjBY,aAAa,CAAEX,YAHE,CAAf,CAN6B,CAAlC,CAAL,CAYKY,IAZL,CAYU,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EAZlB,EAaKF,IAbL,CAaU,SAAAG,IAAI,CAAI,CACV,GAAIA,IAAI,GAAK,SAAb,CAAwB,CACpBxB,iBAAiB,CAAC,8BAAD,CAAjB,CACAI,QAAQ,CAAGI,WAAW,CAAGC,YAAY,CAAG,EAAxC,CACH,CAHD,IAGO,CACHX,eAAe,CAAC0B,IAAD,CAAf,CACH,CACJ,CApBL,EAqBH,CApCD,CAsCA,mBACI,2BAAK,SAAS,CAAC,gCAAf,EACK3B,YAAY,eACT,2BAAK,KAAK,CAAC,0BAAX,CAAsC,IAAI,CAAC,OAA3C,EACKA,YADL,CAFR,CAMKE,cAAc,eACX,2BAAK,KAAK,CAAC,2BAAX,CAAuC,IAAI,CAAC,OAA5C,EACKA,cADL,CAPR,cAWI,2BAAK,SAAS,CAAC,iCAAf,eACI,8CADJ,CAXJ,cAcI,8BAdJ,cAeI,4BAAM,SAAS,CAAC,sBAAhB,eACI,6BAAO,EAAE,CAAC,UAAV,CAAqB,IAAI,CAAC,UAA1B,CAAqC,WAAW,CAAC,aAAjD,CAA+D,SAAS,KAAxE,EADJ,cAEI,8BAFJ,cAGI,yBAAG,IAAI,CAAC,GAAR,wBAHJ,cAII,8BAJJ,cAKI,8BALJ,cAMI,6BAAO,EAAE,CAAC,cAAV,CAAyB,IAAI,CAAC,UAA9B,CAAyC,WAAW,CAAC,YAArD,EANJ,cAOI,8BAPJ,cAQI,6BAAO,EAAE,CAAC,eAAV,CAA0B,IAAI,CAAC,UAA/B,CAA0C,WAAW,CAAC,sBAAtD,EARJ,cASI,8BATJ,cAUI,8BACI,SAAS,CAAC,iBADd,CAEI,IAAI,CAAC,QAFT,CAGI,OAAO,CAAEE,gBAHb,cAVJ,CAfJ,CADJ,CAkCH","sourcesContent":["import React, { useState } from 'react'\r\n\r\nimport { csrftoken } from '../../config/utils'\r\nimport { SERVER_URL } from '../../config/settings'\r\n\r\nexport default function ChangePassword() {\r\n    const [errorMessage, setErrorMessage] = useState(null)\r\n    const [successMessage, setSuccessMessage] = useState(null)\r\n\r\n    const handleFormSubmit = e => {\r\n        e.preventDefault()\r\n        let password = document.querySelector('#password').value\r\n        let newPassword = document.querySelector('#new_password').value\r\n        let newPasswordc = document.querySelector('#new_passwordc').value\r\n        for (let input of document.querySelectorAll('form > input')) {\r\n            if (!input.value) {\r\n                alert('Todos os campos devem ser preenchidos!')\r\n                return\r\n            }\r\n        }\r\n        if (newPassword !== newPasswordc) {\r\n            setErrorMessage('Os campos \"Nova senha\" e \"Confirmar nova senha\" devem ter o mesmo valor!')\r\n            return\r\n        }\r\n        fetch(`${SERVER_URL}/change-password`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify({\r\n                password: password,\r\n                new_password: newPassword,\r\n                new_passwordc: newPasswordc,\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if (data === 'success') {\r\n                    setSuccessMessage('Senha alterada com successo!')\r\n                    password = newPassword = newPasswordc = ''\r\n                } else {\r\n                    setErrorMessage(data)\r\n                }\r\n            })\r\n    }\r\n\r\n    return (\r\n        <div className=\"settings-description-container\">\r\n            {errorMessage &&\r\n                <div class=\"alert alert-danger alert\" role=\"alert\">\r\n                    {errorMessage}\r\n                </div>\r\n            }\r\n            {successMessage &&\r\n                <div class=\"alert alert-success alert\" role=\"alert\">\r\n                    {successMessage}\r\n                </div>\r\n            }\r\n            <div className=\"change-password-title-container\">\r\n                <h3>Alterar senha</h3>\r\n            </div>\r\n            <hr />\r\n            <form className=\"change-password-form\">\r\n                <input id=\"password\" type=\"password\" placeholder=\"Senha atual\" autoFocus />\r\n                <br />\r\n                <a href=\"#\">Esqueceu sua senha?</a>\r\n                <hr />\r\n                <br />\r\n                <input id=\"new_password\" type=\"password\" placeholder=\"Nova senha\" />\r\n                <br />\r\n                <input id=\"new_passwordc\" type=\"password\" placeholder=\"Confirmar nova senha\" />\r\n                <br />\r\n                <button\r\n                    className=\"btn btn-primary\"\r\n                    type=\"submit\"\r\n                    onClick={handleFormSubmit}\r\n                >Confirmar</button>\r\n            </form>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}