{"ast":null,"code":"import _createForOfIteratorHelper from\"C:\\\\Users\\\\Joaob\\\\OneDrive\\\\Documents\\\\napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"C:\\\\Users\\\\Joaob\\\\OneDrive\\\\Documents\\\\napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{csrftoken}from'../../../../../config/utils';import{SERVER_URL}from'../../../../../config/settings';export default function ChangePassword(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),errorMessage=_useState2[0],setErrorMessage=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),successMessage=_useState4[0],setSuccessMessage=_useState4[1];var handleFormSubmit=function handleFormSubmit(e){e.preventDefault();var passwordEl=document.querySelector('#password');var newPasswordEl=document.querySelector('#new_password');var newPasswordcEl=document.querySelector('#new_passwordc');var password=passwordEl.value;var newPassword=newPasswordEl.value;var newPasswordc=newPasswordcEl.value;var _iterator=_createForOfIteratorHelper(document.querySelectorAll('form > input')),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var input=_step.value;if(!input.value){alert('Todos os campos devem ser preenchidos!');return;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}if(newPassword!==newPasswordc){setErrorMessage('Os campos \"Nova senha\" e \"Confirmar nova senha\" devem ter o mesmo valor!');setSuccessMessage(null);return;}fetch(\"\".concat(SERVER_URL,\"/change-password\"),{method:'POST',headers:{'Content-type':'application/json','X-CSRFToken':csrftoken},body:JSON.stringify({password:password,new_password:newPassword,new_passwordc:newPasswordc})}).then(function(response){return response.json();}).then(function(data){if(data==='success'){setSuccessMessage('Senha alterada com successo!');setErrorMessage(null);passwordEl.value=newPasswordEl.value=newPasswordcEl.value='';}else{setErrorMessage(data);setSuccessMessage(null);}});};return/*#__PURE__*/React.createElement(\"div\",{className:\"settings-description-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-start align-items-center\",style:{background:'#fff',padding:'15px',borderBottom:'1px solid var(--border-color)'}},/*#__PURE__*/React.createElement(\"i\",{class:\"fas fa-arrow-left left-arrow-icon mr-2\",onClick:function onClick(){return window.history.back();}}),/*#__PURE__*/React.createElement(\"strong\",{style:{fontSize:'1.2rem'}},\"Seguran\\xE7a\")),errorMessage&&/*#__PURE__*/React.createElement(\"div\",{class:\"alert alert-danger alert\",role:\"alert\"},errorMessage),successMessage&&/*#__PURE__*/React.createElement(\"div\",{class:\"alert alert-success alert\",role:\"alert\"},successMessage),/*#__PURE__*/React.createElement(\"div\",{className:\"settings-page-title-container\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Alterar senha\")),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"form\",{className:\"change-password-form\"},/*#__PURE__*/React.createElement(\"input\",{id:\"password\",type:\"password\",placeholder:\"Senha atual\",autoFocus:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"a\",{href:\"\".concat(SERVER_URL,\"/recuperar-senha\")},\"Esqueceu sua senha?\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{id:\"new_password\",type:\"password\",placeholder:\"Nova senha\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{id:\"new_passwordc\",type:\"password\",placeholder:\"Confirmar nova senha\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",type:\"submit\",onClick:handleFormSubmit},\"Confirmar\")));}","map":{"version":3,"sources":["C:/Users/Joaob/OneDrive/Documents/napker/Frontend/src/pages/settings_/components/security_/components/ChangePassword.js"],"names":["React","useState","csrftoken","SERVER_URL","ChangePassword","errorMessage","setErrorMessage","successMessage","setSuccessMessage","handleFormSubmit","e","preventDefault","passwordEl","document","querySelector","newPasswordEl","newPasswordcEl","password","value","newPassword","newPasswordc","querySelectorAll","input","alert","fetch","method","headers","body","JSON","stringify","new_password","new_passwordc","then","response","json","data","background","padding","borderBottom","window","history","back","fontSize"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\n\r\nimport { csrftoken } from '../../../../../config/utils'\r\nimport { SERVER_URL } from '../../../../../config/settings'\r\n\r\nexport default function ChangePassword() {\r\n    const [errorMessage, setErrorMessage] = useState(null)\r\n    const [successMessage, setSuccessMessage] = useState(null)\r\n\r\n    const handleFormSubmit = e => {\r\n        e.preventDefault()\r\n        let passwordEl = document.querySelector('#password')\r\n        let newPasswordEl = document.querySelector('#new_password')\r\n        let newPasswordcEl = document.querySelector('#new_passwordc')\r\n        let password = passwordEl.value\r\n        let newPassword = newPasswordEl.value\r\n        let newPasswordc = newPasswordcEl.value\r\n        for (let input of document.querySelectorAll('form > input')) {\r\n            if (!input.value) {\r\n                alert('Todos os campos devem ser preenchidos!')\r\n                return\r\n            }\r\n        }\r\n        if (newPassword !== newPasswordc) {\r\n            setErrorMessage('Os campos \"Nova senha\" e \"Confirmar nova senha\" devem ter o mesmo valor!')\r\n            setSuccessMessage(null)\r\n            return\r\n        }\r\n        fetch(`${SERVER_URL}/change-password`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify({\r\n                password: password,\r\n                new_password: newPassword,\r\n                new_passwordc: newPasswordc,\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if (data === 'success') {\r\n                    setSuccessMessage('Senha alterada com successo!')\r\n                    setErrorMessage(null)\r\n                    passwordEl.value = newPasswordEl.value = newPasswordcEl.value = ''\r\n                } else {\r\n                    setErrorMessage(data)\r\n                    setSuccessMessage(null)\r\n                }\r\n            })\r\n    }\r\n\r\n    return (\r\n        <div className=\"settings-description-container\">\r\n            <div\r\n                className=\"d-flex justify-content-start align-items-center\"\r\n                style={{ background: '#fff', padding: '15px', borderBottom: '1px solid var(--border-color)' }}>\r\n                <i\r\n                    class=\"fas fa-arrow-left left-arrow-icon mr-2\"\r\n                    onClick={() => window.history.back()}\r\n                />\r\n                <strong style={{ fontSize: '1.2rem' }}>Segurança</strong>\r\n            </div>\r\n            {errorMessage &&\r\n                <div class=\"alert alert-danger alert\" role=\"alert\">\r\n                    {errorMessage}\r\n                </div>\r\n            }\r\n            {successMessage &&\r\n                <div class=\"alert alert-success alert\" role=\"alert\">\r\n                    {successMessage}\r\n                </div>\r\n            }\r\n            <div className=\"settings-page-title-container\">\r\n                <h3>Alterar senha</h3>\r\n            </div>\r\n            <hr />\r\n            <form className=\"change-password-form\">\r\n                <input id=\"password\" type=\"password\" placeholder=\"Senha atual\" autoFocus />\r\n                <br />\r\n                <a href={`${SERVER_URL}/recuperar-senha`}>Esqueceu sua senha?</a>\r\n                <hr />\r\n                <br />\r\n                <input id=\"new_password\" type=\"password\" placeholder=\"Nova senha\" />\r\n                <br />\r\n                <input id=\"new_passwordc\" type=\"password\" placeholder=\"Confirmar nova senha\" />\r\n                <br />\r\n                <button\r\n                    className=\"btn btn-primary\"\r\n                    type=\"submit\"\r\n                    onClick={handleFormSubmit}\r\n                >Confirmar</button>\r\n            </form>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}