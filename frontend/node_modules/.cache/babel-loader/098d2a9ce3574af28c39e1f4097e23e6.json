{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Carlos\\\\napker\\\\frontend\\\\src\\\\pages\\\\PostFormPage.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../components/fixed/header';\nimport { SERVER_URL } from '../config/settings';\nimport { csrftoken } from '../config/utils';\nexport default class Posts extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handlePostContentChange = e => {\n      this.setState({\n        postContent: e.target.value\n      });\n      const el = document.querySelector('#post-form-submit-btn');\n      el.disabled = e.target.value.trim() === '' && !this.state.postFormImagePreview;\n    };\n\n    this.handlePostImageChange = e => {\n      const reader = new FileReader();\n\n      reader.onload = () => {\n        if (reader.readyState === 2) {\n          this.setState({\n            postFormImagePreview: reader.result\n          });\n          document.querySelector('#post-img-container').style.display = 'initial';\n          document.querySelector('#post-form-submit-btn').disabled = false;\n        }\n      };\n\n      try {\n        reader.readAsDataURL(e.target.files[0]);\n      } catch {}\n    };\n\n    this.handleCloseImage = () => {\n      document.querySelector('#post-img-container').style.display = 'none';\n      document.querySelector('#post-image').value = '';\n      if (this.state.postContent.trim() === '') document.querySelector('#post-form-submit-btn').disabled = true;\n      this.setState({\n        postFormImagePreview: null\n      });\n    };\n\n    this.state = {\n      profile: null,\n      postContent: '',\n      postFormImagePreview: null\n    };\n  }\n\n  componentWillMount() {\n    fetch(`${SERVER_URL}/profile-api/myprofile`).then(response => response.json()).then(data => this.setState({\n      profile: data\n    }));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      page: \"Novo post\",\n      backArrow: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"post-form-page-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }\n    }, this.state.profile ? /*#__PURE__*/React.createElement(\"form\", {\n      action: `${SERVER_URL}/post-api/create-post`,\n      method: \"POST\",\n      className: \"create-post-form-mobile\",\n      encType: \"multipart/form-data\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"hidden\",\n      name: \"csrfmiddlewaretoken\",\n      value: csrftoken,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/perfil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: `${SERVER_URL}${this.state.profile.photo}`,\n      className: \"profile-img-med\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(\"textarea\", {\n      className: \"post-content-textarea\",\n      name: \"post-content\",\n      value: this.state.postContent,\n      placeholder: \"No que voc\\xEA est\\xE1 pensando?\",\n      maxLength: 300,\n      autoFocus: true,\n      onChange: this.handlePostContentChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100 d-flex justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"post-img-container\",\n      id: \"post-img-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"post-img-options\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"far fa-times-circle\",\n      onClick: this.handleCloseImage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 41\n      }\n    })), /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.postFormImagePreview,\n      className: \"post-img post-form-img-preview\",\n      id: \"post-form-img-preview\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 37\n      }\n    }))), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-between\",\n      style: {\n        margin: '0px 70px 0 70px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"post-extra-options\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"post-image\",\n      class: \"far fa-image\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      accept: \"image/png, image/jpg, image/jpeg\",\n      name: \"post-image\",\n      id: \"post-image\",\n      style: {\n        display: 'none'\n      },\n      onChange: this.handlePostImageChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      id: \"post-form-submit-btn\",\n      style: {\n        height: '40px'\n      },\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 33\n      }\n    }, \"Postar\"))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"posts-loader-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 29\n      }\n    }))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Carlos/napker/frontend/src/pages/PostFormPage.js"],"names":["React","Link","Header","SERVER_URL","csrftoken","Posts","Component","constructor","props","handlePostContentChange","e","setState","postContent","target","value","el","document","querySelector","disabled","trim","state","postFormImagePreview","handlePostImageChange","reader","FileReader","onload","readyState","result","style","display","readAsDataURL","files","handleCloseImage","profile","componentWillMount","fetch","then","response","json","data","render","photo","margin","height"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport Header from '../components/fixed/header'\r\nimport { SERVER_URL } from '../config/settings'\r\nimport { csrftoken } from '../config/utils'\r\n\r\nexport default class Posts extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            profile: null,\r\n            postContent: '',\r\n            postFormImagePreview: null\r\n        }\r\n    }\r\n\r\n    componentWillMount() {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => this.setState({ profile: data }))\r\n    }\r\n\r\n\r\n    handlePostContentChange = e => {\r\n        this.setState({ postContent: e.target.value })\r\n        const el = document.querySelector('#post-form-submit-btn')\r\n        el.disabled = e.target.value.trim() === '' && !this.state.postFormImagePreview\r\n    }\r\n\r\n    handlePostImageChange = e => {\r\n        const reader = new FileReader()\r\n        reader.onload = () => {\r\n            if (reader.readyState === 2) {\r\n                this.setState({ postFormImagePreview: reader.result })\r\n                document.querySelector('#post-img-container').style.display = 'initial'\r\n                document.querySelector('#post-form-submit-btn').disabled = false\r\n            }\r\n        }\r\n        try {\r\n            reader.readAsDataURL(e.target.files[0])\r\n        } catch {\r\n\r\n        }\r\n    }\r\n\r\n    handleCloseImage = () => {\r\n        document.querySelector('#post-img-container').style.display = 'none'\r\n        document.querySelector('#post-image').value = ''\r\n        if (this.state.postContent.trim() === '') document.querySelector('#post-form-submit-btn').disabled = true\r\n        this.setState({ postFormImagePreview: null })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"content\">\r\n                <Header page=\"Novo post\" backArrow={true} />\r\n                <div className=\"post-form-page-container\">\r\n                    {this.state.profile ?\r\n                        <form\r\n                            action={`${SERVER_URL}/post-api/create-post`}\r\n                            method=\"POST\"\r\n                            className=\"create-post-form-mobile\"\r\n                            encType=\"multipart/form-data\"\r\n                        >\r\n                            <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrftoken} />\r\n                            <div className=\"d-flex\">\r\n                                <Link to=\"/perfil\">\r\n                                    <img\r\n                                        src={`${SERVER_URL}${this.state.profile.photo}`}\r\n                                        className=\"profile-img-med\"\r\n                                    />\r\n                                </Link>\r\n                                <textarea\r\n                                    className=\"post-content-textarea\"\r\n                                    name=\"post-content\"\r\n                                    value={this.state.postContent}\r\n                                    placeholder=\"No que você está pensando?\"\r\n                                    maxLength={300}\r\n                                    autoFocus\r\n                                    onChange={this.handlePostContentChange}\r\n                                />\r\n                            </div>\r\n                            <div className=\"w-100 d-flex justify-content-center\">\r\n                                <div\r\n                                    className=\"post-img-container\"\r\n                                    id=\"post-img-container\">\r\n                                    <div\r\n                                        className=\"post-img-options\"\r\n                                    >\r\n                                        <i\r\n                                            className=\"far fa-times-circle\"\r\n                                            onClick={this.handleCloseImage}\r\n                                        />\r\n                                    </div>\r\n                                    <img\r\n                                        src={this.state.postFormImagePreview}\r\n                                        className=\"post-img post-form-img-preview\"\r\n                                        id=\"post-form-img-preview\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <hr />\r\n                            <div className=\"d-flex justify-content-between\" style={{ margin: '0px 70px 0 70px' }}>\r\n                                <div className=\"post-extra-options\">\r\n                                    <label htmlFor=\"post-image\" class=\"far fa-image\" />\r\n                                    <input\r\n                                        type=\"file\"\r\n                                        accept=\"image/png, image/jpg, image/jpeg\"\r\n                                        name=\"post-image\"\r\n                                        id=\"post-image\"\r\n                                        style={{ display: 'none' }}\r\n                                        onChange={this.handlePostImageChange}\r\n                                    />\r\n                                </div>\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"btn btn-primary\"\r\n                                    id=\"post-form-submit-btn\"\r\n                                    style={{ height: '40px' }}\r\n                                    disabled\r\n                                >\r\n                                    Postar\r\n                            </button>\r\n                            </div>\r\n                        </form>\r\n                        :\r\n                        <div className=\"posts-loader-container\" >\r\n                            <div className=\"loader\" />\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}