{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import{BrowserRouter as Router,Switch,Route}from'react-router-dom';import{SERVER_URL}from'./config/settings';import{InvitesReceivedContext,UnvisualizedCommentsContext,UnvisualizedLikesContext,UnreadMessagesContext}from'./context/app/AppContext';import Sidebar from'./components/fixed/Sidebar';import Home from'./pages/home/Home';import Notifications from'./pages/notifications/Notifications';import Messages from'./pages/messages_/Messages';import MyProfile from'./pages/profile/MyProfile';import Settings from'./pages/settings_/Settings';import Profile from'./pages/profile/Profile';import ProfileFriends from'./pages/profile/pages/Friends';import InterestProfiles from'./pages/profile/components/interests/pages/InterestProfiles';import EditInterests from'./pages/profile/pages/edit_interests/EditInterests';import Post from'./pages/home/components/posts_/pages/post_/Post';import PostFormPage from'./pages/PostFormPage';export default function App(){var _useContext=useContext(InvitesReceivedContext),_useContext2=_slicedToArray(_useContext,2),invitesReceivedNumber=_useContext2[0],setInvitesReceived=_useContext2[1];var _useContext3=useContext(UnvisualizedCommentsContext),_useContext4=_slicedToArray(_useContext3,2),unvisualizedCommentsNumber=_useContext4[0],setUnvisulaizedComments=_useContext4[1];var _useContext5=useContext(UnvisualizedLikesContext),_useContext6=_slicedToArray(_useContext5,2),unvisualizedLikesNumber=_useContext6[0],setUnvisulaizedLikes=_useContext6[1];var _useContext7=useContext(UnreadMessagesContext),_useContext8=_slicedToArray(_useContext7,2),unreadMessagesNumber=_useContext8[0],setUnreadMessagesNumber=_useContext8[1];var notificationsNumber=invitesReceivedNumber+unvisualizedLikesNumber+unvisualizedCommentsNumber;useEffect(function(){updateNotificationsNumber();updateUnreadMessagesNumber();window.setInterval(function(){updateNotificationsNumber();updateUnreadMessagesNumber();},6000);},[]);var updateNotificationsNumber=function updateNotificationsNumber(){fetch(\"\".concat(SERVER_URL,\"/profile-api/myinvites\")).then(function(response){return response.json();}).then(function(data){return setInvitesReceived(data.length);});fetch(\"\".concat(SERVER_URL,\"/post-api/unvisualized-post-likes\")).then(function(response){return response.json();}).then(function(data){return setUnvisulaizedLikes(data.length);});fetch(\"\".concat(SERVER_URL,\"/post-api/unvisualized-post-comments\")).then(function(response){return response.json();}).then(function(data){return setUnvisulaizedComments(data.length);});};var updateUnreadMessagesNumber=function updateUnreadMessagesNumber(){fetch(\"\".concat(SERVER_URL,\"/chat-api/all-unread-messages-number\")).then(function(response){return response.json();}).then(function(data){return setUnreadMessagesNumber(data['unread_messages_number']);});};return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(Sidebar,null),/*#__PURE__*/React.createElement(\"div\",{className:\"main-content\"},/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/home\",component:Home}),/*#__PURE__*/React.createElement(Route,{path:\"/notifica\\xE7\\xF5es\",render:function render(props){return/*#__PURE__*/React.createElement(Notifications,Object.assign({},props,{updateNotificationsNumber:updateNotificationsNumber}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/mensagens\",exact:true,component:Messages}),/*#__PURE__*/React.createElement(Route,{path:\"/mensagens/:slug\",render:function render(props){return/*#__PURE__*/React.createElement(Messages,Object.assign({},props,{updateUnreadMessagesNumber:updateUnreadMessagesNumber}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/perfil\",exact:true,component:MyProfile}),/*#__PURE__*/React.createElement(Route,{path:\"/perfil/meus-interesses\",component:EditInterests}),/*#__PURE__*/React.createElement(Route,{path:\"/configura\\xE7\\xF5es\",exact:true,component:Settings}),/*#__PURE__*/React.createElement(Route,{path:\"/configura\\xE7\\xF5es/perfis-bloqueados\",exact:true,render:function render(props){return/*#__PURE__*/React.createElement(Settings,Object.assign({},props,{page:'blocked-profiles'}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/configura\\xE7\\xF5es/seguran\\xE7a\",exact:true,render:function render(props){return/*#__PURE__*/React.createElement(Settings,Object.assign({},props,{page:'security'}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/configura\\xE7\\xF5es/alterar-senha\",exact:true,render:function render(props){return/*#__PURE__*/React.createElement(Settings,Object.assign({},props,{page:'change-password'}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/configura\\xE7\\xF5es/deletar-conta\",exact:true,render:function render(props){return/*#__PURE__*/React.createElement(Settings,Object.assign({},props,{page:'delete-account'}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/user/:slug\",exact:true,render:function render(props){return/*#__PURE__*/React.createElement(Profile,Object.assign({},props,{updateNotificationsNumber:updateNotificationsNumber}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/user/:slug/amigos\",component:ProfileFriends}),/*#__PURE__*/React.createElement(Route,{path:\"/post/:id\",exact:true,component:Post}),/*#__PURE__*/React.createElement(Route,{path:\"/post/:id/comentar\",render:function render(props){return/*#__PURE__*/React.createElement(Post,Object.assign({},props,{commentModalIsOpen:true}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/interesses/:interest\",component:InterestProfiles}),/*#__PURE__*/React.createElement(Route,{path:\"/postar\",component:PostFormPage}))));}","map":{"version":3,"sources":["C:/Users/felip/CodeProjects/Web/Napker/frontend/src/App.js"],"names":["React","useContext","useEffect","useState","BrowserRouter","Router","Switch","Route","SERVER_URL","InvitesReceivedContext","UnvisualizedCommentsContext","UnvisualizedLikesContext","UnreadMessagesContext","Sidebar","Home","Notifications","Messages","MyProfile","Settings","Profile","ProfileFriends","InterestProfiles","EditInterests","Post","PostFormPage","App","invitesReceivedNumber","setInvitesReceived","unvisualizedCommentsNumber","setUnvisulaizedComments","unvisualizedLikesNumber","setUnvisulaizedLikes","unreadMessagesNumber","setUnreadMessagesNumber","notificationsNumber","updateNotificationsNumber","updateUnreadMessagesNumber","window","setInterval","fetch","then","response","json","data","length","props"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from './config/settings'\r\nimport {\r\n    InvitesReceivedContext, UnvisualizedCommentsContext,\r\n    UnvisualizedLikesContext, UnreadMessagesContext\r\n} from './context/app/AppContext'\r\n\r\nimport Sidebar from './components/fixed/Sidebar'\r\nimport Home from './pages/home/Home'\r\nimport Notifications from './pages/notifications/Notifications'\r\nimport Messages from './pages/messages_/Messages'\r\nimport MyProfile from './pages/profile/MyProfile'\r\nimport Settings from './pages/settings_/Settings'\r\nimport Profile from './pages/profile/Profile'\r\nimport ProfileFriends from './pages/profile/pages/Friends'\r\nimport InterestProfiles from './pages/profile/components/interests/pages/InterestProfiles'\r\nimport EditInterests from './pages/profile/pages/edit_interests/EditInterests'\r\nimport Post from './pages/home/components/posts_/pages/post_/Post'\r\n\r\nimport PostFormPage from './pages/PostFormPage'\r\n\r\nexport default function App() {\r\n    const [invitesReceivedNumber, setInvitesReceived] = useContext(InvitesReceivedContext)\r\n    const [unvisualizedCommentsNumber, setUnvisulaizedComments] = useContext(UnvisualizedCommentsContext)\r\n    const [unvisualizedLikesNumber, setUnvisulaizedLikes] = useContext(UnvisualizedLikesContext)\r\n\r\n    const [unreadMessagesNumber, setUnreadMessagesNumber] = useContext(UnreadMessagesContext)\r\n\r\n    let notificationsNumber = invitesReceivedNumber + unvisualizedLikesNumber + unvisualizedCommentsNumber\r\n\r\n    useEffect(() => {\r\n        updateNotificationsNumber()\r\n        updateUnreadMessagesNumber()\r\n        window.setInterval(() => {\r\n            updateNotificationsNumber()\r\n            updateUnreadMessagesNumber()\r\n        }, 6000)\r\n    }, [])\r\n\r\n    const updateNotificationsNumber = () => {\r\n        fetch(`${SERVER_URL}/profile-api/myinvites`)\r\n            .then(response => response.json())\r\n            .then(data => setInvitesReceived(data.length))\r\n        fetch(`${SERVER_URL}/post-api/unvisualized-post-likes`)\r\n            .then(response => response.json())\r\n            .then(data => setUnvisulaizedLikes(data.length))\r\n        fetch(`${SERVER_URL}/post-api/unvisualized-post-comments`)\r\n            .then(response => response.json())\r\n            .then(data => setUnvisulaizedComments(data.length))\r\n    }\r\n\r\n    const updateUnreadMessagesNumber = () => {\r\n        fetch(`${SERVER_URL}/chat-api/all-unread-messages-number`)\r\n            .then(response => response.json())\r\n            .then(data => setUnreadMessagesNumber(data['unread_messages_number']))\r\n    }\r\n\r\n    return (\r\n        <Router>\r\n            <Sidebar />\r\n            <div className=\"main-content\">\r\n                <Switch>\r\n                    <Route path=\"/home\" component={Home} />\r\n                    <Route path=\"/notificações\" render={props => (\r\n                        <Notifications {...props} updateNotificationsNumber={updateNotificationsNumber} />\r\n                    )} />\r\n                    <Route path=\"/mensagens\" exact component={Messages} />\r\n                    <Route path=\"/mensagens/:slug\" render={props => (\r\n                        <Messages {...props} updateUnreadMessagesNumber={updateUnreadMessagesNumber} />\r\n                    )} />\r\n                    <Route path=\"/perfil\" exact component={MyProfile} />\r\n                    <Route path=\"/perfil/meus-interesses\" component={EditInterests} />\r\n                    <Route path=\"/configurações\" exact component={Settings} />\r\n                    <Route path=\"/configurações/perfis-bloqueados\" exact render={props => (\r\n                        <Settings {...props} page={'blocked-profiles'} />\r\n                    )} />\r\n                    <Route path=\"/configurações/segurança\" exact render={props => (\r\n                        <Settings {...props} page={'security'} />\r\n                    )} />\r\n                    <Route path=\"/configurações/alterar-senha\" exact render={props => (\r\n                        <Settings {...props} page={'change-password'} />\r\n                    )} />\r\n                    <Route path=\"/configurações/deletar-conta\" exact render={props => (\r\n                        <Settings {...props} page={'delete-account'} />\r\n                    )} />\r\n                    <Route path=\"/user/:slug\" exact render={props => (\r\n                        <Profile {...props} updateNotificationsNumber={updateNotificationsNumber} />\r\n                    )} />\r\n                    <Route path=\"/user/:slug/amigos\" component={ProfileFriends} />\r\n                    <Route path=\"/post/:id\" exact component={Post} />\r\n                    <Route path=\"/post/:id/comentar\" render={props => (\r\n                        <Post {...props} commentModalIsOpen={true} />\r\n                    )} />\r\n                    <Route path=\"/interesses/:interest\" component={InterestProfiles} />\r\n\r\n                    <Route path=\"/postar\" component={PostFormPage} />\r\n                </Switch>\r\n            </div>\r\n        </Router>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}