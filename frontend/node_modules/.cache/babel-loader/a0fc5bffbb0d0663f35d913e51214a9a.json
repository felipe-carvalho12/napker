{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{SERVER_URL}from'../../settings';import{csrftoken}from'../../utils';export default function Profiles(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),myProfile=_useState2[0],setMyProfile=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),profiles=_useState4[0],setProfiles=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),filteredProfiles=_useState6[0],setFilteredProfiles=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),search=_useState8[0],setSearch=_useState8[1];useEffect(function(){fetch(\"\".concat(SERVER_URL,\"/profile-api/myprofile\")).then(function(response){return response.json();}).then(function(data){return setMyProfile(data);});fetch(\"\".concat(SERVER_URL,\"/profile-api/profile-list\")).then(function(response){return response.json();}).then(function(data){setFilteredProfiles(null);setProfiles(data);});},[]);useEffect(function(){if(search===''){setFilteredProfiles(null);return;}fetch(\"\".concat(SERVER_URL,\"/profile-api/users/\").concat(search)).then(function(response){return response.json();}).then(function(data){setFilteredProfiles(data);});},[search]);var sendFriendRequest=function sendFriendRequest(pk){fetch(\"\".concat(SERVER_URL,\"/profile-api/send-friend-request\"),{method:'POST',headers:{'Content-type':'application/json','X-CSRFToken':csrftoken},body:JSON.stringify(pk)}).then(function(response){return response.json();}).then(function(data){return console.log(data);});};var cancelFriendRequest=function cancelFriendRequest(pk){fetch(\"\".concat(SERVER_URL,\"/profile-api/cancel-friend-request\"),{method:'POST',headers:{'Content-type':'application/json','X-CSRFToken':csrftoken},body:JSON.stringify(pk)}).then(function(response){return response.json();}).then(function(data){return console.log(data);});};var handleRelationshipUpdate=function handleRelationshipUpdate(e){e.stopPropagation();var btn=e.target;if(btn.innerHTML==='Solicitar'){sendFriendRequest(btn.dataset.pk);btn.innerHTML='Solicitado';btn.className='btn btn-primary';}else{cancelFriendRequest(btn.dataset.pk);btn.innerHTML='Solicitar';btn.className='btn btn-secondary';}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"profiles-filter-container\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"profiles-filter-input\",placeholder:\"Pesquisar\",value:search,autoFocus:true,onChange:function onChange(e){return setSearch(e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"list-group\"},myProfile&&(profiles||filteredProfiles)?/*#__PURE__*/React.createElement(\"div\",{className:\"profile-list-container\"},filteredProfiles?filteredProfiles.map(function(profile){return/*#__PURE__*/React.createElement(Link,{to:\"/user/\".concat(profile.slug),style:{color:'#000',textDecoration:'none'}},/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item profile-row filtered-profile\",key:profile.id},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-img-container\"},/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(SERVER_URL).concat(profile.photo),className:\"profile-img-med\",style:{marginRight:'10px'}})),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-column w-100\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-row-top\"},/*#__PURE__*/React.createElement(\"div\",{className:\"main-profile-data\"},/*#__PURE__*/React.createElement(\"strong\",{style:{textAlign:'start'}},profile.first_name,\" \",profile.last_name),/*#__PURE__*/React.createElement(\"p\",{className:\"text-secondary\"},\"@\",profile.user.username))),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-row-bottom\"},profile.bio)))));}):profiles&&profiles.map(function(profile){return/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item profile-row\",key:profile.id,onClick:function onClick(){return window.location.href=\"/user/\".concat(profile.slug);}},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-img-container\"},/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(SERVER_URL).concat(profile.photo),className:\"profile-img-med\",style:{marginRight:'10px'}})),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-column w-100\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-row-top\"},/*#__PURE__*/React.createElement(\"div\",{className:\"main-profile-data\"},/*#__PURE__*/React.createElement(\"strong\",{style:{textAlign:'start'}},profile.first_name,\" \",profile.last_name),/*#__PURE__*/React.createElement(\"p\",{className:\"text-secondary\"},\"@\",profile.user.username)),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-secondary\",\"data-pk\":profile.id,onClick:handleRelationshipUpdate},\"Solicitar\")),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-row-bottom\"},profile.bio))));})):/*#__PURE__*/React.createElement(\"div\",{className:\"profiles-loader-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"loader\"}))));}","map":{"version":3,"sources":["C:/Users/felip/CodeProjects/Web/Napker/frontend/src/pages/home-components/Profiles.js"],"names":["React","useEffect","useState","Link","SERVER_URL","csrftoken","Profiles","myProfile","setMyProfile","profiles","setProfiles","filteredProfiles","setFilteredProfiles","search","setSearch","fetch","then","response","json","data","sendFriendRequest","pk","method","headers","body","JSON","stringify","console","log","cancelFriendRequest","handleRelationshipUpdate","e","stopPropagation","btn","target","innerHTML","dataset","className","value","map","profile","slug","color","textDecoration","id","photo","marginRight","textAlign","first_name","last_name","user","username","bio","window","location","href"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { SERVER_URL } from '../../settings'\r\nimport { csrftoken } from '../../utils'\r\n\r\nexport default function Profiles() {\r\n    const [myProfile, setMyProfile] = useState(null)\r\n    const [profiles, setProfiles] = useState(null)\r\n    const [filteredProfiles, setFilteredProfiles] = useState(null)\r\n    const [search, setSearch] = useState('')\r\n\r\n    useEffect(() => {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => setMyProfile(data))\r\n        fetch(`${SERVER_URL}/profile-api/profile-list`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                setFilteredProfiles(null)\r\n                setProfiles(data)\r\n            })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (search === '') {\r\n            setFilteredProfiles(null)\r\n            return\r\n        }\r\n        fetch(`${SERVER_URL}/profile-api/users/${search}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                setFilteredProfiles(data)\r\n            })\r\n    }, [search])\r\n\r\n    const sendFriendRequest = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/send-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(pk)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n    }\r\n\r\n    const cancelFriendRequest = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/cancel-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(pk)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n    }\r\n\r\n    const handleRelationshipUpdate = e => {\r\n        e.stopPropagation()\r\n        const btn = e.target\r\n        if (btn.innerHTML === 'Solicitar') {\r\n            sendFriendRequest(btn.dataset.pk)\r\n            btn.innerHTML = 'Solicitado'\r\n            btn.className = 'btn btn-primary'\r\n        } else {\r\n            cancelFriendRequest(btn.dataset.pk)\r\n            btn.innerHTML = 'Solicitar'\r\n            btn.className = 'btn btn-secondary'\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"profiles-filter-container\">\r\n                <input\r\n                    type=\"text\"\r\n                    className=\"profiles-filter-input\"\r\n                    placeholder=\"Pesquisar\"\r\n                    value={search}\r\n                    autoFocus\r\n                    onChange={e => setSearch(e.target.value)}\r\n                />\r\n            </div>\r\n            <div className=\"list-group\">\r\n                {myProfile && (profiles || filteredProfiles) ?\r\n                    <div className=\"profile-list-container\">\r\n                        {filteredProfiles ? filteredProfiles.map(profile => {\r\n                            return (\r\n                                <Link to={`/user/${profile.slug}`} style={{ color: '#000', textDecoration: 'none' }}>\r\n                                    <li className=\"list-group-item profile-row filtered-profile\" key={profile.id}>\r\n                                        <div className=\"d-flex\">\r\n                                            <div className=\"profile-img-container\">\r\n                                                <img src={`${SERVER_URL}${profile.photo}`}\r\n                                                    className=\"profile-img-med\"\r\n                                                    style={{ marginRight: '10px' }}\r\n                                                />\r\n                                            </div>\r\n                                            <div className=\"d-flex flex-column w-100\">\r\n                                                <div className=\"profile-row-top\">\r\n                                                    <div className=\"main-profile-data\">\r\n                                                        <strong style={{ textAlign: 'start' }}>\r\n                                                            {profile.first_name} {profile.last_name}\r\n                                                        </strong>\r\n                                                        <p className=\"text-secondary\">@{profile.user.username}</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div className=\"profile-row-bottom\">\r\n                                                    {profile.bio}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </li>\r\n                                </Link>\r\n                            )\r\n                        }\r\n                        ) : profiles && profiles.map(profile => {\r\n                            return (\r\n                                <li\r\n                                    className=\"list-group-item profile-row\"\r\n                                    key={profile.id}\r\n                                    onClick={() => window.location.href = `/user/${profile.slug}`}\r\n                                >\r\n                                    <div className=\"d-flex\">\r\n                                        <div className=\"profile-img-container\">\r\n                                            <img src={`${SERVER_URL}${profile.photo}`}\r\n                                                className=\"profile-img-med\"\r\n                                                style={{ marginRight: '10px' }}\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"d-flex flex-column w-100\">\r\n                                            <div className=\"profile-row-top\">\r\n                                                <div className=\"main-profile-data\">\r\n                                                    <strong style={{ textAlign: 'start' }}>\r\n                                                        {profile.first_name} {profile.last_name}\r\n                                                    </strong>\r\n                                                    <p className=\"text-secondary\">@{profile.user.username}</p>\r\n                                                </div>\r\n                                                <button className=\"btn btn-secondary\" data-pk={profile.id} onClick={handleRelationshipUpdate}>\r\n                                                    Solicitar\r\n                                                </button>\r\n                                            </div>\r\n                                            <div className=\"profile-row-bottom\">\r\n                                                {profile.bio}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </li>\r\n                            )\r\n                        })\r\n                        }\r\n                    </div> :\r\n                    <div className=\"profiles-loader-container\">\r\n                        <div className=\"loader\" />\r\n                    </div>\r\n                }\r\n            </div>\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}