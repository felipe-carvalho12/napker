{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Picker from'emoji-picker-react';import{openCloseEmojiList}from'../../../../../config/utils';export default function SendMessageForm(props){var WebSocketInstance=props.WebSocketInstance;var chatId=props.chatId;var username=props.username;var otherProfile=props.otherProfile;var myProfile=props.myProfile;var updateMessagesComponent=props.updateMessagesComponent;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var messageChangeHandler=function messageChangeHandler(e){setMessage(e.target.value);var el=document.querySelector('#chat-message-submit');el.disabled=e.target.value.trim()==='';};var onEmojiSelect=function onEmojiSelect(event,emojiObject){setMessage(message+emojiObject.emoji);document.querySelector('#chat-message-submit').disabled=false;};var sendMessageHandler=function sendMessageHandler(e){e.preventDefault();var messageObject={from:username,content:message,chatId:chatId};setMessage('');if(otherProfile.blocked_users.map(function(u){return u.id;}).includes(myProfile.user.id)){window.alert(\"Voc\\xEA n\\xE3o pode enviar mensagens para \".concat(otherProfile.first_name,\".\\n            \").concat(otherProfile.first_name,\" te bloqueou.\"));return;}if(myProfile.blocked_users.map(function(u){return u.id;}).includes(otherProfile.user.id)){window.alert(\"Voc\\xEA n\\xE3o pode enviar mensagens para \".concat(otherProfile.first_name,\".\\n            Voc\\xEA bloqueou \").concat(otherProfile.first_name,\".\"));return;}WebSocketInstance.newChatMessage(messageObject);document.querySelector('#chat-message-submit').disabled=true;openCloseEmojiList(true);updateMessagesComponent();};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"emoji-list-container chat-emoji-list\",id:\"emoji-list-container\"},/*#__PURE__*/React.createElement(Picker,{onEmojiClick:onEmojiSelect})),/*#__PURE__*/React.createElement(\"form\",{className:\"send-message-container\",onSubmit:sendMessageHandler},/*#__PURE__*/React.createElement(\"label\",{className:\"far fa-smile\",id:\"emoji-button\",onClick:function onClick(){return openCloseEmojiList(false);}}),/*#__PURE__*/React.createElement(\"input\",{placeholder:\"Mensagem\",className:\"message-input\",id:\"chat-message-input\",value:message,autoFocus:document.querySelector('#contact-filter-input').value==='',onChange:messageChangeHandler}),console.log(document.querySelector('#chat-message-input').autofocus),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary chat-message-submit\",id:\"chat-message-submit\",disabled:true},/*#__PURE__*/React.createElement(\"i\",{class:\"fas fa-chevron-right\"}))));}","map":{"version":3,"sources":["C:/Users/felip/CodeProjects/Web/Napker/frontend/src/pages/messages_/components/chat_/components/SendMessageForm.js"],"names":["React","useState","Picker","openCloseEmojiList","SendMessageForm","props","WebSocketInstance","chatId","username","otherProfile","myProfile","updateMessagesComponent","message","setMessage","messageChangeHandler","e","target","value","el","document","querySelector","disabled","trim","onEmojiSelect","event","emojiObject","emoji","sendMessageHandler","preventDefault","messageObject","from","content","blocked_users","map","u","id","includes","user","window","alert","first_name","newChatMessage","console","log","autofocus"],"mappings":"iLAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,MAAP,KAAmB,oBAAnB,CAEA,OAASC,kBAAT,KAAmC,6BAAnC,CAEA,cAAe,SAASC,CAAAA,eAAT,CAAyBC,KAAzB,CAAgC,CAC3C,GAAMC,CAAAA,iBAAiB,CAAGD,KAAK,CAACC,iBAAhC,CACA,GAAMC,CAAAA,MAAM,CAAGF,KAAK,CAACE,MAArB,CACA,GAAMC,CAAAA,QAAQ,CAAGH,KAAK,CAACG,QAAvB,CACA,GAAMC,CAAAA,YAAY,CAAGJ,KAAK,CAACI,YAA3B,CACA,GAAMC,CAAAA,SAAS,CAAGL,KAAK,CAACK,SAAxB,CACA,GAAMC,CAAAA,uBAAuB,CAAGN,KAAK,CAACM,uBAAtC,CAN2C,cAQbV,QAAQ,CAAC,EAAD,CARK,wCAQpCW,OARoC,eAQ3BC,UAR2B,eAU3C,GAAMC,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAAAC,CAAC,CAAI,CAC9BF,UAAU,CAACE,CAAC,CAACC,MAAF,CAASC,KAAV,CAAV,CACA,GAAMC,CAAAA,EAAE,CAAGC,QAAQ,CAACC,aAAT,CAAuB,sBAAvB,CAAX,CACAF,EAAE,CAACG,QAAH,CAAcN,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeK,IAAf,KAA0B,EAAxC,CACH,CAJD,CAMA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,CAAQC,WAAR,CAAwB,CAC1CZ,UAAU,CAACD,OAAO,CAAGa,WAAW,CAACC,KAAvB,CAAV,CACAP,QAAQ,CAACC,aAAT,CAAuB,sBAAvB,EAA+CC,QAA/C,CAA0D,KAA1D,CACH,CAHD,CAKA,GAAMM,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAZ,CAAC,CAAI,CAC5BA,CAAC,CAACa,cAAF,GACA,GAAMC,CAAAA,aAAa,CAAG,CAClBC,IAAI,CAAEtB,QADY,CAElBuB,OAAO,CAAEnB,OAFS,CAGlBL,MAAM,CAAEA,MAHU,CAAtB,CAKAM,UAAU,CAAC,EAAD,CAAV,CACA,GAAIJ,YAAY,CAACuB,aAAb,CAA2BC,GAA3B,CAA+B,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,EAAN,EAAhC,EAA0CC,QAA1C,CAAmD1B,SAAS,CAAC2B,IAAV,CAAeF,EAAlE,CAAJ,CAA2E,CACvEG,MAAM,CAACC,KAAP,qDAAoD9B,YAAY,CAAC+B,UAAjE,2BACE/B,YAAY,CAAC+B,UADf,mBAEA,OACH,CACD,GAAI9B,SAAS,CAACsB,aAAV,CAAwBC,GAAxB,CAA4B,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,EAAN,EAA7B,EAAuCC,QAAvC,CAAgD3B,YAAY,CAAC4B,IAAb,CAAkBF,EAAlE,CAAJ,CAA2E,CACvEG,MAAM,CAACC,KAAP,qDAAoD9B,YAAY,CAAC+B,UAAjE,4CACgB/B,YAAY,CAAC+B,UAD7B,OAEA,OACH,CACDlC,iBAAiB,CAACmC,cAAlB,CAAiCZ,aAAjC,EACAV,QAAQ,CAACC,aAAT,CAAuB,sBAAvB,EAA+CC,QAA/C,CAA0D,IAA1D,CACAlB,kBAAkB,CAAC,IAAD,CAAlB,CACAQ,uBAAuB,GAC1B,CAtBD,CAwBA,mBACI,qDACI,2BAAK,SAAS,CAAC,sCAAf,CAAsD,EAAE,CAAC,sBAAzD,eACI,oBAAC,MAAD,EAAQ,YAAY,CAAEY,aAAtB,EADJ,CADJ,cAII,4BAAM,SAAS,CAAC,wBAAhB,CAAyC,QAAQ,CAAEI,kBAAnD,eACI,6BACI,SAAS,CAAC,cADd,CAEI,EAAE,CAAC,cAFP,CAGI,OAAO,CAAE,yBAAMxB,CAAAA,kBAAkB,CAAC,KAAD,CAAxB,EAHb,EADJ,cAMI,6BACI,WAAW,CAAC,UADhB,CAEI,SAAS,CAAC,eAFd,CAGI,EAAE,CAAC,oBAHP,CAII,KAAK,CAAES,OAJX,CAKI,SAAS,CAAEO,QAAQ,CAACC,aAAT,CAAuB,uBAAvB,EAAgDH,KAAhD,GAA0D,EALzE,CAMI,QAAQ,CAAEH,oBANd,EANJ,CAcK4B,OAAO,CAACC,GAAR,CAAYxB,QAAQ,CAACC,aAAT,CAAuB,qBAAvB,EAA8CwB,SAA1D,CAdL,cAeI,8BACI,SAAS,CAAC,qCADd,CAEI,EAAE,CAAC,qBAFP,CAGI,QAAQ,KAHZ,eAKI,yBAAG,KAAK,CAAC,sBAAT,EALJ,CAfJ,CAJJ,CADJ,CA8BH","sourcesContent":["import React, { useState } from 'react'\r\nimport Picker from 'emoji-picker-react'\r\n\r\nimport { openCloseEmojiList } from '../../../../../config/utils'\r\n\r\nexport default function SendMessageForm(props) {\r\n    const WebSocketInstance = props.WebSocketInstance\r\n    const chatId = props.chatId\r\n    const username = props.username\r\n    const otherProfile = props.otherProfile\r\n    const myProfile = props.myProfile\r\n    const updateMessagesComponent = props.updateMessagesComponent\r\n\r\n    const [message, setMessage] = useState('')\r\n\r\n    const messageChangeHandler = e => {\r\n        setMessage(e.target.value)\r\n        const el = document.querySelector('#chat-message-submit')\r\n        el.disabled = e.target.value.trim() === ''\r\n    }\r\n\r\n    const onEmojiSelect = (event, emojiObject) => {\r\n        setMessage(message + emojiObject.emoji)\r\n        document.querySelector('#chat-message-submit').disabled = false\r\n    }\r\n\r\n    const sendMessageHandler = e => {\r\n        e.preventDefault()\r\n        const messageObject = {\r\n            from: username,\r\n            content: message,\r\n            chatId: chatId\r\n        };\r\n        setMessage('')\r\n        if (otherProfile.blocked_users.map(u => u.id).includes(myProfile.user.id)) {\r\n            window.alert(`Você não pode enviar mensagens para ${otherProfile.first_name}.\r\n            ${otherProfile.first_name} te bloqueou.`)\r\n            return\r\n        }\r\n        if (myProfile.blocked_users.map(u => u.id).includes(otherProfile.user.id)) {\r\n            window.alert(`Você não pode enviar mensagens para ${otherProfile.first_name}.\r\n            Você bloqueou ${otherProfile.first_name}.`)\r\n            return\r\n        }\r\n        WebSocketInstance.newChatMessage(messageObject)\r\n        document.querySelector('#chat-message-submit').disabled = true\r\n        openCloseEmojiList(true)\r\n        updateMessagesComponent()\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"emoji-list-container chat-emoji-list\" id=\"emoji-list-container\">\r\n                <Picker onEmojiClick={onEmojiSelect} />\r\n            </div>\r\n            <form className=\"send-message-container\" onSubmit={sendMessageHandler}>\r\n                <label\r\n                    className=\"far fa-smile\"\r\n                    id=\"emoji-button\"\r\n                    onClick={() => openCloseEmojiList(false)}\r\n                />\r\n                <input\r\n                    placeholder=\"Mensagem\"\r\n                    className=\"message-input\"\r\n                    id=\"chat-message-input\"\r\n                    value={message}\r\n                    autoFocus={document.querySelector('#contact-filter-input').value === ''}\r\n                    onChange={messageChangeHandler}\r\n                />\r\n                {console.log(document.querySelector('#chat-message-input').autofocus)}\r\n                <button\r\n                    className=\"btn btn-primary chat-message-submit\"\r\n                    id=\"chat-message-submit\"\r\n                    disabled\r\n                >\r\n                    <i class=\"fas fa-chevron-right\" />\r\n                </button>\r\n            </form>\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}