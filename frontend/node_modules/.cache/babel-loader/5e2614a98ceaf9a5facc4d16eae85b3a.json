{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Django\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{csrftoken}from'../../utils';import{SERVER_URL}from'../../settings';export default function DeleteAccount(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),displayErrorMessage=_useState2[0],setDisplayErrorMessage=_useState2[1];var deleteAccount=function deleteAccount(){if(window.confirm('Tem certeza que deseja deletar a sua conta ?\\nEsta ação é irreversível?')){var password=document.querySelector('#password').value;if(!password){window.alert('A senha não pode ficar em branco!');}else{fetch(\"\".concat(SERVER_URL,\"/delete-account\"),{method:'POST',headers:{'Content-type':'application/json','X-CSRFToken':csrftoken},body:JSON.stringify({password:password})}).then(function(response){return response.json();}).then(function(data){if(data==='Wrong password'){setDisplayErrorMessage(true);}else{window.alert('Conta deletada com sucesso.');window.location.href=SERVER_URL;}});}}};return/*#__PURE__*/React.createElement(\"div\",{className:\"settings-description-container\"},displayErrorMessage&&/*#__PURE__*/React.createElement(\"div\",{className:\"alert\"},/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\",role:\"alert\"},\"Senha incorreta!\")),/*#__PURE__*/React.createElement(\"div\",{className:\"delete-account-title-container\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Deletar conta\")),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"delete-account-confirmation\"},/*#__PURE__*/React.createElement(\"input\",{id:\"password\",type:\"password\",placeholder:\"Senha\",autoFocus:true}),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"br\",null),\"Tem certeza que deseja apagar a sua conta ?\",/*#__PURE__*/React.createElement(\"br\",null),\"Esta a\\xE7\\xE3o \\xE9 irrevers\\xEDvel\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger\",onClick:deleteAccount},\"Deletar conta\")));}","map":{"version":3,"sources":["C:/Users/felip/CodeProjects/Django/Napker/frontend/src/pages/settings_page/deleteAccount.js"],"names":["React","useState","csrftoken","SERVER_URL","DeleteAccount","displayErrorMessage","setDisplayErrorMessage","deleteAccount","window","confirm","password","document","querySelector","value","alert","fetch","method","headers","body","JSON","stringify","then","response","json","data","location","href"],"mappings":"oLAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CAEA,OAASC,SAAT,KAA0B,aAA1B,CACA,OAASC,UAAT,KAA2B,gBAA3B,CAEA,cAAe,SAASC,CAAAA,aAAT,EAAyB,eACkBH,QAAQ,CAAC,IAAD,CAD1B,wCAC7BI,mBAD6B,eACRC,sBADQ,eAGpC,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CACxB,GAAIC,MAAM,CAACC,OAAP,CAAe,yEAAf,CAAJ,CAA+F,CAC3F,GAAMC,CAAAA,QAAQ,CAAGC,QAAQ,CAACC,aAAT,CAAuB,WAAvB,EAAoCC,KAArD,CACA,GAAI,CAACH,QAAL,CAAe,CACXF,MAAM,CAACM,KAAP,CAAa,mCAAb,EACH,CAFD,IAEO,CACHC,KAAK,WAAIZ,UAAJ,oBAAiC,CAClCa,MAAM,CAAE,MAD0B,CAElCC,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,cAAef,SAFV,CAFyB,CAMlCgB,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBV,QAAQ,CAAEA,QADO,CAAf,CAN4B,CAAjC,CAAL,CAUKW,IAVL,CAUU,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EAVlB,EAWKF,IAXL,CAWU,SAAAG,IAAI,CAAI,CACV,GAAIA,IAAI,GAAK,gBAAb,CAA+B,CAC3BlB,sBAAsB,CAAC,IAAD,CAAtB,CACH,CAFD,IAEO,CACHE,MAAM,CAACM,KAAP,CAAa,6BAAb,EACAN,MAAM,CAACiB,QAAP,CAAgBC,IAAhB,CAAuBvB,UAAvB,CACH,CACJ,CAlBL,EAmBH,CACJ,CACJ,CA3BD,CA6BA,mBACI,2BAAK,SAAS,CAAC,gCAAf,EACKE,mBAAmB,eAChB,2BAAK,SAAS,CAAC,OAAf,eACI,2BAAK,SAAS,CAAC,oBAAf,CAAoC,IAAI,CAAC,OAAzC,qBADJ,CAFR,cAMI,2BAAK,SAAS,CAAC,gCAAf,eACI,8CADJ,CANJ,cASI,8BATJ,cAUI,2BAAK,SAAS,CAAC,6BAAf,eACI,6BAAO,EAAE,CAAC,UAAV,CAAqB,IAAI,CAAC,UAA1B,CAAqC,WAAW,CAAC,OAAjD,CAAyD,SAAS,KAAlE,EADJ,cAEI,8BAFJ,cAGI,8BAHJ,4DAKI,8BALJ,qDAOI,8BAPJ,cAQI,8BACI,SAAS,CAAC,gBADd,CAEI,OAAO,CAAEE,aAFb,kBARJ,CAVJ,CADJ,CA0BH","sourcesContent":["import React, { useState } from 'react'\r\n\r\nimport { csrftoken } from '../../utils'\r\nimport { SERVER_URL } from '../../settings'\r\n\r\nexport default function DeleteAccount() {\r\n    const [displayErrorMessage, setDisplayErrorMessage] = useState(null)\r\n\r\n    const deleteAccount = () => {\r\n        if (window.confirm('Tem certeza que deseja deletar a sua conta ?\\nEsta ação é irreversível?')) {\r\n            const password = document.querySelector('#password').value\r\n            if (!password) {\r\n                window.alert('A senha não pode ficar em branco!')\r\n            } else {\r\n                fetch(`${SERVER_URL}/delete-account`, {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-type': 'application/json',\r\n                        'X-CSRFToken': csrftoken,\r\n                    },\r\n                    body: JSON.stringify({\r\n                        password: password\r\n                    })\r\n                })\r\n                    .then(response => response.json())\r\n                    .then(data => {\r\n                        if (data === 'Wrong password') {\r\n                            setDisplayErrorMessage(true)\r\n                        } else {\r\n                            window.alert('Conta deletada com sucesso.')\r\n                            window.location.href = SERVER_URL\r\n                        }\r\n                    })\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"settings-description-container\">\r\n            {displayErrorMessage &&\r\n                <div className=\"alert\">\r\n                    <div className=\"alert alert-danger\" role=\"alert\">Senha incorreta!</div>\r\n                </div>\r\n            }\r\n            <div className=\"delete-account-title-container\">\r\n                <h3>Deletar conta</h3>\r\n            </div>\r\n            <hr />\r\n            <div className=\"delete-account-confirmation\">\r\n                <input id=\"password\" type=\"password\" placeholder=\"Senha\" autoFocus />\r\n                <hr />\r\n                <br />\r\n                Tem certeza que deseja apagar a sua conta ?\r\n                <br />\r\n                Esta ação é irreversível\r\n                <br />\r\n                <button\r\n                    className=\"btn btn-danger\"\r\n                    onClick={deleteAccount}\r\n                >Deletar conta</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}