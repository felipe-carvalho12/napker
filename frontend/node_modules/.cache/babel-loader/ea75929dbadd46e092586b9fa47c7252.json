{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Carlos\\\\napker\\\\frontend\\\\src\\\\pages\\\\home\\\\components\\\\posts_\\\\Posts.js\";\nimport React from 'react';\nimport { SERVER_URL } from '../../../../config/settings';\nimport LikesModal from '../../../../components/likesmodal';\nimport PostForm from './components/PostForm';\nimport PostListItem from '../../../../components/PostListItem';\nexport default class Posts extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchPosts = () => {\n      fetch(`${SERVER_URL}/post-api/post-list/${this.scrollCount}`).then(response => response.json()).then(data => this.setState({\n        posts: data\n      }));\n    };\n\n    this.state = {\n      myProfile: null,\n      posts: null,\n      likesModal: {\n        isOpen: false,\n        likes: null\n      },\n      postContent: '',\n      postFormImagePreview: null\n    };\n    this.scrollCount = 1;\n\n    window.onscroll = () => {\n      if (window.innerHeight + window.scrollY >= document.body.offsetHeight) {\n        this.scrollCount++;\n        this.fetchPosts();\n      }\n    };\n  }\n\n  componentWillMount() {\n    fetch(`${SERVER_URL}/profile-api/myprofile`).then(response => response.json()).then(data => this.setState({\n      myProfile: data\n    }));\n    this.fetchPosts();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(LikesModal, {\n      isOpen: this.state.likesModal.isOpen,\n      likes: this.state.likesModal.likes,\n      hideModal: () => this.setState({\n        likesModal: {\n          isOpen: false,\n          likes: null\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }\n    }), this.state.myProfile && /*#__PURE__*/React.createElement(PostForm, {\n      myProfile: this.state.myProfile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"post-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }\n    }, this.state.posts && this.state.myProfile && this.state.posts.map(post => {\n      return /*#__PURE__*/React.createElement(PostListItem, {\n        post: post,\n        myProfile: this.state.myProfile,\n        renderParent: this.fetchPosts,\n        openLikesModal: likes => this.setState({\n          likesModal: {\n            isOpen: true,\n            likes: likes\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 33\n        }\n      });\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"posts-loader-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 25\n      }\n    }))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Carlos/napker/frontend/src/pages/home/components/posts_/Posts.js"],"names":["React","SERVER_URL","LikesModal","PostForm","PostListItem","Posts","Component","constructor","props","fetchPosts","fetch","scrollCount","then","response","json","data","setState","posts","state","myProfile","likesModal","isOpen","likes","postContent","postFormImagePreview","window","onscroll","innerHeight","scrollY","document","body","offsetHeight","componentWillMount","render","map","post"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,UAAT,QAA2B,6BAA3B;AACA,OAAOC,UAAP,MAAuB,mCAAvB;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,YAAP,MAAyB,qCAAzB;AAEA,eAAe,MAAMC,KAAN,SAAoBL,KAAK,CAACM,SAA1B,CAAoC;AAC/CC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SA6BnBC,UA7BmB,GA6BN,MAAM;AACfC,MAAAA,KAAK,CAAE,GAAET,UAAW,uBAAsB,KAAKU,WAAY,EAAtD,CAAL,CACKC,IADL,CACUC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADtB,EAEKF,IAFL,CAEUG,IAAI,IAAI,KAAKC,QAAL,CAAc;AAAEC,QAAAA,KAAK,EAAEF;AAAT,OAAd,CAFlB;AAGH,KAjCkB;;AAEf,SAAKG,KAAL,GAAa;AACTC,MAAAA,SAAS,EAAE,IADF;AAETF,MAAAA,KAAK,EAAE,IAFE;AAGTG,MAAAA,UAAU,EAAE;AACRC,QAAAA,MAAM,EAAE,KADA;AAERC,QAAAA,KAAK,EAAE;AAFC,OAHH;AAOTC,MAAAA,WAAW,EAAE,EAPJ;AAQTC,MAAAA,oBAAoB,EAAE;AARb,KAAb;AAUA,SAAKb,WAAL,GAAmB,CAAnB;;AAEAc,IAAAA,MAAM,CAACC,QAAP,GAAkB,MAAM;AACpB,UAAID,MAAM,CAACE,WAAP,GAAqBF,MAAM,CAACG,OAA5B,IAAuCC,QAAQ,CAACC,IAAT,CAAcC,YAAzD,EAAuE;AACnE,aAAKpB,WAAL;AACA,aAAKF,UAAL;AACH;AACJ,KALD;AAMH;;AAEDuB,EAAAA,kBAAkB,GAAG;AACjBtB,IAAAA,KAAK,CAAE,GAAET,UAAW,wBAAf,CAAL,CACKW,IADL,CACUC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADtB,EAEKF,IAFL,CAEUG,IAAI,IAAI,KAAKC,QAAL,CAAc;AAAEG,MAAAA,SAAS,EAAEJ;AAAb,KAAd,CAFlB;AAGA,SAAKN,UAAL;AACH;;AASDwB,EAAAA,MAAM,GAAG;AACL,wBACI,uDACI,oBAAC,UAAD;AACI,MAAA,MAAM,EAAE,KAAKf,KAAL,CAAWE,UAAX,CAAsBC,MADlC;AAEI,MAAA,KAAK,EAAE,KAAKH,KAAL,CAAWE,UAAX,CAAsBE,KAFjC;AAGI,MAAA,SAAS,EAAE,MAAM,KAAKN,QAAL,CAAc;AAAEI,QAAAA,UAAU,EAAE;AAAEC,UAAAA,MAAM,EAAE,KAAV;AAAiBC,UAAAA,KAAK,EAAE;AAAxB;AAAd,OAAd,CAHrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAMK,KAAKJ,KAAL,CAAWC,SAAX,iBACG,oBAAC,QAAD;AAAU,MAAA,SAAS,EAAE,KAAKD,KAAL,CAAWC,SAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPR,eASI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKD,KAAL,CAAWD,KAAX,IAAoB,KAAKC,KAAL,CAAWC,SAA/B,IACG,KAAKD,KAAL,CAAWD,KAAX,CAAiBiB,GAAjB,CAAqBC,IAAI,IAAI;AACzB,0BACI,oBAAC,YAAD;AACI,QAAA,IAAI,EAAEA,IADV;AAEI,QAAA,SAAS,EAAE,KAAKjB,KAAL,CAAWC,SAF1B;AAGI,QAAA,YAAY,EAAE,KAAKV,UAHvB;AAII,QAAA,cAAc,EAAEa,KAAK,IAAI,KAAKN,QAAL,CAAc;AAAEI,UAAAA,UAAU,EAAE;AAAEC,YAAAA,MAAM,EAAE,IAAV;AAAgBC,YAAAA,KAAK,EAAEA;AAAvB;AAAd,SAAd,CAJ7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAQH,KATD,CAFR,eAaI;AAAK,MAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAbJ,CATJ,CADJ;AA6BH;;AAnE8C","sourcesContent":["import React from 'react'\r\n\r\nimport { SERVER_URL } from '../../../../config/settings'\r\nimport LikesModal from '../../../../components/likesmodal'\r\nimport PostForm from './components/PostForm'\r\nimport PostListItem from '../../../../components/PostListItem'\r\n\r\nexport default class Posts extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            myProfile: null,\r\n            posts: null,\r\n            likesModal: {\r\n                isOpen: false,\r\n                likes: null\r\n            },\r\n            postContent: '',\r\n            postFormImagePreview: null\r\n        }\r\n        this.scrollCount = 1\r\n\r\n        window.onscroll = () => {\r\n            if (window.innerHeight + window.scrollY >= document.body.offsetHeight) {\r\n                this.scrollCount++\r\n                this.fetchPosts()\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillMount() {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => this.setState({ myProfile: data }))\r\n        this.fetchPosts()\r\n    }\r\n\r\n    fetchPosts = () => {\r\n        fetch(`${SERVER_URL}/post-api/post-list/${this.scrollCount}`)\r\n            .then(response => response.json())\r\n            .then(data => this.setState({ posts: data }))\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <LikesModal\r\n                    isOpen={this.state.likesModal.isOpen}\r\n                    likes={this.state.likesModal.likes}\r\n                    hideModal={() => this.setState({ likesModal: { isOpen: false, likes: null } })}\r\n                />\r\n                {this.state.myProfile &&\r\n                    <PostForm myProfile={this.state.myProfile} />\r\n                }\r\n                <div className=\"post-list\">\r\n                    {this.state.posts && this.state.myProfile &&\r\n                        this.state.posts.map(post => {\r\n                            return (\r\n                                <PostListItem\r\n                                    post={post}\r\n                                    myProfile={this.state.myProfile}\r\n                                    renderParent={this.fetchPosts}\r\n                                    openLikesModal={likes => this.setState({ likesModal: { isOpen: true, likes: likes } })}\r\n                                />\r\n                            )\r\n                        })\r\n                    }\r\n                    <div className=\"posts-loader-container\" >\r\n                        <div className=\"loader\" />\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}