{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\fabio\\\\CodeProjects\\\\Django\\\\napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import Croppie from\"croppie\";import Modal from'react-bootstrap/Modal';import{ProfileImageContext}from'../../../../../context/edit-profile/EditProfileContext';export default function CroppieModal(props){var _useContext=useContext(ProfileImageContext),_useContext2=_slicedToArray(_useContext,2),profileImage=_useContext2[0],setProfileImage=_useContext2[1];var _useState=useState(null),_useState2=_slicedToArray(_useState,2),croppedImage=_useState2[0],setCroppedImage=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isFileUploaded=_useState4[0],setIsFileUploaded=_useState4[1];var croppieOptions={enableOrientation:true,viewport:{width:300,height:300,type:\"square\"},boundary:{width:\"100%\",height:\"70vh\"}};var c;useEffect(function(){var croppieEl=document.getElementById(\"croppie\");c=new Croppie(croppieEl,croppieOptions);c.bind({url:profileImage});},[]);var onResult=function onResult(e){c.result(\"base64\").then(function(base64){setCroppedImage(base64,function(){return img.current.src=base64;});});};var onFileUpload=function onFileUpload(e){setIsFileUploaded(true,function(){var reader=new FileReader();var file=file.current.files[0];reader.readAsDataURL(file);reader.onload=function(){c.bind({url:reader.result});};reader.onerror=function(error){console.log(\"Error: \",error);};});};var file=React.createRef();var croppie=React.createRef();var img=React.createRef();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between align-items-center w-100\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center align-items-center\"},/*#__PURE__*/React.createElement(\"i\",{class:\"fas fa-arrow-left left-arrow-icon\",onClick:props.handleBackArrow}),/*#__PURE__*/React.createElement(Modal.Title,null,\"Editar perfil\")),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\"},\"Aplicar\"))),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"div\",{id:\"croppie\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"files\",ref:file,onChange:onFileUpload}),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",disabled:!isFileUploaded,onClick:onResult},\"Crop!\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"h2\",null,\" Result! \"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{ref:img,alt:\"cropped image\"}),/*#__PURE__*/React.createElement(\"a\",{hidden:!croppedImage,href:croppedImage,download:\"cropped.png\"},\"Download Cropped Image\"))));}","map":{"version":3,"sources":["C:/Users/fabio/CodeProjects/Django/napker/frontend/src/pages/profile/components/edit-profile/components/CroppieModal.js"],"names":["React","useContext","useEffect","useState","Croppie","Modal","ProfileImageContext","CroppieModal","props","profileImage","setProfileImage","croppedImage","setCroppedImage","isFileUploaded","setIsFileUploaded","croppieOptions","enableOrientation","viewport","width","height","type","boundary","c","croppieEl","document","getElementById","bind","url","onResult","e","result","then","base64","img","current","src","onFileUpload","reader","FileReader","file","files","readAsDataURL","onload","onerror","error","console","log","createRef","croppie","handleBackArrow"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport Croppie from \"croppie\"\r\nimport Modal from 'react-bootstrap/Modal'\r\n\r\nimport { ProfileImageContext } from '../../../../../context/edit-profile/EditProfileContext'\r\n\r\n\r\nexport default function CroppieModal(props) {\r\n    const [profileImage, setProfileImage] = useContext(ProfileImageContext)\r\n\r\n    const [croppedImage, setCroppedImage] = useState(null)\r\n    const [isFileUploaded, setIsFileUploaded] = useState(false)\r\n\r\n    const croppieOptions = {\r\n        enableOrientation: true,\r\n        viewport: {\r\n            width: 300,\r\n            height: 300,\r\n            type: \"square\"\r\n        },\r\n        boundary: {\r\n            width: \"100%\",\r\n            height: \"70vh\"\r\n        }\r\n    }\r\n\r\n    let c\r\n\r\n    useEffect(() => {\r\n        const croppieEl = document.getElementById(\"croppie\")\r\n        c = new Croppie(croppieEl, croppieOptions)\r\n        c.bind({ url: profileImage })\r\n    }, [])\r\n\r\n    const onResult = e => {\r\n        c.result(\"base64\").then(base64 => {\r\n            setCroppedImage(\r\n                base64,\r\n                () => (img.current.src = base64)\r\n            );\r\n        });\r\n    };\r\n\r\n    const onFileUpload = e => {\r\n        setIsFileUploaded(true, () => {\r\n            const reader = new FileReader();\r\n            const file = file.current.files[0];\r\n            reader.readAsDataURL(file);\r\n            reader.onload = () => {\r\n                c.bind({ url: reader.result });\r\n            };\r\n            reader.onerror = function (error) {\r\n                console.log(\"Error: \", error);\r\n            };\r\n        });\r\n    };\r\n\r\n    const file = React.createRef();\r\n    const croppie = React.createRef();\r\n    const img = React.createRef();\r\n\r\n    return (\r\n        <>\r\n            <Modal.Header closeButton>\r\n                <div className=\"d-flex justify-content-between align-items-center w-100\">\r\n                    <div className=\"d-flex justify-content-center align-items-center\">\r\n                        <i class=\"fas fa-arrow-left left-arrow-icon\" onClick={props.handleBackArrow} />\r\n                        <Modal.Title>Editar perfil</Modal.Title>\r\n                    </div>\r\n                    <button className=\"btn btn-primary\">\r\n                        Aplicar\r\n                    </button>\r\n                </div>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <div id=\"croppie\" />\r\n                <input\r\n                    type=\"file\"\r\n                    id=\"files\"\r\n                    ref={file}\r\n                    onChange={onFileUpload}\r\n                />\r\n                <hr />\r\n                <button\r\n                    type=\"button\"\r\n                    disabled={!isFileUploaded}\r\n                    onClick={onResult}\r\n                >\r\n                    Crop!\r\n                </button>\r\n                <hr />\r\n                <h2> Result! </h2>\r\n                <div>\r\n                    <img ref={img} alt=\"cropped image\" />\r\n                    <a hidden={!croppedImage} href={croppedImage} download=\"cropped.png\">\r\n                        Download Cropped Image\r\n                    </a>\r\n                </div>\r\n            </Modal.Body>\r\n        </>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}