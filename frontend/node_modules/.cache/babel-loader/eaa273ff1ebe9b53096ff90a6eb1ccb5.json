{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\fabio\\\\CodeProjects\\\\Django\\\\napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect}from'react';import Modal from'react-bootstrap/Modal';import Picker from'emoji-picker-react';import{SERVER_URL}from'../../../../../config/settings';import{csrftoken,openCloseEmojiList}from'../../../../../config/utils';import{ProfileImageContext}from'../../../../../context/edit-profile/EditProfileContext';export default function EditProfileModal(props){var profile=props.profile;var _useContext=useContext(ProfileImageContext),_useContext2=_slicedToArray(_useContext,2),profileImage=_useContext2[0],setProfileImage=_useContext2[1];var _useState=useState(''),_useState2=_slicedToArray(_useState,2),editingBioContent=_useState2[0],setEditingBioContent=_useState2[1];useEffect(function(){var imageInput=document.querySelector('#profile-photo');if(imageInput&&!imageInput.files.length){imageInput.files.push(profileImage);}},[]);var handleUsernameChange=function handleUsernameChange(e){if(e.target.value.trim()!==''){fetch(\"\".concat(SERVER_URL,\"/profile-api/user/\").concat(e.target.value)).then(function(response){return response.json();}).then(function(data){if(data.bool!=='false'&&data.id!==profile.id){document.querySelector('#username-taken').style.display='initial';}else{document.querySelector('#username-taken').style.display='none';}});}};var onEmojiSelect=function onEmojiSelect(event,emojiObject){setEditingBioContent(editingBioContent+emojiObject.emoji);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(Modal.Title,null,\"Editar perfil\")),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"form\",{action:\"\".concat(SERVER_URL,\"/update-profile\"),className:\"d-flex flex-column justify-content-center\",id:\"update-profile-form\",method:\"POST\",encType:\"multipart/form-data\"},/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",name:\"csrfmiddlewaretoken\",value:csrftoken}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-column justify-content-center align-items-center mb-2\"},/*#__PURE__*/React.createElement(\"img\",{src:profileImage?profileImage:\"\".concat(SERVER_URL).concat(profile.photo),className:\"profile-img-big\",style:{marginBottom:'25px'}}),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",accept:\"image/png, image/jpg, image/jpeg\",className:\"profile-photo-input\",name:\"profile-photo\",id:\"profile-photo\",onChange:props.handleProfileImageChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},\"Email: \",profile.email),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"edit-profile-input\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"first-name\",className:\"profile-field-label\"},\"Nome:\"),/*#__PURE__*/React.createElement(\"input\",{className:\"profile-field-input\",type:\"text\",name:\"first-name\",id:\"first-name\",placeholder:profile.first_name})),/*#__PURE__*/React.createElement(\"div\",{className:\"edit-profile-input\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"last-name\",className:\"profile-field-label\"},\"Sobrenome:\"),/*#__PURE__*/React.createElement(\"input\",{className:\"profile-field-input\",type:\"text\",name:\"last-name\",id:\"last-name\",placeholder:profile.last_name})),/*#__PURE__*/React.createElement(\"div\",{className:\"edit-profile-input\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"username\",className:\"profile-field-label\"},\"Nome de usu\\xE1rio:\"),/*#__PURE__*/React.createElement(\"input\",{className:\"profile-field-input\",type:\"text\",name:\"username\",id:\"username\",placeholder:\"@\".concat(profile.user.username),onChange:handleUsernameChange})),/*#__PURE__*/React.createElement(\"div\",{id:\"username-taken\",style:{display:'none',width:'100%',textAlign:'center',padding:'3px'}},/*#__PURE__*/React.createElement(\"span\",null,\"Nome de usu\\xE1rio j\\xE1 existe\")),/*#__PURE__*/React.createElement(\"div\",{className:\"edit-profile-input\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"birth-date\",className:\"profile-field-label\"},\"Data de nascimento:\"),/*#__PURE__*/React.createElement(\"input\",{className:\"profile-field-input\",type:\"date\",name:\"birth-date\",id:\"birth-date\",defaultValue:profile.birth_date})),/*#__PURE__*/React.createElement(\"div\",{className:\"emoji-list-container bio-emoji-list\",id:\"emoji-list-container\"},/*#__PURE__*/React.createElement(Picker,{onEmojiClick:onEmojiSelect})),/*#__PURE__*/React.createElement(\"div\",{className:\"edit-profile-input\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"bio\",className:\"profile-field-label\"},\"Bio:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"email-input-container\"},/*#__PURE__*/React.createElement(\"input\",{className:\"profile-field-input-email\",type:\"email\",name:\"bio\",id:\"bio\",value:editingBioContent,placeholder:profile.bio,maxLength:100,onChange:function onChange(e){return setEditingBioContent(e.target.value);}}),/*#__PURE__*/React.createElement(\"label\",{className:\"far fa-smile\",id:\"emoji-button\",onClick:function onClick(){return openCloseEmojiList(false);}}))))),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-grey\",onClick:props.closeModal},\"Fechar\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return document.querySelector('form#update-profile-form').submit();}},\"Salvar\")));}","map":{"version":3,"sources":["C:/Users/fabio/CodeProjects/Django/napker/frontend/src/pages/profile/components/edit-profile/components/EditProfileModal.js"],"names":["React","useState","useContext","useEffect","Modal","Picker","SERVER_URL","csrftoken","openCloseEmojiList","ProfileImageContext","EditProfileModal","props","profile","profileImage","setProfileImage","editingBioContent","setEditingBioContent","imageInput","document","querySelector","files","length","push","handleUsernameChange","e","target","value","trim","fetch","then","response","json","data","bool","id","style","display","onEmojiSelect","event","emojiObject","emoji","photo","marginBottom","handleProfileImageChange","email","first_name","last_name","user","username","width","textAlign","padding","birth_date","bio","closeModal","submit"],"mappings":"oLAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,CAAsCC,SAAtC,KAAuD,OAAvD,CACA,MAAOC,CAAAA,KAAP,KAAkB,uBAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,oBAAnB,CAEA,OAASC,UAAT,KAA2B,gCAA3B,CACA,OAASC,SAAT,CAAoBC,kBAApB,KAA8C,6BAA9C,CACA,OAASC,mBAAT,KAAoC,wDAApC,CAGA,cAAe,SAASC,CAAAA,gBAAT,CAA0BC,KAA1B,CAAiC,CAC5C,GAAMC,CAAAA,OAAO,CAAGD,KAAK,CAACC,OAAtB,CAD4C,gBAEJV,UAAU,CAACO,mBAAD,CAFN,4CAErCI,YAFqC,iBAEvBC,eAFuB,+BAGMb,QAAQ,CAAC,EAAD,CAHd,wCAGrCc,iBAHqC,eAGlBC,oBAHkB,eAK5Cb,SAAS,CAAC,UAAM,CACZ,GAAMc,CAAAA,UAAU,CAAGC,QAAQ,CAACC,aAAT,CAAuB,gBAAvB,CAAnB,CACA,GAAIF,UAAU,EAAI,CAACA,UAAU,CAACG,KAAX,CAAiBC,MAApC,CAA4C,CACxCJ,UAAU,CAACG,KAAX,CAAiBE,IAAjB,CAAsBT,YAAtB,EACH,CACJ,CALQ,CAKN,EALM,CAAT,CAOA,GAAMU,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAAAC,CAAC,CAAI,CAC9B,GAAIA,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeC,IAAf,KAA0B,EAA9B,CAAkC,CAC9BC,KAAK,WAAItB,UAAJ,8BAAmCkB,CAAC,CAACC,MAAF,CAASC,KAA5C,EAAL,CACKG,IADL,CACU,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACC,IAAT,EAAJ,EADlB,EAEKF,IAFL,CAEU,SAAAG,IAAI,CAAI,CACV,GAAIA,IAAI,CAACC,IAAL,GAAc,OAAd,EAAyBD,IAAI,CAACE,EAAL,GAAYtB,OAAO,CAACsB,EAAjD,CAAqD,CACjDhB,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,EAA0CgB,KAA1C,CAAgDC,OAAhD,CAA0D,SAA1D,CACH,CAFD,IAEO,CACHlB,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,EAA0CgB,KAA1C,CAAgDC,OAAhD,CAA0D,MAA1D,CACH,CACJ,CARL,EASH,CACJ,CAZD,CAcA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,CAAQC,WAAR,CAAwB,CAC1CvB,oBAAoB,CAACD,iBAAiB,CAAGwB,WAAW,CAACC,KAAjC,CAApB,CACH,CAFD,CAIA,mBACI,qDACI,oBAAC,KAAD,CAAO,MAAP,EAAc,WAAW,KAAzB,eACI,oBAAC,KAAD,CAAO,KAAP,sBADJ,CADJ,cAII,oBAAC,KAAD,CAAO,IAAP,mBACI,4BACI,MAAM,WAAKlC,UAAL,mBADV,CAEI,SAAS,CAAC,2CAFd,CAGI,EAAE,CAAC,qBAHP,CAII,MAAM,CAAC,MAJX,CAKI,OAAO,CAAC,qBALZ,eAOI,6BAAO,IAAI,CAAC,QAAZ,CAAqB,IAAI,CAAC,qBAA1B,CAAgD,KAAK,CAAEC,SAAvD,EAPJ,cAQI,2BAAK,SAAS,CAAC,mEAAf,eACI,2BAAK,GAAG,CAAEM,YAAY,CAAGA,YAAH,WAAqBP,UAArB,SAAkCM,OAAO,CAAC6B,KAA1C,CAAtB,CACI,SAAS,CAAC,iBADd,CAEI,KAAK,CAAE,CAAEC,YAAY,CAAE,MAAhB,CAFX,EADJ,cAKI,6BACI,IAAI,CAAC,MADT,CAEI,MAAM,CAAC,kCAFX,CAGI,SAAS,CAAC,qBAHd,CAII,IAAI,CAAC,eAJT,CAKI,EAAE,CAAC,eALP,CAMI,QAAQ,CAAE/B,KAAK,CAACgC,wBANpB,EALJ,CARJ,cAsBI,2BAAK,SAAS,CAAC,+BAAf,YACY/B,OAAO,CAACgC,KADpB,CAtBJ,cAyBI,8BAzBJ,cA0BI,2BAAK,SAAS,CAAC,oBAAf,eACI,6BAAO,OAAO,CAAC,YAAf,CAA4B,SAAS,CAAC,qBAAtC,UADJ,cAEI,6BAAO,SAAS,CAAC,qBAAjB,CAAuC,IAAI,CAAC,MAA5C,CAAmD,IAAI,CAAC,YAAxD,CAAqE,EAAE,CAAC,YAAxE,CAAqF,WAAW,CAAEhC,OAAO,CAACiC,UAA1G,EAFJ,CA1BJ,cA8BI,2BAAK,SAAS,CAAC,oBAAf,eACI,6BAAO,OAAO,CAAC,WAAf,CAA2B,SAAS,CAAC,qBAArC,eADJ,cAEI,6BAAO,SAAS,CAAC,qBAAjB,CAAuC,IAAI,CAAC,MAA5C,CAAmD,IAAI,CAAC,WAAxD,CAAoE,EAAE,CAAC,WAAvE,CAAmF,WAAW,CAAEjC,OAAO,CAACkC,SAAxG,EAFJ,CA9BJ,cAkCI,2BAAK,SAAS,CAAC,oBAAf,eACI,6BAAO,OAAO,CAAC,UAAf,CAA0B,SAAS,CAAC,qBAApC,wBADJ,cAEI,6BACI,SAAS,CAAC,qBADd,CAEI,IAAI,CAAC,MAFT,CAGI,IAAI,CAAC,UAHT,CAII,EAAE,CAAC,UAJP,CAKI,WAAW,YAAMlC,OAAO,CAACmC,IAAR,CAAaC,QAAnB,CALf,CAMI,QAAQ,CAAEzB,oBANd,EAFJ,CAlCJ,cA6CI,2BACI,EAAE,CAAC,gBADP,CAEI,KAAK,CAAE,CAAEa,OAAO,CAAE,MAAX,CAAmBa,KAAK,CAAE,MAA1B,CAAkCC,SAAS,CAAE,QAA7C,CAAuDC,OAAO,CAAE,KAAhE,CAFX,eAII,kEAJJ,CA7CJ,cAmDI,2BAAK,SAAS,CAAC,oBAAf,eACI,6BAAO,OAAO,CAAC,YAAf,CAA4B,SAAS,CAAC,qBAAtC,wBADJ,cAEI,6BAAO,SAAS,CAAC,qBAAjB,CAAuC,IAAI,CAAC,MAA5C,CAAmD,IAAI,CAAC,YAAxD,CAAqE,EAAE,CAAC,YAAxE,CAAqF,YAAY,CAAEvC,OAAO,CAACwC,UAA3G,EAFJ,CAnDJ,cAuDI,2BAAK,SAAS,CAAC,qCAAf,CAAqD,EAAE,CAAC,sBAAxD,eACI,oBAAC,MAAD,EAAQ,YAAY,CAAEf,aAAtB,EADJ,CAvDJ,cA0DI,2BAAK,SAAS,CAAC,oBAAf,eACI,6BAAO,OAAO,CAAC,KAAf,CAAqB,SAAS,CAAC,qBAA/B,SADJ,cAEI,2BAAK,SAAS,CAAC,uBAAf,eACI,6BACI,SAAS,CAAC,2BADd,CAEI,IAAI,CAAC,OAFT,CAGI,IAAI,CAAC,KAHT,CAII,EAAE,CAAC,KAJP,CAKI,KAAK,CAAEtB,iBALX,CAMI,WAAW,CAAEH,OAAO,CAACyC,GANzB,CAOI,SAAS,CAAE,GAPf,CAQI,QAAQ,CAAE,kBAAA7B,CAAC,QAAIR,CAAAA,oBAAoB,CAACQ,CAAC,CAACC,MAAF,CAASC,KAAV,CAAxB,EARf,EADJ,cAWI,6BACI,SAAS,CAAC,cADd,CAEI,EAAE,CAAC,cAFP,CAGI,OAAO,CAAE,yBAAMlB,CAAAA,kBAAkB,CAAC,KAAD,CAAxB,EAHb,EAXJ,CAFJ,CA1DJ,CADJ,CAJJ,cAqFI,oBAAC,KAAD,CAAO,MAAP,mBACI,8BAAQ,SAAS,CAAC,cAAlB,CAAiC,OAAO,CAAEG,KAAK,CAAC2C,UAAhD,WADJ,cAEI,8BAAQ,SAAS,CAAC,iBAAlB,CAAoC,OAAO,CAAE,yBAAMpC,CAAAA,QAAQ,CAACC,aAAT,CAAuB,0BAAvB,EAAmDoC,MAAnD,EAAN,EAA7C,WAFJ,CArFJ,CADJ,CA4FH","sourcesContent":["import React, { useState, useContext, useEffect } from 'react'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport Picker from 'emoji-picker-react'\r\n\r\nimport { SERVER_URL } from '../../../../../config/settings'\r\nimport { csrftoken, openCloseEmojiList } from '../../../../../config/utils'\r\nimport { ProfileImageContext } from '../../../../../context/edit-profile/EditProfileContext'\r\n\r\n\r\nexport default function EditProfileModal(props) {\r\n    const profile = props.profile\r\n    const [profileImage, setProfileImage] = useContext(ProfileImageContext)\r\n    const [editingBioContent, setEditingBioContent] = useState('')\r\n\r\n    useEffect(() => {\r\n        const imageInput = document.querySelector('#profile-photo')\r\n        if (imageInput && !imageInput.files.length) {\r\n            imageInput.files.push(profileImage)\r\n        }\r\n    }, [])\r\n\r\n    const handleUsernameChange = e => {\r\n        if (e.target.value.trim() !== '') {\r\n            fetch(`${SERVER_URL}/profile-api/user/${e.target.value}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    if (data.bool !== 'false' && data.id !== profile.id) {\r\n                        document.querySelector('#username-taken').style.display = 'initial'\r\n                    } else {\r\n                        document.querySelector('#username-taken').style.display = 'none'\r\n                    }\r\n                })\r\n        }\r\n    }\r\n\r\n    const onEmojiSelect = (event, emojiObject) => {\r\n        setEditingBioContent(editingBioContent + emojiObject.emoji)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>Editar perfil</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <form\r\n                    action={`${SERVER_URL}/update-profile`}\r\n                    className=\"d-flex flex-column justify-content-center\"\r\n                    id=\"update-profile-form\"\r\n                    method=\"POST\"\r\n                    encType=\"multipart/form-data\"\r\n                >\r\n                    <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrftoken} />\r\n                    <div className=\"d-flex flex-column justify-content-center align-items-center mb-2\">\r\n                        <img src={profileImage ? profileImage : `${SERVER_URL}${profile.photo}`}\r\n                            className=\"profile-img-big\"\r\n                            style={{ marginBottom: '25px' }}\r\n                        />\r\n                        <input\r\n                            type=\"file\"\r\n                            accept=\"image/png, image/jpg, image/jpeg\"\r\n                            className=\"profile-photo-input\"\r\n                            name=\"profile-photo\"\r\n                            id=\"profile-photo\"\r\n                            onChange={props.handleProfileImageChange}\r\n                        />\r\n                    </div>\r\n                    <div className=\"d-flex justify-content-center\">\r\n                        Email: {profile.email}\r\n                    </div>\r\n                    <hr />\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"first-name\" className=\"profile-field-label\">Nome:</label>\r\n                        <input className=\"profile-field-input\" type=\"text\" name=\"first-name\" id=\"first-name\" placeholder={profile.first_name} />\r\n                    </div>\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"last-name\" className=\"profile-field-label\">Sobrenome:</label>\r\n                        <input className=\"profile-field-input\" type=\"text\" name=\"last-name\" id=\"last-name\" placeholder={profile.last_name} />\r\n                    </div>\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"username\" className=\"profile-field-label\">Nome de usuário:</label>\r\n                        <input\r\n                            className=\"profile-field-input\"\r\n                            type=\"text\"\r\n                            name=\"username\"\r\n                            id=\"username\"\r\n                            placeholder={`@${profile.user.username}`}\r\n                            onChange={handleUsernameChange}\r\n                        />\r\n                    </div>\r\n                    <div\r\n                        id=\"username-taken\"\r\n                        style={{ display: 'none', width: '100%', textAlign: 'center', padding: '3px' }}\r\n                    >\r\n                        <span>Nome de usuário já existe</span>\r\n                    </div>\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"birth-date\" className=\"profile-field-label\">Data de nascimento:</label>\r\n                        <input className=\"profile-field-input\" type=\"date\" name=\"birth-date\" id=\"birth-date\" defaultValue={profile.birth_date} />\r\n                    </div>\r\n                    <div className=\"emoji-list-container bio-emoji-list\" id=\"emoji-list-container\">\r\n                        <Picker onEmojiClick={onEmojiSelect} />\r\n                    </div>\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"bio\" className=\"profile-field-label\">Bio:</label>\r\n                        <div className=\"email-input-container\">\r\n                            <input\r\n                                className=\"profile-field-input-email\"\r\n                                type=\"email\"\r\n                                name=\"bio\"\r\n                                id=\"bio\"\r\n                                value={editingBioContent}\r\n                                placeholder={profile.bio}\r\n                                maxLength={100}\r\n                                onChange={e => setEditingBioContent(e.target.value)}\r\n                            />\r\n                            <label\r\n                                className=\"far fa-smile\"\r\n                                id=\"emoji-button\"\r\n                                onClick={() => openCloseEmojiList(false)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <button className=\"btn btn-grey\" onClick={props.closeModal}>Fechar</button>\r\n                <button className=\"btn btn-primary\" onClick={() => document.querySelector('form#update-profile-form').submit()}>Salvar</button>\r\n            </Modal.Footer>\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}