{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\fabio\\\\CodeProjects\\\\Django\\\\napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\fabio\\\\CodeProjects\\\\Django\\\\napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\fabio\\\\CodeProjects\\\\Django\\\\napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\fabio\\\\CodeProjects\\\\Django\\\\napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{SERVER_URL}from'../../../../config/settings';import LikesModal from'../../../../components/likesmodal';import PostForm from'./components/PostForm';import PostListItem from'../../../../components/PostListItem';var Posts=/*#__PURE__*/function(_React$Component){_inherits(Posts,_React$Component);var _super=_createSuper(Posts);function Posts(props){var _this;_classCallCheck(this,Posts);_this=_super.call(this,props);_this.fetchPosts=function(){fetch(\"\".concat(SERVER_URL,\"/post-api/post-list/\").concat(_this.scrollCount)).then(function(response){return response.json();}).then(function(data){return _this.setState({posts:data});});};_this.state={myProfile:null,posts:null,likesModal:{isOpen:false,likes:null},postContent:'',postFormImagePreview:null};_this.scrollCount=1;window.onscroll=function(){if(window.innerHeight+window.scrollY>=document.body.offsetHeight){_this.scrollCount++;_this.fetchPosts();}};return _this;}_createClass(Posts,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;fetch(\"\".concat(SERVER_URL,\"/profile-api/myprofile\")).then(function(response){return response.json();}).then(function(data){return _this2.setState({myProfile:data});});this.fetchPosts();}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(React.Fragment,null,console.log(this.scrollCount,this.state.posts.length),/*#__PURE__*/React.createElement(LikesModal,{isOpen:this.state.likesModal.isOpen,likes:this.state.likesModal.likes,hideModal:function hideModal(){return _this3.setState({likesModal:{isOpen:false,likes:null}});}}),this.state.myProfile&&/*#__PURE__*/React.createElement(PostForm,{myProfile:this.state.myProfile}),/*#__PURE__*/React.createElement(\"div\",{className:\"post-list\"},this.state.posts&&this.state.myProfile&&this.state.posts.map(function(post){return/*#__PURE__*/React.createElement(PostListItem,{post:post,myProfile:_this3.state.myProfile,renderParent:_this3.fetchPosts,openLikesModal:function openLikesModal(likes){return _this3.setState({likesModal:{isOpen:true,likes:likes}});}});}),/*#__PURE__*/React.createElement(\"div\",{className:\"posts-loader-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"loader\"}))));}}]);return Posts;}(React.Component);export{Posts as default};","map":{"version":3,"sources":["C:/Users/fabio/CodeProjects/Django/napker/frontend/src/pages/home/components/posts_/Posts.js"],"names":["React","SERVER_URL","LikesModal","PostForm","PostListItem","Posts","props","fetchPosts","fetch","scrollCount","then","response","json","data","setState","posts","state","myProfile","likesModal","isOpen","likes","postContent","postFormImagePreview","window","onscroll","innerHeight","scrollY","document","body","offsetHeight","console","log","length","map","post","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\n\r\nimport { SERVER_URL } from '../../../../config/settings'\r\nimport LikesModal from '../../../../components/likesmodal'\r\nimport PostForm from './components/PostForm'\r\nimport PostListItem from '../../../../components/PostListItem'\r\n\r\nexport default class Posts extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            myProfile: null,\r\n            posts: null,\r\n            likesModal: {\r\n                isOpen: false,\r\n                likes: null\r\n            },\r\n            postContent: '',\r\n            postFormImagePreview: null\r\n        }\r\n        this.scrollCount = 1\r\n\r\n        window.onscroll = () => {\r\n            if (window.innerHeight + window.scrollY >= document.body.offsetHeight) {\r\n                this.scrollCount++\r\n                this.fetchPosts()\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillMount() {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => this.setState({ myProfile: data }))\r\n        this.fetchPosts()\r\n    }\r\n\r\n    fetchPosts = () => {\r\n        fetch(`${SERVER_URL}/post-api/post-list/${this.scrollCount}`)\r\n            .then(response => response.json())\r\n            .then(data => this.setState({ posts: data }))\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <>{console.log(this.scrollCount, this.state.posts.length)}\r\n                <LikesModal\r\n                    isOpen={this.state.likesModal.isOpen}\r\n                    likes={this.state.likesModal.likes}\r\n                    hideModal={() => this.setState({ likesModal: { isOpen: false, likes: null } })}\r\n                />\r\n                {this.state.myProfile &&\r\n                    <PostForm myProfile={this.state.myProfile} />\r\n                }\r\n                <div className=\"post-list\">\r\n                    {this.state.posts && this.state.myProfile &&\r\n                        this.state.posts.map(post => {\r\n                            return (\r\n                                <PostListItem\r\n                                    post={post}\r\n                                    myProfile={this.state.myProfile}\r\n                                    renderParent={this.fetchPosts}\r\n                                    openLikesModal={likes => this.setState({ likesModal: { isOpen: true, likes: likes } })}\r\n                                />\r\n                            )\r\n                        })\r\n                    }\r\n                    <div className=\"posts-loader-container\" >\r\n                        <div className=\"loader\" />\r\n                    </div>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}