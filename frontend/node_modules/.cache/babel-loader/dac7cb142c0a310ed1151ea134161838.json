{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import Header from'../../components/fixed/header';import ModalContactSearch from'./components/ModalContactSearch';import Chat from'./components/Chat';import{SERVER_URL}from'../../config/settings';import ContactListItem from'./components/ContactListItem';var MessagesPageBifurcator=/*#__PURE__*/function(_React$Component){_inherits(MessagesPageBifurcator,_React$Component);var _super=_createSuper(MessagesPageBifurcator);function MessagesPageBifurcator(_props){var _this;_classCallCheck(this,MessagesPageBifurcator);_this=_super.call(this,_props);_this.handleReceiveProps=function(props){var participants={username:_this.state.username,other_username:props.match.params.slug};fetch(\"\".concat(SERVER_URL,\"/chat-api/chat-id/\").concat(JSON.stringify(participants))).then(function(response){return response.json();}).then(function(data){return _this.setState({chatId:data['chat_id']});});};_this.fetchActiveChatProfiles=function(){fetch(\"\".concat(SERVER_URL,\"/chat-api/active-chats-profiles\")).then(function(response){return response.json();}).then(function(data){if(!_this.state.username)return;_this.setState({activeChats:data.chats.reverse(),activeChatsProfiles:data.profiles.reverse()});});};_this.openModal=function(){_this.setState({addingNewChat:true});};_this.setModalSearch=function(query){if(query===''){_this.setState({modalProfiles:[]});return;}fetch(\"\".concat(SERVER_URL,\"/profile-api/users/\").concat(query)).then(function(response){return response.json();}).then(function(data){_this.setState({modalProfiles:data});});};_this.setContactSearch=function(query){if(query===''){_this.fetchActiveChatProfiles();return;}if(_this.state.activeChatsProfiles){var filteredProfiles=_this.state.activeChatsProfiles.filter(function(p){return p.user.username.includes(query);});_this.setState({activeChatsProfiles:filteredProfiles});}};_this.state={myProfile:null,username:null,chatId:null,activeChats:null,activeChatsProfiles:null,addingNewChat:false,modalProfiles:[]};_this.rerenderingInterval=null;return _this;}_createClass(MessagesPageBifurcator,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(newProps){if(newProps===this.props)return;this.handleReceiveProps(newProps);}},{key:\"handleComponentChange\",value:function handleComponentChange(){var _this2=this;if(!this.state.username){fetch(\"\".concat(SERVER_URL,\"/profile-api/logged-user\")).then(function(response){return response.json();}).then(function(data){_this2.setState({username:data.username});if(_this2.props.match.params.slug){_this2.handleReceiveProps(_this2.props);}});}if(!this.state.activeChatsProfiles&&this.state.activeChatsProfiles!==[]){this.fetchActiveChatProfiles();}}},{key:\"componentWillMount\",value:function componentWillMount(){document.title='Mensagens / Napker';this.handleComponentChange();this.rerenderingInterval=window.setInterval(this.fetchActiveChatProfiles,3000);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){window.clearInterval(this.rerenderingInterval);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.handleComponentChange();}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"default-messages-page\"},/*#__PURE__*/React.createElement(Header,{page:\"Mensagens\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"content d-flex messages-wrapper\"},/*#__PURE__*/React.createElement(ModalContactSearch,{addingNewChat:this.state.addingNewChat,modalProfiles:this.state.modalProfiles,closeModal:function closeModal(){return _this3.setState({addingNewChat:false});}}),/*#__PURE__*/React.createElement(\"div\",{className:\"chats-list\"},/*#__PURE__*/React.createElement(\"div\",{className:\"search-input-container\"},/*#__PURE__*/React.createElement(\"input\",{className:\"search-input contact-filter-input\",placeholder:\"Pesquisar pessoas\",onChange:function onChange(e){return _this3.setContactSearch(e.target.value);}}),/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-plus add-icon\",onClick:this.openModal})),/*#__PURE__*/React.createElement(\"div\",{className:\"list-group chats-container\"},this.state.activeChatsProfiles!==null?this.state.activeChatsProfiles.map(function(profile){return/*#__PURE__*/React.createElement(ContactListItem,{profile:profile,activeChats:_this3.state.activeChats,activeChatsProfiles:_this3.state.activeChatsProfiles});}):/*#__PURE__*/React.createElement(\"div\",{className:\"messages-loader-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"loader\"})))),/*#__PURE__*/React.createElement(Chat,{username:this.state.username,otherUsername:this.props.match.params.slug,chatId:this.state.chatId,openModal:this.openModal,updateUnreadMessagesNumber:this.props.updateUnreadMessagesNumber,updateMessagesComponent:this.fetchActiveChatProfiles}))),/*#__PURE__*/React.createElement(\"div\",{className:\"mobile-messages-page\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content d-flex messages-wrapper\"},/*#__PURE__*/React.createElement(ModalContactSearch,{addingNewChat:this.state.addingNewChat,modalProfiles:this.state.modalProfiles,closeModal:function closeModal(){return _this3.setState({addingNewChat:false});}}),/*#__PURE__*/React.createElement(\"div\",{className:\"chats-list\"},/*#__PURE__*/React.createElement(\"div\",{className:\"search-input-container\"},/*#__PURE__*/React.createElement(\"input\",{className:\"search-input contact-filter-input\",placeholder:\"Pesquisar pessoas\",onChange:function onChange(e){return _this3.setContactSearch(e.target.value);}}),/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-plus add-icon\",onClick:this.openModal})),/*#__PURE__*/React.createElement(\"div\",{className:\"list-group chats-container\"},this.state.activeChatsProfiles!==null?this.state.activeChatsProfiles.map(function(profile){return/*#__PURE__*/React.createElement(ContactListItem,null);}):/*#__PURE__*/React.createElement(\"div\",{className:\"messages-loader-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"loader\"}))))),!!this.props.match.params.slug&&/*#__PURE__*/React.createElement(\"div\",{className:\"mobile-chat-page\"},/*#__PURE__*/React.createElement(Chat,{backArrow:true,username:this.state.username,otherUsername:this.props.match.params.slug,chatId:this.state.chatId,openModal:this.openModal,updateUnreadMessagesNumber:this.props.updateUnreadMessagesNumber,updateMessagesComponent:this.fetchActiveChatProfiles}))));}}]);return MessagesPageBifurcator;}(React.Component);export{MessagesPageBifurcator as default};","map":{"version":3,"sources":["C:/Users/felip/CodeProjects/Web/Napker/frontend/src/pages/messages_/Messages.js"],"names":["React","Header","ModalContactSearch","Chat","SERVER_URL","ContactListItem","MessagesPageBifurcator","props","handleReceiveProps","participants","username","state","other_username","match","params","slug","fetch","JSON","stringify","then","response","json","data","setState","chatId","fetchActiveChatProfiles","activeChats","chats","reverse","activeChatsProfiles","profiles","openModal","addingNewChat","setModalSearch","query","modalProfiles","setContactSearch","filteredProfiles","filter","p","user","includes","myProfile","rerenderingInterval","newProps","document","title","handleComponentChange","window","setInterval","clearInterval","e","target","value","map","profile","updateUnreadMessagesNumber","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\n\r\nimport Header from '../../components/fixed/header'\r\nimport ModalContactSearch from './components/ModalContactSearch'\r\nimport Chat from './components/Chat'\r\nimport { SERVER_URL } from '../../config/settings'\r\nimport ContactListItem from './components/ContactListItem'\r\n\r\nexport default class MessagesPageBifurcator extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            myProfile: null,\r\n            username: null,\r\n            chatId: null,\r\n            activeChats: null,\r\n            activeChatsProfiles: null,\r\n            addingNewChat: false,\r\n            modalProfiles: [],\r\n        }\r\n        this.rerenderingInterval = null\r\n    }\r\n\r\n    handleReceiveProps = props => {\r\n        const participants = { username: this.state.username, other_username: props.match.params.slug }\r\n        fetch(`${SERVER_URL}/chat-api/chat-id/${JSON.stringify(participants)}`)\r\n            .then(response => response.json())\r\n            .then(data => this.setState({\r\n                chatId: data['chat_id']\r\n            }))\r\n    }\r\n\r\n    componentWillReceiveProps(newProps) {\r\n        if (newProps === this.props) return\r\n        this.handleReceiveProps(newProps)\r\n    }\r\n\r\n    handleComponentChange() {\r\n        if (!this.state.username) {\r\n            fetch(`${SERVER_URL}/profile-api/logged-user`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    this.setState({\r\n                        username: data.username\r\n                    })\r\n                    if (this.props.match.params.slug) {\r\n                        this.handleReceiveProps(this.props)\r\n                    }\r\n                })\r\n        }\r\n        if (!this.state.activeChatsProfiles && this.state.activeChatsProfiles !== []) {\r\n            this.fetchActiveChatProfiles()\r\n        }\r\n    }\r\n\r\n    componentWillMount() {\r\n        document.title = 'Mensagens / Napker'\r\n        this.handleComponentChange()\r\n        this.rerenderingInterval = window.setInterval(this.fetchActiveChatProfiles, 3000)\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.clearInterval(this.rerenderingInterval)\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.handleComponentChange()\r\n    }\r\n\r\n    fetchActiveChatProfiles = () => {\r\n        fetch(`${SERVER_URL}/chat-api/active-chats-profiles`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if (!this.state.username) return\r\n                this.setState({\r\n                    activeChats: data.chats.reverse(),\r\n                    activeChatsProfiles: data.profiles.reverse()\r\n                })\r\n            })\r\n    }\r\n\r\n    openModal = () => {\r\n        this.setState({\r\n            addingNewChat: true\r\n        })\r\n    }\r\n\r\n    setModalSearch = query => {\r\n        if (query === '') {\r\n            this.setState({\r\n                modalProfiles: []\r\n            })\r\n            return\r\n        }\r\n        fetch(`${SERVER_URL}/profile-api/users/${query}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                this.setState({\r\n                    modalProfiles: data\r\n                })\r\n            })\r\n    }\r\n\r\n    setContactSearch = query => {\r\n        if (query === '') {\r\n            this.fetchActiveChatProfiles()\r\n            return\r\n        }\r\n        if (this.state.activeChatsProfiles) {\r\n            const filteredProfiles = this.state.activeChatsProfiles.filter(p => p.user.username.includes(query))\r\n            this.setState({\r\n                activeChatsProfiles: filteredProfiles\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div className=\"default-messages-page\">\r\n                    <Header page=\"Mensagens\" />\r\n                    <div className=\"content d-flex messages-wrapper\">\r\n                        <ModalContactSearch\r\n                            addingNewChat={this.state.addingNewChat}\r\n                            modalProfiles={this.state.modalProfiles}\r\n                            closeModal={() => this.setState({ addingNewChat: false })}\r\n                        />\r\n                        <div className=\"chats-list\">\r\n                            <div className=\"search-input-container\">\r\n                                <input className=\"search-input contact-filter-input\" placeholder=\"Pesquisar pessoas\" onChange={e => this.setContactSearch(e.target.value)} />\r\n                                <i className=\"fas fa-plus add-icon\" onClick={this.openModal}></i>\r\n                            </div>\r\n                            <div className=\"list-group chats-container\">\r\n                                {this.state.activeChatsProfiles !== null ?\r\n                                    this.state.activeChatsProfiles.map(profile => {\r\n                                        return (\r\n                                            <ContactListItem\r\n                                                profile={profile}\r\n                                                activeChats={this.state.activeChats}\r\n                                                activeChatsProfiles={this.state.activeChatsProfiles}\r\n                                            />\r\n                                        )\r\n                                    }) :\r\n                                    <div className=\"messages-loader-container\">\r\n                                        <div className=\"loader\" />\r\n                                    </div>\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                        <Chat\r\n                            username={this.state.username}\r\n                            otherUsername={this.props.match.params.slug}\r\n                            chatId={this.state.chatId}\r\n                            openModal={this.openModal}\r\n                            updateUnreadMessagesNumber={this.props.updateUnreadMessagesNumber}\r\n                            updateMessagesComponent={this.fetchActiveChatProfiles}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <div className=\"mobile-messages-page\">\r\n                    <div className=\"content d-flex messages-wrapper\">\r\n                        <ModalContactSearch\r\n                            addingNewChat={this.state.addingNewChat}\r\n                            modalProfiles={this.state.modalProfiles}\r\n                            closeModal={() => this.setState({ addingNewChat: false })}\r\n                        />\r\n                        <div className=\"chats-list\">\r\n                            <div className=\"search-input-container\">\r\n                                <input className=\"search-input contact-filter-input\" placeholder=\"Pesquisar pessoas\" onChange={e => this.setContactSearch(e.target.value)} />\r\n                                <i className=\"fas fa-plus add-icon\" onClick={this.openModal}></i>\r\n                            </div>\r\n                            <div className=\"list-group chats-container\">\r\n                                {this.state.activeChatsProfiles !== null ?\r\n                                    this.state.activeChatsProfiles.map(profile => {\r\n                                        return (\r\n                                            <ContactListItem />\r\n                                        )\r\n                                    }) :\r\n                                    <div className=\"messages-loader-container\">\r\n                                        <div className=\"loader\" />\r\n                                    </div>\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    {!!this.props.match.params.slug &&\r\n                        <div className=\"mobile-chat-page\">\r\n                            <Chat\r\n                                backArrow={true}\r\n                                username={this.state.username}\r\n                                otherUsername={this.props.match.params.slug}\r\n                                chatId={this.state.chatId}\r\n                                openModal={this.openModal}\r\n                                updateUnreadMessagesNumber={this.props.updateUnreadMessagesNumber}\r\n                                updateMessagesComponent={this.fetchActiveChatProfiles}\r\n                            />\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}