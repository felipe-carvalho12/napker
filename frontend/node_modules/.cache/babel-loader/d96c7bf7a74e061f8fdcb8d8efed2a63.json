{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Modal from'react-bootstrap/Modal';import Picker from'emoji-picker-react';import{SERVER_URL}from'../../../config/settings';import{csrftoken,openCloseEmojiList}from'../../../config/utils';export default function EditProfileModal(props){var profile=props.profile;var isOpen=props.isOpen;var closeModal=props.closeModal;var _useState=useState(\"\".concat(SERVER_URL).concat(profile.photo)),_useState2=_slicedToArray(_useState,2),profileImagePreview=_useState2[0],setProfileImagePreview=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),editingBioContent=_useState4[0],setEditingBioContent=_useState4[1];var handleProfileImageChange=function handleProfileImageChange(e){var reader=new FileReader();reader.onload=function(){if(reader.readyState===2){setProfileImagePreview(reader.result);}};try{reader.readAsDataURL(e.target.files[0]);}catch(_unused){}};var handleUsernameChange=function handleUsernameChange(e){if(e.target.value.trim()!==''){fetch(\"\".concat(SERVER_URL,\"/profile-api/user/\").concat(e.target.value)).then(function(response){return response.json();}).then(function(data){if(data.bool!=='false'&&data.id!==profile.id){document.querySelector('#username-taken').style.display='initial';}else{document.querySelector('#username-taken').style.display='none';}});}};var onEmojiSelect=function onEmojiSelect(event,emojiObject){setEditingBioContent(editingBioContent+emojiObject.emoji);};return/*#__PURE__*/React.createElement(Modal,{show:isOpen,onHide:closeModal,size:\"lg\"},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},/*#__PURE__*/React.createElement(Modal.Title,null,\"Editar perfil\")),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"form\",{action:\"\".concat(SERVER_URL,\"/update-profile\"),className:\"d-flex flex-column justify-content-center\",id:\"update-profile-form\",method:\"POST\",encType:\"multipart/form-data\"},/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",name:\"csrfmiddlewaretoken\",value:csrftoken}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-column justify-content-center align-items-center mb-2\"},/*#__PURE__*/React.createElement(\"img\",{src:profileImagePreview,className:\"profile-img-big\",style:{marginBottom:'25px'}}),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",accept:\"image/png, image/jpg, image/jpeg\",className:\"profile-photo-input\",name:\"profile-photo\",onChange:handleProfileImageChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},\"Email: \",profile.email),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"edit-profile-input\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"first-name\",className:\"profile-field-label\"},\"Nome:\"),/*#__PURE__*/React.createElement(\"input\",{className:\"profile-field-input\",type:\"text\",name:\"first-name\",id:\"first-name\",placeholder:profile.first_name})),/*#__PURE__*/React.createElement(\"div\",{className:\"edit-profile-input\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"last-name\",className:\"profile-field-label\"},\"Sobrenome:\"),/*#__PURE__*/React.createElement(\"input\",{className:\"profile-field-input\",type:\"text\",name:\"last-name\",id:\"last-name\",placeholder:profile.last_name})),/*#__PURE__*/React.createElement(\"div\",{className:\"edit-profile-input\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"username\",className:\"profile-field-label\"},\"Nome de usu\\xE1rio:\"),/*#__PURE__*/React.createElement(\"input\",{className:\"profile-field-input\",type:\"text\",name:\"username\",id:\"username\",placeholder:\"@\".concat(profile.user.username),onChange:handleUsernameChange})),/*#__PURE__*/React.createElement(\"div\",{id:\"username-taken\",style:{display:'none',width:'100%',textAlign:'center',padding:'3px'}},/*#__PURE__*/React.createElement(\"span\",null,\"Nome de usu\\xE1rio j\\xE1 existe\")),/*#__PURE__*/React.createElement(\"div\",{className:\"edit-profile-input\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"birth-date\",className:\"profile-field-label\"},\"Data de nascimento:\"),/*#__PURE__*/React.createElement(\"input\",{className:\"profile-field-input\",type:\"date\",name:\"birth-date\",id:\"birth-date\",defaultValue:profile.birth_date})),/*#__PURE__*/React.createElement(\"div\",{className:\"emoji-list-container bio-emoji-list\",id:\"emoji-list-container\"},/*#__PURE__*/React.createElement(Picker,{onEmojiClick:onEmojiSelect})),/*#__PURE__*/React.createElement(\"div\",{className:\"edit-profile-input\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"bio\",className:\"profile-field-label\"},\"Bio:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"email-input-container\"},/*#__PURE__*/React.createElement(\"input\",{className:\"profile-field-input-email\",type:\"email\",name:\"bio\",id:\"bio\",value:editingBioContent,placeholder:profile.bio,onChange:function onChange(e){return setEditingBioContent(e.target.value);}}),/*#__PURE__*/React.createElement(\"label\",{className:\"far fa-smile\",id:\"emoji-button\",onClick:function onClick(){return openCloseEmojiList(false);}}))))),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-grey\",onClick:closeModal},\"Fechar\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return document.querySelector('form#update-profile-form').submit();}},\"Salvar\")));}","map":{"version":3,"sources":["C:/Users/felip/CodeProjects/Web/Napker/frontend/src/pages/profile/components/EditProfileModal.js"],"names":["React","useState","Modal","Picker","SERVER_URL","csrftoken","openCloseEmojiList","EditProfileModal","props","profile","isOpen","closeModal","photo","profileImagePreview","setProfileImagePreview","editingBioContent","setEditingBioContent","handleProfileImageChange","e","reader","FileReader","onload","readyState","result","readAsDataURL","target","files","handleUsernameChange","value","trim","fetch","then","response","json","data","bool","id","document","querySelector","style","display","onEmojiSelect","event","emojiObject","emoji","marginBottom","email","first_name","last_name","user","username","width","textAlign","padding","birth_date","bio","submit"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport Picker from 'emoji-picker-react'\r\n\r\nimport { SERVER_URL } from '../../../config/settings'\r\nimport { csrftoken, openCloseEmojiList } from '../../../config/utils'\r\n\r\nexport default function EditProfileModal(props) {\r\n    const profile = props.profile\r\n    const isOpen = props.isOpen\r\n    const closeModal = props.closeModal\r\n\r\n    const [profileImagePreview, setProfileImagePreview] = useState(`${SERVER_URL}${profile.photo}`)\r\n    const [editingBioContent, setEditingBioContent] = useState('')\r\n\r\n    const handleProfileImageChange = e => {\r\n        const reader = new FileReader()\r\n        reader.onload = () => {\r\n            if (reader.readyState === 2) {\r\n                setProfileImagePreview(reader.result)\r\n            }\r\n        }\r\n        try {\r\n            reader.readAsDataURL(e.target.files[0])\r\n        } catch {\r\n\r\n        }\r\n    }\r\n\r\n    const handleUsernameChange = e => {\r\n        if (e.target.value.trim() !== '') {\r\n            fetch(`${SERVER_URL}/profile-api/user/${e.target.value}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    if (data.bool !== 'false' && data.id !== profile.id) {\r\n                        document.querySelector('#username-taken').style.display = 'initial'\r\n                    } else {\r\n                        document.querySelector('#username-taken').style.display = 'none'\r\n                    }\r\n                })\r\n        }\r\n    }\r\n\r\n    const onEmojiSelect = (event, emojiObject) => {\r\n        setEditingBioContent(editingBioContent + emojiObject.emoji)\r\n    }\r\n\r\n    return (\r\n        <Modal show={isOpen}\r\n            onHide={closeModal}\r\n            size=\"lg\">\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>Editar perfil</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <form\r\n                    action={`${SERVER_URL}/update-profile`}\r\n                    className=\"d-flex flex-column justify-content-center\"\r\n                    id=\"update-profile-form\"\r\n                    method=\"POST\"\r\n                    encType=\"multipart/form-data\"\r\n                >\r\n                    <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrftoken} />\r\n                    <div className=\"d-flex flex-column justify-content-center align-items-center mb-2\">\r\n                        <img src={profileImagePreview}\r\n                            className=\"profile-img-big\"\r\n                            style={{ marginBottom: '25px' }}\r\n                        />\r\n                        <input\r\n                            type=\"file\"\r\n                            accept=\"image/png, image/jpg, image/jpeg\"\r\n                            className=\"profile-photo-input\"\r\n                            name=\"profile-photo\"\r\n                            onChange={handleProfileImageChange}\r\n                        />\r\n                    </div>\r\n                    <div className=\"d-flex justify-content-center\">\r\n                        Email: {profile.email}\r\n                    </div>\r\n                    <hr />\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"first-name\" className=\"profile-field-label\">Nome:</label>\r\n                        <input className=\"profile-field-input\" type=\"text\" name=\"first-name\" id=\"first-name\" placeholder={profile.first_name} />\r\n                    </div>\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"last-name\" className=\"profile-field-label\">Sobrenome:</label>\r\n                        <input className=\"profile-field-input\" type=\"text\" name=\"last-name\" id=\"last-name\" placeholder={profile.last_name} />\r\n                    </div>\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"username\" className=\"profile-field-label\">Nome de usuário:</label>\r\n                        <input\r\n                            className=\"profile-field-input\"\r\n                            type=\"text\"\r\n                            name=\"username\"\r\n                            id=\"username\"\r\n                            placeholder={`@${profile.user.username}`}\r\n                            onChange={handleUsernameChange}\r\n                        />\r\n                    </div>\r\n                    <div\r\n                        id=\"username-taken\"\r\n                        style={{ display: 'none', width: '100%', textAlign: 'center', padding: '3px' }}\r\n                    >\r\n                        <span>Nome de usuário já existe</span>\r\n                    </div>\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"birth-date\" className=\"profile-field-label\">Data de nascimento:</label>\r\n                        <input className=\"profile-field-input\" type=\"date\" name=\"birth-date\" id=\"birth-date\" defaultValue={profile.birth_date} />\r\n                    </div>\r\n                    <div className=\"emoji-list-container bio-emoji-list\" id=\"emoji-list-container\">\r\n                        <Picker onEmojiClick={onEmojiSelect} />\r\n                    </div>\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"bio\" className=\"profile-field-label\">Bio:</label>\r\n                        <div className=\"email-input-container\">\r\n                            <input\r\n                                className=\"profile-field-input-email\"\r\n                                type=\"email\"\r\n                                name=\"bio\"\r\n                                id=\"bio\"\r\n                                value={editingBioContent}\r\n                                placeholder={profile.bio}\r\n                                onChange={e => setEditingBioContent(e.target.value)}\r\n                            />\r\n                            <label\r\n                                className=\"far fa-smile\"\r\n                                id=\"emoji-button\"\r\n                                onClick={() => openCloseEmojiList(false)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <button className=\"btn btn-grey\" onClick={closeModal}>Fechar</button>\r\n                <button className=\"btn btn-primary\" onClick={() => document.querySelector('form#update-profile-form').submit()}>Salvar</button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}