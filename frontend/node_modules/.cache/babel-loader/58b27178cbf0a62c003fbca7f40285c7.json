{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{SERVER_URL}from'../../../config/settings';import{csrftoken}from'../../../config/utils';import ProfileListItem from'../../../components/ProfileListItem';export default function Profiles(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),myProfile=_useState2[0],setMyProfile=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),profiles=_useState4[0],setProfiles=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),filteredProfiles=_useState6[0],setFilteredProfiles=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),search=_useState8[0],setSearch=_useState8[1];useEffect(function(){fetch(\"\".concat(SERVER_URL,\"/profile-api/myprofile\")).then(function(response){return response.json();}).then(function(data){return setMyProfile(data);});fetch(\"\".concat(SERVER_URL,\"/profile-api/profile-list\")).then(function(response){return response.json();}).then(function(data){setFilteredProfiles(null);setProfiles(data);});},[]);useEffect(function(){if(search===''){setFilteredProfiles(null);return;}fetch(\"\".concat(SERVER_URL,\"/profile-api/users/\").concat(search)).then(function(response){return response.json();}).then(function(data){setFilteredProfiles(data);});},[search]);var sendFriendRequest=function sendFriendRequest(pk){fetch(\"\".concat(SERVER_URL,\"/profile-api/send-friend-request\"),{method:'POST',headers:{'Content-type':'application/json','X-CSRFToken':csrftoken},body:JSON.stringify(pk)}).then(function(response){return response.json();}).then(function(data){return console.log(data);});};var cancelFriendRequest=function cancelFriendRequest(pk){fetch(\"\".concat(SERVER_URL,\"/profile-api/cancel-friend-request\"),{method:'POST',headers:{'Content-type':'application/json','X-CSRFToken':csrftoken},body:JSON.stringify(pk)}).then(function(response){return response.json();}).then(function(data){return console.log(data);});};var handleRelationshipUpdate=function handleRelationshipUpdate(e){e.preventDefault();e.stopPropagation();var btn=e.target;if(btn.innerHTML==='Solicitar'){sendFriendRequest(btn.dataset.pk);btn.innerHTML='Solicitado';btn.className='btn btn-primary';}else{cancelFriendRequest(btn.dataset.pk);btn.innerHTML='Solicitar';btn.className='btn btn-secondary';}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"profiles-filter-container\"},/*#__PURE__*/React.createElement(\"div\",{style:{width:'89%'}},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"profiles-filter-input\",placeholder:\"Pesquisar\",value:search,onChange:function onChange(e){return setSearch(e.target.value);}})),/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-ellipsis-h btn btn-primary\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"profiles-search-type-selector\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"i\",{class:\"fas fa-grin-hearts text-secondary\",style:{fontSize:'large',marginRight:'5px'}}),\"Pesquisa por interesse\")),/*#__PURE__*/React.createElement(\"div\",{className:\"list-group\"},myProfile&&(profiles||filteredProfiles)?/*#__PURE__*/React.createElement(\"div\",{className:\"profile-list-container\"},filteredProfiles?filteredProfiles.map(function(profile){return/*#__PURE__*/React.createElement(ProfileListItem,{profile:profile,myProfile:myProfile});}):profiles&&profiles.map(function(profile){return/*#__PURE__*/React.createElement(ProfileListItem,{profile:profile,myProfile:myProfile},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-secondary\",\"data-pk\":profile.id,onClick:handleRelationshipUpdate},\"Solicitar\"));})):/*#__PURE__*/React.createElement(\"div\",{className:\"profiles-loader-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"loader\"}))));}","map":{"version":3,"sources":["C:/Users/felip/CodeProjects/Web/Napker/frontend/src/pages/home/components/Profiles.js"],"names":["React","useEffect","useState","SERVER_URL","csrftoken","ProfileListItem","Profiles","myProfile","setMyProfile","profiles","setProfiles","filteredProfiles","setFilteredProfiles","search","setSearch","fetch","then","response","json","data","sendFriendRequest","pk","method","headers","body","JSON","stringify","console","log","cancelFriendRequest","handleRelationshipUpdate","e","preventDefault","stopPropagation","btn","target","innerHTML","dataset","className","width","value","fontSize","marginRight","map","profile","id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\n\r\nimport { SERVER_URL } from '../../../config/settings'\r\nimport { csrftoken } from '../../../config/utils'\r\nimport ProfileListItem from '../../../components/ProfileListItem'\r\n\r\nexport default function Profiles() {\r\n    const [myProfile, setMyProfile] = useState(null)\r\n    const [profiles, setProfiles] = useState(null)\r\n    const [filteredProfiles, setFilteredProfiles] = useState(null)\r\n    const [search, setSearch] = useState('')\r\n\r\n    useEffect(() => {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => setMyProfile(data))\r\n        fetch(`${SERVER_URL}/profile-api/profile-list`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                setFilteredProfiles(null)\r\n                setProfiles(data)\r\n            })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (search === '') {\r\n            setFilteredProfiles(null)\r\n            return\r\n        }\r\n        fetch(`${SERVER_URL}/profile-api/users/${search}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                setFilteredProfiles(data)\r\n            })\r\n    }, [search])\r\n\r\n    const sendFriendRequest = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/send-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(pk)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n    }\r\n\r\n    const cancelFriendRequest = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/cancel-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(pk)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n    }\r\n\r\n    const handleRelationshipUpdate = e => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        const btn = e.target\r\n        if (btn.innerHTML === 'Solicitar') {\r\n            sendFriendRequest(btn.dataset.pk)\r\n            btn.innerHTML = 'Solicitado'\r\n            btn.className = 'btn btn-primary'\r\n        } else {\r\n            cancelFriendRequest(btn.dataset.pk)\r\n            btn.innerHTML = 'Solicitar'\r\n            btn.className = 'btn btn-secondary'\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"profiles-filter-container\">\r\n                <div style={{ width: '89%' }}>\r\n                    <input\r\n                        type=\"text\"\r\n                        className=\"profiles-filter-input\"\r\n                        placeholder=\"Pesquisar\"\r\n                        value={search}\r\n                        onChange={e => setSearch(e.target.value)}\r\n                    />\r\n                </div>\r\n                <i\r\n                    className=\"fas fa-ellipsis-h btn btn-primary\"\r\n                />\r\n            </div>\r\n            <div className=\"profiles-search-type-selector\">\r\n                <li>\r\n                    <i class=\"fas fa-grin-hearts text-secondary\" style={{ fontSize: 'large', marginRight: '5px' }} />\r\n                    Pesquisa por interesse\r\n                </li>\r\n            </div>\r\n            <div className=\"list-group\">\r\n                {myProfile && (profiles || filteredProfiles) ?\r\n                    <div className=\"profile-list-container\">\r\n                        {filteredProfiles ? filteredProfiles.map(profile => {\r\n                            return (\r\n                                <ProfileListItem profile={profile} myProfile={myProfile} />\r\n                            )\r\n                        }\r\n                        ) : profiles && profiles.map(profile => {\r\n                            return (\r\n                                <ProfileListItem profile={profile} myProfile={myProfile}>\r\n                                    <button className=\"btn btn-secondary\" data-pk={profile.id} onClick={handleRelationshipUpdate}>\r\n                                        Solicitar\r\n                                    </button>\r\n                                </ProfileListItem>\r\n                            )\r\n                        })\r\n                        }\r\n                    </div> :\r\n                    <div className=\"profiles-loader-container\">\r\n                        <div className=\"loader\" />\r\n                    </div>\r\n                }\r\n            </div>\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}