{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import LikesModal from'../../components/LikesModal';import{SERVER_URL}from'../../settings';import{csrftoken}from'../../utils';export default function Posts(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),myprofile=_useState2[0],setMyProfile=_useState2[1];var _useState3=useState({isOpen:false,likes:null}),_useState4=_slicedToArray(_useState3,2),likesModal=_useState4[0],setLikesModal=_useState4[1];var profile=props.profile;useEffect(function(){fetch(\"\".concat(SERVER_URL,\"/profile-api/myprofile\")).then(function(response){return response.json();}).then(function(data){return setMyProfile(data);});},[]);var likeUnlikePost=function likeUnlikePost(e){e.stopPropagation();var likeBtn=e.target;if(likeBtn.classList.contains('fas')){likeBtn.classList.remove('fas');//border heart\nlikeBtn.classList.add('far');//filled heart\nfetch(\"\".concat(SERVER_URL,\"/post-api/unlike-post/\").concat(likeBtn.dataset.postid)).then(function(response){return response.json();}).then(function(data){console.log(data);props.fetchProfile();});}else{likeBtn.classList.remove('far');//border heart\nlikeBtn.classList.add('fas');//filled heart\nfetch(\"\".concat(SERVER_URL,\"/post-api/like-post/\").concat(likeBtn.dataset.postid)).then(function(response){return response.json();}).then(function(data){console.log(data);props.fetchProfile();});}};var hideLikesModal=function hideLikesModal(){setLikesModal({isOpen:false,likes:null});};var deletePost=function deletePost(e,postId){e.stopPropagation();var el=document.querySelector(\"#profile-post-\".concat(postId));if(window.confirm('Tem certeza que deseja apagar o post?\\nEssa ação é irreversível.')){el.style.animationPlayState='running';el.addEventListener('animationend',function(){props.fetchProfile();});fetch(\"\".concat(SERVER_URL,\"/post-api/delete-post/\").concat(postId),{method:'POST',headers:{'Content-type':'application/json','X-CSRFToken':csrftoken}}).then(function(response){return response.json();}).then(function(data){console.log(data);});}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(LikesModal,{isOpen:likesModal.isOpen,likes:likesModal.likes,hideModal:hideLikesModal}),/*#__PURE__*/React.createElement(\"div\",{className:\"post-list\"},profile&&myprofile?/*#__PURE__*/React.createElement(React.Fragment,null,profile.posts.length?profile.posts.map(function(post){return/*#__PURE__*/React.createElement(\"li\",{className:\"post-container post-list-item\",key:post.id,id:\"profile-post-\".concat(post.id),onClick:function onClick(){return window.location.href=\"/post/\".concat(post.id);}},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-col\"},/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(SERVER_URL).concat(profile.photo),className:\"profile-img-med\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"post-col\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-author-data-wrapper\"},/*#__PURE__*/React.createElement(\"strong\",{style:{marginRight:'5px'}},profile.first_name,\" \",profile.last_name),/*#__PURE__*/React.createElement(\"p\",{className:\"text-secondary d-inline-block\"},\"@\",profile.user.username,\" \\u2022 \",post.created.split('-').reverse().join('/'))),/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'start'}},post.content),post.image&&/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(SERVER_URL).concat(post.image),className:\"post-img\"}))),profile.id==myprofile.id&&/*#__PURE__*/React.createElement(\"i\",{className:\"far fa-trash-alt trash-icon text-secondary\",style:{margin:'20px 20px 0 0'},onClick:function onClick(e){return deletePost(e,post.id);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"post-actions\"},/*#__PURE__*/React.createElement(\"p\",{className:\"text-secondary\"},/*#__PURE__*/React.createElement(Link,{to:\"/post/\".concat(post.id,\"/comment\"),className:\"text-secondary\",onClick:function onClick(e){return e.stopPropagation();}},/*#__PURE__*/React.createElement(\"i\",{class:\"far fa-comment\"})),post.comments.length,post.likes.map(function(like){return like.profile.id;}).includes(myprofile.id)?/*#__PURE__*/React.createElement(\"i\",{class:\"fas fa-heart\",\"data-postid\":post.id,onClick:likeUnlikePost}):/*#__PURE__*/React.createElement(\"i\",{class:\"far fa-heart\",\"data-postid\":post.id,onClick:likeUnlikePost}),/*#__PURE__*/React.createElement(\"p\",{className:\"post-likes-number\",onClick:function onClick(e){e.stopPropagation();setLikesModal({isOpen:true,likes:post.likes});}},post.likes.length))));}):/*#__PURE__*/React.createElement(\"div\",{className:\"no-posts-container\"},profile.id===myprofile.id?/*#__PURE__*/React.createElement(\"h3\",{style:{marginTop:'50px'}},\"Voc\\xEA n\\xE3o tem posts\"):/*#__PURE__*/React.createElement(\"h3\",{style:{marginTop:'50px'}},profile.first_name,\" n\\xE3o tem posts\"))):/*#__PURE__*/React.createElement(\"div\",{className:\"posts-loader-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"loader\"}))));}","map":{"version":3,"sources":["C:/Users/felip/CodeProjects/Web/Napker/frontend/src/pages/profile-components/posts.js"],"names":["React","useEffect","useState","Link","LikesModal","SERVER_URL","csrftoken","Posts","props","myprofile","setMyProfile","isOpen","likes","likesModal","setLikesModal","profile","fetch","then","response","json","data","likeUnlikePost","e","stopPropagation","likeBtn","target","classList","contains","remove","add","dataset","postid","console","log","fetchProfile","hideLikesModal","deletePost","postId","el","document","querySelector","window","confirm","style","animationPlayState","addEventListener","method","headers","posts","length","map","post","id","location","href","photo","marginRight","first_name","last_name","user","username","created","split","reverse","join","textAlign","content","image","margin","comments","like","includes","marginTop"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport LikesModal from '../../components/LikesModal'\r\nimport { SERVER_URL } from '../../settings'\r\nimport { csrftoken } from '../../utils'\r\n\r\nexport default function Posts(props) {\r\n    const [myprofile, setMyProfile] = useState(null)\r\n    const [likesModal, setLikesModal] = useState({ isOpen: false, likes: null })\r\n    const profile = props.profile\r\n\r\n    useEffect(() => {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => setMyProfile(data))\r\n    }, [])\r\n\r\n    const likeUnlikePost = e => {\r\n        e.stopPropagation()\r\n        const likeBtn = e.target\r\n        if (likeBtn.classList.contains('fas')) {\r\n            likeBtn.classList.remove('fas') //border heart\r\n            likeBtn.classList.add('far')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/unlike-post/${likeBtn.dataset.postid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    props.fetchProfile()\r\n                })\r\n        } else {\r\n            likeBtn.classList.remove('far') //border heart\r\n            likeBtn.classList.add('fas')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/like-post/${likeBtn.dataset.postid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    props.fetchProfile()\r\n                })\r\n        }\r\n    }\r\n\r\n    const hideLikesModal = () => {\r\n        setLikesModal({\r\n            isOpen: false,\r\n            likes: null\r\n        })\r\n    }\r\n\r\n    const deletePost = (e, postId) => {\r\n        e.stopPropagation()\r\n        const el = document.querySelector(`#profile-post-${postId}`)\r\n        if (window.confirm('Tem certeza que deseja apagar o post?\\nEssa ação é irreversível.')) {\r\n            el.style.animationPlayState = 'running'\r\n            el.addEventListener('animationend', () => {\r\n                props.fetchProfile()\r\n            })\r\n            fetch(`${SERVER_URL}/post-api/delete-post/${postId}`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-type': 'application/json',\r\n                    'X-CSRFToken': csrftoken,\r\n                }\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                })\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <LikesModal\r\n                isOpen={likesModal.isOpen}\r\n                likes={likesModal.likes}\r\n                hideModal={hideLikesModal}\r\n            />\r\n            <div className=\"post-list\">\r\n                {profile && myprofile ?\r\n                    <>\r\n                        {profile.posts.length ? profile.posts.map(post => {\r\n                            return (\r\n                                <li\r\n                                    className=\"post-container post-list-item\"\r\n                                    key={post.id}\r\n                                    id={`profile-post-${post.id}`}\r\n                                    onClick={() => window.location.href = `/post/${post.id}`}\r\n                                >\r\n                                    <div className=\"d-flex justify-content-between\">\r\n                                        <div className=\"post-row\">\r\n                                            <div className=\"post-col\">\r\n                                                <img src={`${SERVER_URL}${profile.photo}`}\r\n                                                    className=\"profile-img-med\"\r\n                                                />\r\n                                            </div>\r\n                                            <div className=\"post-col\">\r\n                                                <div className=\"post-author-data-wrapper\">\r\n                                                    <strong style={{ marginRight: '5px' }}>\r\n                                                        {profile.first_name} {profile.last_name}\r\n                                                    </strong>\r\n                                                    <p className=\"text-secondary d-inline-block\">\r\n                                                        @{profile.user.username} • {post.created.split('-').reverse().join('/')}\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div style={{ textAlign: 'start' }}>\r\n                                                    {post.content}\r\n                                                </div>\r\n                                                {post.image &&\r\n                                                    <img src={`${SERVER_URL}${post.image}`} className=\"post-img\" />\r\n                                                }\r\n                                            </div>\r\n                                        </div>\r\n                                        {profile.id == myprofile.id &&\r\n                                            <i\r\n                                                className=\"far fa-trash-alt trash-icon text-secondary\"\r\n                                                style={{ margin: '20px 20px 0 0' }}\r\n                                                onClick={e => deletePost(e, post.id)}\r\n                                            />}\r\n                                    </div>\r\n                                    <div className=\"post-actions\">\r\n                                        <p className=\"text-secondary\">\r\n                                            <Link\r\n                                                to={`/post/${post.id}/comment`}\r\n                                                className=\"text-secondary\"\r\n                                                onClick={e => e.stopPropagation()}\r\n                                            >\r\n                                                <i class=\"far fa-comment\" />\r\n                                            </Link>{post.comments.length}\r\n                                            {post.likes.map(like => like.profile.id).includes(myprofile.id) ?\r\n                                                <i class=\"fas fa-heart\"\r\n                                                    data-postid={post.id}\r\n                                                    onClick={likeUnlikePost}\r\n                                                />\r\n                                                :\r\n                                                <i class=\"far fa-heart\"\r\n                                                    data-postid={post.id}\r\n                                                    onClick={likeUnlikePost}\r\n                                                />}\r\n                                            <p className=\"post-likes-number\"\r\n                                                onClick={e => {\r\n                                                    e.stopPropagation()\r\n                                                    setLikesModal({ isOpen: true, likes: post.likes })\r\n                                                }\r\n                                                }\r\n                                            >\r\n                                                {post.likes.length}\r\n                                            </p>\r\n                                        </p>\r\n                                    </div>\r\n                                </li>\r\n                            )\r\n                        }) :\r\n                            <div className=\"no-posts-container\">\r\n                                {profile.id === myprofile.id ?\r\n                                    <h3 style={{ marginTop: '50px' }}>Você não tem posts</h3>\r\n                                    :\r\n                                    <h3 style={{ marginTop: '50px' }}>{profile.first_name} não tem posts</h3>\r\n                                }\r\n                            </div>\r\n                        }\r\n                    </>\r\n                    :\r\n                    <div className=\"posts-loader-container\" >\r\n                        <div className=\"loader\" />\r\n                    </div>\r\n                }\r\n            </div>\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}