{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\src\\\\pages\\\\profile\\\\Profile.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { SERVER_URL } from '../../config/settings';\nimport { csrftoken } from '../../config/utils';\nimport Header from '../../components/fixed/header';\nimport Posts from './components/Posts';\nimport Interests from './components/interests/Interests';\nimport ProfileData from './components/ProfileData';\nimport BottomMenu from '../../components/fixed/bottom-menu/BottomMenu';\n\nclass Profile extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchProfile = () => {\n      fetch(`${SERVER_URL}/profile-api/user/${this.slug}`).then(response => response.json()).then(data => this.setState({\n        profile: data\n      }));\n      fetch(`${SERVER_URL}/profile-api/myprofile`).then(response => response.json()).then(data => this.setState({\n        myProfile: data\n      }));\n    };\n\n    this.sendFriendRequest = pk => {\n      fetch(`${SERVER_URL}/profile-api/send-friend-request`, {\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json',\n          'X-CSRFToken': csrftoken\n        },\n        body: JSON.stringify(pk)\n      }).then(response => response.json()).then(data => console.log(data));\n    };\n\n    this.cancelFriendRequest = pk => {\n      fetch(`${SERVER_URL}/profile-api/cancel-friend-request`, {\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json',\n          'X-CSRFToken': csrftoken\n        },\n        body: JSON.stringify(pk)\n      }).then(response => response.json()).then(data => console.log(data));\n    };\n\n    this.removeFromFriends = pk => {\n      fetch(`${SERVER_URL}/profile-api/remove-from-friends`, {\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json',\n          'X-CSRFToken': csrftoken\n        },\n        body: JSON.stringify(pk)\n      }).then(response => response.json()).then(data => console.log(data));\n    };\n\n    this.acceptFriendRequest = pk => {\n      fetch(`${SERVER_URL}/profile-api/reply-friend-request`, {\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json',\n          'X-CSRFToken': csrftoken\n        },\n        body: JSON.stringify({\n          'senderid': pk,\n          'reply': 'accept'\n        })\n      }).then(response => response.json()).then(data => {\n        console.log(data);\n        this.props.updateNotificationsNumber();\n      });\n    };\n\n    this.handleRelationshipUpdate = e => {\n      const btn = e.target;\n\n      if (btn.innerHTML === 'Solicitar') {\n        this.sendFriendRequest(btn.dataset.pk);\n        btn.innerHTML = 'Solicitado';\n        btn.className = 'btn btn-primary';\n      } else if (btn.innerHTML === 'Solicitado') {\n        this.cancelFriendRequest(btn.dataset.pk);\n        btn.innerHTML = 'Solicitar';\n        btn.className = 'btn btn-secondary';\n      } else if (btn.innerHTML === 'Amigos' || btn.innerHTML === 'Remover') {\n        if (window.confirm(`Remover @${this.state.profile.user.username} dos amigos?`)) {\n          this.removeFromFriends(btn.dataset.pk);\n          btn.innerHTML = 'Solicitar';\n          btn.className = 'btn btn-secondary';\n        }\n      } else if (btn.innerHTML === 'Aceitar') {\n        this.acceptFriendRequest(btn.dataset.pk);\n        btn.innerHTML = 'Amigos';\n        btn.className = 'btn btn-primary';\n      }\n    };\n\n    this.blockUnblockUser = () => {\n      if (this.state.myProfile.blocked_users.map(u => u.id).includes(this.state.profile.user.id)) {\n        if (window.confirm(`Tem certeza que deseja desbloquear ${this.state.profile.first_name} ?`)) {\n          fetch(`${SERVER_URL}/profile-api/unblock-user`, {\n            method: 'POST',\n            headers: {\n              'Content-type': 'application/json',\n              'X-CSRFToken': csrftoken\n            },\n            body: JSON.stringify(this.state.profile)\n          }).then(response => response.json()).then(data => {\n            console.log(data);\n            this.setState({\n              alertMessage: `Você desbloqueou @${this.state.profile.user.username}.`\n            });\n            this.fetchProfile();\n          });\n        }\n      } else {\n        if (window.confirm(`Tem certeza que deseja bloquear ${this.state.profile.first_name} ?`)) {\n          fetch(`${SERVER_URL}/profile-api/block-user`, {\n            method: 'POST',\n            headers: {\n              'Content-type': 'application/json',\n              'X-CSRFToken': csrftoken\n            },\n            body: JSON.stringify(this.state.profile)\n          }).then(response => response.json()).then(data => {\n            console.log(data);\n            this.setState({\n              alertMessage: `Você bloqueou @${this.state.profile.user.username}.\n                         ${this.state.profile.first_name} não conseguirá mais ver o seu perfil ou te enviar mensagens.`\n            });\n            this.fetchProfile();\n          });\n        }\n      }\n\n      this.fetchProfile();\n      document.querySelector('#view-more-select').style.display = 'none';\n    };\n\n    this.openCloseExtraOptions = () => {\n      const el = document.querySelector('#view-more-select');\n      const style = el.style;\n      if (!style.display) style.display = 'none';\n\n      if (style.display === 'none') {\n        document.querySelector('#view-more-icon').classList.add('view-more-icon-active');\n        style.display = 'flex';\n      } else {\n        document.querySelector('#view-more-icon').classList.remove('view-more-icon-active');\n        style.display = 'none';\n      }\n    };\n\n    this.switchPage = e => {\n      document.querySelectorAll('.profile-page-menu-item-active').forEach(el => {\n        el.classList.remove('profile-page-menu-item-active');\n      });\n      e.target.classList.add('profile-page-menu-item-active');\n\n      if (e.target.id === 'profile-posts-page-menu-item') {\n        this.setState({\n          currentPageIsPosts: true\n        });\n      } else if (e.target.id === 'profile-interests-page-menu-item') {\n        this.setState({\n          currentPageIsPosts: false\n        });\n      }\n    };\n\n    this.state = {\n      myProfile: null,\n      profile: null,\n      alertMessage: null,\n      relationshipButtonLabel: '',\n      currentPageIsPosts: true\n    };\n    this.slug = this.props.match.params.slug;\n  }\n\n  componentWillMount() {\n    this.fetchProfile();\n  }\n\n  componentDidMount() {\n    fetch(`${SERVER_URL}/profile-api/relationship/${this.slug}`).then(response => response.json()).then(data => {\n      let label;\n\n      switch (data.relationship) {\n        case 'friends':\n          label = 'Amigos';\n          break;\n\n        case 'invite-sent':\n          label = 'Solicitado';\n          break;\n\n        case 'invite-received':\n          label = 'Aceitar';\n          break;\n\n        case 'none':\n          label = 'Solicitar';\n      }\n\n      this.setState({\n        relationshipButtonLabel: label\n      });\n    });\n  }\n\n  componentDidUpdate() {\n    let btn = document.querySelector('#profile-page-relationship-btn');\n\n    if (btn) {\n      switch (btn.innerHTML) {\n        case 'Amigos':\n          btn.classList.add('btn-primary');\n\n          btn.onmouseenter = () => {\n            if (btn.innerHTML === 'Amigos') btn.innerHTML = 'Remover';\n          };\n\n          btn.onmouseout = () => {\n            if (btn.innerHTML === 'Remover') btn.innerHTML = 'Amigos';\n          };\n\n          btn.classList.add('friend-btn');\n          btn.classList.remove('d-none');\n          break;\n\n        case 'Solicitado':\n          btn.classList.add('btn-primary');\n          btn.classList.remove('d-none');\n          break;\n\n        case 'Aceitar':\n          btn.classList.add('btn-primary');\n          btn.classList.remove('d-none');\n          break;\n\n        case 'Solicitar':\n          btn.classList.add('btn-secondary');\n          btn.classList.remove('d-none');\n      }\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n      page: this.state.profile ? `${this.state.profile.first_name} ${this.state.profile.last_name}` : 'Perfil',\n      backArrow: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 17\n      }\n    }), this.state.myProfile !== null && this.state.profile !== null ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 21\n      }\n    }, this.state.profile.blocked_users.map(u => u.id).includes(this.state.myProfile.user.id) ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user-blocked-me-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 33\n      }\n    }, \"O usu\\xE1rio te bloqueou\")) : /*#__PURE__*/React.createElement(React.Fragment, null, this.state.alertMessage && /*#__PURE__*/React.createElement(\"div\", {\n      class: \"alert alert-success profile-page-alert-success\",\n      role: \"alert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 37\n      }\n    }, this.state.alertMessage), /*#__PURE__*/React.createElement(ProfileData, {\n      profile: this.state.profile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-btn-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-ellipsis-h btn btn-secondary mr-2\",\n      id: \"view-more-icon\",\n      onClick: this.openCloseExtraOptions,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"view-more-select profile-view-more-select\",\n      id: \"view-more-select\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: `/mensagens/${this.state.profile.slug}`,\n      style: {\n        color: '#000',\n        textDecoration: 'none'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 45\n      }\n    }, !this.state.myProfile.blocked_users.map(u => u.id).includes(this.state.profile.user.id) && /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-envelope text-secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 57\n      }\n    }), \"Enviar mensagem\")), /*#__PURE__*/React.createElement(\"li\", {\n      onClick: this.blockUnblockUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-user-lock text-secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 49\n      }\n    }), this.state.myProfile.blocked_users.map(u => u.id).includes(this.state.profile.user.id) ? 'Desbloquear' : 'Bloquear')), !this.state.myProfile.blocked_users.map(u => u.id).includes(this.state.profile.user.id) && /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn d-none\",\n      id: \"profile-page-relationship-btn\",\n      \"data-pk\": this.state.profile.id,\n      onClick: this.handleRelationshipUpdate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 45\n      }\n    }, this.state.relationshipButtonLabel))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-page-menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-page-menu-item profile-page-menu-item-active\",\n      id: \"profile-posts-page-menu-item\",\n      onClick: this.switchPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 37\n      }\n    }, \"Posts (\", this.state.profile.posts.length, \")\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-page-menu-item\",\n      id: \"profile-interests-page-menu-item\",\n      onClick: this.switchPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 37\n      }\n    }, \"Interesses (\", this.state.profile.interests.filter(i => i.public).length, \")\")), this.state.currentPageIsPosts ? /*#__PURE__*/React.createElement(Posts, {\n      profile: this.state.profile,\n      fetchProfile: this.fetchProfile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 37\n      }\n    }) : /*#__PURE__*/React.createElement(Interests, {\n      profile: this.state.profile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 37\n      }\n    }))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-page-loader-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(BottomMenu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default Profile;","map":{"version":3,"sources":["C:/Users/felip/CodeProjects/Web/Napker/frontend/src/pages/profile/Profile.js"],"names":["React","Link","SERVER_URL","csrftoken","Header","Posts","Interests","ProfileData","BottomMenu","Profile","Component","constructor","props","fetchProfile","fetch","slug","then","response","json","data","setState","profile","myProfile","sendFriendRequest","pk","method","headers","body","JSON","stringify","console","log","cancelFriendRequest","removeFromFriends","acceptFriendRequest","updateNotificationsNumber","handleRelationshipUpdate","e","btn","target","innerHTML","dataset","className","window","confirm","state","user","username","blockUnblockUser","blocked_users","map","u","id","includes","first_name","alertMessage","document","querySelector","style","display","openCloseExtraOptions","el","classList","add","remove","switchPage","querySelectorAll","forEach","currentPageIsPosts","relationshipButtonLabel","match","params","componentWillMount","componentDidMount","label","relationship","componentDidUpdate","onmouseenter","onmouseout","render","last_name","color","textDecoration","posts","length","interests","filter","i","public"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,QAAqB,kBAArB;AAEA,SAASC,UAAT,QAA2B,uBAA3B;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,OAAOC,MAAP,MAAmB,+BAAnB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,SAAP,MAAsB,kCAAtB;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,OAAOC,UAAP,MAAuB,+CAAvB;;AAEA,MAAMC,OAAN,SAAsBT,KAAK,CAACU,SAA5B,CAAsC;AAClCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAsEnBC,YAtEmB,GAsEJ,MAAM;AACjBC,MAAAA,KAAK,CAAE,GAAEZ,UAAW,qBAAoB,KAAKa,IAAK,EAA7C,CAAL,CACKC,IADL,CACUC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADtB,EAEKF,IAFL,CAEUG,IAAI,IAAI,KAAKC,QAAL,CAAc;AACxBC,QAAAA,OAAO,EAAEF;AADe,OAAd,CAFlB;AAKAL,MAAAA,KAAK,CAAE,GAAEZ,UAAW,wBAAf,CAAL,CACKc,IADL,CACUC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADtB,EAEKF,IAFL,CAEUG,IAAI,IAAI,KAAKC,QAAL,CAAc;AAAEE,QAAAA,SAAS,EAAEH;AAAb,OAAd,CAFlB;AAGH,KA/EkB;;AAAA,SAiFnBI,iBAjFmB,GAiFCC,EAAE,IAAI;AACtBV,MAAAA,KAAK,CAAE,GAAEZ,UAAW,kCAAf,EAAkD;AACnDuB,QAAAA,MAAM,EAAE,MAD2C;AAEnDC,QAAAA,OAAO,EAAE;AACL,0BAAgB,kBADX;AAEL,yBAAevB;AAFV,SAF0C;AAMnDwB,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeL,EAAf;AAN6C,OAAlD,CAAL,CAQKR,IARL,CAQUC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EARtB,EASKF,IATL,CASUG,IAAI,IAAIW,OAAO,CAACC,GAAR,CAAYZ,IAAZ,CATlB;AAUH,KA5FkB;;AAAA,SA8FnBa,mBA9FmB,GA8FGR,EAAE,IAAI;AACxBV,MAAAA,KAAK,CAAE,GAAEZ,UAAW,oCAAf,EAAoD;AACrDuB,QAAAA,MAAM,EAAE,MAD6C;AAErDC,QAAAA,OAAO,EAAE;AACL,0BAAgB,kBADX;AAEL,yBAAevB;AAFV,SAF4C;AAMrDwB,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeL,EAAf;AAN+C,OAApD,CAAL,CAQKR,IARL,CAQUC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EARtB,EASKF,IATL,CASUG,IAAI,IAAIW,OAAO,CAACC,GAAR,CAAYZ,IAAZ,CATlB;AAUH,KAzGkB;;AAAA,SA2GnBc,iBA3GmB,GA2GCT,EAAE,IAAI;AACtBV,MAAAA,KAAK,CAAE,GAAEZ,UAAW,kCAAf,EAAkD;AACnDuB,QAAAA,MAAM,EAAE,MAD2C;AAEnDC,QAAAA,OAAO,EAAE;AACL,0BAAgB,kBADX;AAEL,yBAAevB;AAFV,SAF0C;AAMnDwB,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeL,EAAf;AAN6C,OAAlD,CAAL,CAQKR,IARL,CAQUC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EARtB,EASKF,IATL,CASUG,IAAI,IAAIW,OAAO,CAACC,GAAR,CAAYZ,IAAZ,CATlB;AAUH,KAtHkB;;AAAA,SAwHnBe,mBAxHmB,GAwHGV,EAAE,IAAI;AACxBV,MAAAA,KAAK,CAAE,GAAEZ,UAAW,mCAAf,EAAmD;AACpDuB,QAAAA,MAAM,EAAE,MAD4C;AAEpDC,QAAAA,OAAO,EAAE;AACL,0BAAgB,kBADX;AAEL,yBAAevB;AAFV,SAF2C;AAMpDwB,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjB,sBAAYL,EADK;AAEjB,mBAAS;AAFQ,SAAf;AAN8C,OAAnD,CAAL,CAWKR,IAXL,CAWUC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAXtB,EAYKF,IAZL,CAYUG,IAAI,IAAI;AACVW,QAAAA,OAAO,CAACC,GAAR,CAAYZ,IAAZ;AACA,aAAKP,KAAL,CAAWuB,yBAAX;AACH,OAfL;AAgBH,KAzIkB;;AAAA,SA2InBC,wBA3ImB,GA2IQC,CAAC,IAAI;AAC5B,YAAMC,GAAG,GAAGD,CAAC,CAACE,MAAd;;AACA,UAAID,GAAG,CAACE,SAAJ,KAAkB,WAAtB,EAAmC;AAC/B,aAAKjB,iBAAL,CAAuBe,GAAG,CAACG,OAAJ,CAAYjB,EAAnC;AACAc,QAAAA,GAAG,CAACE,SAAJ,GAAgB,YAAhB;AACAF,QAAAA,GAAG,CAACI,SAAJ,GAAgB,iBAAhB;AACH,OAJD,MAIO,IAAIJ,GAAG,CAACE,SAAJ,KAAkB,YAAtB,EAAoC;AACvC,aAAKR,mBAAL,CAAyBM,GAAG,CAACG,OAAJ,CAAYjB,EAArC;AACAc,QAAAA,GAAG,CAACE,SAAJ,GAAgB,WAAhB;AACAF,QAAAA,GAAG,CAACI,SAAJ,GAAgB,mBAAhB;AACH,OAJM,MAIA,IAAIJ,GAAG,CAACE,SAAJ,KAAkB,QAAlB,IAA8BF,GAAG,CAACE,SAAJ,KAAkB,SAApD,EAA+D;AAClE,YAAIG,MAAM,CAACC,OAAP,CAAgB,YAAW,KAAKC,KAAL,CAAWxB,OAAX,CAAmByB,IAAnB,CAAwBC,QAAS,cAA5D,CAAJ,EAAgF;AAC5E,eAAKd,iBAAL,CAAuBK,GAAG,CAACG,OAAJ,CAAYjB,EAAnC;AACAc,UAAAA,GAAG,CAACE,SAAJ,GAAgB,WAAhB;AACAF,UAAAA,GAAG,CAACI,SAAJ,GAAgB,mBAAhB;AACH;AACJ,OANM,MAMA,IAAIJ,GAAG,CAACE,SAAJ,KAAkB,SAAtB,EAAiC;AACpC,aAAKN,mBAAL,CAAyBI,GAAG,CAACG,OAAJ,CAAYjB,EAArC;AACAc,QAAAA,GAAG,CAACE,SAAJ,GAAgB,QAAhB;AACAF,QAAAA,GAAG,CAACI,SAAJ,GAAgB,iBAAhB;AACH;AACJ,KAhKkB;;AAAA,SAkKnBM,gBAlKmB,GAkKA,MAAM;AACrB,UAAI,KAAKH,KAAL,CAAWvB,SAAX,CAAqB2B,aAArB,CAAmCC,GAAnC,CAAuCC,CAAC,IAAIA,CAAC,CAACC,EAA9C,EAAkDC,QAAlD,CAA2D,KAAKR,KAAL,CAAWxB,OAAX,CAAmByB,IAAnB,CAAwBM,EAAnF,CAAJ,EAA4F;AACxF,YAAIT,MAAM,CAACC,OAAP,CAAgB,sCAAqC,KAAKC,KAAL,CAAWxB,OAAX,CAAmBiC,UAAW,IAAnF,CAAJ,EAA6F;AACzFxC,UAAAA,KAAK,CAAE,GAAEZ,UAAW,2BAAf,EAA2C;AAC5CuB,YAAAA,MAAM,EAAE,MADoC;AAE5CC,YAAAA,OAAO,EAAE;AACL,8BAAgB,kBADX;AAEL,6BAAevB;AAFV,aAFmC;AAM5CwB,YAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe,KAAKgB,KAAL,CAAWxB,OAA1B;AANsC,WAA3C,CAAL,CAQKL,IARL,CAQUC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EARtB,EASKF,IATL,CASUG,IAAI,IAAI;AACVW,YAAAA,OAAO,CAACC,GAAR,CAAYZ,IAAZ;AACA,iBAAKC,QAAL,CAAc;AAAEmC,cAAAA,YAAY,EAAG,qBAAoB,KAAKV,KAAL,CAAWxB,OAAX,CAAmByB,IAAnB,CAAwBC,QAAS;AAAtE,aAAd;AACA,iBAAKlC,YAAL;AACH,WAbL;AAcH;AACJ,OAjBD,MAiBO;AACH,YAAI8B,MAAM,CAACC,OAAP,CAAgB,mCAAkC,KAAKC,KAAL,CAAWxB,OAAX,CAAmBiC,UAAW,IAAhF,CAAJ,EAA0F;AACtFxC,UAAAA,KAAK,CAAE,GAAEZ,UAAW,yBAAf,EAAyC;AAC1CuB,YAAAA,MAAM,EAAE,MADkC;AAE1CC,YAAAA,OAAO,EAAE;AACL,8BAAgB,kBADX;AAEL,6BAAevB;AAFV,aAFiC;AAM1CwB,YAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe,KAAKgB,KAAL,CAAWxB,OAA1B;AANoC,WAAzC,CAAL,CAQKL,IARL,CAQUC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EARtB,EASKF,IATL,CASUG,IAAI,IAAI;AACVW,YAAAA,OAAO,CAACC,GAAR,CAAYZ,IAAZ;AACA,iBAAKC,QAAL,CAAc;AACVmC,cAAAA,YAAY,EAAG,kBAAiB,KAAKV,KAAL,CAAWxB,OAAX,CAAmByB,IAAnB,CAAwBC,QAAS;AAC7F,2BAA2B,KAAKF,KAAL,CAAWxB,OAAX,CAAmBiC,UAAW;AAFnB,aAAd;AAIA,iBAAKzC,YAAL;AACH,WAhBL;AAiBH;AACJ;;AACD,WAAKA,YAAL;AACA2C,MAAAA,QAAQ,CAACC,aAAT,CAAuB,mBAAvB,EAA4CC,KAA5C,CAAkDC,OAAlD,GAA4D,MAA5D;AACH,KA3MkB;;AAAA,SA6MnBC,qBA7MmB,GA6MK,MAAM;AAC1B,YAAMC,EAAE,GAAGL,QAAQ,CAACC,aAAT,CAAuB,mBAAvB,CAAX;AACA,YAAMC,KAAK,GAAGG,EAAE,CAACH,KAAjB;AACA,UAAI,CAACA,KAAK,CAACC,OAAX,EAAoBD,KAAK,CAACC,OAAN,GAAgB,MAAhB;;AACpB,UAAID,KAAK,CAACC,OAAN,KAAkB,MAAtB,EAA8B;AAC1BH,QAAAA,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,EAA0CK,SAA1C,CAAoDC,GAApD,CAAwD,uBAAxD;AACAL,QAAAA,KAAK,CAACC,OAAN,GAAgB,MAAhB;AACH,OAHD,MAGO;AACHH,QAAAA,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,EAA0CK,SAA1C,CAAoDE,MAApD,CAA2D,uBAA3D;AACAN,QAAAA,KAAK,CAACC,OAAN,GAAgB,MAAhB;AACH;AACJ,KAxNkB;;AAAA,SA0NnBM,UA1NmB,GA0NN5B,CAAC,IAAI;AACdmB,MAAAA,QAAQ,CAACU,gBAAT,CAA0B,gCAA1B,EAA4DC,OAA5D,CAAoEN,EAAE,IAAI;AACtEA,QAAAA,EAAE,CAACC,SAAH,CAAaE,MAAb,CAAoB,+BAApB;AACH,OAFD;AAGA3B,MAAAA,CAAC,CAACE,MAAF,CAASuB,SAAT,CAAmBC,GAAnB,CAAuB,+BAAvB;;AACA,UAAI1B,CAAC,CAACE,MAAF,CAASa,EAAT,KAAgB,8BAApB,EAAoD;AAChD,aAAKhC,QAAL,CAAc;AAAEgD,UAAAA,kBAAkB,EAAE;AAAtB,SAAd;AACH,OAFD,MAEO,IAAI/B,CAAC,CAACE,MAAF,CAASa,EAAT,KAAgB,kCAApB,EAAwD;AAC3D,aAAKhC,QAAL,CAAc;AAAEgD,UAAAA,kBAAkB,EAAE;AAAtB,SAAd;AACH;AACJ,KApOkB;;AAEf,SAAKvB,KAAL,GAAa;AACTvB,MAAAA,SAAS,EAAE,IADF;AAETD,MAAAA,OAAO,EAAE,IAFA;AAGTkC,MAAAA,YAAY,EAAE,IAHL;AAITc,MAAAA,uBAAuB,EAAE,EAJhB;AAKTD,MAAAA,kBAAkB,EAAE;AALX,KAAb;AAOA,SAAKrD,IAAL,GAAY,KAAKH,KAAL,CAAW0D,KAAX,CAAiBC,MAAjB,CAAwBxD,IAApC;AACH;;AAEDyD,EAAAA,kBAAkB,GAAG;AACjB,SAAK3D,YAAL;AACH;;AAED4D,EAAAA,iBAAiB,GAAG;AAChB3D,IAAAA,KAAK,CAAE,GAAEZ,UAAW,6BAA4B,KAAKa,IAAK,EAArD,CAAL,CACKC,IADL,CACUC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADtB,EAEKF,IAFL,CAEUG,IAAI,IAAI;AACV,UAAIuD,KAAJ;;AACA,cAAQvD,IAAI,CAACwD,YAAb;AACI,aAAK,SAAL;AACID,UAAAA,KAAK,GAAG,QAAR;AACA;;AACJ,aAAK,aAAL;AACIA,UAAAA,KAAK,GAAG,YAAR;AACA;;AACJ,aAAK,iBAAL;AACIA,UAAAA,KAAK,GAAG,SAAR;AACA;;AACJ,aAAK,MAAL;AACIA,UAAAA,KAAK,GAAG,WAAR;AAXR;;AAaA,WAAKtD,QAAL,CAAc;AACViD,QAAAA,uBAAuB,EAAEK;AADf,OAAd;AAGH,KApBL;AAqBH;;AAEDE,EAAAA,kBAAkB,GAAG;AACjB,QAAItC,GAAG,GAAGkB,QAAQ,CAACC,aAAT,CAAuB,gCAAvB,CAAV;;AACA,QAAInB,GAAJ,EAAS;AACL,cAAQA,GAAG,CAACE,SAAZ;AACI,aAAK,QAAL;AACIF,UAAAA,GAAG,CAACwB,SAAJ,CAAcC,GAAd,CAAkB,aAAlB;;AACAzB,UAAAA,GAAG,CAACuC,YAAJ,GAAmB,MAAM;AACrB,gBAAIvC,GAAG,CAACE,SAAJ,KAAkB,QAAtB,EAAgCF,GAAG,CAACE,SAAJ,GAAgB,SAAhB;AACnC,WAFD;;AAGAF,UAAAA,GAAG,CAACwC,UAAJ,GAAiB,MAAM;AACnB,gBAAIxC,GAAG,CAACE,SAAJ,KAAkB,SAAtB,EAAiCF,GAAG,CAACE,SAAJ,GAAgB,QAAhB;AACpC,WAFD;;AAGAF,UAAAA,GAAG,CAACwB,SAAJ,CAAcC,GAAd,CAAkB,YAAlB;AACAzB,UAAAA,GAAG,CAACwB,SAAJ,CAAcE,MAAd,CAAqB,QAArB;AACA;;AACJ,aAAK,YAAL;AACI1B,UAAAA,GAAG,CAACwB,SAAJ,CAAcC,GAAd,CAAkB,aAAlB;AACAzB,UAAAA,GAAG,CAACwB,SAAJ,CAAcE,MAAd,CAAqB,QAArB;AACA;;AACJ,aAAK,SAAL;AACI1B,UAAAA,GAAG,CAACwB,SAAJ,CAAcC,GAAd,CAAkB,aAAlB;AACAzB,UAAAA,GAAG,CAACwB,SAAJ,CAAcE,MAAd,CAAqB,QAArB;AACA;;AACJ,aAAK,WAAL;AACI1B,UAAAA,GAAG,CAACwB,SAAJ,CAAcC,GAAd,CAAkB,eAAlB;AACAzB,UAAAA,GAAG,CAACwB,SAAJ,CAAcE,MAAd,CAAqB,QAArB;AAtBR;AAwBH;AACJ;;AAkKDe,EAAAA,MAAM,GAAG;AACL,wBACI,uDACI,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAE,KAAKlC,KAAL,CAAWxB,OAAX,GAAsB,GAAE,KAAKwB,KAAL,CAAWxB,OAAX,CAAmBiC,UAAW,IAAG,KAAKT,KAAL,CAAWxB,OAAX,CAAmB2D,SAAU,EAAtF,GAA0F,QAAxG;AACI,MAAA,SAAS,EAAE,IADf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAIK,KAAKnC,KAAL,CAAWvB,SAAX,KAAyB,IAAzB,IAAiC,KAAKuB,KAAL,CAAWxB,OAAX,KAAuB,IAAxD,gBACG;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKwB,KAAL,CAAWxB,OAAX,CAAmB4B,aAAnB,CAAiCC,GAAjC,CAAqCC,CAAC,IAAIA,CAAC,CAACC,EAA5C,EAAgDC,QAAhD,CAAyD,KAAKR,KAAL,CAAWvB,SAAX,CAAqBwB,IAArB,CAA0BM,EAAnF,iBACG;AAAK,MAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADJ,CADH,gBAKG,0CACK,KAAKP,KAAL,CAAWU,YAAX,iBACG;AAAK,MAAA,KAAK,EAAC,gDAAX;AAA4D,MAAA,IAAI,EAAC,OAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKV,KAAL,CAAWU,YADhB,CAFR,eAMI,oBAAC,WAAD;AAAa,MAAA,OAAO,EAAE,KAAKV,KAAL,CAAWxB,OAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AACI,MAAA,SAAS,EAAC,0CADd;AAEI,MAAA,EAAE,EAAC,gBAFP;AAGI,MAAA,OAAO,EAAE,KAAKuC,qBAHlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAMI;AAAK,MAAA,SAAS,EAAC,2CAAf;AAA2D,MAAA,EAAE,EAAC,kBAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAG,cAAa,KAAKf,KAAL,CAAWxB,OAAX,CAAmBN,IAAK,EAAhD;AAAmD,MAAA,KAAK,EAAE;AAAEkE,QAAAA,KAAK,EAAE,MAAT;AAAiBC,QAAAA,cAAc,EAAE;AAAjC,OAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,CAAC,KAAKrC,KAAL,CAAWvB,SAAX,CAAqB2B,aAArB,CAAmCC,GAAnC,CAAuCC,CAAC,IAAIA,CAAC,CAACC,EAA9C,EAAkDC,QAAlD,CAA2D,KAAKR,KAAL,CAAWxB,OAAX,CAAmByB,IAAnB,CAAwBM,EAAnF,CAAD,iBACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAG,MAAA,KAAK,EAAC,gCAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,oBAFR,CADJ,eASI;AAAI,MAAA,OAAO,EAAE,KAAKJ,gBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAG,MAAA,KAAK,EAAC,iCAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEK,KAAKH,KAAL,CAAWvB,SAAX,CAAqB2B,aAArB,CAAmCC,GAAnC,CAAuCC,CAAC,IAAIA,CAAC,CAACC,EAA9C,EAAkDC,QAAlD,CAA2D,KAAKR,KAAL,CAAWxB,OAAX,CAAmByB,IAAnB,CAAwBM,EAAnF,IACG,aADH,GAGG,UALR,CATJ,CANJ,EAwBK,CAAC,KAAKP,KAAL,CAAWvB,SAAX,CAAqB2B,aAArB,CAAmCC,GAAnC,CAAuCC,CAAC,IAAIA,CAAC,CAACC,EAA9C,EAAkDC,QAAlD,CAA2D,KAAKR,KAAL,CAAWxB,OAAX,CAAmByB,IAAnB,CAAwBM,EAAnF,CAAD,iBACG;AAAQ,MAAA,SAAS,EAAC,YAAlB;AACI,MAAA,EAAE,EAAC,+BADP;AAEI,iBAAS,KAAKP,KAAL,CAAWxB,OAAX,CAAmB+B,EAFhC;AAGI,MAAA,OAAO,EAAE,KAAKhB,wBAHlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIE,KAAKS,KAAL,CAAWwB,uBAJb,CAzBR,CADJ,CANJ,eAwCI;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AACI,MAAA,SAAS,EAAC,sDADd;AAEI,MAAA,EAAE,EAAC,8BAFP;AAGI,MAAA,OAAO,EAAE,KAAKJ,UAHlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKY,KAAKpB,KAAL,CAAWxB,OAAX,CAAmB8D,KAAnB,CAAyBC,MALrC,MADJ,eAQI;AACI,MAAA,SAAS,EAAC,wBADd;AAEI,MAAA,EAAE,EAAC,kCAFP;AAGI,MAAA,OAAO,EAAE,KAAKnB,UAHlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAKiB,KAAKpB,KAAL,CAAWxB,OAAX,CAAmBgE,SAAnB,CAA6BC,MAA7B,CAAoCC,CAAC,IAAIA,CAAC,CAACC,MAA3C,EAAmDJ,MALpE,MARJ,CAxCJ,EAwDK,KAAKvC,KAAL,CAAWuB,kBAAX,gBACG,oBAAC,KAAD;AAAO,MAAA,OAAO,EAAE,KAAKvB,KAAL,CAAWxB,OAA3B;AAAoC,MAAA,YAAY,EAAE,KAAKR,YAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADH,gBAEG,oBAAC,SAAD;AAAW,MAAA,OAAO,EAAE,KAAKgC,KAAL,CAAWxB,OAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA1DR,CANR,CADH,gBAuEG;AAAK,MAAA,SAAS,EAAC,+BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CA3ER,eA+EI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA/EJ,CADJ;AAmFH;;AA3TiC;;AA8TtC,eAAeZ,OAAf","sourcesContent":["import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../../config/settings'\r\nimport { csrftoken } from '../../config/utils'\r\nimport Header from '../../components/fixed/header'\r\nimport Posts from './components/Posts'\r\nimport Interests from './components/interests/Interests'\r\nimport ProfileData from './components/ProfileData'\r\nimport BottomMenu from '../../components/fixed/bottom-menu/BottomMenu'\r\n\r\nclass Profile extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            myProfile: null,\r\n            profile: null,\r\n            alertMessage: null,\r\n            relationshipButtonLabel: '',\r\n            currentPageIsPosts: true,\r\n        }\r\n        this.slug = this.props.match.params.slug\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.fetchProfile()\r\n    }\r\n\r\n    componentDidMount() {\r\n        fetch(`${SERVER_URL}/profile-api/relationship/${this.slug}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                let label\r\n                switch (data.relationship) {\r\n                    case 'friends':\r\n                        label = 'Amigos'\r\n                        break\r\n                    case 'invite-sent':\r\n                        label = 'Solicitado'\r\n                        break\r\n                    case 'invite-received':\r\n                        label = 'Aceitar'\r\n                        break\r\n                    case 'none':\r\n                        label = 'Solicitar'\r\n                }\r\n                this.setState({\r\n                    relationshipButtonLabel: label\r\n                })\r\n            })\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        let btn = document.querySelector('#profile-page-relationship-btn')\r\n        if (btn) {\r\n            switch (btn.innerHTML) {\r\n                case 'Amigos':\r\n                    btn.classList.add('btn-primary')\r\n                    btn.onmouseenter = () => {\r\n                        if (btn.innerHTML === 'Amigos') btn.innerHTML = 'Remover'\r\n                    }\r\n                    btn.onmouseout = () => {\r\n                        if (btn.innerHTML === 'Remover') btn.innerHTML = 'Amigos'\r\n                    }\r\n                    btn.classList.add('friend-btn')\r\n                    btn.classList.remove('d-none')\r\n                    break\r\n                case 'Solicitado':\r\n                    btn.classList.add('btn-primary')\r\n                    btn.classList.remove('d-none')\r\n                    break\r\n                case 'Aceitar':\r\n                    btn.classList.add('btn-primary')\r\n                    btn.classList.remove('d-none')\r\n                    break\r\n                case 'Solicitar':\r\n                    btn.classList.add('btn-secondary')\r\n                    btn.classList.remove('d-none')\r\n            }\r\n        }\r\n    }\r\n\r\n    fetchProfile = () => {\r\n        fetch(`${SERVER_URL}/profile-api/user/${this.slug}`)\r\n            .then(response => response.json())\r\n            .then(data => this.setState({\r\n                profile: data\r\n            }))\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => this.setState({ myProfile: data }))\r\n    }\r\n\r\n    sendFriendRequest = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/send-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(pk)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n    }\r\n\r\n    cancelFriendRequest = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/cancel-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(pk)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n    }\r\n\r\n    removeFromFriends = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/remove-from-friends`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(pk)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n    }\r\n\r\n    acceptFriendRequest = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/reply-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify({\r\n                'senderid': pk,\r\n                'reply': 'accept'\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(data)\r\n                this.props.updateNotificationsNumber()\r\n            })\r\n    }\r\n\r\n    handleRelationshipUpdate = e => {\r\n        const btn = e.target\r\n        if (btn.innerHTML === 'Solicitar') {\r\n            this.sendFriendRequest(btn.dataset.pk)\r\n            btn.innerHTML = 'Solicitado'\r\n            btn.className = 'btn btn-primary'\r\n        } else if (btn.innerHTML === 'Solicitado') {\r\n            this.cancelFriendRequest(btn.dataset.pk)\r\n            btn.innerHTML = 'Solicitar'\r\n            btn.className = 'btn btn-secondary'\r\n        } else if (btn.innerHTML === 'Amigos' || btn.innerHTML === 'Remover') {\r\n            if (window.confirm(`Remover @${this.state.profile.user.username} dos amigos?`)) {\r\n                this.removeFromFriends(btn.dataset.pk)\r\n                btn.innerHTML = 'Solicitar'\r\n                btn.className = 'btn btn-secondary'\r\n            }\r\n        } else if (btn.innerHTML === 'Aceitar') {\r\n            this.acceptFriendRequest(btn.dataset.pk)\r\n            btn.innerHTML = 'Amigos'\r\n            btn.className = 'btn btn-primary'\r\n        }\r\n    }\r\n\r\n    blockUnblockUser = () => {\r\n        if (this.state.myProfile.blocked_users.map(u => u.id).includes(this.state.profile.user.id)) {\r\n            if (window.confirm(`Tem certeza que deseja desbloquear ${this.state.profile.first_name} ?`)) {\r\n                fetch(`${SERVER_URL}/profile-api/unblock-user`, {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-type': 'application/json',\r\n                        'X-CSRFToken': csrftoken,\r\n                    },\r\n                    body: JSON.stringify(this.state.profile)\r\n                })\r\n                    .then(response => response.json())\r\n                    .then(data => {\r\n                        console.log(data)\r\n                        this.setState({ alertMessage: `Você desbloqueou @${this.state.profile.user.username}.` })\r\n                        this.fetchProfile()\r\n                    })\r\n            }\r\n        } else {\r\n            if (window.confirm(`Tem certeza que deseja bloquear ${this.state.profile.first_name} ?`)) {\r\n                fetch(`${SERVER_URL}/profile-api/block-user`, {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-type': 'application/json',\r\n                        'X-CSRFToken': csrftoken,\r\n                    },\r\n                    body: JSON.stringify(this.state.profile)\r\n                })\r\n                    .then(response => response.json())\r\n                    .then(data => {\r\n                        console.log(data)\r\n                        this.setState({\r\n                            alertMessage: `Você bloqueou @${this.state.profile.user.username}.\r\n                         ${this.state.profile.first_name} não conseguirá mais ver o seu perfil ou te enviar mensagens.`\r\n                        })\r\n                        this.fetchProfile()\r\n                    })\r\n            }\r\n        }\r\n        this.fetchProfile()\r\n        document.querySelector('#view-more-select').style.display = 'none'\r\n    }\r\n\r\n    openCloseExtraOptions = () => {\r\n        const el = document.querySelector('#view-more-select')\r\n        const style = el.style\r\n        if (!style.display) style.display = 'none'\r\n        if (style.display === 'none') {\r\n            document.querySelector('#view-more-icon').classList.add('view-more-icon-active')\r\n            style.display = 'flex'\r\n        } else {\r\n            document.querySelector('#view-more-icon').classList.remove('view-more-icon-active')\r\n            style.display = 'none'\r\n        }\r\n    }\r\n\r\n    switchPage = e => {\r\n        document.querySelectorAll('.profile-page-menu-item-active').forEach(el => {\r\n            el.classList.remove('profile-page-menu-item-active')\r\n        })\r\n        e.target.classList.add('profile-page-menu-item-active')\r\n        if (e.target.id === 'profile-posts-page-menu-item') {\r\n            this.setState({ currentPageIsPosts: true })\r\n        } else if (e.target.id === 'profile-interests-page-menu-item') {\r\n            this.setState({ currentPageIsPosts: false })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <Header page={this.state.profile ? `${this.state.profile.first_name} ${this.state.profile.last_name}` : 'Perfil'}\r\n                    backArrow={true}\r\n                />\r\n                {this.state.myProfile !== null && this.state.profile !== null ?\r\n                    <div className=\"content\">\r\n                        {this.state.profile.blocked_users.map(u => u.id).includes(this.state.myProfile.user.id) ?\r\n                            <div className=\"user-blocked-me-container\">\r\n                                <h3>O usuário te bloqueou</h3>\r\n                            </div>\r\n                            :\r\n                            <>\r\n                                {this.state.alertMessage &&\r\n                                    <div class=\"alert alert-success profile-page-alert-success\" role=\"alert\">\r\n                                        {this.state.alertMessage}\r\n                                    </div>\r\n                                }\r\n                                <ProfileData profile={this.state.profile}>\r\n                                    <div className=\"profile-btn-wrapper\">\r\n                                        <i\r\n                                            className=\"fas fa-ellipsis-h btn btn-secondary mr-2\"\r\n                                            id=\"view-more-icon\"\r\n                                            onClick={this.openCloseExtraOptions}\r\n                                        />\r\n                                        <div className=\"view-more-select profile-view-more-select\" id=\"view-more-select\">\r\n                                            <Link to={`/mensagens/${this.state.profile.slug}`} style={{ color: '#000', textDecoration: 'none' }}>\r\n                                                {!this.state.myProfile.blocked_users.map(u => u.id).includes(this.state.profile.user.id) &&\r\n                                                    <li>\r\n                                                        <i class=\"fas fa-envelope text-secondary\" />\r\n                                                        Enviar mensagem\r\n                                                    </li>\r\n                                                }\r\n                                            </Link>\r\n                                            <li onClick={this.blockUnblockUser}>\r\n                                                <i class=\"fas fa-user-lock text-secondary\" />\r\n                                                {this.state.myProfile.blocked_users.map(u => u.id).includes(this.state.profile.user.id) ?\r\n                                                    'Desbloquear'\r\n                                                    :\r\n                                                    'Bloquear'\r\n                                                }\r\n                                            </li>\r\n                                        </div>\r\n                                        {!this.state.myProfile.blocked_users.map(u => u.id).includes(this.state.profile.user.id) &&\r\n                                            <button className=\"btn d-none\"\r\n                                                id=\"profile-page-relationship-btn\"\r\n                                                data-pk={this.state.profile.id}\r\n                                                onClick={this.handleRelationshipUpdate}\r\n                                            >{this.state.relationshipButtonLabel}</button>\r\n                                        }\r\n                                    </div>\r\n                                </ProfileData>\r\n                                <div className=\"profile-page-menu\">\r\n                                    <div\r\n                                        className=\"profile-page-menu-item profile-page-menu-item-active\"\r\n                                        id=\"profile-posts-page-menu-item\"\r\n                                        onClick={this.switchPage}\r\n                                    >\r\n                                        Posts ({this.state.profile.posts.length})\r\n                                    </div>\r\n                                    <div\r\n                                        className=\"profile-page-menu-item\"\r\n                                        id=\"profile-interests-page-menu-item\"\r\n                                        onClick={this.switchPage}\r\n                                    >\r\n                                        Interesses ({this.state.profile.interests.filter(i => i.public).length})\r\n                                    </div>\r\n                                </div>\r\n                                {this.state.currentPageIsPosts ?\r\n                                    <Posts profile={this.state.profile} fetchProfile={this.fetchProfile} /> :\r\n                                    <Interests profile={this.state.profile} />\r\n                                }\r\n                            </>\r\n                        }\r\n                    </div>\r\n                    :\r\n                    <div className=\"profile-page-loader-container\">\r\n                        <div className=\"loader\" />\r\n                    </div>\r\n                }\r\n                <BottomMenu />\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Profile"]},"metadata":{},"sourceType":"module"}