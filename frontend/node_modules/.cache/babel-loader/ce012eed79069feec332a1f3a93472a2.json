{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{SERVER_URL}from'../../../../config/settings';import{csrftoken}from'../../../../config/utils';import ProfileListItem from'../../../../components/ProfileListItem';import ProfilesSearchInput from'./components/ProfilesSearchInput';export default function Profiles(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),myProfile=_useState2[0],setMyProfile=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),profiles=_useState4[0],setProfiles=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),filteredProfiles=_useState6[0],setFilteredProfiles=_useState6[1];useEffect(function(){fetch(\"\".concat(SERVER_URL,\"/profile-api/myprofile\")).then(function(response){return response.json();}).then(function(data){return setMyProfile(data);});fetch(\"\".concat(SERVER_URL,\"/profile-api/profile-list\")).then(function(response){return response.json();}).then(function(data){setFilteredProfiles(null);setProfiles(data);});},[]);var sendFriendRequest=function sendFriendRequest(pk){fetch(\"\".concat(SERVER_URL,\"/profile-api/send-friend-request\"),{method:'POST',headers:{'Content-type':'application/json','X-CSRFToken':csrftoken},body:JSON.stringify(pk)}).then(function(response){return response.json();}).then(function(data){return console.log(data);});};var cancelFriendRequest=function cancelFriendRequest(pk){fetch(\"\".concat(SERVER_URL,\"/profile-api/cancel-friend-request\"),{method:'POST',headers:{'Content-type':'application/json','X-CSRFToken':csrftoken},body:JSON.stringify(pk)}).then(function(response){return response.json();}).then(function(data){return console.log(data);});};var handleRelationshipUpdate=function handleRelationshipUpdate(e){e.preventDefault();e.stopPropagation();var btn=e.target;if(btn.innerHTML==='Solicitar'){sendFriendRequest(btn.dataset.pk);btn.innerHTML='Solicitado';btn.className='btn btn-primary';}else{cancelFriendRequest(btn.dataset.pk);btn.innerHTML='Solicitar';btn.className='btn btn-secondary';}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ProfilesSearchInput,{setFilteredProfiles:setFilteredProfiles}),/*#__PURE__*/React.createElement(\"div\",{className:\"list-group\"},myProfile&&(profiles||filteredProfiles)&&/*#__PURE__*/React.createElement(\"div\",{className:\"profile-list-container\"},filteredProfiles?filteredProfiles.map(function(profile){return/*#__PURE__*/React.createElement(ProfileListItem,{profile:profile,myProfile:myProfile});}):profiles&&profiles.map(function(profile){return/*#__PURE__*/React.createElement(ProfileListItem,{profile:profile,myProfile:myProfile},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-secondary\",\"data-pk\":profile.id,onClick:handleRelationshipUpdate},\"Solicitar\"));})),/*#__PURE__*/React.createElement(\"div\",{className:\"profiles-loader-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"loader\"}))));}","map":{"version":3,"sources":["C:/Users/felip/CodeProjects/Web/Napker/frontend/src/pages/home/components/profiles/Profiles.js"],"names":["React","useEffect","useState","SERVER_URL","csrftoken","ProfileListItem","ProfilesSearchInput","Profiles","myProfile","setMyProfile","profiles","setProfiles","filteredProfiles","setFilteredProfiles","fetch","then","response","json","data","sendFriendRequest","pk","method","headers","body","JSON","stringify","console","log","cancelFriendRequest","handleRelationshipUpdate","e","preventDefault","stopPropagation","btn","target","innerHTML","dataset","className","map","profile","id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\n\r\nimport { SERVER_URL } from '../../../../config/settings'\r\nimport { csrftoken } from '../../../../config/utils'\r\nimport ProfileListItem from '../../../../components/ProfileListItem'\r\nimport ProfilesSearchInput from './components/ProfilesSearchInput'\r\n\r\nexport default function Profiles() {\r\n    const [myProfile, setMyProfile] = useState(null)\r\n    const [profiles, setProfiles] = useState(null)\r\n    const [filteredProfiles, setFilteredProfiles] = useState(null)\r\n\r\n    useEffect(() => {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => setMyProfile(data))\r\n        fetch(`${SERVER_URL}/profile-api/profile-list`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                setFilteredProfiles(null)\r\n                setProfiles(data)\r\n            })\r\n    }, [])\r\n\r\n    const sendFriendRequest = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/send-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(pk)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n    }\r\n\r\n    const cancelFriendRequest = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/cancel-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(pk)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n    }\r\n\r\n    const handleRelationshipUpdate = e => {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        const btn = e.target\r\n        if (btn.innerHTML === 'Solicitar') {\r\n            sendFriendRequest(btn.dataset.pk)\r\n            btn.innerHTML = 'Solicitado'\r\n            btn.className = 'btn btn-primary'\r\n        } else {\r\n            cancelFriendRequest(btn.dataset.pk)\r\n            btn.innerHTML = 'Solicitar'\r\n            btn.className = 'btn btn-secondary'\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <ProfilesSearchInput setFilteredProfiles={setFilteredProfiles} />\r\n            <div className=\"list-group\">\r\n                {myProfile && (profiles || filteredProfiles) &&\r\n                    <div className=\"profile-list-container\">\r\n                        {filteredProfiles ? filteredProfiles.map(profile => {\r\n                            return (\r\n                                <ProfileListItem profile={profile} myProfile={myProfile} />\r\n                            )\r\n                        }\r\n                        ) : profiles && profiles.map(profile => {\r\n                            return (\r\n                                <ProfileListItem profile={profile} myProfile={myProfile}>\r\n                                    <button className=\"btn btn-secondary\" data-pk={profile.id} onClick={handleRelationshipUpdate}>\r\n                                        Solicitar\r\n                                    </button>\r\n                                </ProfileListItem>\r\n                            )\r\n                        })\r\n                        }\r\n                    </div>\r\n                }\r\n                <div className=\"profiles-loader-container\">\r\n                    <div className=\"loader\" />\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}