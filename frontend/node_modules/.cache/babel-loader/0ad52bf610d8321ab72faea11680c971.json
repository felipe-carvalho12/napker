{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{BrowserRouter as Router,Switch,Route}from'react-router-dom';import{SERVER_URL}from'./config/settings';import ExtraRoutes from'./routes/index';import Sidebar from'./components/fixed/Sidebar';import BottomMenu from'./components/fixed/BottomMenu';import Home from'./pages/home/Home';import Notifications from'./pages/notifications/Notifications';import Messages from'./pages/messages_/Messages';import MyProfile from'./pages/profile/MyProfile';import Settings from'./pages/settings_/Settings';import PostFormPage from'./pages/PostFormPage';export default function App(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),invitesReceivedNumber=_useState2[0],setInvitesReceived=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),unvisualizedLikesNumber=_useState4[0],setUnvisulaizedLikes=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),unvisualizedCommentsNumber=_useState6[0],setUnvisulaizedComments=_useState6[1];var notificationsNumber=invitesReceivedNumber+unvisualizedLikesNumber+unvisualizedCommentsNumber;var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),unreadMessagesNumber=_useState8[0],setUnreadMessagesNumber=_useState8[1];useEffect(function(){updateNotificationsNumber();updateUnreadMessagesNumber();window.setInterval(function(){updateNotificationsNumber();updateUnreadMessagesNumber();},6000);},[]);var updateNotificationsNumber=function updateNotificationsNumber(){fetch(\"\".concat(SERVER_URL,\"/profile-api/myinvites\")).then(function(response){return response.json();}).then(function(data){return setInvitesReceived(data.length);});fetch(\"\".concat(SERVER_URL,\"/post-api/unvisualized-post-likes\")).then(function(response){return response.json();}).then(function(data){return setUnvisulaizedLikes(data.length);});fetch(\"\".concat(SERVER_URL,\"/post-api/unvisualized-post-comments\")).then(function(response){return response.json();}).then(function(data){return setUnvisulaizedComments(data.length);});};var updateUnreadMessagesNumber=function updateUnreadMessagesNumber(){fetch(\"\".concat(SERVER_URL,\"/chat-api/all-unread-messages-number\")).then(function(response){return response.json();}).then(function(data){return setUnreadMessagesNumber(data['unread_messages_number']);});};return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(Sidebar,{notificationsNumber:notificationsNumber,unreadMessagesNumber:unreadMessagesNumber}),/*#__PURE__*/React.createElement(\"div\",{className:\"main-content\"},/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/home\",component:Home}),/*#__PURE__*/React.createElement(Route,{path:\"/notifica\\xE7\\xF5es\",render:function render(props){return/*#__PURE__*/React.createElement(Notifications,Object.assign({},props,{updateNotificationsNumber:updateNotificationsNumber}));}}),/*#__PURE__*/React.createElement(Route,{path:\"/mensagens\",exact:true,component:Messages}),/*#__PURE__*/React.createElement(Route,{path:\"/perfil\",exact:true,component:MyProfile}),/*#__PURE__*/React.createElement(Route,{path:\"/configura\\xE7\\xF5es\",exact:true,component:Settings}),/*#__PURE__*/React.createElement(Route,{path:\"/postar\",component:PostFormPage}),/*#__PURE__*/React.createElement(ExtraRoutes,null)),/*#__PURE__*/React.createElement(BottomMenu,{notificationsNumber:notificationsNumber,unreadMessagesNumber:unreadMessagesNumber})));}","map":{"version":3,"sources":["C:/Users/felip/CodeProjects/Web/Napker/frontend/src/App.js"],"names":["React","useEffect","useState","BrowserRouter","Router","Switch","Route","SERVER_URL","ExtraRoutes","Sidebar","BottomMenu","Home","Notifications","Messages","MyProfile","Settings","PostFormPage","App","invitesReceivedNumber","setInvitesReceived","unvisualizedLikesNumber","setUnvisulaizedLikes","unvisualizedCommentsNumber","setUnvisulaizedComments","notificationsNumber","unreadMessagesNumber","setUnreadMessagesNumber","updateNotificationsNumber","updateUnreadMessagesNumber","window","setInterval","fetch","then","response","json","data","length","props"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from './config/settings'\r\nimport ExtraRoutes from './routes/index'\r\n\r\nimport Sidebar from './components/fixed/Sidebar'\r\nimport BottomMenu from './components/fixed/BottomMenu'\r\n\r\nimport Home from './pages/home/Home'\r\nimport Notifications from './pages/notifications/Notifications'\r\nimport Messages from './pages/messages_/Messages'\r\nimport MyProfile from './pages/profile/MyProfile'\r\nimport Settings from './pages/settings_/Settings'\r\nimport PostFormPage from './pages/PostFormPage'\r\n\r\nexport default function App() {\r\n    const [invitesReceivedNumber, setInvitesReceived] = useState(0)\r\n    const [unvisualizedLikesNumber, setUnvisulaizedLikes] = useState(0)\r\n    const [unvisualizedCommentsNumber, setUnvisulaizedComments] = useState(0)\r\n    let notificationsNumber = invitesReceivedNumber + unvisualizedLikesNumber + unvisualizedCommentsNumber\r\n    const [unreadMessagesNumber, setUnreadMessagesNumber] = useState(0)\r\n\r\n    useEffect(() => {\r\n        updateNotificationsNumber()\r\n        updateUnreadMessagesNumber()\r\n        window.setInterval(() => {\r\n            updateNotificationsNumber()\r\n            updateUnreadMessagesNumber()\r\n        }, 6000)\r\n    }, [])\r\n\r\n    const updateNotificationsNumber = () => {\r\n        fetch(`${SERVER_URL}/profile-api/myinvites`)\r\n            .then(response => response.json())\r\n            .then(data => setInvitesReceived(data.length))\r\n        fetch(`${SERVER_URL}/post-api/unvisualized-post-likes`)\r\n            .then(response => response.json())\r\n            .then(data => setUnvisulaizedLikes(data.length))\r\n        fetch(`${SERVER_URL}/post-api/unvisualized-post-comments`)\r\n            .then(response => response.json())\r\n            .then(data => setUnvisulaizedComments(data.length))\r\n    }\r\n\r\n    const updateUnreadMessagesNumber = () => {\r\n        fetch(`${SERVER_URL}/chat-api/all-unread-messages-number`)\r\n            .then(response => response.json())\r\n            .then(data => setUnreadMessagesNumber(data['unread_messages_number']))\r\n    }\r\n\r\n    return (\r\n        <Router>\r\n            <Sidebar notificationsNumber={notificationsNumber} unreadMessagesNumber={unreadMessagesNumber} />\r\n            <div className=\"main-content\">\r\n                <Switch>\r\n                    <Route path=\"/home\" component={Home} />\r\n                    <Route path=\"/notificações\" render={props => (\r\n                        <Notifications {...props} updateNotificationsNumber={updateNotificationsNumber} />\r\n                    )} />\r\n                    <Route path=\"/mensagens\" exact component={Messages} />\r\n                    <Route path=\"/perfil\" exact component={MyProfile} />\r\n                    <Route path=\"/configurações\" exact component={Settings} />\r\n                    <Route path=\"/postar\" component={PostFormPage} />\r\n\r\n                    <ExtraRoutes />\r\n                </Switch>\r\n                <BottomMenu notificationsNumber={notificationsNumber} unreadMessagesNumber={unreadMessagesNumber} />\r\n            </div>\r\n        </Router>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}