{"ast":null,"code":"import React from'react';import{Link}from'react-router-dom';import{SERVER_URL}from'../config/settings';import{csrftoken}from'../config/utils';export default function PostListItem(props){var _this=this;var post=props.post;var myProfile=props.myProfile;var deletePost=function deletePost(e,postId){e.stopPropagation();var el=document.querySelector(\"#profile-post-\".concat(postId));if(window.confirm('Tem certeza que deseja apagar o post?\\nEssa ação é irreversível.')){el.style.animationPlayState='running';el.addEventListener('animationend',function(){_this.fetchPosts();});fetch(\"\".concat(SERVER_URL,\"/post-api/delete-post/\").concat(postId),{method:'POST',headers:{'Content-type':'application/json','X-CSRFToken':csrftoken}}).then(function(response){return response.json();}).then(function(data){console.log(data);});}};var likeUnlikePost=function likeUnlikePost(e){e.stopPropagation();var likeBtn=e.target;if(likeBtn.classList.contains('fas')){likeBtn.classList.remove('fas');//border heart\nlikeBtn.classList.add('far');//filled heart\nfetch(\"\".concat(SERVER_URL,\"/post-api/unlike-post/\").concat(likeBtn.dataset.postid)).then(function(response){return response.json();}).then(function(data){console.log(data);props.renderParent();});}else{likeBtn.classList.remove('far');//border heart\nlikeBtn.classList.add('fas');//filled heart\nfetch(\"\".concat(SERVER_URL,\"/post-api/like-post/\").concat(likeBtn.dataset.postid)).then(function(response){return response.json();}).then(function(data){console.log(data);props.renderParent();});}};return/*#__PURE__*/React.createElement(\"li\",{className:\"post-container post-list-item\",id:\"profile-post-\".concat(post.id),key:post.id,onClick:function onClick(){return window.location.href=\"/post/\".concat(post.id);}},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-col\"},/*#__PURE__*/React.createElement(Link,{to:post.author.id===myProfile.id?'/perfil':\"/user/\".concat(post.author.slug),onClick:function onClick(e){return e.stopPropagation();}},/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(SERVER_URL).concat(post.author.photo),className:\"profile-img-med\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"post-col\"},/*#__PURE__*/React.createElement(Link,{to:post.author.id===myProfile.id?'/perfil':\"/user/\".concat(post.author.slug),style:{color:'#000'},onClick:function onClick(e){return e.stopPropagation();}},/*#__PURE__*/React.createElement(\"div\",{className:\"post-author-data-wrapper\"},/*#__PURE__*/React.createElement(\"strong\",{style:{marginRight:'5px'}},post.author.first_name,\" \",post.author.last_name),/*#__PURE__*/React.createElement(\"p\",{className:\"text-secondary d-inline-block\"},\"@\",post.author.user.username,\" \\u2022 \",post.created.split('-').reverse().join('/')))),/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'start'}},post.content),post.image&&/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(SERVER_URL).concat(post.image),className:\"post-img\"}))),post.author.id===myProfile.id&&/*#__PURE__*/React.createElement(\"i\",{className:\"far fa-trash-alt trash-icon text-secondary\",style:{margin:'20px 20px 0 0'},onClick:function onClick(e){return deletePost(e,post.id);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"post-actions\"},/*#__PURE__*/React.createElement(\"p\",{className:\"text-secondary\"},/*#__PURE__*/React.createElement(Link,{to:\"/post/\".concat(post.id,\"/comentar\"),className:\"text-secondary\",onClick:function onClick(e){return e.stopPropagation();}},/*#__PURE__*/React.createElement(\"i\",{class:\"far fa-comment\"}),post.comments.length),post.likes.map(function(like){return like.profile.id;}).includes(myProfile.id)?/*#__PURE__*/React.createElement(\"i\",{class:\"fas fa-heart\",\"data-postid\":post.id,onClick:likeUnlikePost}):/*#__PURE__*/React.createElement(\"i\",{class:\"far fa-heart\",\"data-postid\":post.id,onClick:likeUnlikePost}),/*#__PURE__*/React.createElement(\"p\",{className:\"post-likes-number\",onClick:function onClick(e){e.stopPropagation();props.openLikesModal(post.likes);}},post.likes.length))));}","map":{"version":3,"sources":["C:/Users/fabio/CodeProjects/Django/napker/frontend/src/components/PostListItem.js"],"names":["React","Link","SERVER_URL","csrftoken","PostListItem","props","post","myProfile","deletePost","e","postId","stopPropagation","el","document","querySelector","window","confirm","style","animationPlayState","addEventListener","fetchPosts","fetch","method","headers","then","response","json","data","console","log","likeUnlikePost","likeBtn","target","classList","contains","remove","add","dataset","postid","renderParent","id","location","href","author","slug","photo","color","marginRight","first_name","last_name","user","username","created","split","reverse","join","textAlign","content","image","margin","comments","length","likes","map","like","profile","includes","openLikesModal"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../config/settings'\r\nimport { csrftoken } from '../config/utils'\r\n\r\nexport default function PostListItem(props) {\r\n    const post = props.post\r\n    const myProfile = props.myProfile\r\n\r\n    const deletePost = (e, postId) => {\r\n        e.stopPropagation()\r\n        const el = document.querySelector(`#profile-post-${postId}`)\r\n        if (window.confirm('Tem certeza que deseja apagar o post?\\nEssa ação é irreversível.')) {\r\n            el.style.animationPlayState = 'running'\r\n            el.addEventListener('animationend', () => {\r\n                this.fetchPosts()\r\n            })\r\n            fetch(`${SERVER_URL}/post-api/delete-post/${postId}`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-type': 'application/json',\r\n                    'X-CSRFToken': csrftoken,\r\n                }\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                })\r\n        }\r\n    }\r\n\r\n    const likeUnlikePost = e => {\r\n        e.stopPropagation()\r\n        const likeBtn = e.target\r\n        if (likeBtn.classList.contains('fas')) {\r\n            likeBtn.classList.remove('fas') //border heart\r\n            likeBtn.classList.add('far')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/unlike-post/${likeBtn.dataset.postid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    props.renderParent()\r\n                })\r\n        } else {\r\n            likeBtn.classList.remove('far') //border heart\r\n            likeBtn.classList.add('fas')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/like-post/${likeBtn.dataset.postid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    props.renderParent()\r\n                })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <li\r\n            className=\"post-container post-list-item\"\r\n            id={`profile-post-${post.id}`}\r\n            key={post.id}\r\n            onClick={() => window.location.href = `/post/${post.id}`}\r\n        >\r\n            <div className=\"d-flex justify-content-between\">\r\n                <div className=\"post-row\">\r\n                    <div className=\"post-col\">\r\n                        <Link\r\n                            to={post.author.id === myProfile.id ?\r\n                                '/perfil' : `/user/${post.author.slug}`}\r\n                            onClick={e => e.stopPropagation()}\r\n                        >\r\n                            <img src={`${SERVER_URL}${post.author.photo}`}\r\n                                className=\"profile-img-med\"\r\n                            />\r\n                        </Link>\r\n                    </div>\r\n                    <div className=\"post-col\">\r\n                        <Link\r\n                            to={post.author.id === myProfile.id ?\r\n                                '/perfil' : `/user/${post.author.slug}`}\r\n                            style={{ color: '#000' }}\r\n                            onClick={e => e.stopPropagation()}\r\n                        >\r\n                            <div className=\"post-author-data-wrapper\">\r\n                                <strong style={{ marginRight: '5px' }}>\r\n                                    {post.author.first_name} {post.author.last_name}\r\n                                </strong>\r\n                                <p className=\"text-secondary d-inline-block\">\r\n                                    @{post.author.user.username} • {post.created.split('-').reverse().join('/')}\r\n                                </p>\r\n                            </div>\r\n                        </Link>\r\n                        <div style={{ textAlign: 'start' }}>\r\n                            {post.content}\r\n                        </div>\r\n                        {post.image &&\r\n                            <img src={`${SERVER_URL}${post.image}`} className=\"post-img\" />\r\n                        }\r\n                    </div>\r\n                </div>\r\n                {post.author.id === myProfile.id &&\r\n                    <i\r\n                        className=\"far fa-trash-alt trash-icon text-secondary\"\r\n                        style={{ margin: '20px 20px 0 0' }}\r\n                        onClick={e => deletePost(e, post.id)}\r\n                    />\r\n                }\r\n            </div>\r\n            <div className=\"post-actions\">\r\n                <p className=\"text-secondary\">\r\n                    <Link\r\n                        to={`/post/${post.id}/comentar`}\r\n                        className=\"text-secondary\"\r\n                        onClick={e => e.stopPropagation()}\r\n                    >\r\n                        <i\r\n                            class=\"far fa-comment\"\r\n                        />{post.comments.length}\r\n                    </Link>\r\n                    {post.likes.map(like => like.profile.id).includes(myProfile.id) ?\r\n                        <i class=\"fas fa-heart\"\r\n                            data-postid={post.id}\r\n                            onClick={likeUnlikePost}\r\n                        />\r\n                        :\r\n                        <i class=\"far fa-heart\"\r\n                            data-postid={post.id}\r\n                            onClick={likeUnlikePost}\r\n                        />\r\n                    }\r\n                    <p className=\"post-likes-number\"\r\n                        onClick={e => {\r\n                            e.stopPropagation()\r\n                            props.openLikesModal(post.likes)\r\n                        }\r\n                        }\r\n                    >\r\n                        {post.likes.length}\r\n                    </p>\r\n                </p>\r\n            </div>\r\n        </li>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}