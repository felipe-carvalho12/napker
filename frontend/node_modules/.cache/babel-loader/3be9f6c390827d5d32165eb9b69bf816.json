{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\src\\\\pages\\\\profile\\\\components\\\\EditProfileModal.js\";\nimport React, { useState } from 'react';\nimport Modal from 'react-bootstrap/Modal';\nimport Picker from 'emoji-picker-react';\nimport { SERVER_URL } from '../../../config/settings';\nimport { csrftoken, openCloseEmojiList } from '../../../config/utils';\nexport default function EditProfileModal(props) {\n  const profile = props.profile;\n  const isOpen = props.isOpen;\n  const closeModal = props.closeModal;\n  const [profileImagePreview, setProfileImagePreview] = useState(`${SERVER_URL}${profile.photo}`);\n  const [editingBioContent, setEditingBioContent] = useState('');\n\n  const handleProfileImageChange = e => {\n    const reader = new FileReader();\n\n    reader.onload = () => {\n      if (reader.readyState === 2) {\n        setProfileImagePreview(reader.result);\n      }\n    };\n\n    try {\n      reader.readAsDataURL(e.target.files[0]);\n    } catch {}\n  };\n\n  const handleUsernameChange = e => {\n    if (e.target.value.trim() !== '') {\n      fetch(`${SERVER_URL}/profile-api/user/${e.target.value}`).then(response => response.json()).then(data => {\n        if (data.bool !== 'false' && data.id !== profile.id) {\n          document.querySelector('#username-taken').style.display = 'initial';\n        } else {\n          document.querySelector('#username-taken').style.display = 'none';\n        }\n      });\n    }\n  };\n\n  const onEmojiSelect = (event, emojiObject) => {\n    setEditingBioContent(editingBioContent + emojiObject.emoji);\n  };\n\n  return /*#__PURE__*/React.createElement(Modal, {\n    show: isOpen,\n    onHide: closeModal,\n    size: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }, \"Editar perfil\")), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    action: `${SERVER_URL}/update-profile`,\n    className: \"d-flex flex-column justify-content-center\",\n    id: \"update-profile-form\",\n    method: \"POST\",\n    encType: \"multipart/form-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    name: \"csrfmiddlewaretoken\",\n    value: csrftoken,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex flex-column justify-content-center align-items-center mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: profileImagePreview,\n    className: \"profile-img-big\",\n    style: {\n      marginBottom: '25px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \"image/png, image/jpg, image/jpeg\",\n    className: \"profile-photo-input\",\n    name: \"profile-photo\",\n    onChange: handleProfileImageChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, \"Email: \", profile.email), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit-profile-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"first-name\",\n    className: \"profile-field-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  }, \"Nome:\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"profile-field-input\",\n    type: \"text\",\n    name: \"first-name\",\n    id: \"first-name\",\n    placeholder: profile.first_name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit-profile-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"last-name\",\n    className: \"profile-field-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 25\n    }\n  }, \"Sobrenome:\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"profile-field-input\",\n    type: \"text\",\n    name: \"last-name\",\n    id: \"last-name\",\n    placeholder: profile.last_name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit-profile-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"username\",\n    className: \"profile-field-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 25\n    }\n  }, \"Nome de usu\\xE1rio:\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"profile-field-input\",\n    type: \"text\",\n    name: \"username\",\n    id: \"username\",\n    placeholder: `@${profile.user.username}`,\n    onChange: handleUsernameChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"username-taken\",\n    style: {\n      display: 'none',\n      width: '100%',\n      textAlign: 'center',\n      padding: '3px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 25\n    }\n  }, \"Nome de usu\\xE1rio j\\xE1 existe\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit-profile-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"birth-date\",\n    className: \"profile-field-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  }, \"Data de nascimento:\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"profile-field-input\",\n    type: \"date\",\n    name: \"birth-date\",\n    id: \"birth-date\",\n    defaultValue: profile.birth_date,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"emoji-list-container bio-emoji-list\",\n    id: \"emoji-list-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Picker, {\n    onEmojiClick: onEmojiSelect,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"edit-profile-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"bio\",\n    className: \"profile-field-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 25\n    }\n  }, \"Bio:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"email-input-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"profile-field-input-email\",\n    type: \"email\",\n    name: \"bio\",\n    id: \"bio\",\n    value: editingBioContent,\n    placeholder: profile.bio,\n    maxLength: 100,\n    onChange: e => setEditingBioContent(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"far fa-smile\",\n    id: \"emoji-button\",\n    onClick: () => openCloseEmojiList(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 29\n    }\n  }))))), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-grey\",\n    onClick: closeModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }, \"Fechar\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    onClick: () => document.querySelector('form#update-profile-form').submit(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, \"Salvar\")));\n}","map":{"version":3,"sources":["C:/Users/felip/CodeProjects/Web/Napker/frontend/src/pages/profile/components/EditProfileModal.js"],"names":["React","useState","Modal","Picker","SERVER_URL","csrftoken","openCloseEmojiList","EditProfileModal","props","profile","isOpen","closeModal","profileImagePreview","setProfileImagePreview","photo","editingBioContent","setEditingBioContent","handleProfileImageChange","e","reader","FileReader","onload","readyState","result","readAsDataURL","target","files","handleUsernameChange","value","trim","fetch","then","response","json","data","bool","id","document","querySelector","style","display","onEmojiSelect","event","emojiObject","emoji","marginBottom","email","first_name","last_name","user","username","width","textAlign","padding","birth_date","bio","submit"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,OAAOC,MAAP,MAAmB,oBAAnB;AAEA,SAASC,UAAT,QAA2B,0BAA3B;AACA,SAASC,SAAT,EAAoBC,kBAApB,QAA8C,uBAA9C;AAEA,eAAe,SAASC,gBAAT,CAA0BC,KAA1B,EAAiC;AAC5C,QAAMC,OAAO,GAAGD,KAAK,CAACC,OAAtB;AACA,QAAMC,MAAM,GAAGF,KAAK,CAACE,MAArB;AACA,QAAMC,UAAU,GAAGH,KAAK,CAACG,UAAzB;AAEA,QAAM,CAACC,mBAAD,EAAsBC,sBAAtB,IAAgDZ,QAAQ,CAAE,GAAEG,UAAW,GAAEK,OAAO,CAACK,KAAM,EAA/B,CAA9D;AACA,QAAM,CAACC,iBAAD,EAAoBC,oBAApB,IAA4Cf,QAAQ,CAAC,EAAD,CAA1D;;AAEA,QAAMgB,wBAAwB,GAAGC,CAAC,IAAI;AAClC,UAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;;AACAD,IAAAA,MAAM,CAACE,MAAP,GAAgB,MAAM;AAClB,UAAIF,MAAM,CAACG,UAAP,KAAsB,CAA1B,EAA6B;AACzBT,QAAAA,sBAAsB,CAACM,MAAM,CAACI,MAAR,CAAtB;AACH;AACJ,KAJD;;AAKA,QAAI;AACAJ,MAAAA,MAAM,CAACK,aAAP,CAAqBN,CAAC,CAACO,MAAF,CAASC,KAAT,CAAe,CAAf,CAArB;AACH,KAFD,CAEE,MAAM,CAEP;AACJ,GAZD;;AAcA,QAAMC,oBAAoB,GAAGT,CAAC,IAAI;AAC9B,QAAIA,CAAC,CAACO,MAAF,CAASG,KAAT,CAAeC,IAAf,OAA0B,EAA9B,EAAkC;AAC9BC,MAAAA,KAAK,CAAE,GAAE1B,UAAW,qBAAoBc,CAAC,CAACO,MAAF,CAASG,KAAM,EAAlD,CAAL,CACKG,IADL,CACUC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADtB,EAEKF,IAFL,CAEUG,IAAI,IAAI;AACV,YAAIA,IAAI,CAACC,IAAL,KAAc,OAAd,IAAyBD,IAAI,CAACE,EAAL,KAAY3B,OAAO,CAAC2B,EAAjD,EAAqD;AACjDC,UAAAA,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,EAA0CC,KAA1C,CAAgDC,OAAhD,GAA0D,SAA1D;AACH,SAFD,MAEO;AACHH,UAAAA,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,EAA0CC,KAA1C,CAAgDC,OAAhD,GAA0D,MAA1D;AACH;AACJ,OARL;AASH;AACJ,GAZD;;AAcA,QAAMC,aAAa,GAAG,CAACC,KAAD,EAAQC,WAAR,KAAwB;AAC1C3B,IAAAA,oBAAoB,CAACD,iBAAiB,GAAG4B,WAAW,CAACC,KAAjC,CAApB;AACH,GAFD;;AAIA,sBACI,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAElC,MAAb;AACI,IAAA,MAAM,EAAEC,UADZ;AAEI,IAAA,IAAI,EAAC,IAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAGI,oBAAC,KAAD,CAAO,MAAP;AAAc,IAAA,WAAW,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ,CAHJ,eAMI,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AACI,IAAA,MAAM,EAAG,GAAEP,UAAW,iBAD1B;AAEI,IAAA,SAAS,EAAC,2CAFd;AAGI,IAAA,EAAE,EAAC,qBAHP;AAII,IAAA,MAAM,EAAC,MAJX;AAKI,IAAA,OAAO,EAAC,qBALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAOI;AAAO,IAAA,IAAI,EAAC,QAAZ;AAAqB,IAAA,IAAI,EAAC,qBAA1B;AAAgD,IAAA,KAAK,EAAEC,SAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPJ,eAQI;AAAK,IAAA,SAAS,EAAC,mEAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,GAAG,EAAEO,mBAAV;AACI,IAAA,SAAS,EAAC,iBADd;AAEI,IAAA,KAAK,EAAE;AAAEiC,MAAAA,YAAY,EAAE;AAAhB,KAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAKI;AACI,IAAA,IAAI,EAAC,MADT;AAEI,IAAA,MAAM,EAAC,kCAFX;AAGI,IAAA,SAAS,EAAC,qBAHd;AAII,IAAA,IAAI,EAAC,eAJT;AAKI,IAAA,QAAQ,EAAE5B,wBALd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALJ,CARJ,eAqBI;AAAK,IAAA,SAAS,EAAC,+BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACYR,OAAO,CAACqC,KADpB,CArBJ,eAwBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAxBJ,eAyBI;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,OAAO,EAAC,YAAf;AAA4B,IAAA,SAAS,EAAC,qBAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,eAEI;AAAO,IAAA,SAAS,EAAC,qBAAjB;AAAuC,IAAA,IAAI,EAAC,MAA5C;AAAmD,IAAA,IAAI,EAAC,YAAxD;AAAqE,IAAA,EAAE,EAAC,YAAxE;AAAqF,IAAA,WAAW,EAAErC,OAAO,CAACsC,UAA1G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAzBJ,eA6BI;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,OAAO,EAAC,WAAf;AAA2B,IAAA,SAAS,EAAC,qBAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAO,IAAA,SAAS,EAAC,qBAAjB;AAAuC,IAAA,IAAI,EAAC,MAA5C;AAAmD,IAAA,IAAI,EAAC,WAAxD;AAAoE,IAAA,EAAE,EAAC,WAAvE;AAAmF,IAAA,WAAW,EAAEtC,OAAO,CAACuC,SAAxG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CA7BJ,eAiCI;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,OAAO,EAAC,UAAf;AAA0B,IAAA,SAAS,EAAC,qBAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADJ,eAEI;AACI,IAAA,SAAS,EAAC,qBADd;AAEI,IAAA,IAAI,EAAC,MAFT;AAGI,IAAA,IAAI,EAAC,UAHT;AAII,IAAA,EAAE,EAAC,UAJP;AAKI,IAAA,WAAW,EAAG,IAAGvC,OAAO,CAACwC,IAAR,CAAaC,QAAS,EAL3C;AAMI,IAAA,QAAQ,EAAEvB,oBANd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAjCJ,eA4CI;AACI,IAAA,EAAE,EAAC,gBADP;AAEI,IAAA,KAAK,EAAE;AAAEa,MAAAA,OAAO,EAAE,MAAX;AAAmBW,MAAAA,KAAK,EAAE,MAA1B;AAAkCC,MAAAA,SAAS,EAAE,QAA7C;AAAuDC,MAAAA,OAAO,EAAE;AAAhE,KAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCAJJ,CA5CJ,eAkDI;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,OAAO,EAAC,YAAf;AAA4B,IAAA,SAAS,EAAC,qBAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADJ,eAEI;AAAO,IAAA,SAAS,EAAC,qBAAjB;AAAuC,IAAA,IAAI,EAAC,MAA5C;AAAmD,IAAA,IAAI,EAAC,YAAxD;AAAqE,IAAA,EAAE,EAAC,YAAxE;AAAqF,IAAA,YAAY,EAAE5C,OAAO,CAAC6C,UAA3G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAlDJ,eAsDI;AAAK,IAAA,SAAS,EAAC,qCAAf;AAAqD,IAAA,EAAE,EAAC,sBAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,MAAD;AAAQ,IAAA,YAAY,EAAEb,aAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAtDJ,eAyDI;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,OAAO,EAAC,KAAf;AAAqB,IAAA,SAAS,EAAC,qBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AACI,IAAA,SAAS,EAAC,2BADd;AAEI,IAAA,IAAI,EAAC,OAFT;AAGI,IAAA,IAAI,EAAC,KAHT;AAII,IAAA,EAAE,EAAC,KAJP;AAKI,IAAA,KAAK,EAAE1B,iBALX;AAMI,IAAA,WAAW,EAAEN,OAAO,CAAC8C,GANzB;AAOI,IAAA,SAAS,EAAE,GAPf;AAQI,IAAA,QAAQ,EAAErC,CAAC,IAAIF,oBAAoB,CAACE,CAAC,CAACO,MAAF,CAASG,KAAV,CARvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAWI;AACI,IAAA,SAAS,EAAC,cADd;AAEI,IAAA,EAAE,EAAC,cAFP;AAGI,IAAA,OAAO,EAAE,MAAMtB,kBAAkB,CAAC,KAAD,CAHrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXJ,CAFJ,CAzDJ,CADJ,CANJ,eAsFI,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAQ,IAAA,SAAS,EAAC,cAAlB;AAAiC,IAAA,OAAO,EAAEK,UAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAQ,IAAA,SAAS,EAAC,iBAAlB;AAAoC,IAAA,OAAO,EAAE,MAAM0B,QAAQ,CAACC,aAAT,CAAuB,0BAAvB,EAAmDkB,MAAnD,EAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,CAtFJ,CADJ;AA6FH","sourcesContent":["import React, { useState } from 'react'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport Picker from 'emoji-picker-react'\r\n\r\nimport { SERVER_URL } from '../../../config/settings'\r\nimport { csrftoken, openCloseEmojiList } from '../../../config/utils'\r\n\r\nexport default function EditProfileModal(props) {\r\n    const profile = props.profile\r\n    const isOpen = props.isOpen\r\n    const closeModal = props.closeModal\r\n\r\n    const [profileImagePreview, setProfileImagePreview] = useState(`${SERVER_URL}${profile.photo}`)\r\n    const [editingBioContent, setEditingBioContent] = useState('')\r\n\r\n    const handleProfileImageChange = e => {\r\n        const reader = new FileReader()\r\n        reader.onload = () => {\r\n            if (reader.readyState === 2) {\r\n                setProfileImagePreview(reader.result)\r\n            }\r\n        }\r\n        try {\r\n            reader.readAsDataURL(e.target.files[0])\r\n        } catch {\r\n\r\n        }\r\n    }\r\n\r\n    const handleUsernameChange = e => {\r\n        if (e.target.value.trim() !== '') {\r\n            fetch(`${SERVER_URL}/profile-api/user/${e.target.value}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    if (data.bool !== 'false' && data.id !== profile.id) {\r\n                        document.querySelector('#username-taken').style.display = 'initial'\r\n                    } else {\r\n                        document.querySelector('#username-taken').style.display = 'none'\r\n                    }\r\n                })\r\n        }\r\n    }\r\n\r\n    const onEmojiSelect = (event, emojiObject) => {\r\n        setEditingBioContent(editingBioContent + emojiObject.emoji)\r\n    }\r\n\r\n    return (\r\n        <Modal show={isOpen}\r\n            onHide={closeModal}\r\n            size=\"lg\">\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>Editar perfil</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <form\r\n                    action={`${SERVER_URL}/update-profile`}\r\n                    className=\"d-flex flex-column justify-content-center\"\r\n                    id=\"update-profile-form\"\r\n                    method=\"POST\"\r\n                    encType=\"multipart/form-data\"\r\n                >\r\n                    <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrftoken} />\r\n                    <div className=\"d-flex flex-column justify-content-center align-items-center mb-2\">\r\n                        <img src={profileImagePreview}\r\n                            className=\"profile-img-big\"\r\n                            style={{ marginBottom: '25px' }}\r\n                        />\r\n                        <input\r\n                            type=\"file\"\r\n                            accept=\"image/png, image/jpg, image/jpeg\"\r\n                            className=\"profile-photo-input\"\r\n                            name=\"profile-photo\"\r\n                            onChange={handleProfileImageChange}\r\n                        />\r\n                    </div>\r\n                    <div className=\"d-flex justify-content-center\">\r\n                        Email: {profile.email}\r\n                    </div>\r\n                    <hr />\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"first-name\" className=\"profile-field-label\">Nome:</label>\r\n                        <input className=\"profile-field-input\" type=\"text\" name=\"first-name\" id=\"first-name\" placeholder={profile.first_name} />\r\n                    </div>\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"last-name\" className=\"profile-field-label\">Sobrenome:</label>\r\n                        <input className=\"profile-field-input\" type=\"text\" name=\"last-name\" id=\"last-name\" placeholder={profile.last_name} />\r\n                    </div>\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"username\" className=\"profile-field-label\">Nome de usuário:</label>\r\n                        <input\r\n                            className=\"profile-field-input\"\r\n                            type=\"text\"\r\n                            name=\"username\"\r\n                            id=\"username\"\r\n                            placeholder={`@${profile.user.username}`}\r\n                            onChange={handleUsernameChange}\r\n                        />\r\n                    </div>\r\n                    <div\r\n                        id=\"username-taken\"\r\n                        style={{ display: 'none', width: '100%', textAlign: 'center', padding: '3px' }}\r\n                    >\r\n                        <span>Nome de usuário já existe</span>\r\n                    </div>\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"birth-date\" className=\"profile-field-label\">Data de nascimento:</label>\r\n                        <input className=\"profile-field-input\" type=\"date\" name=\"birth-date\" id=\"birth-date\" defaultValue={profile.birth_date} />\r\n                    </div>\r\n                    <div className=\"emoji-list-container bio-emoji-list\" id=\"emoji-list-container\">\r\n                        <Picker onEmojiClick={onEmojiSelect} />\r\n                    </div>\r\n                    <div className=\"edit-profile-input\">\r\n                        <label htmlFor=\"bio\" className=\"profile-field-label\">Bio:</label>\r\n                        <div className=\"email-input-container\">\r\n                            <input\r\n                                className=\"profile-field-input-email\"\r\n                                type=\"email\"\r\n                                name=\"bio\"\r\n                                id=\"bio\"\r\n                                value={editingBioContent}\r\n                                placeholder={profile.bio}\r\n                                maxLength={100}\r\n                                onChange={e => setEditingBioContent(e.target.value)}\r\n                            />\r\n                            <label\r\n                                className=\"far fa-smile\"\r\n                                id=\"emoji-button\"\r\n                                onClick={() => openCloseEmojiList(false)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <button className=\"btn btn-grey\" onClick={closeModal}>Fechar</button>\r\n                <button className=\"btn btn-primary\" onClick={() => document.querySelector('form#update-profile-form').submit()}>Salvar</button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}