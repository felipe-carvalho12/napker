{"ast":null,"code":"import React from'react';import{Link}from'react-router-dom';import{SERVER_URL}from'../../../../../../../config/settings';import{csrftoken}from'../../../../../../../config/utils';export default function CommentListItem(props){var comment=props.comment;var myProfile=props.myProfile;var fetchPost=props.fetchPost;var setPostLikesModal=props.setPostLikesModal;var likeUnlikeComment=function likeUnlikeComment(e){var likeBtn=e.target;if(likeBtn.classList.contains('fas')){likeBtn.classList.remove('fas');//border heart\nlikeBtn.classList.add('far');//filled heart\nfetch(\"\".concat(SERVER_URL,\"/post-api/unlike-comment/\").concat(likeBtn.dataset.commentid)).then(function(response){return response.json();}).then(function(data){console.log(data);fetchPost();});}else{likeBtn.classList.remove('far');//border heart\nlikeBtn.classList.add('fas');//filled heart\nfetch(\"\".concat(SERVER_URL,\"/post-api/like-comment/\").concat(likeBtn.dataset.commentid)).then(function(response){return response.json();}).then(function(data){console.log(data);fetchPost();});}};var deleteComment=function deleteComment(e,commentId){e.stopPropagation();var el=document.querySelector(\"#post-comment-\".concat(commentId));if(window.confirm('Tem certeza que deseja apagar o comentário?\\nEssa ação é irreversível.')){el.style.animationPlayState='running';console.log(el,el.style.animationPlayState);el.addEventListener('animationend',function(){fetchPost();});fetch(\"\".concat(SERVER_URL,\"/post-api/delete-comment/\").concat(commentId),{method:'POST',headers:{'Content-type':'application/json','X-CSRFToken':csrftoken}}).then(function(response){return response.json();}).then(function(data){console.log(data);});}};return/*#__PURE__*/React.createElement(\"li\",{className:\"d-flex w-100 white-hover hide-animation\",id:\"post-comment-\".concat(comment.id),key:comment.id,style:{padding:'5px 15px',background:'#fff',borderBottom:'1px solid var(--border-color)'}},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-column h-100\",style:{marginRight:'10px'}},/*#__PURE__*/React.createElement(Link,{to:comment.author.id===myProfile.id?'/perfil':\"/user/\".concat(comment.author.slug)},/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(SERVER_URL).concat(comment.author.photo),className:\"profile-img-sm\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-column h-100 w-100\",style:{marginRight:'10px'}},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between w-100\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:comment.author.id===myProfile.id?'/perfil':\"/user/\".concat(comment.author.slug),style:{color:'#000'}},/*#__PURE__*/React.createElement(\"strong\",{style:{marginRight:'5px'}},comment.author.first_name,\" \",comment.author.last_name),/*#__PURE__*/React.createElement(\"p\",{className:\"text-secondary d-inline-block\"},\"@\",comment.author.user.username,\" \\u2022 \",comment.created.split('-').reverse().join('/')))),/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-ellipsis-h d-flex justify-content-center align-items-center text-secondary secondary-hover\",style:{textDecoration:'none',width:'30px',height:'30px',borderRadius:'30px'},onClick:function onClick(e){return deleteComment(e,comment.id);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex flex-column\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-start word-break\"},comment.content),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-start align-items-start text-secondary mt-2 mb-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center\"},comment.author.id==myProfile.id&&/*#__PURE__*/React.createElement(\"i\",{className:\"far fa-trash-alt trash-icon text-secondary\",style:{margin:'20px 20px 0 0'},onClick:function onClick(e){return deleteComment(e,comment.id);}}),comment.likes.map(function(like){return like.profile.id;}).includes(myProfile.id)?/*#__PURE__*/React.createElement(\"i\",{class:\"fas fa-heart\",\"data-commentid\":comment.id,onClick:likeUnlikeComment}):/*#__PURE__*/React.createElement(\"i\",{class:\"far fa-heart\",\"data-commentid\":comment.id,onClick:likeUnlikeComment}),/*#__PURE__*/React.createElement(\"p\",{className:\"post-likes-number\",onClick:function onClick(){return setPostLikesModal({isOpen:true,likes:comment.likes});}},comment.likes.length))))));}","map":{"version":3,"sources":["C:/Users/fabio/CodeProjects/Django/napker/frontend/src/pages/home/components/posts_/pages/post_/components/CommentListItem.js"],"names":["React","Link","SERVER_URL","csrftoken","CommentListItem","props","comment","myProfile","fetchPost","setPostLikesModal","likeUnlikeComment","e","likeBtn","target","classList","contains","remove","add","fetch","dataset","commentid","then","response","json","data","console","log","deleteComment","commentId","stopPropagation","el","document","querySelector","window","confirm","style","animationPlayState","addEventListener","method","headers","id","padding","background","borderBottom","marginRight","author","slug","photo","color","first_name","last_name","user","username","created","split","reverse","join","textDecoration","width","height","borderRadius","content","margin","likes","map","like","profile","includes","isOpen","length"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../../../../../../../config/settings'\r\nimport { csrftoken } from '../../../../../../../config/utils'\r\n\r\nexport default function CommentListItem(props) {\r\n    const comment = props.comment\r\n    const myProfile = props.myProfile\r\n    const fetchPost = props.fetchPost\r\n    const setPostLikesModal = props.setPostLikesModal\r\n\r\n    const likeUnlikeComment = e => {\r\n        const likeBtn = e.target\r\n        if (likeBtn.classList.contains('fas')) {\r\n            likeBtn.classList.remove('fas') //border heart\r\n            likeBtn.classList.add('far')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/unlike-comment/${likeBtn.dataset.commentid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    fetchPost()\r\n                })\r\n        } else {\r\n            likeBtn.classList.remove('far') //border heart\r\n            likeBtn.classList.add('fas')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/like-comment/${likeBtn.dataset.commentid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    fetchPost()\r\n                })\r\n        }\r\n    }\r\n\r\n    const deleteComment = (e, commentId) => {\r\n        e.stopPropagation()\r\n        const el = document.querySelector(`#post-comment-${commentId}`)\r\n        if (window.confirm('Tem certeza que deseja apagar o comentário?\\nEssa ação é irreversível.')) {\r\n            el.style.animationPlayState = 'running'\r\n            console.log(el, el.style.animationPlayState)\r\n            el.addEventListener('animationend', () => {\r\n                fetchPost()\r\n            })\r\n            fetch(`${SERVER_URL}/post-api/delete-comment/${commentId}`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-type': 'application/json',\r\n                    'X-CSRFToken': csrftoken,\r\n                }\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <li\r\n            className=\"d-flex w-100 white-hover hide-animation\"\r\n            id={`post-comment-${comment.id}`}\r\n            key={comment.id}\r\n            style={{ padding: '5px 15px', background: '#fff', borderBottom: '1px solid var(--border-color)' }}\r\n        >\r\n            <div className=\"d-flex flex-column h-100\" style={{ marginRight: '10px' }}>\r\n                <Link to={comment.author.id === myProfile.id ?\r\n                    '/perfil' : `/user/${comment.author.slug}`}\r\n                >\r\n                    <img src={`${SERVER_URL}${comment.author.photo}`}\r\n                        className=\"profile-img-sm\"\r\n                    />\r\n                </Link>\r\n            </div>\r\n            <div className=\"d-flex flex-column h-100 w-100\" style={{ marginRight: '10px' }}>\r\n                <div className=\"d-flex justify-content-between w-100\">\r\n                    <div>\r\n                        <Link to={comment.author.id === myProfile.id ?\r\n                            '/perfil' : `/user/${comment.author.slug}`}\r\n                            style={{ color: '#000' }}\r\n                        >\r\n                            <strong style={{ marginRight: '5px' }}>\r\n                                {comment.author.first_name} {comment.author.last_name}\r\n                            </strong>\r\n                            <p className=\"text-secondary d-inline-block\">\r\n                                @{comment.author.user.username} • {comment.created.split('-').reverse().join('/')}\r\n                            </p>\r\n                        </Link>\r\n                    </div>\r\n                    <i\r\n                        className=\"fas fa-ellipsis-h d-flex justify-content-center align-items-center text-secondary secondary-hover\"\r\n                        style={{ textDecoration: 'none', width: '30px', height: '30px', borderRadius: '30px' }}\r\n                        onClick={e => deleteComment(e, comment.id)}\r\n                    />\r\n                </div>\r\n                <div className=\"d-flex flex-column\">\r\n                    <div className=\"d-flex justify-content-start word-break\">\r\n                        {comment.content}\r\n                    </div>\r\n                    <div className=\"d-flex justify-content-start align-items-start text-secondary mt-2 mb-1\">\r\n                        <div className=\"d-flex align-items-center\">\r\n                            {comment.author.id == myProfile.id &&\r\n                                <i\r\n                                    className=\"far fa-trash-alt trash-icon text-secondary\"\r\n                                    style={{ margin: '20px 20px 0 0' }}\r\n                                    onClick={e => deleteComment(e, comment.id)}\r\n                                />\r\n                            }\r\n                            {comment.likes.map(like => like.profile.id).includes(myProfile.id) ?\r\n                                <i class=\"fas fa-heart\"\r\n                                    data-commentid={comment.id}\r\n                                    onClick={likeUnlikeComment}\r\n                                />\r\n                                :\r\n                                <i class=\"far fa-heart\"\r\n                                    data-commentid={comment.id}\r\n                                    onClick={likeUnlikeComment}\r\n                                />\r\n                            }\r\n                            <p\r\n                                className=\"post-likes-number\"\r\n                                onClick={() => setPostLikesModal({ isOpen: true, likes: comment.likes })}\r\n                            >\r\n                                {comment.likes.length}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </li>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}