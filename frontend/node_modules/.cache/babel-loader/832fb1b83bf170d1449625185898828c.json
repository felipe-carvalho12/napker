{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\felip\\\\CodeProjects\\\\Web\\\\Napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import Picker from'emoji-picker-react';import{Link}from'react-router-dom';import Header from'./main/header';import{SERVER_URL}from'../settings';import{csrftoken}from'../utils';var Posts=/*#__PURE__*/function(_React$Component){_inherits(Posts,_React$Component);var _super=_createSuper(Posts);function Posts(props){var _this;_classCallCheck(this,Posts);_this=_super.call(this,props);_this.handlePostContentChange=function(e){_this.setState({postContent:e.target.value});var el=document.querySelector('#post-form-submit-btn');el.disabled=e.target.value.trim()===''&&!_this.state.postFormImagePreview;};_this.handlePostImageChange=function(e){var reader=new FileReader();reader.onload=function(){if(reader.readyState===2){_this.setState({postFormImagePreview:reader.result});document.querySelector('#post-img-container').style.display='initial';document.querySelector('#post-form-submit-btn').disabled=false;}};try{reader.readAsDataURL(e.target.files[0]);}catch(_unused){}};_this.handleCloseImage=function(){document.querySelector('#post-img-container').style.display='none';document.querySelector('#post-image').value='';if(_this.state.postContent.trim()==='')document.querySelector('#post-form-submit-btn').disabled=true;_this.setState({postFormImagePreview:null});};_this.state={profile:null,postContent:'',postFormImagePreview:null};return _this;}_createClass(Posts,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;fetch(\"\".concat(SERVER_URL,\"/profile-api/myprofile\")).then(function(response){return response.json();}).then(function(data){return _this2.setState({profile:data});});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(Header,{page:\"Novo post\",backArrow:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"post-form-page-container\"},this.state.profile?/*#__PURE__*/React.createElement(\"form\",{action:\"\".concat(SERVER_URL,\"/post-api/create-post\"),method:\"POST\",className:\"create-post-form-mobile\",encType:\"multipart/form-data\"},/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",name:\"csrfmiddlewaretoken\",value:csrftoken}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(Link,{to:\"/perfil\"},/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(SERVER_URL).concat(this.state.profile.photo),className:\"profile-img-med\"})),/*#__PURE__*/React.createElement(\"textarea\",{className:\"post-content-text-area\",name:\"post-content\",value:this.state.postContent,placeholder:\"No que voc\\xEA est\\xE1 pensando?\",maxLength:300,autoFocus:true,style:{height:'250px'},onChange:this.handlePostContentChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-img-container\",id:\"post-img-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-img-options\"},/*#__PURE__*/React.createElement(\"i\",{className:\"far fa-times-circle\",onClick:this.handleCloseImage})),/*#__PURE__*/React.createElement(\"img\",{src:this.state.postFormImagePreview,className:\"post-img post-form-img-preview\",id:\"post-form-img-preview\"}))),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between\",style:{margin:'0px 70px 0 70px'}},/*#__PURE__*/React.createElement(\"div\",{className:\"post-extra-options\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"post-image\",class:\"far fa-image\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",accept:\"image/png, image/jpg, image/jpeg\",name:\"post-image\",id:\"post-image\",style:{display:'none'},onChange:this.handlePostImageChange})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\",id:\"post-form-submit-btn\",style:{height:'40px'},disabled:true},\"Postar\"))):/*#__PURE__*/React.createElement(\"div\",{className:\"posts-loader-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"loader\"}))));}}]);return Posts;}(React.Component);export{Posts as default};","map":{"version":3,"sources":["C:/Users/felip/CodeProjects/Web/Napker/frontend/src/components/postFormPage.js"],"names":["React","Picker","Link","Header","SERVER_URL","csrftoken","Posts","props","handlePostContentChange","e","setState","postContent","target","value","el","document","querySelector","disabled","trim","state","postFormImagePreview","handlePostImageChange","reader","FileReader","onload","readyState","result","style","display","readAsDataURL","files","handleCloseImage","profile","fetch","then","response","json","data","photo","height","margin","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Picker from 'emoji-picker-react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport Header from './main/header'\r\nimport { SERVER_URL } from '../settings'\r\nimport { csrftoken } from '../utils'\r\n\r\nexport default class Posts extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            profile: null,\r\n            postContent: '',\r\n            postFormImagePreview: null\r\n        }\r\n    }\r\n\r\n    componentWillMount() {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => this.setState({ profile: data }))\r\n    }\r\n\r\n\r\n    handlePostContentChange = e => {\r\n        this.setState({ postContent: e.target.value })\r\n        const el = document.querySelector('#post-form-submit-btn')\r\n        el.disabled = e.target.value.trim() === '' && !this.state.postFormImagePreview\r\n    }\r\n\r\n    handlePostImageChange = e => {\r\n        const reader = new FileReader()\r\n        reader.onload = () => {\r\n            if (reader.readyState === 2) {\r\n                this.setState({ postFormImagePreview: reader.result })\r\n                document.querySelector('#post-img-container').style.display = 'initial'\r\n                document.querySelector('#post-form-submit-btn').disabled = false\r\n            }\r\n        }\r\n        try {\r\n            reader.readAsDataURL(e.target.files[0])\r\n        } catch {\r\n\r\n        }\r\n    }\r\n\r\n    handleCloseImage = () => {\r\n        document.querySelector('#post-img-container').style.display = 'none'\r\n        document.querySelector('#post-image').value = ''\r\n        if (this.state.postContent.trim() === '') document.querySelector('#post-form-submit-btn').disabled = true\r\n        this.setState({ postFormImagePreview: null })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"content\">\r\n                <Header page=\"Novo post\" backArrow={true} />\r\n                <div className=\"post-form-page-container\">\r\n                    {this.state.profile ?\r\n                        <form\r\n                            action={`${SERVER_URL}/post-api/create-post`}\r\n                            method=\"POST\"\r\n                            className=\"create-post-form-mobile\"\r\n                            encType=\"multipart/form-data\"\r\n                        >\r\n                            <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrftoken} />\r\n                            <div className=\"d-flex\">\r\n                                <Link to=\"/perfil\">\r\n                                    <img\r\n                                        src={`${SERVER_URL}${this.state.profile.photo}`}\r\n                                        className=\"profile-img-med\"\r\n                                    />\r\n                                </Link>\r\n                                <textarea\r\n                                    className=\"post-content-text-area\"\r\n                                    name=\"post-content\"\r\n                                    value={this.state.postContent}\r\n                                    placeholder=\"No que você está pensando?\"\r\n                                    maxLength={300}\r\n                                    autoFocus\r\n                                    style={{ height: '250px' }}\r\n                                    onChange={this.handlePostContentChange}\r\n                                />\r\n                            </div>\r\n                            <div className=\"w-100 d-flex justify-content-center\">\r\n                                <div\r\n                                    className=\"post-img-container\"\r\n                                    id=\"post-img-container\">\r\n                                    <div\r\n                                        className=\"post-img-options\"\r\n                                    >\r\n                                        <i\r\n                                            className=\"far fa-times-circle\"\r\n                                            onClick={this.handleCloseImage}\r\n                                        />\r\n                                    </div>\r\n                                    <img\r\n                                        src={this.state.postFormImagePreview}\r\n                                        className=\"post-img post-form-img-preview\"\r\n                                        id=\"post-form-img-preview\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <hr />\r\n                            <div className=\"d-flex justify-content-between\" style={{ margin: '0px 70px 0 70px' }}>\r\n                                <div className=\"post-extra-options\">\r\n                                    <label htmlFor=\"post-image\" class=\"far fa-image\" />\r\n                                    <input\r\n                                        type=\"file\"\r\n                                        accept=\"image/png, image/jpg, image/jpeg\"\r\n                                        name=\"post-image\"\r\n                                        id=\"post-image\"\r\n                                        style={{ display: 'none' }}\r\n                                        onChange={this.handlePostImageChange}\r\n                                    />\r\n                                </div>\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"btn btn-primary\"\r\n                                    id=\"post-form-submit-btn\"\r\n                                    style={{ height: '40px' }}\r\n                                    disabled\r\n                                >\r\n                                    Postar\r\n                            </button>\r\n                            </div>\r\n                        </form>\r\n                        :\r\n                        <div className=\"posts-loader-container\" >\r\n                            <div className=\"loader\" />\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}