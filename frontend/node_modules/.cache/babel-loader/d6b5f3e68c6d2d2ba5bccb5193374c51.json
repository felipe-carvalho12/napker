{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\Joaob\\\\OneDrive\\\\Documents\\\\napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _slicedToArray from\"C:\\\\Users\\\\Joaob\\\\OneDrive\\\\Documents\\\\napker\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Picker from'emoji-picker-react';import{Link}from'react-router-dom';import{SERVER_URL}from'../../../../../config/settings';import{csrftoken,openCloseEmojiList}from'../../../../../config/utils';export default function PostForm(props){var _React$createElement;var myProfile=props.myProfile;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),postContent=_useState2[0],setPostContent=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),postFormImagePreview=_useState4[0],setPostFormImagePreview=_useState4[1];var handlePostContentChange=function handlePostContentChange(e){setPostContent(e.target.value);var el=document.querySelector('#post-form-submit-btn');el.disabled=e.target.value.trim()===''&&!postFormImagePreview;};var handlePostImageChange=function handlePostImageChange(e){var reader=new FileReader();reader.onload=function(){if(reader.readyState===2){setPostFormImagePreview(reader.result);document.querySelector('#post-img-container').style.display='initial';document.querySelector('#post-form-submit-btn').disabled=false;}};try{reader.readAsDataURL(e.target.files[0]);}catch(_unused){}};var handleCloseImage=function handleCloseImage(){document.querySelector('#post-img-container').style.display='none';document.querySelector('#post-image').value='';if(postContent.trim()==='')document.querySelector('#post-form-submit-btn').disabled=true;setPostFormImagePreview(null);};var onEmojiSelect=function onEmojiSelect(event,emojiObject){setPostContent(postContent+emojiObject.emoji);document.querySelector('#post-form-submit-btn').disabled=false;};function getScrollHeight(elm){var savedValue=elm.value;elm.value='';elm._baseScrollHeight=elm.scrollHeight;elm.value=savedValue;}function onExpandableTextareaInput(_ref){var elm=_ref.target;// make sure the input event originated from a textarea and it's desired to be auto-expandable\nif(!elm.classList.contains('autoExpand')||!elm.nodeName=='TEXTAREA')return;var minRows=elm.getAttribute('data-min-rows')|0,rows;!elm._baseScrollHeight&&getScrollHeight(elm);elm.rows=minRows;rows=Math.ceil((elm.scrollHeight-elm._baseScrollHeight)/16);elm.rows=minRows+rows;}// global delegated event listener\ndocument.addEventListener('input',onExpandableTextareaInput);return/*#__PURE__*/React.createElement(\"form\",{action:\"\".concat(SERVER_URL,\"/post-api/create-post\"),method:\"POST\",className:\"create-post-form\",encType:\"multipart/form-data\"},/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",name:\"csrfmiddlewaretoken\",value:csrftoken}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(Link,{to:\"/perfil\"},/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(SERVER_URL).concat(myProfile.photo),className:\"profile-img-med\"})),/*#__PURE__*/React.createElement(\"textarea\",(_React$createElement={class:\"autoExpand\",rows:\"3\",\"data-min-rows\":\"3\",placeholder:\"Auto-Expanding Textarea\",autofocus:true,className:\"post-content-textarea\",name:\"post-content\",value:postContent},_defineProperty(_React$createElement,\"placeholder\",\"No que voc\\xEA est\\xE1 pensando?\"),_defineProperty(_React$createElement,\"maxLength\",300),_defineProperty(_React$createElement,\"autoFocus\",true),_defineProperty(_React$createElement,\"onChange\",handlePostContentChange),_React$createElement))),/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-img-container\",id:\"post-img-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"post-img-options\"},/*#__PURE__*/React.createElement(\"i\",{className:\"far fa-times-circle\",onClick:handleCloseImage})),/*#__PURE__*/React.createElement(\"img\",{src:postFormImagePreview,className:\"post-img post-form-img-preview\",id:\"post-form-img-preview\"}))),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between\",style:{margin:'0px 70px 0 70px'}},/*#__PURE__*/React.createElement(\"div\",{className:\"post-extra-options\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"post-image\",class:\"far fa-image\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",accept:\"image/png, image/jpg, image/jpeg\",name:\"post-image\",id:\"post-image\",style:{display:'none'},onChange:handlePostImageChange}),/*#__PURE__*/React.createElement(\"label\",{className:\"far fa-smile\",id:\"emoji-button\",onClick:function onClick(){return openCloseEmojiList(false);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"emoji-list-container\",id:\"emoji-list-container\"},/*#__PURE__*/React.createElement(Picker,{onEmojiClick:onEmojiSelect}))),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\",id:\"post-form-submit-btn\",style:{height:'40px'},disabled:true},\"Postar\")));}","map":{"version":3,"sources":["C:/Users/Joaob/OneDrive/Documents/napker/Frontend/src/pages/home/components/posts_/components/PostForm.js"],"names":["React","useState","Picker","Link","SERVER_URL","csrftoken","openCloseEmojiList","PostForm","props","myProfile","postContent","setPostContent","postFormImagePreview","setPostFormImagePreview","handlePostContentChange","e","target","value","el","document","querySelector","disabled","trim","handlePostImageChange","reader","FileReader","onload","readyState","result","style","display","readAsDataURL","files","handleCloseImage","onEmojiSelect","event","emojiObject","emoji","getScrollHeight","elm","savedValue","_baseScrollHeight","scrollHeight","onExpandableTextareaInput","classList","contains","nodeName","minRows","getAttribute","rows","Math","ceil","addEventListener","photo","margin","height"],"mappings":"wWAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,MAAP,KAAmB,oBAAnB,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,OAASC,UAAT,KAA2B,gCAA3B,CACA,OAASC,SAAT,CAAoBC,kBAApB,KAA8C,6BAA9C,CAEA,cAAe,SAASC,CAAAA,QAAT,CAAkBC,KAAlB,CAAyB,0BACpC,GAAMC,CAAAA,SAAS,CAAGD,KAAK,CAACC,SAAxB,CADoC,cAGER,QAAQ,CAAC,EAAD,CAHV,wCAG7BS,WAH6B,eAGhBC,cAHgB,8BAIoBV,QAAQ,CAAC,IAAD,CAJ5B,yCAI7BW,oBAJ6B,eAIPC,uBAJO,eAMpC,GAAMC,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,CAAAC,CAAC,CAAI,CACjCJ,cAAc,CAACI,CAAC,CAACC,MAAF,CAASC,KAAV,CAAd,CACA,GAAMC,CAAAA,EAAE,CAAGC,QAAQ,CAACC,aAAT,CAAuB,uBAAvB,CAAX,CACAF,EAAE,CAACG,QAAH,CAAcN,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeK,IAAf,KAA0B,EAA1B,EAAgC,CAACV,oBAA/C,CACH,CAJD,CAMA,GAAMW,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAAAR,CAAC,CAAI,CAC/B,GAAMS,CAAAA,MAAM,CAAG,GAAIC,CAAAA,UAAJ,EAAf,CACAD,MAAM,CAACE,MAAP,CAAgB,UAAM,CAClB,GAAIF,MAAM,CAACG,UAAP,GAAsB,CAA1B,CAA6B,CACzBd,uBAAuB,CAACW,MAAM,CAACI,MAAR,CAAvB,CACAT,QAAQ,CAACC,aAAT,CAAuB,qBAAvB,EAA8CS,KAA9C,CAAoDC,OAApD,CAA8D,SAA9D,CACAX,QAAQ,CAACC,aAAT,CAAuB,uBAAvB,EAAgDC,QAAhD,CAA2D,KAA3D,CACH,CACJ,CAND,CAOA,GAAI,CACAG,MAAM,CAACO,aAAP,CAAqBhB,CAAC,CAACC,MAAF,CAASgB,KAAT,CAAe,CAAf,CAArB,EACH,CAAC,cAAM,CAEP,CACJ,CAdD,CAgBA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC3Bd,QAAQ,CAACC,aAAT,CAAuB,qBAAvB,EAA8CS,KAA9C,CAAoDC,OAApD,CAA8D,MAA9D,CACAX,QAAQ,CAACC,aAAT,CAAuB,aAAvB,EAAsCH,KAAtC,CAA8C,EAA9C,CACA,GAAIP,WAAW,CAACY,IAAZ,KAAuB,EAA3B,CAA+BH,QAAQ,CAACC,aAAT,CAAuB,uBAAvB,EAAgDC,QAAhD,CAA2D,IAA3D,CAC/BR,uBAAuB,CAAC,IAAD,CAAvB,CACH,CALD,CAOA,GAAMqB,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,CAAQC,WAAR,CAAwB,CAC1CzB,cAAc,CAACD,WAAW,CAAG0B,WAAW,CAACC,KAA3B,CAAd,CACAlB,QAAQ,CAACC,aAAT,CAAuB,uBAAvB,EAAgDC,QAAhD,CAA2D,KAA3D,CACH,CAHD,CAIA,QAASiB,CAAAA,eAAT,CAAyBC,GAAzB,CAA6B,CACzB,GAAIC,CAAAA,UAAU,CAAGD,GAAG,CAACtB,KAArB,CACAsB,GAAG,CAACtB,KAAJ,CAAY,EAAZ,CACAsB,GAAG,CAACE,iBAAJ,CAAwBF,GAAG,CAACG,YAA5B,CACAH,GAAG,CAACtB,KAAJ,CAAYuB,UAAZ,CACD,CAED,QAASG,CAAAA,yBAAT,MAAkD,IAANJ,CAAAA,GAAM,MAAbvB,MAAa,CAChD;AACA,GAAI,CAACuB,GAAG,CAACK,SAAJ,CAAcC,QAAd,CAAuB,YAAvB,CAAD,EAAyC,CAACN,GAAG,CAACO,QAAL,EAAiB,UAA9D,CAA2E,OAE3E,GAAIC,CAAAA,OAAO,CAAGR,GAAG,CAACS,YAAJ,CAAiB,eAAjB,EAAkC,CAAhD,CAAmDC,IAAnD,CACA,CAACV,GAAG,CAACE,iBAAL,EAA0BH,eAAe,CAACC,GAAD,CAAzC,CAEAA,GAAG,CAACU,IAAJ,CAAWF,OAAX,CACAE,IAAI,CAAGC,IAAI,CAACC,IAAL,CAAU,CAACZ,GAAG,CAACG,YAAJ,CAAmBH,GAAG,CAACE,iBAAxB,EAA6C,EAAvD,CAAP,CACAF,GAAG,CAACU,IAAJ,CAAWF,OAAO,CAAGE,IAArB,CACD,CAGD;AACA9B,QAAQ,CAACiC,gBAAT,CAA0B,OAA1B,CAAmCT,yBAAnC,EAGF,mBACI,4BACI,MAAM,WAAKvC,UAAL,yBADV,CAEI,MAAM,CAAC,MAFX,CAGI,SAAS,CAAC,kBAHd,CAII,OAAO,CAAC,qBAJZ,eAMI,6BAAO,IAAI,CAAC,QAAZ,CAAqB,IAAI,CAAC,qBAA1B,CAAgD,KAAK,CAAEC,SAAvD,EANJ,cAOI,2BAAK,SAAS,CAAC,QAAf,eACI,oBAAC,IAAD,EAAM,EAAE,CAAC,SAAT,eACI,2BACI,GAAG,WAAKD,UAAL,SAAkBK,SAAS,CAAC4C,KAA5B,CADP,CAEI,SAAS,CAAC,iBAFd,EADJ,CADJ,cAOI,sDACI,KAAK,CAAC,YADV,CAEI,IAAI,CAAC,GAFT,CAGI,gBAAc,GAHlB,CAII,WAAW,CAAC,yBAJhB,CAKI,SAAS,KALb,CAMI,SAAS,CAAC,uBANd,CAOI,IAAI,CAAC,cAPT,CAQI,KAAK,CAAE3C,WARX,qDASgB,kCAThB,mDAUe,GAVf,yGAYcI,uBAZd,wBAPJ,CAPJ,cA6BI,2BAAK,SAAS,CAAC,qCAAf,eACI,2BACI,SAAS,CAAC,oBADd,CAEI,EAAE,CAAC,oBAFP,eAGI,2BACI,SAAS,CAAC,kBADd,eAGI,yBACI,SAAS,CAAC,qBADd,CAEI,OAAO,CAAEmB,gBAFb,EAHJ,CAHJ,cAWI,2BACI,GAAG,CAAErB,oBADT,CAEI,SAAS,CAAC,gCAFd,CAGI,EAAE,CAAC,uBAHP,EAXJ,CADJ,CA7BJ,cAgDI,8BAhDJ,cAiDI,2BAAK,SAAS,CAAC,gCAAf,CAAgD,KAAK,CAAE,CAAE0C,MAAM,CAAE,iBAAV,CAAvD,eACI,2BAAK,SAAS,CAAC,oBAAf,eACI,6BAAO,OAAO,CAAC,YAAf,CAA4B,KAAK,CAAC,cAAlC,EADJ,cAEI,6BACI,IAAI,CAAC,MADT,CAEI,MAAM,CAAC,kCAFX,CAGI,IAAI,CAAC,YAHT,CAII,EAAE,CAAC,YAJP,CAKI,KAAK,CAAE,CAAExB,OAAO,CAAE,MAAX,CALX,CAMI,QAAQ,CAAEP,qBANd,EAFJ,cAUI,6BACI,SAAS,CAAC,cADd,CAEI,EAAE,CAAC,cAFP,CAGI,OAAO,CAAE,yBAAMjB,CAAAA,kBAAkB,CAAC,KAAD,CAAxB,EAHb,EAVJ,cAeI,2BAAK,SAAS,CAAC,sBAAf,CAAsC,EAAE,CAAC,sBAAzC,eACI,oBAAC,MAAD,EAAQ,YAAY,CAAE4B,aAAtB,EADJ,CAfJ,CADJ,cAoBI,8BACI,IAAI,CAAC,QADT,CAEI,SAAS,CAAC,iBAFd,CAGI,EAAE,CAAC,sBAHP,CAII,KAAK,CAAE,CAAEqB,MAAM,CAAE,MAAV,CAJX,CAKI,QAAQ,KALZ,WApBJ,CAjDJ,CADJ,CAkFH","sourcesContent":["import React, { useState } from 'react'\r\nimport Picker from 'emoji-picker-react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../../../../../config/settings'\r\nimport { csrftoken, openCloseEmojiList } from '../../../../../config/utils'\r\n\r\nexport default function PostForm(props) {\r\n    const myProfile = props.myProfile\r\n\r\n    const [postContent, setPostContent] = useState('')\r\n    const [postFormImagePreview, setPostFormImagePreview] = useState(null)\r\n\r\n    const handlePostContentChange = e => {\r\n        setPostContent(e.target.value)\r\n        const el = document.querySelector('#post-form-submit-btn')\r\n        el.disabled = e.target.value.trim() === '' && !postFormImagePreview\r\n    }\r\n\r\n    const handlePostImageChange = e => {\r\n        const reader = new FileReader()\r\n        reader.onload = () => {\r\n            if (reader.readyState === 2) {\r\n                setPostFormImagePreview(reader.result)\r\n                document.querySelector('#post-img-container').style.display = 'initial'\r\n                document.querySelector('#post-form-submit-btn').disabled = false\r\n            }\r\n        }\r\n        try {\r\n            reader.readAsDataURL(e.target.files[0])\r\n        } catch {\r\n\r\n        }\r\n    }\r\n\r\n    const handleCloseImage = () => {\r\n        document.querySelector('#post-img-container').style.display = 'none'\r\n        document.querySelector('#post-image').value = ''\r\n        if (postContent.trim() === '') document.querySelector('#post-form-submit-btn').disabled = true\r\n        setPostFormImagePreview(null)\r\n    }\r\n\r\n    const onEmojiSelect = (event, emojiObject) => {\r\n        setPostContent(postContent + emojiObject.emoji)\r\n        document.querySelector('#post-form-submit-btn').disabled = false\r\n    }\r\n    function getScrollHeight(elm){\r\n        var savedValue = elm.value\r\n        elm.value = ''\r\n        elm._baseScrollHeight = elm.scrollHeight\r\n        elm.value = savedValue\r\n      }\r\n      \r\n      function onExpandableTextareaInput({ target:elm }){\r\n        // make sure the input event originated from a textarea and it's desired to be auto-expandable\r\n        if( !elm.classList.contains('autoExpand') || !elm.nodeName == 'TEXTAREA' ) return\r\n        \r\n        var minRows = elm.getAttribute('data-min-rows')|0, rows;\r\n        !elm._baseScrollHeight && getScrollHeight(elm)\r\n      \r\n        elm.rows = minRows\r\n        rows = Math.ceil((elm.scrollHeight - elm._baseScrollHeight) / 16)\r\n        elm.rows = minRows + rows\r\n      }\r\n      \r\n      \r\n      // global delegated event listener\r\n      document.addEventListener('input', onExpandableTextareaInput)\r\n      \r\n\r\n    return (\r\n        <form\r\n            action={`${SERVER_URL}/post-api/create-post`}\r\n            method=\"POST\"\r\n            className=\"create-post-form\"\r\n            encType=\"multipart/form-data\"\r\n        >\r\n            <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrftoken} />\r\n            <div className=\"d-flex\">\r\n                <Link to=\"/perfil\">\r\n                    <img\r\n                        src={`${SERVER_URL}${myProfile.photo}`}\r\n                        className=\"profile-img-med\"\r\n                    />\r\n                </Link>\r\n                <textarea\r\n                    class='autoExpand' \r\n                    rows='3' \r\n                    data-min-rows='3' \r\n                    placeholder='Auto-Expanding Textarea' \r\n                    autofocus\r\n                    className=\"post-content-textarea\"\r\n                    name=\"post-content\"\r\n                    value={postContent}\r\n                    placeholder=\"No que você está pensando?\"\r\n                    maxLength={300}\r\n                    autoFocus\r\n                    onChange={handlePostContentChange}\r\n                />\r\n            </div>\r\n            <div className=\"w-100 d-flex justify-content-center\">\r\n                <div\r\n                    className=\"post-img-container\"\r\n                    id=\"post-img-container\">\r\n                    <div\r\n                        className=\"post-img-options\"\r\n                    >\r\n                        <i\r\n                            className=\"far fa-times-circle\"\r\n                            onClick={handleCloseImage}\r\n                        />\r\n                    </div>\r\n                    <img\r\n                        src={postFormImagePreview}\r\n                        className=\"post-img post-form-img-preview\"\r\n                        id=\"post-form-img-preview\"\r\n                    />\r\n                </div>\r\n            </div>\r\n            <hr />\r\n            <div className=\"d-flex justify-content-between\" style={{ margin: '0px 70px 0 70px' }}>\r\n                <div className=\"post-extra-options\">\r\n                    <label htmlFor=\"post-image\" class=\"far fa-image\" />\r\n                    <input\r\n                        type=\"file\"\r\n                        accept=\"image/png, image/jpg, image/jpeg\"\r\n                        name=\"post-image\"\r\n                        id=\"post-image\"\r\n                        style={{ display: 'none' }}\r\n                        onChange={handlePostImageChange}\r\n                    />\r\n                    <label\r\n                        className=\"far fa-smile\"\r\n                        id=\"emoji-button\"\r\n                        onClick={() => openCloseEmojiList(false)}\r\n                    />\r\n                    <div className=\"emoji-list-container\" id=\"emoji-list-container\">\r\n                        <Picker onEmojiClick={onEmojiSelect} />\r\n                    </div>\r\n                </div>\r\n                <button\r\n                    type=\"submit\"\r\n                    className=\"btn btn-primary\"\r\n                    id=\"post-form-submit-btn\"\r\n                    style={{ height: '40px' }}\r\n                    disabled\r\n                >\r\n                    Postar\r\n                </button>\r\n            </div>\r\n        </form>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}