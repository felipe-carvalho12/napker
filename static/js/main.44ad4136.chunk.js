(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{19:function(e,t,a){e.exports=a(31)},24:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(11),c=a.n(l),o=(a(24),a(8)),i=a(5),s=a(4);function m(e){return r.a.createElement("div",{className:"sidebar"},r.a.createElement(i.b,{to:"/",style:{textDecoration:"none"}},r.a.createElement("h2",null,"Napker")),r.a.createElement("ul",null,r.a.createElement(i.b,{to:"/",style:{textDecoration:"none"}},r.a.createElement("li",null,r.a.createElement("i",{className:"fas fa-home"}),"Home")),r.a.createElement(i.b,{to:"/notifica\xe7\xf5es",style:{textDecoration:"none"}},r.a.createElement("li",null,r.a.createElement("i",{className:"fas fa-bell"}),"Notifica\xe7\xf5es",e.notificationsNumber?r.a.createElement("p",{id:"notifications-number"},e.notificationsNumber):"")),r.a.createElement(i.b,{to:"/mensagens",style:{textDecoration:"none"}},r.a.createElement("li",null,r.a.createElement("i",{className:"fas fa-envelope"}),"Mensagens")),r.a.createElement(i.b,{to:"/perfil",style:{textDecoration:"none"}},r.a.createElement("li",null,r.a.createElement("i",{className:"fas fa-user"}),"Perfil")),r.a.createElement(i.b,{to:"/configura\xe7\xf5es",style:{textDecoration:"none"}},r.a.createElement("li",null,r.a.createElement("i",{className:"fas fa-cog"}),"Configura\xe7\xf5es"))))}function u(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-row d-inline-block"},r.a.createElement("div",{className:"col d-flex"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"O que est\xe1 acontecendo?",style:{marginRight:"5px",width:"400px"}}),r.a.createElement("button",{className:"btn btn-primary",style:{marginBottom:"20px",borderRadius:"5px"}},"Postar"))),r.a.createElement("div",{className:"list-group"}))}var f=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}("csrftoken"),d="http://127.0.0.1:8000";function p(){window.confirm("Sair do Napker?\nVoc\xea poder\xe1 entrar novamente quando quiser.")&&window.location.replace("".concat(d,"/logout"))}function E(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),s=Object(o.a)(c,2),m=s[0],u=s[1];Object(n.useEffect)((function(){var e;e=""===m?"".concat(d,"/profile-api/profile-list"):"".concat(d,"/profile-api/users/").concat(m),fetch(e).then((function(e){return e.json()})).then((function(e){l(e)})).catch((function(e){return console.log(e)}))}),[m]);var p=function(e){var t,a=e.target;"Solicitar"===a.innerHTML?(t=a.dataset.pk,fetch("".concat(d,"/profile-api/send-friend-request"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":f},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return console.log(e)})),a.innerHTML="Solicitado",a.className="btn btn-primary"):(!function(e){fetch("".concat(d,"/profile-api/cancel-friend-request"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":f},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))}(a.dataset.pk),a.innerHTML="Solicitar",a.className="btn btn-secondary")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form-row d-inline-block"},r.a.createElement("div",{className:"col"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Pesquisar",style:{width:"400px"},onChange:function(e){return u(e.target.value)}}))),r.a.createElement("div",{className:"list-group"},a?a.map((function(e){return r.a.createElement("li",{className:"list-group-item profile-row",key:e.id},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"profile-col"},r.a.createElement(i.b,{to:"/user/".concat(e.slug)},r.a.createElement("img",{src:"".concat(d).concat(e.photo)})),r.a.createElement("div",{className:"main-profile-data"},r.a.createElement(i.b,{to:"/user/".concat(e.slug),style:{color:"#000"}},r.a.createElement("strong",null,e.first_name," ",e.last_name)),r.a.createElement("p",{className:"text-secondary"},"@",e.user.username))),r.a.createElement("div",{className:"profile-col"},e.bio),r.a.createElement("div",{className:"profile-col"},r.a.createElement("button",{className:"btn btn-secondary","data-pk":e.user.id,onClick:p},"Solicitar"))))})):r.a.createElement(r.a.Fragment,null)))}function b(e){return r.a.createElement("div",{className:"header fixed-top"},e.backArrow?r.a.createElement("i",{class:"fas fa-arrow-left profile-left-arrow",onClick:function(){return window.history.back()}}):"",r.a.createElement("strong",null,e.page),r.a.createElement("a",{class:"logout",onClick:p},"Sair"))}function g(){var e=Object(n.useState)("Perfis"),t=Object(o.a)(e,2),a=t[0],l=t[1],c={Perfis:r.a.createElement(E,null),Posts:r.a.createElement(u,null)};return document.title="Home / Napker",r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{page:"Home"}),r.a.createElement("div",{className:"content"},r.a.createElement("button",{type:"button",className:"btn btn-primary",style:{marginRight:"50px",borderRadius:"20px"},onClick:function(){return l("Perfis"===a?"Posts":"Perfis")}},"Perfis"===a?"Ver posts":"Ver perfis"),c[a]))}function h(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],c=a[1];document.title="Notifica\xe7\xf5es / Napker",Object(n.useEffect)((function(){fetch("".concat(d,"/profile-api/myinvites")).then((function(e){return e.json()})).then((function(e){return c(e)}))}),[]);var s=function(t){var a=t.target,n={senderid:a.dataset.senderid,reply:a.dataset.reply};fetch("".concat(d,"/profile-api/reply-friend-request"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":f},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(t){console.log(t),e.updateNotificationsNumber()})),document.getElementById("friend-request-list").removeChild(document.getElementById(a.dataset.senderid))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{page:"Notifica\xe7\xf5es"}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"list-group",id:"friend-request-list"},l.length?l.map((function(e){return r.a.createElement("li",{className:"list-group-item profile-row",id:e.sender.id,key:e.sender.id},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"profile-col"},r.a.createElement(i.b,{to:"/user/".concat(e.sender.slug)},r.a.createElement("img",{src:"".concat(d).concat(e.sender.photo)})),r.a.createElement("div",{className:"main-profile-data"},r.a.createElement(i.b,{to:"/user/".concat(e.sender.slug),style:{color:"#000"}},r.a.createElement("strong",null,e.sender.first_name," ",e.sender.last_name)),r.a.createElement("p",{className:"text-secondary"},"@",e.sender.user.username))),r.a.createElement("div",{className:"profile-col"},e.sender.bio),r.a.createElement("div",{className:"profile-col",style:{justifyContent:"space-between"}},r.a.createElement("button",{className:"btn btn-primary btn-reply-fr","data-senderid":e.sender.id,"data-reply":"accept",onClick:s},"Confirmar"),r.a.createElement("button",{className:"btn btn-grey btn-reply-fr","data-senderid":e.sender.id,"data-reply":"decline",onClick:s},"Excluir"))))})):r.a.createElement("h3",{style:{marginTop:"100px"}},"Voc\xea ainda n\xe3o tem nenhuma notifica\xe7\xe3o"))))}function y(){return document.title="Mensagens / Napker",r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{page:"Mensagens"}),r.a.createElement("div",{className:"content"},"Mensagens"))}var N=a(12);function v(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),i=Object(o.a)(c,2),s=i[0],m=i[1],u={borderRadius:"50%",display:"inline-block",transform:"scale(1.5)",marginBottom:"25px"};return document.title="Perfil / Napker",Object(n.useEffect)((function(){fetch("".concat(d,"/profile-api/myprofile")).then((function(e){return e.json()})).then((function(e){return l(e)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{page:"Perfil"}),a?r.a.createElement("div",{className:"content"},r.a.createElement(N.a,{show:s,onHide:function(){return m(!1)},size:"lg"},r.a.createElement(N.a.Header,{closeButton:!0},r.a.createElement(N.a.Title,null,"Editar perfil")),r.a.createElement(N.a.Body,null,r.a.createElement("form",{action:"".concat(d,"/update-profile"),id:"update-profile-form",method:"POST"},r.a.createElement("input",{type:"hidden",name:"csrfmiddlewaretoken",value:f}),r.a.createElement("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{padding:"25px"}},r.a.createElement("img",{src:"".concat(d).concat(a.photo),style:u}),r.a.createElement("input",{type:"file",accept:"image/png, image/jpg",name:"profile-photo"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"first-name",className:"profile-label"},"Nome:"),r.a.createElement("input",{class:"form-control",type:"text",name:"first-name",id:"first-name",placeholder:a.first_name})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"last-name",className:"profile-label"},"Sobrenome:"),r.a.createElement("input",{class:"form-control",type:"text",name:"last-name",id:"last-name",placeholder:a.last_name})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username",className:"profile-label"},"Nome de usu\xe1rio:"),r.a.createElement("input",{class:"form-control",type:"text",name:"username",id:"username",placeholder:a.user.username}),r.a.createElement("span",{id:"username-taken"},"Nome de usu\xe1rio j\xe1 existe")),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"email",className:"profile-label"},"Email:"),r.a.createElement("input",{class:"form-control",type:"email",name:"email",id:"email",placeholder:a.email})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"gender",className:"profile-label"},"G\xeanero:"),r.a.createElement("select",{class:"form-control",name:"gender",id:"gender",placeholder:a.gender},r.a.createElement("option",{value:"male"},"Masculino"),r.a.createElement("option",{value:"female"},"Feminino"),r.a.createElement("option",{value:"other"},"Outro"))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"birth-date",className:"profile-label"},"Data de nascimento:"),r.a.createElement("input",{class:"form-control",type:"date",name:"birth-date",id:"birth-date",defaultValue:a.birth_date})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"bio",className:"profile-label"},"Bio:"),r.a.createElement("input",{class:"form-control",type:"email",name:"bio",id:"bio",placeholder:a.bio})))),r.a.createElement(N.a.Footer,null,r.a.createElement("button",{className:"btn btn-grey",onClick:function(){return m(!1)}},"Fechar"),r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return document.querySelector("form#update-profile-form").submit()}},"Salvar"))),r.a.createElement("div",{className:"d-flex justify-content-between align-items-center profile-data-container"},r.a.createElement("div",{className:"d-flex flex-column align-items-start"},r.a.createElement("p",{style:{padding:"15px"}},r.a.createElement("img",{src:"".concat(d).concat(a.photo),style:u})),r.a.createElement("p",{style:{marginBottom:0}},r.a.createElement("strong",null,a.first_name," ",a.last_name)),r.a.createElement("p",{className:"text-secondary",style:{marginTop:0}},"@",a.user.username),r.a.createElement("p",null,a.bio),r.a.createElement("p",{className:"text-secondary"},r.a.createElement("i",{className:"far fa-calendar-alt"})," Entrou em ",a.created.split("-").reverse().join("/")),r.a.createElement("p",null,r.a.createElement("strong",null,a.friends.length)," ",1===a.friends.length?"amigo":"amigos")),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return m(!0)}},"Editar perfil")))):r.a.createElement(r.a.Fragment,null))}function j(){return document.title="Configura\xe7\xf5es / Napker",r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{page:"Configura\xe7\xf5es"}),r.a.createElement("div",{className:"content"},"Configura\xe7\xf5es"))}function k(){var e=Object(s.f)().slug,t=Object(n.useState)(null),a=Object(o.a)(t,2),l=a[0],c=a[1];Object(n.useEffect)((function(){fetch("".concat(d,"/profile-api/user/").concat(e)).then((function(e){return e.json()})).then((function(e){return c(e)}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{page:l?"".concat(l.first_name," ").concat(l.last_name):"Perfil",backArrow:!0}),l?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"d-flex justify-content-between align-items-center profile-data-container"},r.a.createElement("div",{className:"d-flex flex-column align-items-start"},r.a.createElement("p",{style:{padding:"15px"}},r.a.createElement("img",{src:"".concat(d).concat(l.photo),style:{borderRadius:"50%",display:"inline-block",transform:"scale(1.5)",marginBottom:"25px"}})),r.a.createElement("p",{style:{marginBottom:0}},r.a.createElement("strong",null,l.first_name," ",l.last_name)),r.a.createElement("p",{className:"text-secondary",style:{marginTop:0}},"@",l.user.username),r.a.createElement("p",null,l.bio),r.a.createElement("p",{className:"text-secondary"},r.a.createElement("i",{className:"far fa-calendar-alt"})," Entrou em ",l.created.split("-").reverse().join("/")),r.a.createElement("p",null,r.a.createElement("strong",null,l.friends.length)," ",1===l.friends.length?"amigo":"amigos")),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-secondary","data-pk":l.user.id,onClick:function(e){var t,a=e.target;"Solicitar"===a.innerHTML?(t=a.dataset.pk,fetch("".concat(d,"/profile-api/send-friend-request"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":f},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return console.log(e)})),a.innerHTML="Solicitado",a.className="btn btn-primary"):(!function(e){fetch("".concat(d,"/profile-api/cancel-friend-request"),{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":f},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))}(a.dataset.pk),a.innerHTML="Solicitar",a.className="btn btn-secondary")}},"Solicitar"))))):r.a.createElement(r.a.Fragment,null))}function x(){var e=Object(n.useState)(0),t=Object(o.a)(e,2),a=t[0],l=t[1];Object(n.useEffect)((function(){c()}),[]);var c=function(){console.log("updating notifications number..."),fetch("".concat(d,"/profile-api/myinvites")).then((function(e){return e.json()})).then((function(e){return l(e.length)}))};return r.a.createElement(i.a,null,console.log("Number: ",a),r.a.createElement(m,{notificationsNumber:a}),r.a.createElement("div",{className:"main-content"},r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/notifica\xe7\xf5es",render:function(e){return r.a.createElement(h,Object.assign({},e,{updateNotificationsNumber:c}))}}),r.a.createElement(s.a,{path:"/mensagens",component:y}),r.a.createElement(s.a,{path:"/perfil",component:v}),r.a.createElement(s.a,{path:"/configura\xe7\xf5es",component:j}),r.a.createElement(s.a,{path:"/user/:slug",component:k}),r.a.createElement(s.a,{path:"/",component:g}))))}c.a.render(r.a.createElement(x,null),document.querySelector("#root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.44ad4136.chunk.js.map