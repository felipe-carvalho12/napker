{"version":3,"sources":["components/sidebar.js","settings.js","components/likesmodal.js","utils.js","pages/home-components/posts.js","pages/home-components/profiles.js","components/header.js","pages/home.js","pages/notifications.js","pages/messages/websocket.js","pages/messages/chat.js","pages/messages/messages.js","pages/profile-components/posts.js","pages/profile-components/interests.js","pages/myprofile.js","pages/settings.js","pages/home-components/profile.js","pages/profile-components/friends.js","pages/profile-components/interestprofiles.js","components/commentmodal.js","pages/home-components/post.js","App.js","index.js"],"names":["Sidebar","props","className","to","style","textDecoration","notificationsNumber","unreadMessagesNumber","SERVER_URL","LikesModal","Modal","show","isOpen","onHide","hideModal","size","Header","closeButton","Title","Body","height","overflow","overflowY","likes","map","like","profile","slug","color","onClick","key","id","src","photo","marginRight","first_name","last_name","user","username","bio","csrftoken","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","getCookie","handleLogout","window","confirm","location","replace","Posts","fetchPosts","fetch","then","response","json","data","setState","posts","createPost","method","headers","body","JSON","stringify","content","state","postContent","console","log","likeUnlikePost","e","stopPropagation","likeBtn","target","classList","contains","remove","add","dataset","postid","hideLikesModal","likesModal","this","type","placeholder","width","value","onChange","marginBottom","borderRadius","post","href","author","created","reverse","join","textAlign","image","class","comments","includes","data-postid","React","Component","Profiles","useState","profiles","setProfiles","filteredProfiles","setFilteredProfiles","search","setSearch","useEffect","handleRelationshipUpdate","pk","btn","innerHTML","cancelFriendRequest","data-pk","backArrow","history","back","page","Home","setPage","pages","title","Notifications","invites","setInvites","postLikes","setPostLikes","setComments","updateNotificationsNumber","replyRequest","requestBody","senderid","reply","getElementById","removeChild","sender","justifyContent","data-senderid","data-reply","fontSize","comment","marginTop","WebSocketService","callbacks","socketRef","instance","chatUrl","path","WebSocket","onopen","socketNewMessage","command","onmessage","onerror","message","onclose","connect","close","parsedData","parse","Object","keys","messages","chatId","sendMessage","from","messagesCallback","newMessageCallback","send","err","readyState","WebSocketInstance","getInstance","Chat","messageChangeHandler","event","sendMessageHandler","preventDefault","messageObject","newChatMessage","updateMessagesComponent","renderTimestamp","timestamp","ts","Date","getDate","getMonth","getFullYear","getHours","getMinutes","renderMessages","currentUser","read","scrollToBottom","querySelector","chatLog","scrollTop","scrollHeight","handleComponentChange","otherUsername","otherProfile","initialiseChat","waitForSocketConnection","addCallbacks","setMessages","bind","addMessage","fetchMessages","callback","component","setTimeout","newProps","disconnect","chat_id","updateUnreadMessagesNumber","onSubmit","position","right","openModal","Messages","fetchActiveChatProfiles","activeChats","chats","activeChatsProfiles","addingNewChat","setModalSearch","query","modalProfiles","setContactSearch","filter","p","resetUnreadMessagesCounter","unreadMessagesCounter","incrementUnreadMessagesCounter","setLastChatMessage","lastChatMessage","participants","other_username","match","params","padding","whiteSpace","maxHeight","indexOf","contact","marginLeft","slice","myprofile","setMyProfile","setLikesModal","fetchProfile","margin","postId","el","animationPlayState","addEventListener","deletePost","Interests","interests","interest","toUpperCase","MyProfile","setProfile","isEditing","setIsEditing","currentPageIsPosts","setCurrentPageIsPosts","switchPage","querySelectorAll","forEach","action","accept","files","htmlFor","email","gender","defaultValue","birth_date","Footer","submit","friends","Settings","Profile","sendFriendRequest","removeFromFriends","acceptFriendRequest","relationshipButtonLabel","label","relationship","onmouseenter","onmouseout","Friends","setFriends","useParams","friend","InterestProfiles","CommentModal","commentPost","Post","setPost","commentModalIsOpen","setCommentModalIsOpen","postLikesModal","setPostLikesModal","commentLikesModal","setCommentLikesModal","fetchPost","likeUnlikeComment","commentid","commentId","deleteComment","data-commentid","App","invitesReceivedNumber","setInvitesReceived","unvisualizedLikesNumber","setUnvisulaizedLikes","unvisualizedCommentsNumber","setUnvisulaizedComments","setUnreadMessagesNumber","render","exact","ProfileFriends","ReactDOM"],"mappings":"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","file":"static/js/main.95d17c67.chunk.js","sourcesContent":["import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function Sidebar(props) {\r\n    return (\r\n        <div className=\"sidebar\">\r\n            <Link to=\"/\" style={{ textDecoration: 'none' }}>\r\n                <h2>Napker</h2>\r\n            </Link>\r\n            <ul>\r\n                <Link to=\"/\" style={{ textDecoration: 'none' }}>\r\n                    <li><i className=\"fas fa-home\"/>Home</li>\r\n                </Link>\r\n                <Link to=\"/notificações\" style={{ textDecoration: 'none' }}>\r\n                    <li><i className=\"fas fa-bell\"/>Notificações{!props.notificationsNumber ? '' : <p className=\"notifications-number\">{props.notificationsNumber}</p>}</li>\r\n                </Link>\r\n                <Link to=\"/mensagens\" style={{ textDecoration: 'none' }}>\r\n                    <li><i className=\"fas fa-envelope\"/>Mensagens{!props.unreadMessagesNumber ? '' : <p className=\"notifications-number\">{props.unreadMessagesNumber}</p>}</li>\r\n                </Link>\r\n                <Link to=\"/perfil\" style={{ textDecoration: 'none' }}>\r\n                    <li><i className=\"fas fa-user\"/>Perfil</li>\r\n                </Link>\r\n                <Link to=\"/configurações\" style={{ textDecoration: 'none' }}>\r\n                    <li><i className=\"fas fa-cog\"/>Configurações</li>\r\n                </Link>\r\n            </ul>\r\n        </div>\r\n    )\r\n}","const SERVER_URL = 'http://127.0.0.1:8000'\r\nconst SOCKET_URL = 'ws://127.0.0.1:8000'\r\n\r\nexport {SERVER_URL, SOCKET_URL}","import React from 'react'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { SERVER_URL } from '../settings'\r\n\r\nexport default function LikesModal(props) {\r\n    return (\r\n        <Modal show={props.isOpen}\r\n            onHide={props.hideModal}\r\n            size=\"lg\">\r\n            <Modal.Header closeButton>\r\n                <Modal.Title><strong>Curtidas</strong></Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <div className=\"list-group\" style={{ height: '400px', overflow: 'hidden', overflowY: 'scroll' }}>\r\n                    {props.likes &&\r\n                        props.likes.map(like => like.profile).map(profile => {\r\n                            return (\r\n                                <Link to={`/user/${profile.slug}`}\r\n                                    style={{ color: '#000', textDecoration: 'none' }}\r\n                                    onClick={props.hideModal}\r\n                                >\r\n                                    <li className=\"list-group-item profile-row modal-profile-li\" key={profile.id}>\r\n                                        <div className=\"d-flex justify-content-between\">\r\n                                            <div className=\"profile-col\">\r\n                                                <img src={`${SERVER_URL}${profile.photo}`}\r\n                                                    className=\"profile-img-med\"\r\n                                                    style={{ marginRight: '10px' }}\r\n                                                />\r\n                                                <div className=\"main-profile-data\">\r\n                                                    <strong>{profile.first_name} {profile.last_name}</strong>\r\n                                                    <p className=\"text-secondary\">@{profile.user.username}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"profile-col\">\r\n                                                {profile.bio}\r\n                                            </div>\r\n                                        </div>\r\n                                    </li>\r\n                                </Link>\r\n                            )\r\n                        })}\r\n                </div>\r\n            </Modal.Body>\r\n        </Modal>\r\n    )\r\n}","import { SERVER_URL } from './settings'\r\n\r\nconst csrftoken = getCookie('csrftoken')\r\n\r\nfunction getCookie(name) {\r\n  let cookieValue = null;\r\n  if (document.cookie && document.cookie !== '') {\r\n    const cookies = document.cookie.split(';');\r\n    for (let i = 0; i < cookies.length; i++) {\r\n      const cookie = cookies[i].trim();\r\n      // Does this cookie string begin with the name we want?\r\n      if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  return cookieValue;\r\n}\r\n\r\nfunction handleLogout() {\r\n  const bool = window.confirm('Sair do Napker?\\nVocê poderá entrar novamente quando quiser.')\r\n  if (bool) {\r\n    window.location.replace(`${SERVER_URL}/logout`)\r\n  }\r\n}\r\n\r\nexport { csrftoken, handleLogout };","import React from 'react'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport LikesModal from '../../components/likesmodal'\r\nimport { SERVER_URL } from '../../settings'\r\nimport { csrftoken } from '../../utils'\r\n\r\nexport default class Posts extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            profile: null,\r\n            posts: null,\r\n            postContent: '',\r\n            likesModal: {\r\n                isOpen: false,\r\n                likes: null\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillMount() {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => this.setState({ profile: data }))\r\n        this.fetchPosts()\r\n    }\r\n\r\n    fetchPosts = () => {\r\n        fetch(`${SERVER_URL}/post-api/post-list`)\r\n            .then(response => response.json())\r\n            .then(data => this.setState({ posts: data }))\r\n    }\r\n\r\n    createPost = () => {\r\n        fetch(`${SERVER_URL}/post-api/create-post`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify({ content: this.state.postContent })\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(data)\r\n                this.setState({ postContent: '' })\r\n            })\r\n    }\r\n\r\n    likeUnlikePost = e => {\r\n        e.stopPropagation()\r\n        const likeBtn = e.target\r\n        if (likeBtn.classList.contains('fas')) {\r\n            likeBtn.classList.remove('fas') //border heart\r\n            likeBtn.classList.add('far')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/unlike-post/${likeBtn.dataset.postid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    this.fetchPosts()\r\n                })\r\n        } else {\r\n            likeBtn.classList.remove('far') //border heart\r\n            likeBtn.classList.add('fas')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/like-post/${likeBtn.dataset.postid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    this.fetchPosts()\r\n                })\r\n        }\r\n    }\r\n\r\n    hideLikesModal = () => {\r\n        this.setState({\r\n            likesModal: {\r\n                isOpen: false,\r\n                likes: null\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <LikesModal\r\n                    isOpen={this.state.likesModal.isOpen}\r\n                    likes={this.state.likesModal.likes}\r\n                    hideModal={this.hideLikesModal}\r\n                />\r\n                <div className=\"form-row d-inline-block\">\r\n                    <div className=\"col d-flex\">\r\n                        <input type=\"text\"\r\n                            className=\"form-control\"\r\n                            placeholder=\"O que está acontecendo?\"\r\n                            style={{ marginRight: '5px', width: '400px' }}\r\n                            value={this.state.postContent}\r\n                            onChange={e => this.setState({ postContent: e.target.value })}\r\n                        />\r\n                        <button className=\"btn btn-primary\" style={{ marginBottom: '20px', borderRadius: '5px' }} onClick={this.createPost}>Postar</button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"post-list\">\r\n                    {this.state.posts && this.state.profile && this.state.posts.map(post => {\r\n                        return (\r\n                            <li\r\n                                className=\"post-container\"\r\n                                key={post.id}\r\n                                onClick={() => window.location.href = `/post/${post.id}`}\r\n                            >\r\n                                <div className=\"post-row\">\r\n                                    <div className=\"post-col\">\r\n                                        <Link\r\n                                            to={`/user/${post.author.slug}`}\r\n                                            onClick={e => e.stopPropagation()}\r\n                                        >\r\n                                            <img src={`${SERVER_URL}${post.author.photo}`}\r\n                                                className=\"profile-img-med\"\r\n                                            />\r\n                                        </Link>\r\n                                    </div>\r\n                                    <div className=\"post-col\">\r\n                                        <Link\r\n                                            to={`/user/${post.author.slug}`}\r\n                                            style={{ color: '#000' }}\r\n                                            onClick={e => e.stopPropagation()}\r\n                                        >\r\n                                            <div style={{ height: '30px' }}>\r\n                                                <strong>{post.author.first_name} {post.author.last_name} </strong>\r\n                                                <p className=\"text-secondary d-inline-block\">\r\n                                                    @{post.author.user.username} • {post.created.split('-').reverse().join('/')}\r\n                                                </p>\r\n                                            </div>\r\n                                        </Link>\r\n                                        <div style={{ textAlign: 'start' }}>\r\n                                            {post.content}\r\n                                        </div>\r\n                                        {post.image &&\r\n                                            <img src={`${SERVER_URL}${post.image}`} className=\"post-img\" />\r\n                                        }\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"post-actions\">\r\n                                    <p className=\"text-secondary\">\r\n                                        <Link\r\n                                            to={`/post/${post.id}/comment`}\r\n                                            className=\"text-secondary\"\r\n                                            onClick={e => e.stopPropagation()}\r\n                                        >\r\n                                            <i\r\n                                                class=\"far fa-comment\"\r\n                                            />{post.comments.length}\r\n                                        </Link>\r\n                                        {post.likes.map(like => like.profile.id).includes(this.state.profile.id) ?\r\n                                            <i class=\"fas fa-heart\"\r\n                                                data-postid={post.id}\r\n                                                onClick={this.likeUnlikePost}\r\n                                            />\r\n                                            :\r\n                                            <i class=\"far fa-heart\"\r\n                                                data-postid={post.id}\r\n                                                onClick={this.likeUnlikePost}\r\n                                            />}\r\n                                        <p className=\"post-likes-number\"\r\n                                            onClick={e => {\r\n                                                e.stopPropagation()\r\n                                                this.setState({ likesModal: { isOpen: true, likes: post.likes } })\r\n                                            }}\r\n                                        >\r\n                                            {post.likes.length}\r\n                                        </p>\r\n                                    </p>\r\n                                </div>\r\n                            </li>\r\n                        )\r\n                    })}\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { SERVER_URL } from '../../settings'\r\nimport { csrftoken } from '../../utils'\r\n\r\nexport default function Profiles(props) {\r\n    const [profiles, setProfiles] = useState([])\r\n    const [filteredProfiles, setFilteredProfiles] = useState(null)\r\n    const [search, setSearch] = useState('')\r\n\r\n    useEffect(() => {\r\n        fetch(`${SERVER_URL}/profile-api/profile-list`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                setFilteredProfiles(null)\r\n                setProfiles(data)\r\n            })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (search === '') {\r\n            setFilteredProfiles(null)\r\n            return\r\n        }\r\n        fetch(`${SERVER_URL}/profile-api/users/${search}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                setFilteredProfiles(data)\r\n            })\r\n    }, [search])\r\n\r\n    const sendFriendRequest = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/send-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(pk)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n    }\r\n\r\n    const cancelFriendRequest = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/cancel-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(pk)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n    }\r\n\r\n    const handleRelationshipUpdate = e => {\r\n        e.stopPropagation()\r\n        const btn = e.target\r\n        if (btn.innerHTML === 'Solicitar') {\r\n            sendFriendRequest(btn.dataset.pk)\r\n            btn.innerHTML = 'Solicitado'\r\n            btn.className = 'btn btn-primary'\r\n        } else {\r\n            cancelFriendRequest(btn.dataset.pk)\r\n            btn.innerHTML = 'Solicitar'\r\n            btn.className = 'btn btn-secondary'\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"form-row d-inline-block\">\r\n                <div className=\"col\">\r\n                    <input type=\"text\"\r\n                        className=\"form-control\"\r\n                        placeholder=\"Pesquisar\"\r\n                        style={{ width: '400px' }}\r\n                        value={search}\r\n                        onChange={e => setSearch(e.target.value)}\r\n                    />\r\n                </div>\r\n            </div>\r\n            <div className=\"list-group\">\r\n                {filteredProfiles ? filteredProfiles.map(profile => {\r\n                    return (\r\n                        <Link to={`/user/${profile.slug}`} style={{ color: '#000', textDecoration: 'none' }}>\r\n                            <li className=\"list-group-item profile-row filtered-profile\" key={profile.id}>\r\n                                <div className=\"d-flex justify-content-between\">\r\n                                    <div className=\"profile-col\">\r\n                                        <img src={`${SERVER_URL}${profile.photo}`}\r\n                                            className=\"profile-img-med\"\r\n                                            style={{ marginRight: '10px' }}\r\n                                        />\r\n                                        <div className=\"main-profile-data\">\r\n                                            <strong>{profile.first_name} {profile.last_name}</strong>\r\n                                            <p className=\"text-secondary\">@{profile.user.username}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"profile-col\">\r\n                                        {profile.bio}\r\n                                    </div>\r\n                                    <div className=\"profile-col\">\r\n\r\n                                    </div>\r\n                                </div>\r\n                            </li>\r\n                        </Link>\r\n                    )\r\n                }) : profiles && profiles.map(profile => {\r\n                    return (\r\n                        <li\r\n                        className=\"list-group-item profile-row\"\r\n                        key={profile.id}\r\n                        onClick={() => window.location.href = `/user/${profile.slug}`}\r\n                        >\r\n                            <div className=\"d-flex justify-content-between\">\r\n                                <div className=\"profile-col\">\r\n                                    <img src={`${SERVER_URL}${profile.photo}`}\r\n                                        className=\"profile-img-med\"\r\n                                        style={{ marginRight: '10px' }}\r\n                                    />\r\n                                    <div className=\"main-profile-data\">\r\n                                        <strong>{profile.first_name} {profile.last_name}</strong>\r\n                                        <p className=\"text-secondary\">@{profile.user.username}</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"profile-col\">\r\n                                    {profile.bio}\r\n                                </div>\r\n                                <div className=\"profile-col\">\r\n                                    <button className=\"btn btn-secondary\" data-pk={profile.user.id} onClick={handleRelationshipUpdate}>\r\n                                        Solicitar\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </li>\r\n                    )\r\n                })}\r\n            </div>\r\n        </>\r\n    )\r\n}","import React from 'react'\r\nimport { handleLogout } from '../utils'\r\n\r\nexport default function Header(props) {\r\n    return (\r\n        <div className=\"header fixed-top\">\r\n            {!props.backArrow ? '' : <i class=\"fas fa-arrow-left left-arrow-icon\" onClick={() => window.history.back()}/>}\r\n            <strong>{props.page}</strong>\r\n            <a className=\"logout\" onClick={handleLogout}>Sair</a>\r\n        </div>\r\n    )\r\n}","import React, { useState } from 'react'\r\nimport Posts from './home-components/posts'\r\nimport Profiles from './home-components/profiles'\r\nimport Header from '../components/header'\r\n\r\nexport default function Home(props) {\r\n    const [page, setPage] = useState('Posts')\r\n    const pages = {\r\n        'Perfis': <Profiles />,\r\n        'Posts': <Posts />\r\n    }\r\n\r\n    document.title = 'Home / Napker'\r\n\r\n    return (\r\n        <>\r\n            <Header page=\"Home\" />\r\n            <div className=\"content\">\r\n                <button type=\"button\" className=\"btn btn-primary\" style={{ marginRight: '50px', borderRadius: '20px' }} onClick={() => setPage(page === 'Perfis' ? 'Posts' : 'Perfis')}>\r\n                    {page === 'Perfis' ? 'Ver posts' : 'Ver perfis'}\r\n                </button>\r\n                {pages[page]}\r\n            </div>\r\n        </>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Header from '../components/header'\r\nimport { SERVER_URL } from '../settings'\r\nimport { csrftoken } from '../utils'\r\n\r\nexport default function Notifications(props) {\r\n    const [invites, setInvites] = useState([])\r\n    const [postLikes, setPostLikes] = useState([])\r\n    const [comments, setComments] = useState([])\r\n    let notificationsNumber = invites.length + postLikes.length + comments.length\r\n\r\n    document.title = 'Notificações / Napker'\r\n\r\n    useEffect(() => {\r\n        fetch(`${SERVER_URL}/profile-api/myinvites`)\r\n            .then(response => response.json())\r\n            .then(data => setInvites(data))\r\n        fetch(`${SERVER_URL}/post-api/unvisualized-post-likes`)\r\n            .then(response => response.json())\r\n            .then(data => setPostLikes(data))\r\n        fetch(`${SERVER_URL}/post-api/unvisualized-post-comments`)\r\n            .then(response => response.json())\r\n            .then(data => setComments(data))\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (postLikes.length) {\r\n            fetch(`${SERVER_URL}/post-api/visualize-likes`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    props.updateNotificationsNumber()\r\n                })\r\n        }\r\n    }, [postLikes])\r\n\r\n    useEffect(() => {\r\n        if (comments.length) {\r\n            fetch(`${SERVER_URL}/post-api/visualize-comments`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    props.updateNotificationsNumber()\r\n                })\r\n        }\r\n    }, [comments])\r\n\r\n    const replyRequest = e => {\r\n        e.stopPropagation()\r\n        const btn = e.target\r\n        const requestBody = {\r\n            'senderid': btn.dataset.senderid,\r\n            'reply': btn.dataset.reply\r\n        }\r\n        fetch(`${SERVER_URL}/profile-api/reply-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(requestBody)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(data)\r\n                props.updateNotificationsNumber()\r\n            })\r\n        document.getElementById('friend-request-list').removeChild(document.getElementById(btn.dataset.senderid))\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header page=\"Notificações\" />\r\n            <div className=\"content\">\r\n                <div className=\"list-group\" id='friend-request-list'>\r\n                    {!!invites.length &&\r\n                        <>\r\n                            <h4>Solicitações de amizade</h4>\r\n                            {invites.map(i => {\r\n                                return (\r\n                                    <li\r\n                                        className=\"list-group-item profile-row\"\r\n                                        id={i.sender.id}\r\n                                        key={i.sender.id}\r\n                                        onClick={() => window.location.href = `/user/${i.sender.slug}`}\r\n                                    >\r\n                                        <div className=\"d-flex justify-content-between\">\r\n                                            <div className=\"profile-col\">\r\n                                                <img src={`${SERVER_URL}${i.sender.photo}`}\r\n                                                    className=\"profile-img-med\"\r\n                                                    style={{ marginRight: '10px' }}\r\n                                                />\r\n                                                <div className=\"main-profile-data\">\r\n                                                    <strong>{i.sender.first_name} {i.sender.last_name}</strong>\r\n                                                    <p className=\"text-secondary\">@{i.sender.user.username}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"profile-col\">\r\n                                                {i.sender.bio}\r\n                                            </div>\r\n                                            <div className=\"profile-col\" style={{ justifyContent: 'space-between' }}>\r\n                                                <button className=\"btn btn-primary btn-reply-fr\" data-senderid={i.sender.id} data-reply='accept' onClick={replyRequest}>Confirmar</button>\r\n                                                <button className=\"btn btn-grey btn-reply-fr\" data-senderid={i.sender.id} data-reply='decline' onClick={replyRequest}>Excluir</button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </li>\r\n                                )\r\n                            })}\r\n                        </>\r\n                    }\r\n\r\n                    <br />\r\n\r\n                    {!!postLikes.length &&\r\n                        <>\r\n                            <h4>Curtidas</h4>\r\n                            {postLikes.map(like => {\r\n                                return (\r\n                                    <li className=\"list-group-item profile-row\" key={like.profile.id}>\r\n                                        <div className=\"d-flex justify-content-between\">\r\n                                            <div className=\"profile-col\">\r\n                                                <Link to={`/user/${like.profile.slug}`}>\r\n                                                    <img src={`${SERVER_URL}${like.profile.photo}`}\r\n                                                        className=\"profile-img-med\"\r\n                                                        style={{ marginRight: '10px' }}\r\n                                                    />\r\n                                                </Link>\r\n                                            </div>\r\n                                            <div className=\"profile-col\" style={{ fontSize: 'larger' }}>\r\n                                                <p>\r\n                                                    <Link to={`/user/${like.profile.slug}`} style={{ color: \"#000\" }}>\r\n                                                        @{like.profile.user.username}\r\n                                                    </Link> curtiu o seu post.\r\n                                                </p>\r\n                                            </div>\r\n                                            <div className=\"profile-col\" style={{ justifyContent: 'center' }}>\r\n                                                <Link to={`/post/${like.post.id}`}>\r\n                                                    <button className=\"btn btn-primary\">Ver post</button>\r\n                                                </Link>\r\n                                            </div>\r\n                                        </div>\r\n                                    </li>\r\n                                )\r\n                            })}\r\n                        </>\r\n                    }\r\n\r\n                    <br />\r\n\r\n                    {!!comments.length &&\r\n                        <>\r\n                            <h4>Comentários</h4>\r\n                            {comments.map(comment => {\r\n                                return (\r\n                                    <li className=\"list-group-item profile-row\" key={comment.author.id}>\r\n                                        <div className=\"d-flex justify-content-between\">\r\n                                            <div className=\"profile-col\">\r\n                                                <Link to={`/user/${comment.author.slug}`}>\r\n                                                    <img src={`${SERVER_URL}${comment.author.photo}`}\r\n                                                        className=\"profile-img-med\"\r\n                                                        style={{ marginRight: '10px' }}\r\n                                                    />\r\n                                                </Link>\r\n                                            </div>\r\n                                            <div className=\"profile-col\" style={{ fontSize: 'larger' }}>\r\n                                                <p>\r\n                                                    <Link to={`/user/${comment.author.slug}`} style={{ color: \"#000\" }}>\r\n                                                        @{comment.author.user.username}\r\n                                                    </Link> comentou seu post.\r\n                                                </p>\r\n                                            </div>\r\n                                            <div className=\"profile-col\" style={{ justifyContent: 'center' }}>\r\n                                                <Link to={`/post/${comment.post.id}`}>\r\n                                                    <button className=\"btn btn-primary\">Ver post</button>\r\n                                                </Link>\r\n                                            </div>\r\n                                        </div>\r\n                                    </li>\r\n                                )\r\n                            })}\r\n                        </>\r\n                    }\r\n\r\n                </div>\r\n                {!notificationsNumber &&\r\n                    <h3 style={{ marginTop: '100px' }}>Você não tem nenhuma notificação</h3>}\r\n            </div>\r\n        </>\r\n    )\r\n}","import { SOCKET_URL } from '../../settings'\r\n\r\nclass WebSocketService {\r\n    static instance = null;\r\n    callbacks = {};\r\n  \r\n    static getInstance() {\r\n      if (!WebSocketService.instance) {\r\n        WebSocketService.instance = new WebSocketService();\r\n      }\r\n      return WebSocketService.instance;\r\n    }\r\n  \r\n    constructor() {\r\n      this.socketRef = null;\r\n    }\r\n  \r\n    connect(chatUrl) {\r\n      const path = `${SOCKET_URL}/ws/chat/${chatUrl}/`;\r\n      this.socketRef = new WebSocket(path);\r\n      this.socketRef.onopen = () => {\r\n        console.log(\"WebSocket open\");\r\n      };\r\n      this.socketNewMessage(JSON.stringify({\r\n        command: 'fetch-messages'\r\n      }))\r\n      this.socketRef.onmessage = e => {\r\n        this.socketNewMessage(e.data);\r\n      };\r\n      this.socketRef.onerror = e => {\r\n        console.log(e.message);\r\n      };\r\n      this.socketRef.onclose = () => {\r\n        console.log(\"WebSocket closed let's reopen\");\r\n        this.connect(chatUrl);\r\n      };\r\n    }\r\n  \r\n    disconnect() {\r\n      if (this.socketRef) this.socketRef.close();\r\n    }\r\n  \r\n    socketNewMessage(data) {\r\n      const parsedData = JSON.parse(data);\r\n      const command = parsedData.command;\r\n      if (Object.keys(this.callbacks).length === 0) {\r\n        return;\r\n      }\r\n      if (command === \"messages\") {\r\n        this.callbacks[command](parsedData.messages);\r\n      }\r\n      if (command === \"new_message\") {\r\n        this.callbacks[command](parsedData.message);\r\n      }\r\n    }\r\n  \r\n    fetchMessages(username, chatId) {\r\n      this.sendMessage({\r\n        command: \"fetch_messages\",\r\n        username: username,\r\n        chatId: chatId\r\n      });\r\n    }\r\n  \r\n    newChatMessage(message) {\r\n      this.sendMessage({\r\n        command: \"new_message\",\r\n        from: message.from,\r\n        content: message.content,\r\n        chatId: message.chatId\r\n      });\r\n    }\r\n  \r\n    addCallbacks(messagesCallback, newMessageCallback) {\r\n      this.callbacks[\"messages\"] = messagesCallback;\r\n      this.callbacks[\"new_message\"] = newMessageCallback;\r\n    }\r\n  \r\n    sendMessage(data) {\r\n      try {\r\n        this.socketRef.send(JSON.stringify({ ...data }));\r\n      } catch (err) {\r\n        console.log(err.message);\r\n      }\r\n    }\r\n  \r\n    state() {\r\n      return this.socketRef ? this.socketRef.readyState : 0\r\n    }\r\n  }\r\n  \r\n  const WebSocketInstance = WebSocketService.getInstance();\r\n  \r\n  export default WebSocketInstance;","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { csrftoken } from '../../utils'\r\nimport { SERVER_URL } from '../../settings'\r\nimport WebSocketInstance from './websocket'\r\n\r\nclass Chat extends React.Component {\r\n    initialiseChat() {\r\n        this.waitForSocketConnection(() => {\r\n            WebSocketInstance.addCallbacks(\r\n                this.setMessages.bind(this),\r\n                this.addMessage.bind(this)\r\n            )\r\n            WebSocketInstance.fetchMessages(\r\n                this.props.username,\r\n                this.props.chatId\r\n            );\r\n        });\r\n        if (this.props.chatId) WebSocketInstance.connect(this.props.chatId)\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            message: '',\r\n            messages: [],\r\n            otherUsername: this.props.otherUsername,\r\n            otherProfile: null\r\n        }\r\n        this.initialiseChat();\r\n    }\r\n\r\n    waitForSocketConnection(callback) {\r\n        const component = this;\r\n        setTimeout(function () {\r\n            if (WebSocketInstance.state() === 1) {\r\n                console.log(\"Connection is made\");\r\n                callback();\r\n                return;\r\n            } else {\r\n                console.log(\"wait for connection...\");\r\n                component.waitForSocketConnection(callback);\r\n            }\r\n        }, 100);\r\n    }\r\n\r\n    setMessages(messages) {\r\n        this.setState({ messages: messages.reverse() })\r\n    }\r\n\r\n    addMessage(message) {\r\n        this.setState({ messages: [...this.state.messages, message] })\r\n    }\r\n\r\n    messageChangeHandler = event => {\r\n        this.setState({ message: event.target.value });\r\n    };\r\n\r\n    sendMessageHandler = e => {\r\n        e.preventDefault();\r\n        const messageObject = {\r\n            from: this.props.username,\r\n            content: this.state.message,\r\n            chatId: this.props.chatId\r\n        };\r\n        WebSocketInstance.newChatMessage(messageObject);\r\n        this.setState({ message: \"\" });\r\n        this.props.updateMessagesComponent()\r\n\r\n    };\r\n\r\n    renderTimestamp = timestamp => {\r\n        const ts = new Date(timestamp)\r\n        return `${ts.getDate()}/${ts.getMonth()}/${ts.getFullYear()} - ${ts.getHours()}:${ts.getMinutes()}`\r\n    };\r\n\r\n    renderMessages = messages => {\r\n        const currentUser = this.props.username;\r\n        return messages.map(message => (\r\n            <li\r\n                key={message.id}\r\n                className={message.author === currentUser ? \"sent\" : \"received\"}\r\n            >\r\n                <p>\r\n                    {message.content}\r\n                    <br />\r\n                    <small>\r\n                        {this.renderTimestamp(message.timestamp)} {message.author === currentUser ? message.read ? '✓✓' : '✓' : ''}\r\n                    </small>\r\n                </p>\r\n            </li>\r\n        ));\r\n    };\r\n\r\n    scrollToBottom = () => {\r\n        if (document.querySelector('#chat-log')) {\r\n            const chatLog = document.querySelector('#chat-log')\r\n            chatLog.scrollTop = chatLog.scrollHeight\r\n        }\r\n    };\r\n\r\n    handleComponentChange = () => {\r\n        this.scrollToBottom();\r\n        if (this.state.otherUsername && (!this.state.otherProfile || this.state.otherProfile.user.username !== this.state.otherUsername)) {\r\n            fetch(`${SERVER_URL}/profile-api/user/${this.state.otherUsername}`)\r\n                .then(response => response.json())\r\n                .then(data => this.setState({\r\n                    otherProfile: data\r\n                }))\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.handleComponentChange()\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.handleComponentChange()\r\n    }\r\n\r\n    componentWillReceiveProps(newProps) {\r\n        if (this.props.chatId !== newProps.chatId) {\r\n            WebSocketInstance.disconnect();\r\n            this.waitForSocketConnection(() => {\r\n                WebSocketInstance.fetchMessages(\r\n                    this.props.username,\r\n                    newProps.chatId\r\n                );\r\n            });\r\n            WebSocketInstance.connect(newProps.chatId);\r\n\r\n            this.props.updateMessagesComponent()\r\n        }\r\n        if (this.state.otherUsername != newProps.otherUsername) {\r\n            this.setState({\r\n                otherUsername: newProps.otherUsername\r\n            })\r\n        }\r\n        if (newProps.chatId) {\r\n            fetch(`${SERVER_URL}/chat-api/read-messages`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-type': 'application/json',\r\n                    'X-CSRFToken': csrftoken,\r\n                },\r\n                body: JSON.stringify({ chat_id: newProps.chatId })\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => console.log(data))\r\n        }\r\n        if (this.props.updateUnreadMessagesNumber) {\r\n            this.props.updateUnreadMessagesNumber()\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                {this.state.otherProfile ?\r\n                    <div className=\"d-flex flex-column justify-content-between align-items-center current-chat\">\r\n                        <div className=\"current-chat-header\">\r\n                            <Link to={`/user/${this.state.otherProfile.slug}`}>\r\n                                <img src={`${SERVER_URL}${this.state.otherProfile.photo}`}\r\n                                    className=\"profile-img-sm\"\r\n                                    style={{ marginRight: '5px' }}\r\n                                />\r\n                            </Link>\r\n                            <div className=\"d-flex flex-column align-items-start\" style={{ height: '52px' }}>\r\n                                <strong>{this.state.otherProfile.first_name} {this.state.otherProfile.last_name}</strong>\r\n                                <p className=\"text-secondary\">@{this.state.otherProfile.user.username}</p>\r\n                            </div>\r\n                        </div>\r\n                        <div id=\"chat-log\">\r\n                            {this.state.messages ? this.renderMessages(this.state.messages) : ''}\r\n                        </div>\r\n                        <form className=\"send-message-container\" onSubmit={this.sendMessageHandler}>\r\n                            <input placeholder=\"Mensagem\" className=\"message-input\" id=\"chat-message-input\" value={this.state.message} onChange={this.messageChangeHandler} />\r\n                            <button className=\"btn btn-primary\" id=\"chat-message-submit\">\r\n                                <i class=\"fas fa-paper-plane\" style={{ position: 'relative', right: '10%' }} />\r\n                            </button>\r\n                        </form>\r\n                    </div> :\r\n                    <div className=\"d-flex flex-column justify-content-center align-items-center current-chat\">\r\n                        <div>\r\n                            <strong style={{ fontSize: 'larger' }}>Você não tem uma conversa selecionada</strong>\r\n                            <p className=\"text-secondary\">Selecione uma existente ou comece uma nova</p>\r\n                            <button className=\"btn btn-primary\" onClick={() => this.props.openModal()}>Nova conversa</button>\r\n                        </div>\r\n                    </div>}\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Chat","import React from 'react'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport Header from '../../components/header'\r\nimport Chat from './chat'\r\nimport { SERVER_URL } from '../../settings'\r\n\r\nclass Messages extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            username: null,\r\n            chatId: null,\r\n            activeChats: null,\r\n            activeChatsProfiles: null,\r\n            addingNewChat: false,\r\n            modalProfiles: [],\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps(newProps) {\r\n        if (newProps === this.props) return\r\n        const participants = { username: this.state.username, other_username: newProps.match.params.slug }\r\n        fetch(`${SERVER_URL}/chat-api/chat-id/${JSON.stringify(participants)}`)\r\n            .then(response => response.json())\r\n            .then(data => this.setState({\r\n                chatId: data['chat_id']\r\n            }))\r\n    }\r\n\r\n    handleComponentChange() {\r\n        if (!this.state.username) {\r\n            fetch(`${SERVER_URL}/profile-api/logged-user`)\r\n                .then(response => response.json())\r\n                .then(data => this.setState({\r\n                    username: data.username\r\n                }))\r\n        }\r\n        if (!this.state.activeChatsProfiles && this.state.activeChatsProfiles !== []) {\r\n            this.fetchActiveChatProfiles()\r\n        }\r\n    }\r\n\r\n    componentWillMount() {\r\n        document.title = 'Mensagens / Napker'\r\n        this.handleComponentChange()\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.handleComponentChange()\r\n    }\r\n\r\n    fetchActiveChatProfiles = () => {\r\n        fetch(`${SERVER_URL}/chat-api/active-chats-profiles`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if (!this.state.username) return\r\n                this.setState({\r\n                    activeChats: data.chats.reverse(),\r\n                    activeChatsProfiles: data.profiles.reverse()\r\n                })\r\n            })\r\n    }\r\n\r\n    openModal = () => {\r\n        this.setState({\r\n            addingNewChat: true\r\n        })\r\n    }\r\n\r\n    setModalSearch = query => {\r\n        if (query === '') {\r\n            this.setState({\r\n                modalProfiles: []\r\n            })\r\n            return\r\n        }\r\n        fetch(`${SERVER_URL}/profile-api/users/${query}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                this.setState({\r\n                    modalProfiles: data\r\n                })\r\n            })\r\n    }\r\n\r\n    setContactSearch = query => {\r\n        if (query === '') {\r\n            this.fetchActiveChatProfiles()\r\n            return\r\n        }\r\n        if (this.state.activeChatsProfiles) {\r\n            const filteredProfiles = this.state.activeChatsProfiles.filter(p => p.user.username.includes(query))\r\n            this.setState({\r\n                activeChatsProfiles: filteredProfiles\r\n            })\r\n        }\r\n    }\r\n\r\n    resetUnreadMessagesCounter = () => {\r\n        this.unreadMessagesCounter = 0\r\n    }\r\n\r\n    incrementUnreadMessagesCounter = () => {\r\n        this.unreadMessagesCounter++\r\n    }\r\n\r\n    setLastChatMessage = message => {\r\n        this.lastChatMessage = message\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <Header page=\"Mensagens\" />\r\n                <div className=\"content d-flex messages-wrapper\">\r\n                    <Modal show={this.state.addingNewChat}\r\n                        onHide={() => this.setState({ addingNewChat: false })}\r\n                        size=\"lg\">\r\n                        <Modal.Header closeButton>\r\n                            <Modal.Title><strong>Nova conversa</strong></Modal.Title>\r\n                        </Modal.Header>\r\n                        <Modal.Body style={{ padding: '0' }}>\r\n                            <input className=\"modal-search-input\"\r\n                                placeholder=\"Pesquisar pessoas\"\r\n                                onChange={e => this.setModalSearch(e.target.value)}\r\n                            />\r\n                            <div className=\"list-group\" style={{ height: '400px', overflow: 'hidden', overflowY: 'scroll' }}>\r\n                                {this.state.modalProfiles && this.state.modalProfiles.map(profile => {\r\n                                    return (\r\n                                        <Link to={`/mensagens/${profile.slug}`}\r\n                                            style={{ color: '#000', textDecoration: 'none' }}\r\n                                            onClick={() => this.setState({\r\n                                                addingNewChat: false\r\n                                            })}\r\n                                        >\r\n                                            <li className=\"list-group-item profile-row modal-profile-li\" key={profile.id}>\r\n                                                <div className=\"d-flex justify-content-between\">\r\n                                                    <div className=\"profile-col\">\r\n                                                        <img src={`${SERVER_URL}${profile.photo}`}\r\n                                                            className=\"profile-img-med\"\r\n                                                            style={{ marginRight: '10px' }}\r\n                                                        />\r\n                                                        <div className=\"main-profile-data\">\r\n                                                            <strong>{profile.first_name} {profile.last_name}</strong>\r\n                                                            <p className=\"text-secondary\">@{profile.user.username}</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"profile-col\">\r\n                                                        {profile.bio}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </li>\r\n                                        </Link>\r\n                                    )\r\n                                })}\r\n                            </div>\r\n                        </Modal.Body>\r\n                    </Modal>\r\n                    <div className=\"d-flex flex-column chats-list\">\r\n                        <div className=\"search-input-container\">\r\n                            <input placeholder=\"Pesquisar pessoas\" className=\"search-input\" onChange={e => this.setContactSearch(e.target.value)} />\r\n                            <i className=\"fas fa-plus add-icon\" onClick={this.openModal}></i>\r\n                        </div>\r\n                        <div className=\"list-group chats-container\">\r\n                            {this.state.activeChatsProfiles && this.state.activeChatsProfiles.map(profile => {\r\n                                return (\r\n                                    <Link to={`/mensagens/${profile.slug}`} style={{ color: '#000', textDecoration: 'none' }}>\r\n                                        {this.resetUnreadMessagesCounter()}\r\n                                        <li className=\"list-item profile-chat-item\" style={{ whiteSpace: 'nowrap' }}>\r\n                                            <img src={`${SERVER_URL}${profile.photo}`}\r\n                                                className=\"profile-img-med\"\r\n                                                style={{ marginRight: '10px' }}\r\n                                            />\r\n                                            <div className=\"d-flex flex-column align-items-start\">\r\n                                                <div className=\"d-flex\" style={{ maxHeight: '30px' }}>\r\n                                                    <strong style={{ height: 'fit-content' }}>{profile.first_name} {profile.last_name}</strong>\r\n                                                    {this.state.activeChats[this.state.activeChatsProfiles.indexOf(profile)].messages.map(message => {\r\n                                                        const messages = this.state.activeChats[this.state.activeChatsProfiles.indexOf(profile)].messages\r\n                                                        if (messages[messages.length - 1] === message) this.setLastChatMessage(message.content)\r\n                                                        if (message.read || message.contact.user.username !== profile.user.username) return\r\n                                                        this.incrementUnreadMessagesCounter()\r\n                                                    })}\r\n                                                    {this.unreadMessagesCounter ? <p className=\"notifications-number\">{this.unreadMessagesCounter}</p> : ''}\r\n                                                    <p className=\"text-secondary\" style={{ marginLeft: '5px' }}>@{profile.user.username}</p>\r\n                                                </div>\r\n                                                <p className=\"text-secondary\">{this.lastChatMessage.slice(0, 40)}</p>\r\n                                            </div>\r\n                                        </li>\r\n                                    </Link>\r\n                                )\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                    <Chat username={this.state.username}\r\n                        otherUsername={this.props.match.params.slug}\r\n                        chatId={this.state.chatId}\r\n                        openModal={this.openModal}\r\n                        updateUnreadMessagesNumber={this.props.updateUnreadMessagesNumber}\r\n                        updateMessagesComponent={this.fetchActiveChatProfiles}\r\n                    />\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Messages","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport LikesModal from '../../components/likesmodal'\r\nimport { SERVER_URL } from '../../settings'\r\nimport { csrftoken } from '../../utils'\r\n\r\nexport default function Posts(props) {\r\n    const [myprofile, setMyProfile] = useState(null)\r\n    const [likesModal, setLikesModal] = useState({ isOpen: false, likes: null })\r\n    const profile = props.profile\r\n\r\n    useEffect(() => {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => setMyProfile(data))\r\n    }, [])\r\n\r\n    const likeUnlikePost = e => {\r\n        e.stopPropagation()\r\n        const likeBtn = e.target\r\n        if (likeBtn.classList.contains('fas')) {\r\n            likeBtn.classList.remove('fas') //border heart\r\n            likeBtn.classList.add('far')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/unlike-post/${likeBtn.dataset.postid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    props.fetchProfile()\r\n                })\r\n        } else {\r\n            likeBtn.classList.remove('far') //border heart\r\n            likeBtn.classList.add('fas')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/like-post/${likeBtn.dataset.postid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    props.fetchProfile()\r\n                })\r\n        }\r\n    }\r\n\r\n    const hideLikesModal = () => {\r\n        setLikesModal({\r\n            isOpen: false,\r\n            likes: null\r\n        })\r\n    }\r\n\r\n    const deletePost = (e, postId) => {\r\n        e.stopPropagation()\r\n        const el = document.querySelector(`#profile-post-${postId}`)\r\n        if (window.confirm('Tem certeza que deseja apagar o post?\\nEssa ação é irreversível.')) {\r\n            el.style.animationPlayState = 'running'\r\n            el.addEventListener('animationend', () => el.remove())\r\n            fetch(`${SERVER_URL}/post-api/delete-post/${postId}`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-type': 'application/json',\r\n                    'X-CSRFToken': csrftoken,\r\n                }\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    props.fetchProfile()\r\n                })\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <LikesModal\r\n                isOpen={likesModal.isOpen}\r\n                likes={likesModal.likes}\r\n                hideModal={hideLikesModal}\r\n            />\r\n            <div className=\"post-list\">\r\n                {profile && myprofile && profile.posts.length ? profile.posts.map(post => {\r\n                    return (\r\n                        <li\r\n                            className=\"post-container\"\r\n                            key={post.id}\r\n                            id={`profile-post-${post.id}`}\r\n                            onClick={() => window.location.href = `/post/${post.id}`}\r\n                        >\r\n                            <div className=\"d-flex justify-content-between\">\r\n                                <div className=\"post-row\">\r\n                                    <div className=\"post-col\">\r\n                                        <img src={`${SERVER_URL}${profile.photo}`}\r\n                                            className=\"profile-img-med\"\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"post-col\">\r\n                                        <div style={{ height: '30px' }}>\r\n                                            <strong>{profile.first_name} {profile.last_name} </strong>\r\n                                            <p className=\"text-secondary d-inline-block\">\r\n                                                @{profile.user.username} • {post.created.split('-').reverse().join('/')}\r\n                                            </p>\r\n                                        </div>\r\n                                        <div style={{ textAlign: 'start' }}>\r\n                                            {post.content}\r\n                                        </div>\r\n                                        {post.image &&\r\n                                            <img src={`${SERVER_URL}${post.image}`} className=\"post-img\" />\r\n                                        }\r\n                                    </div>\r\n                                </div>\r\n                                {profile.id == myprofile.id &&\r\n                                    <i\r\n                                        className=\"far fa-trash-alt trash-icon text-secondary\"\r\n                                        style={{ margin: '20px 20px 0 0' }}\r\n                                        onClick={e => deletePost(e, post.id)}\r\n                                    />}\r\n                            </div>\r\n                            <div className=\"post-actions\">\r\n                                <p className=\"text-secondary\">\r\n                                    <Link\r\n                                        to={`/post/${post.id}/comment`}\r\n                                        className=\"text-secondary\"\r\n                                        onClick={e => e.stopPropagation()}\r\n                                    >\r\n                                        <i class=\"far fa-comment\" />\r\n                                    </Link>{post.comments.length}\r\n                                    {post.likes.map(like => like.profile.id).includes(myprofile.id) ?\r\n                                        <i class=\"fas fa-heart\"\r\n                                            data-postid={post.id}\r\n                                            onClick={likeUnlikePost}\r\n                                        />\r\n                                        :\r\n                                        <i class=\"far fa-heart\"\r\n                                            data-postid={post.id}\r\n                                            onClick={likeUnlikePost}\r\n                                        />}\r\n                                    <p className=\"post-likes-number\"\r\n                                        onClick={e => {\r\n                                            e.stopPropagation()\r\n                                            setLikesModal({ isOpen: true, likes: post.likes })\r\n                                        }\r\n                                        }\r\n                                    >\r\n                                        {post.likes.length}\r\n                                    </p>\r\n                                </p>\r\n                            </div>\r\n                        </li>\r\n                    )\r\n                }) : <h3 style={{ marginTop: '50px' }}>{profile.first_name} não tem posts</h3>}\r\n            </div>\r\n        </>\r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function Interests(props) {\r\n    const profile = props.profile\r\n\r\n    return (\r\n        <div className=\"interests-page-container\">\r\n            <h3>Interesses públicos de {profile.first_name}</h3>\r\n            <div>\r\n                {profile && profile.interests.map(interest => {\r\n                    return (\r\n                        <>\r\n                            {interest.title &&\r\n                                <>\r\n                                    <hr />\r\n                                    <li className=\"interest-item\">\r\n                                        {interest.title[0].toUpperCase() + interest.title.slice(1)}\r\n                                        <Link to={`/interesse/${interest.title}`}>\r\n                                            <button className=\"btn-secondary\" style={{ padding: '5px' }}>Pesquisar usuários</button>\r\n                                        </Link>\r\n                                    </li>\r\n                                </>\r\n                            }\r\n                        </>\r\n                    )\r\n                })}\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport Modal from 'react-bootstrap/Modal'\r\n\r\nimport Header from '../components/header'\r\nimport Posts from './profile-components/posts'\r\nimport Interests from './profile-components/interests'\r\nimport { SERVER_URL } from '../settings'\r\nimport { csrftoken } from '../utils'\r\n\r\nexport default function MyProfile() {\r\n    const [profile, setProfile] = useState(null)\r\n    const [isEditing, setIsEditing] = useState(false)\r\n    const [currentPageIsPosts, setCurrentPageIsPosts] = useState(true)\r\n\r\n    document.title = 'Perfil / Napker'\r\n\r\n    useEffect(() => {\r\n        fetchProfile()\r\n    }, [])\r\n\r\n    const fetchProfile = () => {\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => setProfile(data))\r\n    }\r\n\r\n    const switchPage = e => {\r\n        document.querySelectorAll('.profile-page-menu-item-active').forEach(el => {\r\n            el.classList.remove('profile-page-menu-item-active')\r\n        })\r\n        e.target.classList.add('profile-page-menu-item-active')\r\n        setCurrentPageIsPosts(!currentPageIsPosts)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header page=\"Perfil\" />\r\n            {profile ? <div className=\"content\">\r\n                <Modal show={isEditing}\r\n                    onHide={() => setIsEditing(false)}\r\n                    size=\"lg\">\r\n                    <Modal.Header closeButton>\r\n                        <Modal.Title>Editar perfil</Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <form action={`${SERVER_URL}/update-profile`} id=\"update-profile-form\" method=\"POST\">\r\n                            <input type=\"hidden\" name=\"csrfmiddlewaretoken\" value={csrftoken} />\r\n                            <div className=\"d-flex flex-column justify-content-center align-items-center\" style={{ padding: '25px' }}>\r\n                                <img src={`${SERVER_URL}${profile.photo}`}\r\n                                    className=\"profile-img-big\"\r\n                                    style={{ marginBottom: '25px' }}\r\n                                />\r\n                                <input type=\"file\" accept=\"image/png, image/jpg\" name=\"profile-photo\" onChange={e => console.log(e.target.files)} />\r\n                            </div>\r\n                            <div>\r\n                                <label htmlFor=\"first-name\" className=\"profile-label\">Nome:</label>\r\n                                <input className=\"form-control\" type=\"text\" name=\"first-name\" id=\"first-name\" placeholder={profile.first_name} />\r\n                            </div>\r\n                            <div>\r\n                                <label htmlFor=\"last-name\" className=\"profile-label\">Sobrenome:</label>\r\n                                <input className=\"form-control\" type=\"text\" name=\"last-name\" id=\"last-name\" placeholder={profile.last_name} />\r\n                            </div>\r\n                            <div>\r\n                                <label htmlFor=\"username\" className=\"profile-label\">Nome de usuário:</label>\r\n                                <input className=\"form-control\" type=\"text\" name=\"username\" id=\"username\" placeholder={profile.user.username} />\r\n                                <span id=\"username-taken\">Nome de usuário já existe</span>\r\n                            </div>\r\n                            <div>\r\n                                <label htmlFor=\"email\" className=\"profile-label\">Email:</label>\r\n                                <input className=\"form-control\" type=\"email\" name=\"email\" id=\"email\" placeholder={profile.email} />\r\n                            </div>\r\n                            <div>\r\n                                <label htmlFor=\"gender\" className=\"profile-label\">Gênero:</label>\r\n                                <select className=\"form-control\" name=\"gender\" id=\"gender\" placeholder={profile.gender}>\r\n                                    <option value=\"male\">Masculino</option>\r\n                                    <option value=\"female\">Feminino</option>\r\n                                    <option value=\"other\">Outro</option>\r\n                                </select>\r\n                            </div>\r\n                            <div>\r\n                                <label htmlFor=\"birth-date\" className=\"profile-label\">Data de nascimento:</label>\r\n                                <input className=\"form-control\" type=\"date\" name=\"birth-date\" id=\"birth-date\" defaultValue={profile.birth_date} />\r\n                            </div>\r\n                            <div>\r\n                                <label htmlFor=\"bio\" className=\"profile-label\">Bio:</label>\r\n                                <input className=\"form-control\" type=\"email\" name=\"bio\" id=\"bio\" placeholder={profile.bio} />\r\n                            </div>\r\n                        </form>\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <button className=\"btn btn-grey\" onClick={() => setIsEditing(false)}>Fechar</button>\r\n                        <button className=\"btn btn-primary\" onClick={() => document.querySelector('form#update-profile-form').submit()}>Salvar</button>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n                <div className=\"profile-data-container\">\r\n                    <div className=\"d-flex flex-column align-items-start\">\r\n                        <p style={{ padding: '15px' }}>\r\n                            <img src={`${SERVER_URL}${profile.photo}`}\r\n                                className=\"profile-img-big\"\r\n                                style={{ marginBottom: '25px' }}\r\n                            />\r\n                        </p>\r\n                        <p style={{ marginBottom: 0 }}><strong>{profile.first_name} {profile.last_name}</strong></p>\r\n                        <p className=\"text-secondary\" style={{ marginTop: 0 }}>@{profile.user.username}</p>\r\n                        <p>{profile.bio}</p>\r\n                        <p className=\"text-secondary\">\r\n                            <i className=\"far fa-calendar-alt\"></i> Entrou em {profile.created.split('-').reverse().join('/')}\r\n                        </p>\r\n                        <p>\r\n                            <Link to={`/user/${profile.slug}/amigos`} style={{ color: '#000' }}>\r\n                                <strong>{profile.friends.length}</strong> {profile.friends.length === 1 ? 'amigo' : 'amigos'}\r\n                            </Link>\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"d-flex flex-column\">\r\n                        <button\r\n                            className=\"btn btn-secondary\"\r\n                            type=\"button\"\r\n                            onClick={() => setIsEditing(true)}\r\n                            style={{ marginBottom:'10px' }}\r\n                        >Editar perfil</button>\r\n                        <button className=\"btn btn-secondary\">Editar interesses</button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"profile-page-menu\">\r\n                    <div className=\"profile-page-menu-item profile-page-menu-item-active\" onClick={switchPage}>\r\n                        Posts ({profile.posts.length})\r\n                    </div>\r\n                    <div className=\"profile-page-menu-item\" onClick={switchPage}>\r\n                        Interesses ({profile.interests.length})\r\n                    </div>\r\n                </div>\r\n                {currentPageIsPosts ?\r\n                    <Posts profile={profile} fetchProfile={fetchProfile} /> :\r\n                    <Interests profile={profile} />\r\n                }\r\n            </div > : ''}\r\n        </>\r\n    )\r\n}","import React from 'react'\r\nimport Header from '../components/header'\r\n\r\nexport default function Settings() {\r\n\r\n    document.title = 'Configurações / Napker'\r\n\r\n    return (\r\n        <>\r\n            <Header page=\"Configurações\" />\r\n            <div className=\"content\">\r\n                Em desenvolvimento...\r\n            </div>\r\n        </>\r\n    )\r\n}","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport Header from '../../components/header'\r\nimport Posts from '../profile-components/posts'\r\nimport Interests from '../profile-components/interests'\r\nimport { SERVER_URL } from '../../settings'\r\nimport { csrftoken } from '../../utils'\r\n\r\nclass Profile extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            profile: null,\r\n            relationshipButtonLabel: '',\r\n            currentPageIsPosts: true,\r\n        }\r\n        this.slug = this.props.match.params.slug\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.fetchProfile()\r\n    }\r\n\r\n    componentDidMount() {\r\n        fetch(`${SERVER_URL}/profile-api/relationship/${this.slug}`)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                let label\r\n                switch (data.relationship) {\r\n                    case 'friends':\r\n                        label = 'Amigos'\r\n                        break\r\n                    case 'invite-sent':\r\n                        label = 'Solicitado'\r\n                        break\r\n                    case 'invite-received':\r\n                        label = 'Aceitar'\r\n                        break\r\n                    case 'none':\r\n                        label = 'Solicitar'\r\n                }\r\n                this.setState({\r\n                    relationshipButtonLabel: label\r\n                })\r\n            })\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        let btn = document.querySelector('#profile-page-relationship-btn')\r\n        if (btn) {\r\n            switch (btn.innerHTML) {\r\n                case 'Amigos':\r\n                    btn.classList.add('btn-primary')\r\n                    btn.onmouseenter = () => {\r\n                        if (btn.innerHTML === 'Amigos') btn.innerHTML = 'Remover'\r\n                    }\r\n                    btn.onmouseout = () => {\r\n                        if (btn.innerHTML === 'Remover') btn.innerHTML = 'Amigos'\r\n                    }\r\n                    btn.classList.add('friend-btn')\r\n                    btn.classList.remove('d-none')\r\n                    break\r\n                case 'Solicitado':\r\n                    btn.classList.add('btn-primary')\r\n                    btn.classList.remove('d-none')\r\n                    break\r\n                case 'Aceitar':\r\n                    btn.classList.add('btn-primary')\r\n                    btn.classList.remove('d-none')\r\n                    break\r\n                case 'Solicitar':\r\n                    btn.classList.add('btn-secondary')\r\n                    btn.classList.remove('d-none')\r\n            }\r\n        }\r\n    }\r\n\r\n    fetchProfile = () => {\r\n        fetch(`${SERVER_URL}/profile-api/user/${this.slug}`)\r\n            .then(response => response.json())\r\n            .then(data => this.setState({\r\n                profile: data\r\n            }))\r\n    }\r\n\r\n    sendFriendRequest = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/send-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(pk)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n    }\r\n\r\n    cancelFriendRequest = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/cancel-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(pk)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n    }\r\n\r\n    removeFromFriends = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/remove-from-friends`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify(pk)\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => console.log(data))\r\n    }\r\n\r\n    acceptFriendRequest = pk => {\r\n        fetch(`${SERVER_URL}/profile-api/reply-friend-request`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify({\r\n                'senderid': pk,\r\n                'reply': 'accept'\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(data)\r\n                this.props.updateNotificationsNumber()\r\n            })\r\n    }\r\n\r\n    handleRelationshipUpdate = e => {\r\n        const btn = e.target\r\n        if (btn.innerHTML === 'Solicitar') {\r\n            this.sendFriendRequest(btn.dataset.pk)\r\n            btn.innerHTML = 'Solicitado'\r\n            btn.className = 'btn btn-primary'\r\n        } else if (btn.innerHTML === 'Solicitado') {\r\n            this.cancelFriendRequest(btn.dataset.pk)\r\n            btn.innerHTML = 'Solicitar'\r\n            btn.className = 'btn btn-secondary'\r\n        } else if (btn.innerHTML === 'Amigos' || btn.innerHTML === 'Remover') {\r\n            if (window.confirm(`Remover @${this.state.profile.user.username} dos amigos?`)) {\r\n                this.removeFromFriends(btn.dataset.pk)\r\n                btn.innerHTML = 'Solicitar'\r\n                btn.className = 'btn btn-secondary'\r\n            }\r\n        } else if (btn.innerHTML === 'Aceitar') {\r\n            this.acceptFriendRequest(btn.dataset.pk)\r\n            btn.innerHTML = 'Amigos'\r\n            btn.className = 'btn btn-primary'\r\n        }\r\n    }\r\n\r\n    switchPage = e => {\r\n        document.querySelectorAll('.profile-page-menu-item-active').forEach(el => {\r\n            el.classList.remove('profile-page-menu-item-active')\r\n        })\r\n        e.target.classList.add('profile-page-menu-item-active')\r\n        this.setState({\r\n            currentPageIsPosts: !this.state.currentPageIsPosts\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <Header page={this.state.profile ? `${this.state.profile.first_name} ${this.state.profile.last_name}` : 'Perfil'}\r\n                    backArrow={true}\r\n                />\r\n                {!this.state.profile ? <></> :\r\n                    <div className=\"content\">\r\n                        <div className=\"d-flex justify-content-between align-items-center profile-data-container\">\r\n                            <div className=\"d-flex flex-column align-items-start\">\r\n                                <p style={{ padding: '15px' }}>\r\n                                    <img src={`${SERVER_URL}${this.state.profile.photo}`}\r\n                                        className=\"profile-img-big\"\r\n                                        style={{ marginBottom: '25px' }}\r\n                                    />\r\n                                </p>\r\n                                <p style={{ marginBottom: 0 }}><strong>{this.state.profile.first_name} {this.state.profile.last_name}</strong></p>\r\n                                <p className=\"text-secondary\" style={{ marginTop: 0 }}>@{this.state.profile.user.username}</p>\r\n                                <p>{this.state.profile.bio}</p>\r\n                                <p className=\"text-secondary\">\r\n                                    <i className=\"far fa-calendar-alt\"></i> Entrou em {this.state.profile.created.split('-').reverse().join('/')}\r\n                                </p>\r\n                                <p>\r\n                                    <Link to={`/user/${this.state.profile.slug}/amigos`} style={{ color: '#000' }}>\r\n                                        <strong>{this.state.profile.friends.length}</strong> {this.state.profile.friends.length === 1 ? 'amigo' : 'amigos'}\r\n                                    </Link>\r\n                                </p>\r\n                            </div>\r\n                            <div>\r\n                                <button className=\"btn d-none\"\r\n                                    id=\"profile-page-relationship-btn\"\r\n                                    data-pk={this.state.profile.id}\r\n                                    onClick={this.handleRelationshipUpdate}\r\n                                >{this.state.relationshipButtonLabel}</button>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"profile-page-menu\">\r\n                            <div className=\"profile-page-menu-item profile-page-menu-item-active\" onClick={this.switchPage}>\r\n                                Posts ({this.state.profile.posts.length})\r\n                            </div>\r\n                            <div className=\"profile-page-menu-item\" onClick={this.switchPage}>\r\n                                Interesses ({this.state.profile.interests.length})\r\n                            </div>\r\n                        </div>\r\n                        {this.state.currentPageIsPosts ?\r\n                            <Posts profile={this.state.profile} fetchProfile={this.fetchProfile} /> :\r\n                            <Interests profile={this.state.profile} />\r\n                        }\r\n                    </div>\r\n                }\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Profile","import React, { useEffect, useState } from 'react'\r\nimport { Link, useParams } from 'react-router-dom'\r\n\r\nimport Header from '../../components/header'\r\nimport { SERVER_URL } from '../../settings'\r\n\r\nexport default function Friends() {\r\n    const [friends, setFriends] = useState([])\r\n    const [profile, setProfile] = useState(null)\r\n    const { slug } = useParams()\r\n\r\n    useEffect(() => {\r\n        fetch(`${SERVER_URL}/profile-api/user/${slug}`)\r\n            .then(response => response.json())\r\n            .then(data => setProfile(data))\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (profile) {\r\n            fetch(`${SERVER_URL}/profile-api/get-friends-profiles/${profile.slug}`)\r\n                .then(response => response.json())\r\n                .then(data => setFriends(data))\r\n        }\r\n    }, [profile])\r\n\r\n    return (\r\n        <>\r\n            <Header page={profile ? `${profile.first_name} ${profile.last_name} / Amigos` : 'Perfil / Amigos'}\r\n                backArrow={true}\r\n            />\r\n            <div className=\"content\">\r\n                <div className=\"lidt-group\">\r\n                    {friends && friends.map(friend => {\r\n                        return (\r\n                            <Link to={`/user/${friend.slug}`} style={{ color: '#000', textDecoration: 'none' }}>\r\n                                <li className=\"list-group-item profile-row filtered-profile\" key={friend.id}>\r\n                                    <div className=\"d-flex justify-content-between\">\r\n                                        <div className=\"profile-col\">\r\n                                            <img src={`${SERVER_URL}${friend.photo}`}\r\n                                                className=\"profile-img-med\"\r\n                                                style={{ marginRight: '10px' }}\r\n                                            />\r\n                                            <div className=\"main-profile-data\">\r\n                                                <strong>{friend.first_name} {friend.last_name}</strong>\r\n                                                <p className=\"text-secondary\">@{friend.user.username}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"profile-col\">\r\n                                            {friend.bio}\r\n                                        </div>\r\n                                        <div className=\"profile-col\">\r\n\r\n                                        </div>\r\n                                    </div>\r\n                                </li>\r\n                            </Link>\r\n                        )\r\n                    })}\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { Link, useParams } from 'react-router-dom'\r\n\r\nimport Header from '../../components/header'\r\nimport { SERVER_URL } from '../../settings'\r\nimport { csrftoken } from '../../utils'\r\n\r\nexport default function InterestProfiles() {\r\n    const [profiles, setProfiles] = useState([])\r\n    const { interest } = useParams()\r\n\r\n    document.title = `${interest} / Napker`\r\n\r\n    useEffect(() => {\r\n        fetch(`${SERVER_URL}/profile-api/interest-profile-list/${interest}`)\r\n            .then(response => response.json())\r\n            .then(data => setProfiles(data))\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            <Header\r\n                page={`Interesse / ${interest[0].toUpperCase() + interest.slice(1)}`}\r\n                backArrow={true}\r\n            />\r\n            <div className=\"content\">\r\n                <div className=\"list-group\">\r\n                    <h3>Perfis interessados em \"{interest}\"</h3>\r\n                    {profiles && profiles.map(profile => {\r\n                        return (\r\n                            <li\r\n                                className=\"list-group-item profile-row\"\r\n                                key={profile.id}\r\n                                onClick={() => window.location.href = `/user/${profile.slug}`}\r\n                            >\r\n                                <div className=\"d-flex justify-content-between\">\r\n                                    <div className=\"profile-col\">\r\n                                        <img src={`${SERVER_URL}${profile.photo}`}\r\n                                            className=\"profile-img-med\"\r\n                                            style={{ marginRight: '10px' }}\r\n                                        />\r\n                                        <div className=\"main-profile-data\">\r\n                                            <strong>{profile.first_name} {profile.last_name}</strong>\r\n                                            <p className=\"text-secondary\">@{profile.user.username}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"profile-col\">\r\n                                        {profile.bio}\r\n                                    </div>\r\n                                    <div className=\"profile-col\"></div>\r\n                                </div>\r\n                            </li>\r\n                        )\r\n                    })}\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}","import React from 'react'\r\nimport Modal from 'react-bootstrap/Modal'\r\n\r\nexport default function CommentModal(props) {\r\n    const comment = () => {\r\n        props.commentPost(document.querySelector('#comment-modal-input').value)\r\n        props.hideModal()\r\n    }\r\n    return (\r\n        <Modal show={props.isOpen}\r\n            onHide={props.hideModal}\r\n            size=\"lg\">\r\n            <Modal.Header closeButton>\r\n                <Modal.Title><strong>Comentar</strong></Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <input\r\n                    className=\"form-control\"\r\n                    id=\"comment-modal-input\"\r\n                    placeholder=\"Comente alguma coisa\"\r\n                    style={{ marginRight: '5px' }}\r\n                />\r\n                <button\r\n                    className=\"btn btn-primary\"\r\n                    onClick={comment}\r\n                >Enviar</button>\r\n            </Modal.Body>\r\n        </Modal>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { Link, useParams } from 'react-router-dom'\r\n\r\nimport CommentModal from '../../components/commentmodal'\r\nimport LikesModal from '../../components/likesmodal'\r\nimport Header from '../../components/header'\r\nimport { SERVER_URL } from '../../settings'\r\nimport { csrftoken } from '../../utils'\r\n\r\nexport default function Post(props) {\r\n    const [post, setPost] = useState(null)\r\n    const [profile, setProfile] = useState(null)\r\n    const [commentModalIsOpen, setCommentModalIsOpen] = useState(props.commentModalIsOpen)\r\n    const [postLikesModal, setPostLikesModal] = useState({ isOpen: false, likes: null })\r\n    const [commentLikesModal, setCommentLikesModal] = useState({ isOpen: false, likes: null })\r\n\r\n    const { id } = useParams()\r\n\r\n    useEffect(() => {\r\n        fetchPost()\r\n        fetch(`${SERVER_URL}/profile-api/myprofile`)\r\n            .then(response => response.json())\r\n            .then(data => setProfile(data))\r\n    }, [])\r\n\r\n    const fetchPost = () => {\r\n        fetch(`${SERVER_URL}/post-api/post/${id}`)\r\n            .then(response => response.json())\r\n            .then(data => setPost(data))\r\n    }\r\n\r\n    const likeUnlikePost = e => {\r\n        const likeBtn = e.target\r\n        if (likeBtn.classList.contains('fas')) {\r\n            likeBtn.classList.remove('fas') //border heart\r\n            likeBtn.classList.add('far')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/unlike-post/${likeBtn.dataset.postid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    fetchPost()\r\n                })\r\n        } else {\r\n            likeBtn.classList.remove('far') //border heart\r\n            likeBtn.classList.add('fas')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/like-post/${likeBtn.dataset.postid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    fetchPost()\r\n                })\r\n        }\r\n    }\r\n\r\n    const likeUnlikeComment = e => {\r\n        const likeBtn = e.target\r\n        if (likeBtn.classList.contains('fas')) {\r\n            likeBtn.classList.remove('fas') //border heart\r\n            likeBtn.classList.add('far')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/unlike-comment/${likeBtn.dataset.commentid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    fetchPost()\r\n                })\r\n        } else {\r\n            likeBtn.classList.remove('far') //border heart\r\n            likeBtn.classList.add('fas')  //filled heart\r\n            fetch(`${SERVER_URL}/post-api/like-comment/${likeBtn.dataset.commentid}`)\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    fetchPost()\r\n                })\r\n        }\r\n    }\r\n\r\n    const commentPost = comment => {\r\n        fetch(`${SERVER_URL}/post-api/comment-post/${id}`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-type': 'application/json',\r\n                'X-CSRFToken': csrftoken,\r\n            },\r\n            body: JSON.stringify({ comment: comment })\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(data)\r\n                fetchPost()\r\n            })\r\n    }\r\n\r\n    const deleteComment = (e, commentId) => {\r\n        e.stopPropagation()\r\n        const el = document.querySelector(`#post-comment-${commentId}`)\r\n        if (window.confirm('Tem certeza que deseja apagar o comentário?\\nEssa ação é irreversível.')) {\r\n            el.style.animationPlayState = 'running'\r\n            el.addEventListener('animationend', () => el.remove())\r\n            fetch(`${SERVER_URL}/post-api/delete-comment/${commentId}`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-type': 'application/json',\r\n                    'X-CSRFToken': csrftoken,\r\n                }\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    fetchPost()\r\n                })\r\n        }\r\n    }\r\n\r\n    const hideCommentModal = () => {\r\n        setCommentModalIsOpen(false)\r\n    }\r\n\r\n    const hidePostLikesModal = () => {\r\n        setPostLikesModal({\r\n            isOpen: false,\r\n            likes: null\r\n        })\r\n    }\r\n\r\n    const hideCommentLikesModal = () => {\r\n        setCommentLikesModal({\r\n            isOpen: false,\r\n            likes: null\r\n        })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <CommentModal\r\n                isOpen={commentModalIsOpen}\r\n                hideModal={hideCommentModal}\r\n                commentPost={commentPost}\r\n            />\r\n            <LikesModal\r\n                isOpen={postLikesModal.isOpen}\r\n                likes={postLikesModal.likes}\r\n                hideModal={hidePostLikesModal}\r\n            />\r\n            <LikesModal\r\n                isOpen={commentLikesModal.isOpen}\r\n                likes={commentLikesModal.likes}\r\n                hideModal={hideCommentLikesModal}\r\n            />\r\n            <Header page=\"Post\" backArrow={true} />\r\n            <div className=\"content\">\r\n                {post && profile &&\r\n                    <>\r\n                        <div className=\"post-container\">\r\n                            <div className=\"post-row\">\r\n                                <div className=\"post-col\">\r\n                                    <Link to={`/user/${post.author.slug}`}>\r\n                                        <img src={`${SERVER_URL}${post.author.photo}`}\r\n                                            className=\"profile-img-med\"\r\n                                        />\r\n                                    </Link>\r\n                                </div>\r\n                                <div className=\"post-col\">\r\n                                    <Link to={`/user/${post.author.slug}`} style={{ color: '#000' }}>\r\n                                        <div style={{ height: '30px' }}>\r\n                                            <strong>{post.author.first_name} {post.author.last_name} </strong>\r\n                                            <p className=\"text-secondary d-inline-block\">\r\n                                                @{post.author.user.username} • {post.created.split('-').reverse().join('/')}\r\n                                            </p>\r\n                                        </div>\r\n                                    </Link>\r\n                                    <div style={{ textAlign: 'start', fontSize: 'larger' }}>\r\n                                        {post.content}\r\n                                    </div>\r\n                                    {post.image &&\r\n                                        <img src={`${SERVER_URL}${post.image}`} className=\"post-img\" />\r\n                                    }\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"post-actions\">\r\n                                <p className=\"text-secondary\" style={{ fontSize: 'large' }}>\r\n                                    <Link to={`/post/${id}/comment`} className=\"text-secondary\">\r\n                                        <i\r\n                                            class=\"far fa-comment\"\r\n                                            onClick={() => setCommentModalIsOpen(true)}\r\n                                        />\r\n                                    </Link>{post.comments.length}\r\n                                    {post.likes.map(like => like.profile.id).includes(profile.id) ?\r\n                                        <i class=\"fas fa-heart\"\r\n                                            data-postid={post.id}\r\n                                            onClick={likeUnlikePost}\r\n                                        />\r\n                                        :\r\n                                        <i class=\"far fa-heart\"\r\n                                            data-postid={post.id}\r\n                                            onClick={likeUnlikePost}\r\n                                        />}\r\n                                    <p className=\"post-likes-number\"\r\n                                        onClick={() => setPostLikesModal({ isOpen: true, likes: post.likes })}\r\n                                    >\r\n                                        {post.likes.length}\r\n                                    </p>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"comment-list\">\r\n                            {post.comments.map(comment => {\r\n                                return (\r\n                                    <li\r\n                                        className=\"post-container\"\r\n                                        id={`post-comment-${comment.id}`}\r\n                                        key={comment.id}\r\n                                    >\r\n                                        <div className=\"d-flex justify-content-between\">\r\n                                            <div className=\"post-row\">\r\n                                                <div className=\"post-col\">\r\n                                                    <Link to={`/user/${comment.author.slug}`}>\r\n                                                        <img src={`${SERVER_URL}${comment.author.photo}`}\r\n                                                            className=\"profile-img-med\"\r\n                                                        />\r\n                                                    </Link>\r\n                                                </div>\r\n                                                <div className=\"post-col\">\r\n                                                    <Link to={`/user/${comment.author.slug}`} style={{ color: '#000' }}>\r\n                                                        <div style={{ height: '30px' }}>\r\n                                                            <strong>{comment.author.first_name} {comment.author.last_name} </strong>\r\n                                                            <p className=\"text-secondary d-inline-block\">\r\n                                                                @{comment.author.user.username} • {comment.created.split('-').reverse().join('/')}\r\n                                                            </p>\r\n                                                        </div>\r\n                                                    </Link>\r\n                                                    <div style={{ textAlign: 'start' }}>\r\n                                                        {comment.content}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            {comment.author.id == profile.id &&\r\n                                                <i\r\n                                                    className=\"far fa-trash-alt trash-icon text-secondary\"\r\n                                                    style={{ margin: '20px 20px 0 0' }}\r\n                                                    onClick={e => deleteComment(e, comment.id)}\r\n                                                />}\r\n                                        </div>\r\n                                        <div className=\"post-actions\">\r\n                                            <p className=\"text-secondary\">\r\n                                                {comment.likes.map(like => like.profile.id).includes(profile.id) ?\r\n                                                    <i class=\"fas fa-heart\"\r\n                                                        data-commentid={comment.id}\r\n                                                        onClick={likeUnlikeComment}\r\n                                                    />\r\n                                                    :\r\n                                                    <i class=\"far fa-heart\"\r\n                                                        data-commentid={comment.id}\r\n                                                        onClick={likeUnlikeComment}\r\n                                                    />}\r\n                                                <p\r\n                                                    className=\"post-likes-number\"\r\n                                                    onClick={() => setPostLikesModal({ isOpen: true, likes: comment.likes })}\r\n                                                >\r\n                                                    {comment.likes.length}\r\n                                                </p>\r\n                                            </p>\r\n                                        </div>\r\n                                    </li>\r\n                                )\r\n                            })}\r\n                        </div>\r\n                    </>\r\n                }\r\n            </div>\r\n        </>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\r\n\r\nimport Sidebar from './components/sidebar'\r\nimport Home from './pages/home'\r\nimport Notifications from './pages/notifications'\r\nimport Messages from './pages/messages/messages'\r\nimport MyProfile from './pages/myprofile'\r\nimport Settings from './pages/settings'\r\nimport Profile from './pages/home-components/profile'\r\nimport ProfileFriends from './pages/profile-components/friends'\r\nimport InterestProfiles from './pages/profile-components/interestprofiles'\r\nimport Post from './pages/home-components/post'\r\n\r\nimport { SERVER_URL } from './settings'\r\n\r\nexport default function App() {\r\n    const [invitesReceivedNumber, setInvitesReceived] = useState(0)\r\n    const [unvisualizedLikesNumber, setUnvisulaizedLikes] = useState(0)\r\n    const [unvisualizedCommentsNumber, setUnvisulaizedComments] = useState(0)\r\n    let notificationsNumber = invitesReceivedNumber + unvisualizedLikesNumber + unvisualizedCommentsNumber\r\n    const [unreadMessagesNumber, setUnreadMessagesNumber] = useState(0)\r\n\r\n    useEffect(() => {\r\n        updateNotificationsNumber()\r\n        updateUnreadMessagesNumber()\r\n    }, [])\r\n\r\n    const updateNotificationsNumber = () => {\r\n        fetch(`${SERVER_URL}/profile-api/myinvites`)\r\n            .then(response => response.json())\r\n            .then(data => setInvitesReceived(data.length))\r\n        fetch(`${SERVER_URL}/post-api/unvisualized-post-likes`)\r\n            .then(response => response.json())\r\n            .then(data => setUnvisulaizedLikes(data.length))\r\n        fetch(`${SERVER_URL}/post-api/unvisualized-post-comments`)\r\n            .then(response => response.json())\r\n            .then(data => setUnvisulaizedComments(data.length))\r\n    }\r\n\r\n    const updateUnreadMessagesNumber = () => {\r\n        fetch(`${SERVER_URL}/chat-api/all-unread-messages-number`)\r\n            .then(response => response.json())\r\n            .then(data => setUnreadMessagesNumber(data['unread_messages_number']))\r\n    }\r\n\r\n    return (\r\n        <Router>\r\n            <Sidebar notificationsNumber={notificationsNumber} unreadMessagesNumber={unreadMessagesNumber} />\r\n            <div className=\"main-content\">\r\n                <Switch>\r\n                    <Route path=\"/notificações\" render={props => (\r\n                        <Notifications {...props} updateNotificationsNumber={updateNotificationsNumber} />\r\n                    )} />\r\n                    <Route path=\"/mensagens\" exact component={Messages} />\r\n                    <Route path=\"/mensagens/:slug\" render={props => (\r\n                        <Messages {...props} updateUnreadMessagesNumber={updateUnreadMessagesNumber} />\r\n                    )} />\r\n                    <Route path=\"/perfil\" component={MyProfile} />\r\n                    <Route path=\"/configurações\" component={Settings} />\r\n                    <Route path=\"/user/:slug\" exact render={props => (\r\n                        <Profile {...props} updateNotificationsNumber={updateNotificationsNumber} />\r\n                    )} />\r\n                    <Route path=\"/user/:slug/amigos\" component={ProfileFriends} />\r\n                    <Route path=\"/post/:id\" exact component={Post} />\r\n                    <Route path=\"/post/:id/comment\" render={props => (\r\n                        <Post {...props} commentModalIsOpen={true} />\r\n                    )} />\r\n                    <Route path=\"/interesse/:interest\" component={InterestProfiles} />\r\n                    <Route path=\"/\" component={Home} />\r\n                </Switch>\r\n            </div>\r\n        </Router>\r\n    )\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './assets/style.css'\nimport './assets/profile.css'\nimport './assets/chat.css'\n\nimport App from './App'\n\nReactDOM.render(<App />, document.querySelector('#root'))\n"],"sourceRoot":""}